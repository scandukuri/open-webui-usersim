{"version":3,"file":"CrcbjeIM.js","sources":["../../../../../../src/lib/components/channel/MessageInput/InputMenu.svelte","../../../../../../src/lib/components/channel/MessageInput/MentionList.svelte","../../../../../../src/lib/components/channel/MessageInput.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, onMount, tick } from 'svelte';\n\n\timport { config, user, tools as _tools, mobile } from '$lib/stores';\n\timport { getTools } from '$lib/apis/tools';\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport DocumentArrowUpSolid from '$lib/components/icons/DocumentArrowUpSolid.svelte';\n\timport Switch from '$lib/components/common/Switch.svelte';\n\timport GlobeAltSolid from '$lib/components/icons/GlobeAltSolid.svelte';\n\timport WrenchSolid from '$lib/components/icons/WrenchSolid.svelte';\n\timport CameraSolid from '$lib/components/icons/CameraSolid.svelte';\n\timport Camera from '$lib/components/icons/Camera.svelte';\n\timport Clip from '$lib/components/icons/Clip.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let screenCaptureHandler: Function;\n\texport let uploadFilesHandler: Function;\n\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n\n\t$: if (show) {\n\t\tinit();\n\t}\n\n\tconst init = async () => {};\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n>\n\t<Tooltip content={$i18n.t('More')}>\n\t\t<slot />\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[200px] rounded-2xl px-1 py-1  border border-gray-100  dark:border-gray-800 z-999 bg-white dark:bg-gray-850 dark:text-white shadow-lg transition\"\n\t\t\tsideOffset={4}\n\t\t\talignOffset={-6}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tuploadFilesHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Clip />\n\t\t\t\t<div class=\"line-clamp-1\">{$i18n.t('Upload Files')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50  rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tscreenCaptureHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Camera />\n\t\t\t\t<div class=\" line-clamp-1\">{$i18n.t('Capture')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport { getContext, onDestroy, onMount } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { channels, models, user } from '$lib/stores';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Hashtag from '$lib/components/icons/Hashtag.svelte';\n\timport Lock from '$lib/components/icons/Lock.svelte';\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\timport { searchUsers } from '$lib/apis/users';\n\n\texport let query = '';\n\n\texport let command: (payload: { id: string; label: string }) => void;\n\texport let selectedIndex = 0;\n\n\texport let label = '';\n\texport let triggerChar = '@';\n\n\texport let modelSuggestions = false;\n\texport let userSuggestions = false;\n\texport let channelSuggestions = false;\n\n\tlet _models = [];\n\tlet _users = [];\n\tlet _channels = [];\n\n\t$: filteredItems = [..._users, ..._models, ..._channels].filter(\n\t\t(u) =>\n\t\t\tu.label.toLowerCase().includes(query.toLowerCase()) ||\n\t\t\tu.id.toLowerCase().includes(query.toLowerCase())\n\t);\n\n\tconst getUserList = async () => {\n\t\tconst res = await searchUsers(localStorage.token, query).catch((error) => {\n\t\t\tconsole.error('Error searching users:', error);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\t_users = [...res.users.map((u) => ({ type: 'user', id: u.id, label: u.name }))].sort((a, b) =>\n\t\t\t\ta.label.localeCompare(b.label)\n\t\t\t);\n\t\t}\n\t};\n\n\t$: if (query !== null && userSuggestions) {\n\t\tgetUserList();\n\t}\n\n\tconst select = (index: number) => {\n\t\tconst item = filteredItems[index];\n\t\tif (!item) return;\n\n\t\t// Add the \"U:\", \"M:\" or \"C:\" prefix to the id\n\t\t// and also append the label after a pipe |\n\t\t// so that the mention renderer can show the label\n\t\tif (item)\n\t\t\tcommand({\n\t\t\t\tid: `${item.type === 'user' ? 'U' : item.type === 'model' ? 'M' : 'C'}:${item.id}|${item.label}`,\n\t\t\t\tlabel: item.label\n\t\t\t});\n\t};\n\n\tconst onKeyDown = (event: KeyboardEvent) => {\n\t\tif (!['ArrowUp', 'ArrowDown', 'Enter', 'Tab', 'Escape'].includes(event.key)) return false;\n\n\t\tif (event.key === 'ArrowUp') {\n\t\t\tselectedIndex = Math.max(0, selectedIndex - 1);\n\t\t\tconst item = document.querySelector(`[data-selected=\"true\"]`);\n\t\t\titem?.scrollIntoView({ block: 'center', inline: 'nearest', behavior: 'instant' });\n\t\t\treturn true;\n\t\t}\n\t\tif (event.key === 'ArrowDown') {\n\t\t\tselectedIndex = Math.min(selectedIndex + 1, filteredItems.length - 1);\n\t\t\tconst item = document.querySelector(`[data-selected=\"true\"]`);\n\t\t\titem?.scrollIntoView({ block: 'center', inline: 'nearest', behavior: 'instant' });\n\t\t\treturn true;\n\t\t}\n\t\tif (event.key === 'Enter' || event.key === 'Tab') {\n\t\t\tselect(selectedIndex);\n\n\t\t\tif (event.key === 'Enter') {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tif (event.key === 'Escape') {\n\t\t\t// tell tiptap we handled it (it will close)\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t// This method will be called from the suggestion renderer\n\t// @ts-ignore\n\texport function _onKeyDown(event: KeyboardEvent) {\n\t\treturn onKeyDown(event);\n\t}\n\n\tconst keydownListener = (e) => {\n\t\t// required to prevent the default enter behavior\n\t\tif (e.key === 'Enter') {\n\t\t\te.preventDefault();\n\t\t\tselect(selectedIndex);\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\twindow.addEventListener('keydown', keydownListener);\n\t\tif (channelSuggestions) {\n\t\t\t// Add a dummy channel item\n\t\t\t_channels = [\n\t\t\t\t...$channels.map((c) => ({ type: 'channel', id: c.id, label: c.name, data: c }))\n\t\t\t];\n\t\t} else {\n\t\t\tif (userSuggestions) {\n\t\t\t\tawait getUserList();\n\t\t\t}\n\n\t\t\tif (modelSuggestions) {\n\t\t\t\t_models = [...$models.map((m) => ({ type: 'model', id: m.id, label: m.name, data: m }))];\n\t\t\t}\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\twindow.removeEventListener('keydown', keydownListener);\n\t});\n</script>\n\n{#if filteredItems.length}\n\t<div\n\t\tclass=\"mention-list text-black dark:text-white rounded-2xl shadow-lg border border-gray-200 dark:border-gray-800 flex flex-col bg-white dark:bg-gray-850 w-72 p-1\"\n\t\tid=\"suggestions-container\"\n\t>\n\t\t<div class=\"overflow-y-auto scrollbar-thin max-h-60\">\n\t\t\t{#each filteredItems as item, i}\n\t\t\t\t{#if i === 0 || item?.type !== filteredItems[i - 1]?.type}\n\t\t\t\t\t<div class=\"px-2 text-xs text-gray-500 py-1\">\n\t\t\t\t\t\t{#if item?.type === 'user'}\n\t\t\t\t\t\t\t{$i18n.t('Users')}\n\t\t\t\t\t\t{:else if item?.type === 'model'}\n\t\t\t\t\t\t\t{$i18n.t('Models')}\n\t\t\t\t\t\t{:else if item?.type === 'channel'}\n\t\t\t\t\t\t\t{$i18n.t('Channels')}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<Tooltip content={item?.id} placement=\"top-start\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\ton:click={() => select(i)}\n\t\t\t\t\t\ton:mousemove={() => {\n\t\t\t\t\t\t\tselectedIndex = i;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclass=\"flex items-center justify-between px-2.5 py-1.5 rounded-xl w-full text-left {i ===\n\t\t\t\t\t\tselectedIndex\n\t\t\t\t\t\t\t? 'bg-gray-50 dark:bg-gray-800 selected-command-option-button'\n\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\tdata-selected={i === selectedIndex}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if item.type === 'channel'}\n\t\t\t\t\t\t\t<div class=\" size-4 justify-center flex items-center mr-0.5\">\n\t\t\t\t\t\t\t\t{#if item?.data?.access_control === null}\n\t\t\t\t\t\t\t\t\t<Hashtag className=\"size-3\" strokeWidth=\"2.5\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<Lock className=\"size-[15px]\" strokeWidth=\"2\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else if item.type === 'model'}\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={item?.data?.info?.meta?.profile_image_url ??\n\t\t\t\t\t\t\t\t\t`${WEBUI_BASE_URL}/static/favicon.png`}\n\t\t\t\t\t\t\t\talt={item?.data?.name ?? item.id}\n\t\t\t\t\t\t\t\tclass=\"rounded-full size-5 items-center mr-2\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else if item.type === 'user'}\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${item.id}/profile/image`}\n\t\t\t\t\t\t\t\talt={item?.label ?? item.id}\n\t\t\t\t\t\t\t\tclass=\"rounded-full size-5 items-center mr-2\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"truncate flex-1 pr-2\">\n\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"shrink-0 text-xs text-gray-500\">\n\t\t\t\t\t\t\t{#if item.type === 'user'}\n\t\t\t\t\t\t\t\t{$i18n.t('User')}\n\t\t\t\t\t\t\t{:else if item.type === 'model'}\n\t\t\t\t\t\t\t\t{$i18n.t('Model')}\n\t\t\t\t\t\t\t{:else if item.type === 'channel'}\n\t\t\t\t\t\t\t\t{$i18n.t('Channel')}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { v4 as uuidv4 } from 'uuid';\n\n\timport { tick, getContext, onMount, onDestroy } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\timport { config, mobile, settings, socket, user } from '$lib/stores';\n\timport {\n\t\tconvertHeicToJpeg,\n\t\tcompressImage,\n\t\textractInputVariables,\n\t\tgetAge,\n\t\tgetCurrentDateTime,\n\t\tgetFormattedDate,\n\t\tgetFormattedTime,\n\t\tgetUserPosition,\n\t\tgetUserTimezone,\n\t\tgetWeekday,\n\t\textractCurlyBraceWords\n\t} from '$lib/utils';\n\n\timport { getSessionUser } from '$lib/apis/auths';\n\n\timport { uploadFile } from '$lib/apis/files';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\n\timport { getSuggestionRenderer } from '../common/RichTextInput/suggestions';\n\timport CommandSuggestionList from '../chat/MessageInput/CommandSuggestionList.svelte';\n\n\timport InputMenu from './MessageInput/InputMenu.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport RichTextInput from '../common/RichTextInput.svelte';\n\timport VoiceRecording from '../chat/MessageInput/VoiceRecording.svelte';\n\timport FileItem from '../common/FileItem.svelte';\n\timport Image from '../common/Image.svelte';\n\timport FilesOverlay from '../chat/MessageInput/FilesOverlay.svelte';\n\timport InputVariablesModal from '../chat/MessageInput/InputVariablesModal.svelte';\n\timport MentionList from './MessageInput/MentionList.svelte';\n\timport Skeleton from '../chat/Messages/Skeleton.svelte';\n\timport XMark from '../icons/XMark.svelte';\n\n\texport let placeholder = $i18n.t('Type here...');\n\n\texport let id = null;\n\texport let chatInputElement;\n\n\texport let typingUsers = [];\n\texport let inputLoading = false;\n\n\texport let onSubmit: Function = (e) => {};\n\texport let onChange: Function = (e) => {};\n\texport let onStop: Function = (e) => {};\n\n\texport let scrollEnd = true;\n\texport let scrollToBottom: Function = () => {};\n\n\texport let disabled = false;\n\texport let acceptFiles = true;\n\texport let showFormattingToolbar = true;\n\n\texport let userSuggestions = false;\n\texport let channelSuggestions = false;\n\n\texport let replyToMessage = null;\n\n\texport let typingUsersClassName = 'from-white dark:from-gray-900';\n\n\tlet loaded = false;\n\tlet draggedOver = false;\n\n\tlet recording = false;\n\tlet content = '';\n\tlet files = [];\n\n\tlet filesInputElement;\n\tlet inputFiles;\n\n\tlet showInputVariablesModal = false;\n\tlet inputVariablesModalCallback: (variableValues: Record<string, any>) => void;\n\tlet inputVariables: Record<string, any> = {};\n\tlet inputVariableValues = {};\n\n\tconst inputVariableHandler = async (text: string): Promise<string> => {\n\t\tinputVariables = extractInputVariables(text);\n\n\t\t// No variables? return the original text immediately.\n\t\tif (Object.keys(inputVariables).length === 0) {\n\t\t\treturn text;\n\t\t}\n\n\t\t// Show modal and wait for the user's input.\n\t\tshowInputVariablesModal = true;\n\t\treturn await new Promise<string>((resolve) => {\n\t\t\tinputVariablesModalCallback = (variableValues) => {\n\t\t\t\tinputVariableValues = { ...inputVariableValues, ...variableValues };\n\t\t\t\treplaceVariables(inputVariableValues);\n\t\t\t\tshowInputVariablesModal = false;\n\t\t\t\tresolve(text);\n\t\t\t};\n\t\t});\n\t};\n\n\tconst textVariableHandler = async (text: string) => {\n\t\tif (text.includes('{{CLIPBOARD}}')) {\n\t\t\tconst clipboardText = await navigator.clipboard.readText().catch((err) => {\n\t\t\t\ttoast.error($i18n.t('Failed to read clipboard contents'));\n\t\t\t\treturn '{{CLIPBOARD}}';\n\t\t\t});\n\n\t\t\tconst clipboardItems = await navigator.clipboard.read();\n\n\t\t\tlet imageUrl = null;\n\t\t\tfor (const item of clipboardItems) {\n\t\t\t\t// Check for known image types\n\t\t\t\tfor (const type of item.types) {\n\t\t\t\t\tif (type.startsWith('image/')) {\n\t\t\t\t\t\tconst blob = await item.getType(type);\n\t\t\t\t\t\timageUrl = URL.createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (imageUrl) {\n\t\t\t\tfiles = [\n\t\t\t\t\t...files,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\turl: imageUrl\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\n\t\t\ttext = text.replaceAll('{{CLIPBOARD}}', clipboardText);\n\t\t}\n\n\t\tif (text.includes('{{USER_LOCATION}}')) {\n\t\t\tlet location;\n\t\t\ttry {\n\t\t\t\tlocation = await getUserPosition();\n\t\t\t} catch (error) {\n\t\t\t\ttoast.error($i18n.t('Location access not allowed'));\n\t\t\t\tlocation = 'LOCATION_UNKNOWN';\n\t\t\t}\n\t\t\ttext = text.replaceAll('{{USER_LOCATION}}', String(location));\n\t\t}\n\n\t\tconst sessionUser = await getSessionUser(localStorage.token);\n\n\t\tif (text.includes('{{USER_NAME}}')) {\n\t\t\tconst name = sessionUser?.name || 'User';\n\t\t\ttext = text.replaceAll('{{USER_NAME}}', name);\n\t\t}\n\n\t\tif (text.includes('{{USER_BIO}}')) {\n\t\t\tconst bio = sessionUser?.bio || '';\n\n\t\t\tif (bio) {\n\t\t\t\ttext = text.replaceAll('{{USER_BIO}}', bio);\n\t\t\t}\n\t\t}\n\n\t\tif (text.includes('{{USER_GENDER}}')) {\n\t\t\tconst gender = sessionUser?.gender || '';\n\n\t\t\tif (gender) {\n\t\t\t\ttext = text.replaceAll('{{USER_GENDER}}', gender);\n\t\t\t}\n\t\t}\n\n\t\tif (text.includes('{{USER_BIRTH_DATE}}')) {\n\t\t\tconst birthDate = sessionUser?.date_of_birth || '';\n\n\t\t\tif (birthDate) {\n\t\t\t\ttext = text.replaceAll('{{USER_BIRTH_DATE}}', birthDate);\n\t\t\t}\n\t\t}\n\n\t\tif (text.includes('{{USER_AGE}}')) {\n\t\t\tconst birthDate = sessionUser?.date_of_birth || '';\n\n\t\t\tif (birthDate) {\n\t\t\t\t// calculate age using date\n\t\t\t\tconst age = getAge(birthDate);\n\t\t\t\ttext = text.replaceAll('{{USER_AGE}}', age);\n\t\t\t}\n\t\t}\n\n\t\tif (text.includes('{{USER_LANGUAGE}}')) {\n\t\t\tconst language = localStorage.getItem('locale') || 'en-US';\n\t\t\ttext = text.replaceAll('{{USER_LANGUAGE}}', language);\n\t\t}\n\n\t\tif (text.includes('{{CURRENT_DATE}}')) {\n\t\t\tconst date = getFormattedDate();\n\t\t\ttext = text.replaceAll('{{CURRENT_DATE}}', date);\n\t\t}\n\n\t\tif (text.includes('{{CURRENT_TIME}}')) {\n\t\t\tconst time = getFormattedTime();\n\t\t\ttext = text.replaceAll('{{CURRENT_TIME}}', time);\n\t\t}\n\n\t\tif (text.includes('{{CURRENT_DATETIME}}')) {\n\t\t\tconst dateTime = getCurrentDateTime();\n\t\t\ttext = text.replaceAll('{{CURRENT_DATETIME}}', dateTime);\n\t\t}\n\n\t\tif (text.includes('{{CURRENT_TIMEZONE}}')) {\n\t\t\tconst timezone = getUserTimezone();\n\t\t\ttext = text.replaceAll('{{CURRENT_TIMEZONE}}', timezone);\n\t\t}\n\n\t\tif (text.includes('{{CURRENT_WEEKDAY}}')) {\n\t\t\tconst weekday = getWeekday();\n\t\t\ttext = text.replaceAll('{{CURRENT_WEEKDAY}}', weekday);\n\t\t}\n\n\t\treturn text;\n\t};\n\n\tconst replaceVariables = (variables: Record<string, any>) => {\n\t\tconsole.log('Replacing variables:', variables);\n\n\t\tconst chatInput = document.getElementById('chat-input');\n\n\t\tif (chatInput) {\n\t\t\tchatInputElement.replaceVariables(variables);\n\t\t\tchatInputElement.focus();\n\t\t}\n\t};\n\n\texport const setText = async (text?: string, cb?: (text: string) => void) => {\n\t\tconst chatInput = document.getElementById('chat-input');\n\n\t\tif (chatInput) {\n\t\t\tif (text !== '') {\n\t\t\t\ttext = await textVariableHandler(text || '');\n\t\t\t}\n\n\t\t\tchatInputElement?.setText(text);\n\t\t\tchatInputElement?.focus();\n\n\t\t\tif (text !== '') {\n\t\t\t\ttext = await inputVariableHandler(text);\n\t\t\t}\n\n\t\t\tawait tick();\n\t\t\tif (cb) await cb(text);\n\t\t}\n\t};\n\n\tconst getCommand = () => {\n\t\tconst chatInput = document.getElementById('chat-input');\n\t\tlet word = '';\n\n\t\tif (chatInput) {\n\t\t\tword = chatInputElement?.getWordAtDocPos();\n\t\t}\n\n\t\treturn word;\n\t};\n\n\tconst replaceCommandWithText = (text) => {\n\t\tconst chatInput = document.getElementById('chat-input');\n\t\tif (!chatInput) return;\n\n\t\tchatInputElement?.replaceCommandWithText(text);\n\t};\n\n\tconst insertTextAtCursor = async (text: string) => {\n\t\tconst chatInput = document.getElementById('chat-input');\n\t\tif (!chatInput) return;\n\n\t\ttext = await textVariableHandler(text);\n\n\t\tif (command) {\n\t\t\treplaceCommandWithText(text);\n\t\t} else {\n\t\t\tchatInputElement?.insertContent(text);\n\t\t}\n\n\t\tawait tick();\n\t\ttext = await inputVariableHandler(text);\n\t\tawait tick();\n\n\t\tconst chatInputContainer = document.getElementById('chat-input-container');\n\t\tif (chatInputContainer) {\n\t\t\tchatInputContainer.scrollTop = chatInputContainer.scrollHeight;\n\t\t}\n\n\t\tawait tick();\n\t\tif (chatInput) {\n\t\t\tchatInput.focus();\n\t\t\tchatInput.dispatchEvent(new Event('input'));\n\n\t\t\tconst words = extractCurlyBraceWords(prompt);\n\n\t\t\tif (words.length > 0) {\n\t\t\t\tconst word = words.at(0);\n\t\t\t\tawait tick();\n\t\t\t} else {\n\t\t\t\tchatInput.scrollTop = chatInput.scrollHeight;\n\t\t\t}\n\t\t}\n\t};\n\n\tlet command = '';\n\n\texport let showCommands = false;\n\t$: showCommands = ['/'].includes(command?.charAt(0));\n\tlet suggestions = null;\n\n\tconst screenCaptureHandler = async () => {\n\t\ttry {\n\t\t\t// Request screen media\n\t\t\tconst mediaStream = await navigator.mediaDevices.getDisplayMedia({\n\t\t\t\tvideo: { cursor: 'never' },\n\t\t\t\taudio: false\n\t\t\t});\n\t\t\t// Once the user selects a screen, temporarily create a video element\n\t\t\tconst video = document.createElement('video');\n\t\t\tvideo.srcObject = mediaStream;\n\t\t\t// Ensure the video loads without affecting user experience or tab switching\n\t\t\tawait video.play();\n\t\t\t// Set up the canvas to match the video dimensions\n\t\t\tconst canvas = document.createElement('canvas');\n\t\t\tcanvas.width = video.videoWidth;\n\t\t\tcanvas.height = video.videoHeight;\n\t\t\t// Grab a single frame from the video stream using the canvas\n\t\t\tconst context = canvas.getContext('2d');\n\t\t\tcontext.drawImage(video, 0, 0, canvas.width, canvas.height);\n\t\t\t// Stop all video tracks (stop screen sharing) after capturing the image\n\t\t\tmediaStream.getTracks().forEach((track) => track.stop());\n\n\t\t\t// bring back focus to this current tab, so that the user can see the screen capture\n\t\t\twindow.focus();\n\n\t\t\t// Convert the canvas to a Base64 image URL\n\t\t\tconst imageUrl = canvas.toDataURL('image/png');\n\t\t\t// Add the captured image to the files array to render it\n\t\t\tfiles = [...files, { type: 'image', url: imageUrl }];\n\t\t\t// Clean memory: Clear video srcObject\n\t\t\tvideo.srcObject = null;\n\t\t} catch (error) {\n\t\t\t// Handle any errors (e.g., user cancels screen sharing)\n\t\t\tconsole.error('Error capturing screen:', error);\n\t\t}\n\t};\n\n\tconst inputFilesHandler = async (inputFiles) => {\n\t\tinputFiles.forEach(async (file) => {\n\t\t\tconsole.info('Processing file:', {\n\t\t\t\tname: file.name,\n\t\t\t\ttype: file.type,\n\t\t\t\tsize: file.size,\n\t\t\t\textension: file.name.split('.').at(-1)\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\t($config?.file?.max_size ?? null) !== null &&\n\t\t\t\tfile.size > ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t) {\n\t\t\t\tconsole.error('File exceeds max size limit:', {\n\t\t\t\t\tfileSize: file.size,\n\t\t\t\t\tmaxSize: ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t\t});\n\t\t\t\ttoast.error(\n\t\t\t\t\t$i18n.t(`File size should not exceed {{maxSize}} MB.`, {\n\t\t\t\t\t\tmaxSize: $config?.file?.max_size\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (file['type'].startsWith('image/')) {\n\t\t\t\tconst compressImageHandler = async (imageUrl, settings = {}, config = {}) => {\n\t\t\t\t\t// Quick shortcut so we donâ€™t do unnecessary work.\n\t\t\t\t\tconst settingsCompression = settings?.imageCompression ?? false;\n\t\t\t\t\tconst configWidth = config?.file?.image_compression?.width ?? null;\n\t\t\t\t\tconst configHeight = config?.file?.image_compression?.height ?? null;\n\n\t\t\t\t\t// If neither settings nor config wants compression, return original URL.\n\t\t\t\t\tif (!settingsCompression && !configWidth && !configHeight) {\n\t\t\t\t\t\treturn imageUrl;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Default to null (no compression unless set)\n\t\t\t\t\tlet width = null;\n\t\t\t\t\tlet height = null;\n\n\t\t\t\t\t// If user/settings want compression, pick their preferred size.\n\t\t\t\t\tif (settingsCompression) {\n\t\t\t\t\t\twidth = settings?.imageCompressionSize?.width ?? null;\n\t\t\t\t\t\theight = settings?.imageCompressionSize?.height ?? null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Apply config limits as an upper bound if any\n\t\t\t\t\tif (configWidth && (width === null || width > configWidth)) {\n\t\t\t\t\t\twidth = configWidth;\n\t\t\t\t\t}\n\t\t\t\t\tif (configHeight && (height === null || height > configHeight)) {\n\t\t\t\t\t\theight = configHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do the compression if required\n\t\t\t\t\tif (width || height) {\n\t\t\t\t\t\treturn await compressImage(imageUrl, width, height);\n\t\t\t\t\t}\n\t\t\t\t\treturn imageUrl;\n\t\t\t\t};\n\n\t\t\t\tlet reader = new FileReader();\n\n\t\t\t\treader.onload = async (event) => {\n\t\t\t\t\tlet imageUrl = event.target.result;\n\n\t\t\t\t\t// Compress the image if settings or config require it\n\t\t\t\t\tif ($settings?.imageCompression && $settings?.imageCompressionInChannels) {\n\t\t\t\t\t\timageUrl = await compressImageHandler(imageUrl, $settings, $config);\n\t\t\t\t\t}\n\n\t\t\t\t\tfiles = [\n\t\t\t\t\t\t...files,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\turl: `${imageUrl}`\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t};\n\n\t\t\t\treader.readAsDataURL(file['type'] === 'image/heic' ? await convertHeicToJpeg(file) : file);\n\t\t\t} else {\n\t\t\t\tuploadFileHandler(file);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst uploadFileHandler = async (file) => {\n\t\tconst tempItemId = uuidv4();\n\t\tconst fileItem = {\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: '',\n\t\t\tname: file.name,\n\t\t\tcollection_name: '',\n\t\t\tstatus: 'uploading',\n\t\t\tsize: file.size,\n\t\t\terror: '',\n\t\t\titemId: tempItemId\n\t\t};\n\n\t\tif (fileItem.size == 0) {\n\t\t\ttoast.error($i18n.t('You cannot upload an empty file.'));\n\t\t\treturn null;\n\t\t}\n\n\t\tfiles = [...files, fileItem];\n\n\t\ttry {\n\t\t\t// During the file upload, file content is automatically extracted.\n\n\t\t\t// If the file is an audio file, provide the language for STT.\n\t\t\tlet metadata = null;\n\t\t\tif (\n\t\t\t\t(file.type.startsWith('audio/') || file.type.startsWith('video/')) &&\n\t\t\t\t$settings?.audio?.stt?.language\n\t\t\t) {\n\t\t\t\tmetadata = {\n\t\t\t\t\tlanguage: $settings?.audio?.stt?.language\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file, metadata);\n\n\t\t\tif (uploadedFile) {\n\t\t\t\tconsole.info('File upload completed:', {\n\t\t\t\t\tid: uploadedFile.id,\n\t\t\t\t\tname: fileItem.name,\n\t\t\t\t\tcollection: uploadedFile?.meta?.collection_name\n\t\t\t\t});\n\n\t\t\t\tif (uploadedFile.error) {\n\t\t\t\t\tconsole.error('File upload warning:', uploadedFile.error);\n\t\t\t\t\ttoast.warning(uploadedFile.error);\n\t\t\t\t}\n\n\t\t\t\tfileItem.status = 'uploaded';\n\t\t\t\tfileItem.file = uploadedFile;\n\t\t\t\tfileItem.id = uploadedFile.id;\n\t\t\t\tfileItem.collection_name =\n\t\t\t\t\tuploadedFile?.meta?.collection_name || uploadedFile?.collection_name;\n\t\t\t\tfileItem.url = `${WEBUI_API_BASE_URL}/files/${uploadedFile.id}`;\n\n\t\t\t\tfiles = files;\n\t\t\t} else {\n\t\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(`${e}`);\n\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t}\n\t};\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tdraggedOver = false;\n\t\t}\n\t};\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being draggedOver.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdraggedOver = true;\n\t\t} else {\n\t\t\tdraggedOver = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdraggedOver = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\n\t\tif (e.dataTransfer?.files && acceptFiles) {\n\t\t\tconst inputFiles = Array.from(e.dataTransfer?.files);\n\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\tconsole.log(inputFiles);\n\t\t\t\tinputFilesHandler(inputFiles);\n\t\t\t}\n\t\t}\n\n\t\tdraggedOver = false;\n\t};\n\n\tconst submitHandler = async () => {\n\t\tif (content === '' && files.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tonSubmit({\n\t\t\tcontent,\n\t\t\tdata: {\n\t\t\t\tfiles: files\n\t\t\t}\n\t\t});\n\n\t\tcontent = '';\n\t\tfiles = [];\n\n\t\tif (chatInputElement) {\n\t\t\tchatInputElement?.setText('');\n\n\t\t\tawait tick();\n\n\t\t\tchatInputElement.focus();\n\t\t}\n\t};\n\n\t$: if (content) {\n\t\tonChange();\n\t}\n\n\tonMount(async () => {\n\t\tsuggestions = [\n\t\t\t{\n\t\t\t\tchar: '@',\n\t\t\t\trender: getSuggestionRenderer(MentionList, {\n\t\t\t\t\ti18n,\n\t\t\t\t\ttriggerChar: '@',\n\t\t\t\t\tmodelSuggestions: true,\n\t\t\t\t\tuserSuggestions\n\t\t\t\t})\n\t\t\t},\n\t\t\t...(channelSuggestions\n\t\t\t\t? [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchar: '#',\n\t\t\t\t\t\t\trender: getSuggestionRenderer(MentionList, {\n\t\t\t\t\t\t\t\ti18n,\n\t\t\t\t\t\t\t\ttriggerChar: '#',\n\t\t\t\t\t\t\t\tchannelSuggestions\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t: []),\n\t\t\t{\n\t\t\t\tchar: '/',\n\t\t\t\trender: getSuggestionRenderer(CommandSuggestionList, {\n\t\t\t\t\ti18n,\n\t\t\t\t\tonSelect: (e) => {\n\t\t\t\t\t\tconst { type, data } = e;\n\n\t\t\t\t\t\tif (type === 'model') {\n\t\t\t\t\t\t\tconsole.log('Selected model:', data);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdocument.getElementById('chat-input')?.focus();\n\t\t\t\t\t},\n\n\t\t\t\t\tinsertTextHandler: insertTextAtCursor,\n\t\t\t\t\tonUpload: (e) => {\n\t\t\t\t\t\tconst { type, data } = e;\n\n\t\t\t\t\t\tif (type === 'file') {\n\t\t\t\t\t\t\tif (files.find((f) => f.id === data.id)) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfiles = [\n\t\t\t\t\t\t\t\t...files,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t\tstatus: 'processed'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t];\n\t\tloaded = true;\n\n\t\twindow.setTimeout(() => {\n\t\t\tif (chatInputElement) {\n\t\t\t\tchatInputElement.focus();\n\t\t\t}\n\t\t}, 100);\n\n\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\tawait tick();\n\n\t\tconst dropzoneElement = document.getElementById('channel-container');\n\n\t\tdropzoneElement?.addEventListener('dragover', onDragOver);\n\t\tdropzoneElement?.addEventListener('drop', onDrop);\n\t\tdropzoneElement?.addEventListener('dragleave', onDragLeave);\n\t});\n\n\tonDestroy(() => {\n\t\twindow.removeEventListener('keydown', handleKeyDown);\n\n\t\tconst dropzoneElement = document.getElementById('channel-container');\n\n\t\tif (dropzoneElement) {\n\t\t\tdropzoneElement?.removeEventListener('dragover', onDragOver);\n\t\t\tdropzoneElement?.removeEventListener('drop', onDrop);\n\t\t\tdropzoneElement?.removeEventListener('dragleave', onDragLeave);\n\t\t}\n\t});\n</script>\n\n{#if loaded}\n\t<FilesOverlay show={draggedOver} />\n\n\t{#if acceptFiles}\n\t\t<input\n\t\t\tbind:this={filesInputElement}\n\t\t\tbind:files={inputFiles}\n\t\t\ttype=\"file\"\n\t\t\thidden\n\t\t\tmultiple\n\t\t\ton:change={async () => {\n\t\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\t\tinputFilesHandler(Array.from(inputFiles));\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t\t\t}\n\n\t\t\t\tfilesInputElement.value = '';\n\t\t\t}}\n\t\t/>\n\t{/if}\n\n\t<InputVariablesModal\n\t\tbind:show={showInputVariablesModal}\n\t\tvariables={inputVariables}\n\t\tonSave={inputVariablesModalCallback}\n\t/>\n\n\t<div class=\"bg-transparent\">\n\t\t<div class=\"max-w-full mx-auto inset-x-0 relative\">\n\t\t\t<div\n\t\t\t\tclass=\"absolute top-0 left-0 right-0 mx-auto inset-x-0 bg-transparent flex justify-center\"\n\t\t\t>\n\t\t\t\t<div class=\"flex flex-col px-3 w-full\">\n\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t{#if scrollEnd === false}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\" bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tscrollEnd = true;\n\t\t\t\t\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z\"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if typingUsers.length > 0}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" -mt-7 pb-2.5 bg-gradient-to-t to-transparent {typingUsersClassName} pointer-events-none select-none\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" text-xs px-1 mt-1.5 flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t<Skeleton size=\"xs\" />\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\" font-normal text-black dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t{typingUsers.map((user) => user.name).join(', ')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{$i18n.t('is typing...')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"{disabled ? 'opacity-50 pointer-events-none cursor-not-allowed' : ''} relative z-20\"\n\t\t\t>\n\t\t\t\t{#if recording}\n\t\t\t\t\t<VoiceRecording\n\t\t\t\t\t\tbind:recording\n\t\t\t\t\t\tonCancel={async () => {\n\t\t\t\t\t\t\trecording = false;\n\n\t\t\t\t\t\t\tawait tick();\n\n\t\t\t\t\t\t\tif (chatInputElement) {\n\t\t\t\t\t\t\t\tchatInputElement.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonConfirm={async (data) => {\n\t\t\t\t\t\t\tconst { text, filename } = data;\n\t\t\t\t\t\t\trecording = false;\n\n\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\tinsertTextAtCursor(text);\n\n\t\t\t\t\t\t\tawait tick();\n\n\t\t\t\t\t\t\tif (chatInputElement) {\n\t\t\t\t\t\t\t\tchatInputElement.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else}\n\t\t\t\t\t<form\n\t\t\t\t\t\tclass=\"w-full flex gap-1.5\"\n\t\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tid=\"message-input-container\"\n\t\t\t\t\t\t\tclass=\"flex-1 flex flex-col relative w-full shadow-lg rounded-3xl border border-gray-50 dark:border-gray-850 hover:border-gray-100 focus-within:border-gray-100 hover:dark:border-gray-800 focus-within:dark:border-gray-800 transition px-1 bg-white/90 dark:bg-gray-400/5 dark:text-gray-100\"\n\t\t\t\t\t\t\tdir={$settings?.chatDirection ?? 'auto'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if replyToMessage !== null}\n\t\t\t\t\t\t\t\t<div class=\"px-3 pt-3 text-left w-full flex flex-col z-10\">\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center justify-between w-full\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"pl-[1px] flex items-center gap-2 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"translate-y-[0.5px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{$i18n.t('Replying to {{NAME}}', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNAME: replyToMessage?.meta?.model_name ?? replyToMessage.user.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center dark:text-gray-500\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treplyToMessage = null;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<XMark />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if files.length > 0}\n\t\t\t\t\t\t\t\t<div class=\"mx-2 mt-2.5 -mb-1 flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t{#each files as file, fileIdx}\n\t\t\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" relative group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\timageClassName=\" size-10 rounded-xl object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" bg-white text-black border border-white rounded-full group-hover:visible invisible transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiles.splice(fileIdx, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiles = files;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\t\t\tsmall={true}\n\t\t\t\t\t\t\t\t\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\t\t\tedit={true}\n\t\t\t\t\t\t\t\t\t\t\t\ton:dismiss={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfiles.splice(fileIdx, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tfiles = files;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(file);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t<div class=\"px-2.5\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"scrollbar-hidden rtl:text-right ltr:text-left bg-transparent dark:text-gray-100 outline-hidden w-full pt-2.5 pb-[5px] px-1 resize-none h-fit max-h-96 overflow-auto\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{#key $settings?.richTextInput}\n\t\t\t\t\t\t\t\t\t\t<RichTextInput\n\t\t\t\t\t\t\t\t\t\t\tid=\"chat-input\"\n\t\t\t\t\t\t\t\t\t\t\tbind:this={chatInputElement}\n\t\t\t\t\t\t\t\t\t\t\tjson={true}\n\t\t\t\t\t\t\t\t\t\t\tmessageInput={true}\n\t\t\t\t\t\t\t\t\t\t\teditable={!disabled}\n\t\t\t\t\t\t\t\t\t\t\t{placeholder}\n\t\t\t\t\t\t\t\t\t\t\trichText={$settings?.richTextInput ?? true}\n\t\t\t\t\t\t\t\t\t\t\tshowFormattingToolbar={$settings?.showFormattingToolbar ?? false}\n\t\t\t\t\t\t\t\t\t\t\tshiftEnter={!($settings?.ctrlEnterToSend ?? false) &&\n\t\t\t\t\t\t\t\t\t\t\t\t!$mobile &&\n\t\t\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'ontouchstart' in window ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.maxTouchPoints > 0 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.msMaxTouchPoints > 0\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\tlargeTextAsFile={$settings?.largeTextAsFile ?? false}\n\t\t\t\t\t\t\t\t\t\t\tfloatingMenuPlacement={'top-start'}\n\t\t\t\t\t\t\t\t\t\t\t{suggestions}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst { md } = e;\n\t\t\t\t\t\t\t\t\t\t\t\tcontent = md;\n\t\t\t\t\t\t\t\t\t\t\t\tcommand = getCommand();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:keydown={async (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te = e.detail.event;\n\t\t\t\t\t\t\t\t\t\t\t\tconst isCtrlPressed = e.ctrlKey || e.metaKey; // metaKey is for Cmd key on Mac\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst suggestionsContainerElement =\n\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('suggestions-container');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (!suggestionsContainerElement) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!$mobile ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ontouchstart' in window ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.maxTouchPoints > 0 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.msMaxTouchPoints > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Prevent Enter key from creating a new line\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Uses keyCode '13' for Enter key for chinese/japanese keyboards\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.keyCode === 13 && !e.shiftKey) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Submit the content when Enter key is pressed\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (content !== '' && e.keyCode === 13 && !e.shiftKey) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.info('Escape');\n\t\t\t\t\t\t\t\t\t\t\t\t\treplyToMessage = null;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:paste={async (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te = e.detail.event;\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst clipboardData = e.clipboardData || window.clipboardData;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (clipboardData && clipboardData.items) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (const item of clipboardData.items) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (item.type.indexOf('image') !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst blob = item.getAsFile();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst reader = new FileReader();\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treader.onload = function (e) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiles = [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...files,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: `${e.target.result}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (item?.kind === 'file') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst file = item.getAsFile();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst _files = [file];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait inputFilesHandler(_files);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\" flex justify-between mb-2.5 mx-0.5\">\n\t\t\t\t\t\t\t\t<div class=\"ml-1 self-end flex space-x-1 flex-1\">\n\t\t\t\t\t\t\t\t\t<slot name=\"menu\">\n\t\t\t\t\t\t\t\t\t\t{#if acceptFiles}\n\t\t\t\t\t\t\t\t\t\t\t<InputMenu\n\t\t\t\t\t\t\t\t\t\t\t\t{screenCaptureHandler}\n\t\t\t\t\t\t\t\t\t\t\t\tuploadFilesHandler={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilesInputElement.click();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"input-menu-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent hover:bg-white/80 text-gray-800 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5 outline-hidden focus:outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"More\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</InputMenu>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"self-end flex space-x-1 mr-1\">\n\t\t\t\t\t\t\t\t\t{#if content === ''}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Record voice')}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"voice-input-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\" text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 transition rounded-full p-1.5 mr-0.5 self-center\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$i18n.t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Permission denied when accessing microphone: {{error}}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stream) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecording = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstream = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Voice Input\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 translate-y-[0.5px]\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t\t{#if inputLoading && onStop}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Stop')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonStop();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Send message')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"send-message-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{content !== '' || files.length !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1.5 self-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={content === '' && files.length === 0}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n"],"names":["ctx","insert_hydration","target","div","anchor","set_data","t1","t1_value","flyAndScale","i18n","getContext","screenCaptureHandler","$$props","uploadFilesHandler","onClose","show","init","e","i","div1","append_hydration","div0","each_blocks","_a","create_if_block_9","_b","create_if_block_10","_c","create_if_block_11","t","t_value","WEBUI_API_BASE_URL","attr","img","img_src_value","img_alt_value","dirty","_d","WEBUI_BASE_URL","_f","_e","create_if_block_1","create_if_block_2","create_if_block_3","button","button_class_value","button_data_selected_value","current","if_block","create_if_block_8","tooltip_changes","create_if_block","query","command","selectedIndex","label","triggerChar","modelSuggestions","userSuggestions","channelSuggestions","_models","_users","_channels","getUserList","res","searchUsers","error","$$invalidate","u","a","b","select","index","item","filteredItems","onKeyDown","event","_onKeyDown","keydownListener","onMount","$channels","c","$models","m","onDestroy","click_handler","if_block1","div5","div4","div2","div3","input","func","span","t3","t3_value","previous_key","if_block0","create_if_block_7","create_if_block_5","if_block2","form","div6","safe_not_equal","fileitem_changes","image_changes","create_if_block_4","button_disabled_value","svg","path","user","placeholder","$i18n","id","chatInputElement","typingUsers","inputLoading","onSubmit","onChange","onStop","scrollEnd","scrollToBottom","disabled","acceptFiles","showFormattingToolbar","replyToMessage","typingUsersClassName","loaded","draggedOver","recording","content","files","filesInputElement","inputFiles","showInputVariablesModal","inputVariablesModalCallback","inputVariables","inputVariableValues","inputVariableHandler","text","extractInputVariables","resolve","variableValues","replaceVariables","textVariableHandler","clipboardText","err","toast","clipboardItems","imageUrl","type","blob","location","getUserPosition","sessionUser","getSessionUser","name","bio","gender","birthDate","age","getAge","language","date","getFormattedDate","time","getFormattedTime","dateTime","getCurrentDateTime","timezone","getUserTimezone","weekday","getWeekday","variables","setText","cb","tick","getCommand","chatInput","word","replaceCommandWithText","insertTextAtCursor","chatInputContainer","extractCurlyBraceWords","showCommands","suggestions","mediaStream","video","canvas","track","inputFilesHandler","file","$config","compressImageHandler","settings","config","settingsCompression","configWidth","configHeight","width","height","compressImage","reader","$settings","convertHeicToJpeg","uploadFileHandler","tempItemId","uuidv4","fileItem","metadata","uploadedFile","uploadFile","handleKeyDown","onDragOver","onDragLeave","onDrop","submitHandler","getSuggestionRenderer","MentionList","CommandSuggestionList","data","f","dropzoneElement","$$value","value","filename","fileIdx","md","$mobile","clipboardData","stream"],"mappings":"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"}