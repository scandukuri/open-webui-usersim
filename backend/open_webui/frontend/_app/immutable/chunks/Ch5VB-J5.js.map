{"version":3,"mappings":"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","names":["t0_value","ctx","create_if_block_1","insert_hydration","target","div1","anchor","append_hydration","div0","button0","div4","div2","div3","button1","current","dirty","set_data","t0","t4","t4_value","span","i","div","t2_value","span1","span0","t2","create_if_block","show","$$props","model","feedbacks","onClose","i18n","getContext","close","getTopTagsForModel","modelId","topN","tagCounts","fb","tag","a","b","count","$$invalidate","topTags","input","get_key","table","thead","tr","th0","th1","th2","th3","th4","tbody","t3","t3_value","t6","t6_value","t9","t9_value","t12","t12_value","t_value","_a","t5_value","create_if_block_2","src_url_equal","img","img_src_value","_c","_b","WEBUI_BASE_URL","attr","img_alt_value","td0","td1","td2","td3","td4","div5","_d","t5","create_if_block_13","div8","div7","div6","t1","t1_value","t10","t10_value","EMBEDDING_MODEL","tokenizer","rankedModels","query","tagEmbeddings","loadingLeaderboard","debounceTimer","orderBy","direction","setSortKey","key","showLeaderboardModal","selectedModel","openLeaderboardModelModal","closeLeaderboardModal","rankHandler","similarities","modelStats","calculateModelStats","$models","m","stats","K","getOrDefaultStats","updateStats","ratingChange","outcome","currentStats","calculateEloChange","ratingA","ratingB","similarity","expectedScore","feedback","modelA","statsA","modelB","statsB","changeA","changeB","cosineSimilarity","vecA","vecB","dotProduct","normA","normB","calculateMaxSimilarity","queryEmbedding","maxSimilarity","tagEmbedding","loadEmbeddingModel","env","AutoModel","AutoTokenizer","allTags","getTagEmbeddings","getEmbeddings","text","tokens","tags","embeddings","debouncedQueryHandler","feedbackTags","onMount","value","click_handler","click_handler_1","click_handler_2","click_handler_3","click_handler_4","click_handler_5","sortedModels","aVal","bVal","flyAndScale","e","dispatch","createEventDispatcher","child_ctx","_f","_e","button","t7_value","t11_value","_g","t15_value","_i","_h","create_if_block_3","get_if_ctx","_k","_j","_m","_l","div13","span2","div11","div9","div10","span3","div12","t7","t11","t13","t13_value","t15","_o","_n","t18","t18_value","if_block0","create_if_block_5","if_block1","create_if_block_4","selectedFeedback","loaded","feedbackData","init","getFeedbackById","err","tooltip_changes","t","create_if_block_8","show_if","show_if_1","show_if_2","td","dayjs","pagination_changes","create_if_block_17","saveAs","fileSaver","relativeTime","page","showFeedbackModal","openFeedbackModal","closeFeedbackModal","deleteFeedbackHandler","feedbackId","deleteFeedbackById","toast","f","shareHandler","$i18n","feedbacksToShare","snapshot","user","rest","url","tab","messageHandler","event","exportHandler","_feedbacks","exportAllFeedbacks","blob","click_handler_6","sortedFeedbacks","paginatedFeedbacks","button0_class_value","button1_class_value","selectedTab","scrollToTab","tabId","tabElement","getAllFeedbacks","containerElement","goto","pathParts","$page","tabFromPath"],"ignoreList":[],"sources":["../../../../../../src/lib/components/admin/Evaluations/LeaderboardModal.svelte","../../../../../../src/lib/components/admin/Evaluations/Leaderboard.svelte","../../../../../../src/lib/components/admin/Evaluations/FeedbackMenu.svelte","../../../../../../src/lib/components/admin/Evaluations/FeedbackModal.svelte","../../../../../../src/lib/components/admin/Evaluations/Feedbacks.svelte","../../../../../../src/lib/components/admin/Evaluations.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport { getContext } from 'svelte';\n\texport let show = false;\n\texport let model = null;\n\texport let feedbacks = [];\n\texport let onClose: () => void = () => {};\n\tconst i18n = getContext('i18n');\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\n\tconst close = () => {\n\t\tshow = false;\n\t\tonClose();\n\t};\n\n\t$: topTags = model ? getTopTagsForModel(model.id, feedbacks) : [];\n\n\tconst getTopTagsForModel = (modelId: string, feedbacks: any[], topN = 5) => {\n\t\tconst tagCounts = new Map();\n\t\tfeedbacks\n\t\t\t.filter((fb) => fb.data.model_id === modelId)\n\t\t\t.forEach((fb) => {\n\t\t\t\t(fb.data.tags || []).forEach((tag) => {\n\t\t\t\t\ttagCounts.set(tag, (tagCounts.get(tag) || 0) + 1);\n\t\t\t\t});\n\t\t\t});\n\t\treturn Array.from(tagCounts.entries())\n\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t.slice(0, topN)\n\t\t\t.map(([tag, count]) => ({ tag, count }));\n\t};\n</script>\n\n<Modal size=\"sm\" bind:show>\n\t{#if model}\n\t\t<div class=\"flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\"text-lg font-medium self-center\">\n\t\t\t\t{model.name}\n\t\t\t</div>\n\t\t\t<button class=\"self-center\" on:click={close} aria-label=\"Close\">\n\t\t\t\t<XMark className={'size-5'} />\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\"px-5 pb-4 dark:text-gray-200\">\n\t\t\t<div class=\"mb-2\">\n\t\t\t\t{#if topTags.length}\n\t\t\t\t\t<div class=\"flex flex-wrap gap-1 mt-1 -mx-1\">\n\t\t\t\t\t\t{#each topTags as tagInfo}\n\t\t\t\t\t\t\t<span class=\"px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-850 text-xs\">\n\t\t\t\t\t\t\t\t{tagInfo.tag} <span class=\"text-gray-500 font-medium\">{tagInfo.count}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<span>-</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div class=\"flex justify-end pt-2\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\ton:click={close}\n\t\t\t\t>\n\t\t\t\t\t{$i18n.t('Close')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</Modal>\n","<script lang=\"ts\">\n\timport { onMount, getContext } from 'svelte';\n\timport { models } from '$lib/stores';\n\n\timport ModelModal from './LeaderboardModal.svelte';\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\tconst i18n = getContext('i18n');\n\n\tconst EMBEDDING_MODEL = 'TaylorAI/bge-micro-v2';\n\n\tlet tokenizer = null;\n\tlet model = null;\n\n\texport let feedbacks = [];\n\n\tlet rankedModels = [];\n\n\tlet query = '';\n\n\tlet tagEmbeddings = new Map();\n\tlet loadingLeaderboard = true;\n\tlet debounceTimer;\n\n\tlet orderBy: string = 'rating'; // default sort column\n\tlet direction: 'asc' | 'desc' = 'desc'; // default sort order\n\n\ttype Feedback = {\n\t\tid: string;\n\t\tdata: {\n\t\t\trating: number;\n\t\t\tmodel_id: string;\n\t\t\tsibling_model_ids: string[] | null;\n\t\t\treason: string;\n\t\t\tcomment: string;\n\t\t\ttags: string[];\n\t\t};\n\t\tuser: {\n\t\t\tname: string;\n\t\t\tprofile_image_url: string;\n\t\t};\n\t\tupdated_at: number;\n\t};\n\n\ttype ModelStats = {\n\t\trating: number;\n\t\twon: number;\n\t\tlost: number;\n\t};\n\n\tfunction setSortKey(key) {\n\t\tif (orderBy === key) {\n\t\t\tdirection = direction === 'asc' ? 'desc' : 'asc';\n\t\t} else {\n\t\t\torderBy = key;\n\t\t\tdirection = key === 'name' ? 'asc' : 'desc';\n\t\t}\n\t}\n\n\t//////////////////////\n\t//\n\t// Aggregate Level Modal\n\t//\n\t//////////////////////\n\n\tlet showLeaderboardModal = false;\n\tlet selectedModel = null;\n\n\tconst openLeaderboardModelModal = (model) => {\n\t\tshowLeaderboardModal = true;\n\t\tselectedModel = model;\n\t};\n\n\tconst closeLeaderboardModal = () => {\n\t\tshowLeaderboardModal = false;\n\t\tselectedModel = null;\n\t};\n\n\t//////////////////////\n\t//\n\t// Rank models by Elo rating\n\t//\n\t//////////////////////\n\n\tconst rankHandler = async (similarities: Map<string, number> = new Map()) => {\n\t\tconst modelStats = calculateModelStats(feedbacks, similarities);\n\n\t\trankedModels = $models\n\t\t\t.filter((m) => m?.owned_by !== 'arena' && (m?.info?.meta?.hidden ?? false) !== true)\n\t\t\t.map((model) => {\n\t\t\t\tconst stats = modelStats.get(model.id);\n\t\t\t\treturn {\n\t\t\t\t\t...model,\n\t\t\t\t\trating: stats ? Math.round(stats.rating) : '-',\n\t\t\t\t\tstats: {\n\t\t\t\t\t\tcount: stats ? stats.won + stats.lost : 0,\n\t\t\t\t\t\twon: stats ? stats.won.toString() : '-',\n\t\t\t\t\t\tlost: stats ? stats.lost.toString() : '-'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t})\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (a.rating === '-' && b.rating !== '-') return 1;\n\t\t\t\tif (b.rating === '-' && a.rating !== '-') return -1;\n\t\t\t\tif (a.rating !== '-' && b.rating !== '-') return b.rating - a.rating;\n\t\t\t\treturn (a?.name ?? a?.id ?? '').localeCompare(b?.name ?? b?.id ?? '');\n\t\t\t});\n\n\t\tloadingLeaderboard = false;\n\t};\n\n\tfunction calculateModelStats(\n\t\tfeedbacks: Feedback[],\n\t\tsimilarities: Map<string, number>\n\t): Map<string, ModelStats> {\n\t\tconst stats = new Map<string, ModelStats>();\n\t\tconst K = 32;\n\n\t\tfunction getOrDefaultStats(modelId: string): ModelStats {\n\t\t\treturn stats.get(modelId) || { rating: 1000, won: 0, lost: 0 };\n\t\t}\n\n\t\tfunction updateStats(modelId: string, ratingChange: number, outcome: number) {\n\t\t\tconst currentStats = getOrDefaultStats(modelId);\n\t\t\tcurrentStats.rating += ratingChange;\n\t\t\tif (outcome === 1) currentStats.won++;\n\t\t\telse if (outcome === 0) currentStats.lost++;\n\t\t\tstats.set(modelId, currentStats);\n\t\t}\n\n\t\tfunction calculateEloChange(\n\t\t\tratingA: number,\n\t\t\tratingB: number,\n\t\t\toutcome: number,\n\t\t\tsimilarity: number\n\t\t): number {\n\t\t\tconst expectedScore = 1 / (1 + Math.pow(10, (ratingB - ratingA) / 400));\n\t\t\treturn K * (outcome - expectedScore) * similarity;\n\t\t}\n\n\t\tfeedbacks.forEach((feedback) => {\n\t\t\tif (!feedback?.data?.model_id || !feedback?.data?.rating) return;\n\n\t\t\tconst modelA = feedback.data.model_id;\n\t\t\tconst statsA = getOrDefaultStats(modelA);\n\t\t\tlet outcome: number;\n\n\t\t\tswitch (feedback.data.rating.toString()) {\n\t\t\t\tcase '1':\n\t\t\t\t\toutcome = 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase '-1':\n\t\t\t\t\toutcome = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn; // Skip invalid ratings\n\t\t\t}\n\n\t\t\t// If the query is empty, set similarity to 1, else get the similarity from the map\n\t\t\tconst similarity = query !== '' ? similarities.get(feedback.id) || 0 : 1;\n\t\t\tconst opponents = feedback.data.sibling_model_ids || [];\n\n\t\t\topponents.forEach((modelB) => {\n\t\t\t\tconst statsB = getOrDefaultStats(modelB);\n\t\t\t\tconst changeA = calculateEloChange(statsA.rating, statsB.rating, outcome, similarity);\n\t\t\t\tconst changeB = calculateEloChange(statsB.rating, statsA.rating, 1 - outcome, similarity);\n\n\t\t\t\tupdateStats(modelA, changeA, outcome);\n\t\t\t\tupdateStats(modelB, changeB, 1 - outcome);\n\t\t\t});\n\t\t});\n\n\t\treturn stats;\n\t}\n\n\t//////////////////////\n\t//\n\t// Calculate cosine similarity\n\t//\n\t//////////////////////\n\n\tconst cosineSimilarity = (vecA, vecB) => {\n\t\t// Ensure the lengths of the vectors are the same\n\t\tif (vecA.length !== vecB.length) {\n\t\t\tthrow new Error('Vectors must be the same length');\n\t\t}\n\n\t\t// Calculate the dot product\n\t\tlet dotProduct = 0;\n\t\tlet normA = 0;\n\t\tlet normB = 0;\n\n\t\tfor (let i = 0; i < vecA.length; i++) {\n\t\t\tdotProduct += vecA[i] * vecB[i];\n\t\t\tnormA += vecA[i] ** 2;\n\t\t\tnormB += vecB[i] ** 2;\n\t\t}\n\n\t\t// Calculate the magnitudes\n\t\tnormA = Math.sqrt(normA);\n\t\tnormB = Math.sqrt(normB);\n\n\t\t// Avoid division by zero\n\t\tif (normA === 0 || normB === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Return the cosine similarity\n\t\treturn dotProduct / (normA * normB);\n\t};\n\n\tconst calculateMaxSimilarity = (queryEmbedding, tagEmbeddings: Map<string, number[]>) => {\n\t\tlet maxSimilarity = 0;\n\t\tfor (const tagEmbedding of tagEmbeddings.values()) {\n\t\t\tconst similarity = cosineSimilarity(queryEmbedding, tagEmbedding);\n\t\t\tmaxSimilarity = Math.max(maxSimilarity, similarity);\n\t\t}\n\t\treturn maxSimilarity;\n\t};\n\n\t//////////////////////\n\t//\n\t// Embedding functions\n\t//\n\t//////////////////////\n\n\tconst loadEmbeddingModel = async () => {\n\t\tconst { env, AutoModel, AutoTokenizer } = await import('@huggingface/transformers');\n\t\tif (env.backends.onnx.wasm) {\n\t\t\tenv.backends.onnx.wasm.wasmPaths = '/wasm/';\n\t\t}\n\n\t\t// Check if the tokenizer and model are already loaded and stored in the window object\n\t\tif (!window.tokenizer) {\n\t\t\twindow.tokenizer = await AutoTokenizer.from_pretrained(EMBEDDING_MODEL);\n\t\t}\n\n\t\tif (!window.model) {\n\t\t\twindow.model = await AutoModel.from_pretrained(EMBEDDING_MODEL);\n\t\t}\n\n\t\t// Use the tokenizer and model from the window object\n\t\ttokenizer = window.tokenizer;\n\t\tmodel = window.model;\n\n\t\t// Pre-compute embeddings for all unique tags\n\t\tconst allTags = new Set(feedbacks.flatMap((feedback) => feedback.data.tags || []));\n\t\tawait getTagEmbeddings(Array.from(allTags));\n\t};\n\n\tconst getEmbeddings = async (text: string) => {\n\t\tconst tokens = await tokenizer(text);\n\t\tconst output = await model(tokens);\n\n\t\t// Perform mean pooling on the last hidden states\n\t\tconst embeddings = output.last_hidden_state.mean(1);\n\t\treturn embeddings.ort_tensor.data;\n\t};\n\n\tconst getTagEmbeddings = async (tags: string[]) => {\n\t\tconst embeddings = new Map();\n\t\tfor (const tag of tags) {\n\t\t\tif (!tagEmbeddings.has(tag)) {\n\t\t\t\ttagEmbeddings.set(tag, await getEmbeddings(tag));\n\t\t\t}\n\t\t\tembeddings.set(tag, tagEmbeddings.get(tag));\n\t\t}\n\t\treturn embeddings;\n\t};\n\n\tconst debouncedQueryHandler = async () => {\n\t\tloadingLeaderboard = true;\n\n\t\tif (query.trim() === '') {\n\t\t\trankHandler();\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout(debounceTimer);\n\n\t\tdebounceTimer = setTimeout(async () => {\n\t\t\tconst queryEmbedding = await getEmbeddings(query);\n\t\t\tconst similarities = new Map<string, number>();\n\n\t\t\tfor (const feedback of feedbacks) {\n\t\t\t\tconst feedbackTags = feedback.data.tags || [];\n\t\t\t\tconst tagEmbeddings = await getTagEmbeddings(feedbackTags);\n\t\t\t\tconst maxSimilarity = calculateMaxSimilarity(queryEmbedding, tagEmbeddings);\n\t\t\t\tsimilarities.set(feedback.id, maxSimilarity);\n\t\t\t}\n\n\t\t\trankHandler(similarities);\n\t\t}, 1500); // Debounce for 1.5 seconds\n\t};\n\n\t$: query, debouncedQueryHandler();\n\n\tonMount(async () => {\n\t\trankHandler();\n\t});\n\n\t$: sortedModels = [...rankedModels].sort((a, b) => {\n\t\tlet aVal, bVal;\n\t\tif (orderBy === 'name') {\n\t\t\taVal = a.name;\n\t\t\tbVal = b.name;\n\t\t\treturn direction === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n\t\t} else if (orderBy === 'rating') {\n\t\t\taVal = a.rating === '-' ? -Infinity : a.rating;\n\t\t\tbVal = b.rating === '-' ? -Infinity : b.rating;\n\t\t\treturn direction === 'asc' ? aVal - bVal : bVal - aVal;\n\t\t} else if (orderBy === 'won') {\n\t\t\taVal = a.stats.won === '-' ? -Infinity : Number(a.stats.won);\n\t\t\tbVal = b.stats.won === '-' ? -Infinity : Number(b.stats.won);\n\t\t\treturn direction === 'asc' ? aVal - bVal : bVal - aVal;\n\t\t} else if (orderBy === 'lost') {\n\t\t\taVal = a.stats.lost === '-' ? -Infinity : Number(a.stats.lost);\n\t\t\tbVal = b.stats.lost === '-' ? -Infinity : Number(b.stats.lost);\n\t\t\treturn direction === 'asc' ? aVal - bVal : bVal - aVal;\n\t\t}\n\t\treturn 0;\n\t});\n</script>\n\n<ModelModal\n\tbind:show={showLeaderboardModal}\n\tmodel={selectedModel}\n\t{feedbacks}\n\tonClose={closeLeaderboardModal}\n/>\n\n<div\n\tclass=\"pt-0.5 pb-1 gap-1 flex flex-col md:flex-row justify-between sticky top-0 z-10 bg-white dark:bg-gray-900\"\n>\n\t<div class=\"flex md:self-center text-lg font-medium px-0.5 shrink-0 items-center\">\n\t\t<div class=\" gap-1\">\n\t\t\t{$i18n.t('Leaderboard')}\n\t\t</div>\n\n\t\t<div class=\"flex self-center w-[1px] h-6 mx-2.5 bg-gray-50 dark:bg-gray-850\" />\n\n\t\t<span class=\"text-lg font-medium text-gray-500 dark:text-gray-300 mr-1.5\"\n\t\t\t>{rankedModels.length}</span\n\t\t>\n\t</div>\n\n\t<div class=\" flex space-x-2\">\n\t\t<Tooltip content={$i18n.t('Re-rank models by topic similarity')}>\n\t\t\t<div class=\"flex flex-1\">\n\t\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t\t<Search className=\"size-3\" />\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent\"\n\t\t\t\t\tbind:value={query}\n\t\t\t\t\tplaceholder={$i18n.t('Search')}\n\t\t\t\t\ton:focus={() => {\n\t\t\t\t\t\tloadEmbeddingModel();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Tooltip>\n\t</div>\n</div>\n\n<div class=\"scrollbar-hidden relative whitespace-nowrap overflow-x-auto max-w-full rounded-sm\">\n\t{#if loadingLeaderboard}\n\t\t<div class=\" absolute top-0 bottom-0 left-0 right-0 flex\">\n\t\t\t<div class=\"m-auto\">\n\t\t\t\t<Spinner className=\"size-5\" />\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\t{#if (rankedModels ?? []).length === 0}\n\t\t<div class=\"text-center text-xs text-gray-500 dark:text-gray-400 py-1\">\n\t\t\t{$i18n.t('No models found')}\n\t\t</div>\n\t{:else}\n\t\t<table\n\t\t\tclass=\"w-full text-sm text-left text-gray-500 dark:text-gray-400 table-auto max-w-full {loadingLeaderboard\n\t\t\t\t? 'opacity-20'\n\t\t\t\t: ''}\"\n\t\t>\n\t\t\t<thead class=\"text-xs text-gray-800 uppercase bg-transparent dark:text-gray-200\">\n\t\t\t\t<tr class=\" border-b-[1.5px] border-gray-50 dark:border-gray-850\">\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 cursor-pointer select-none w-3\"\n\t\t\t\t\t\ton:click={() => setSortKey('rating')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center\">\n\t\t\t\t\t\t\t{$i18n.t('RK')}\n\t\t\t\t\t\t\t{#if orderBy === 'rating'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 cursor-pointer select-none\"\n\t\t\t\t\t\ton:click={() => setSortKey('name')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center\">\n\t\t\t\t\t\t\t{$i18n.t('Model')}\n\t\t\t\t\t\t\t{#if orderBy === 'name'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 text-right cursor-pointer select-none w-fit\"\n\t\t\t\t\t\ton:click={() => setSortKey('rating')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center justify-end\">\n\t\t\t\t\t\t\t{$i18n.t('Rating')}\n\t\t\t\t\t\t\t{#if orderBy === 'rating'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 text-right cursor-pointer select-none w-5\"\n\t\t\t\t\t\ton:click={() => setSortKey('won')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center justify-end\">\n\t\t\t\t\t\t\t{$i18n.t('Won')}\n\t\t\t\t\t\t\t{#if orderBy === 'won'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 text-right cursor-pointer select-none w-5\"\n\t\t\t\t\t\ton:click={() => setSortKey('lost')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center justify-end\">\n\t\t\t\t\t\t\t{$i18n.t('Lost')}\n\t\t\t\t\t\t\t{#if orderBy === 'lost'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody class=\"\">\n\t\t\t\t{#each sortedModels as model, modelIdx (model.id)}\n\t\t\t\t\t<tr\n\t\t\t\t\t\tclass=\"bg-white dark:bg-gray-900 dark:border-gray-850 text-xs group cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-850/50 transition\"\n\t\t\t\t\t\ton:click={() => openLeaderboardModelModal(model)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<td class=\"px-3 py-1.5 text-left font-medium text-gray-900 dark:text-white w-fit\">\n\t\t\t\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t\t\t\t{model?.rating !== '-' ? modelIdx + 1 : '-'}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"px-3 py-1.5 flex flex-col justify-center\">\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={model?.info?.meta?.profile_image_url ?? `${WEBUI_BASE_URL}/favicon.png`}\n\t\t\t\t\t\t\t\t\t\talt={model.name}\n\t\t\t\t\t\t\t\t\t\tclass=\"size-5 rounded-full object-cover shrink-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"font-medium text-gray-800 dark:text-gray-200 pr-4\">\n\t\t\t\t\t\t\t\t\t{model.name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"px-3 py-1.5 text-right font-medium text-gray-900 dark:text-white w-max\">\n\t\t\t\t\t\t\t{model.rating}\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\" px-3 py-1.5 text-right font-semibold text-green-500\">\n\t\t\t\t\t\t\t<div class=\" w-10\">\n\t\t\t\t\t\t\t\t{#if model.stats.won === '-'}\n\t\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<span class=\"hidden group-hover:inline\"\n\t\t\t\t\t\t\t\t\t\t>{((model.stats.won / model.stats.count) * 100).toFixed(1)}%</span\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\" group-hover:hidden\">{model.stats.won}</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\"px-3 py-1.5 text-right font-semibold text-red-500\">\n\t\t\t\t\t\t\t<div class=\" w-10\">\n\t\t\t\t\t\t\t\t{#if model.stats.lost === '-'}\n\t\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<span class=\"hidden group-hover:inline\"\n\t\t\t\t\t\t\t\t\t\t>{((model.stats.lost / model.stats.count) * 100).toFixed(1)}%</span\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\" group-hover:hidden\">{model.stats.lost}</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t{/each}\n\t\t\t</tbody>\n\t\t</table>\n\t{/if}\n</div>\n\n<div class=\" text-gray-500 text-xs mt-1.5 w-full flex justify-end\">\n\t<div class=\" text-right\">\n\t\t<div class=\"line-clamp-1\">\n\t\t\tâ“˜ {$i18n.t(\n\t\t\t\t'The evaluation leaderboard is based on the Elo rating system and is updated in real-time.'\n\t\t\t)}\n\t\t</div>\n\t\t{$i18n.t(\n\t\t\t'The leaderboard is currently in beta, and we may adjust the rating calculations as we refine the algorithm.'\n\t\t)}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, createEventDispatcher } from 'svelte';\n\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\tconst dispatch = createEventDispatcher();\n\tconst i18n = getContext('i18n');\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Download from '$lib/components/icons/Download.svelte';\n\n\tlet show = false;\n</script>\n\n<Dropdown bind:show on:change={(e) => {}}>\n\t<Tooltip content={$i18n.t('More')}>\n\t\t<slot />\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[150px] rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg\"\n\t\t\tsideOffset={-2}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('delete');\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<GarbageBin strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Delete')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport { getFeedbackById } from '$lib/apis/evaluations';\n\timport { toast } from 'svelte-sonner';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\n\texport let show = false;\n\texport let selectedFeedback = null;\n\n\texport let onClose: () => void = () => {};\n\n\tlet loaded = false;\n\n\tlet feedbackData = null;\n\n\tconst close = () => {\n\t\tshow = false;\n\t\tonClose();\n\t};\n\n\tconst init = async () => {\n\t\tloaded = false;\n\t\tfeedbackData = null;\n\t\tif (selectedFeedback) {\n\t\t\tfeedbackData = await getFeedbackById(localStorage.token, selectedFeedback.id).catch((err) => {\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tconsole.log('Feedback Data:', selectedFeedback, feedbackData);\n\t\t}\n\t\tloaded = true;\n\t};\n\n\t$: if (show) {\n\t\tinit();\n\t}\n</script>\n\n<Modal size=\"sm\" bind:show>\n\t{#if selectedFeedback}\n\t\t<div>\n\t\t\t<div class=\"flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t\t<div class=\"text-lg font-medium self-center\">\n\t\t\t\t\t{$i18n.t('Feedback Details')}\n\t\t\t\t</div>\n\t\t\t\t<button class=\"self-center\" on:click={close} aria-label=\"Close\">\n\t\t\t\t\t<XMark className={'size-5'} />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t\t{#if loaded}\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<div class=\"flex flex-col w-full mb-2\">\n\t\t\t\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('Chat ID')}</div>\n\n\t\t\t\t\t\t\t<div class=\"flex-1 text-xs\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={`/s/${selectedFeedback?.meta?.chat_id}`}\n\t\t\t\t\t\t\t\t\tclass=\" hover:underline\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>{selectedFeedback?.meta?.chat_id ?? '-'}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if feedbackData}\n\t\t\t\t\t\t\t{@const messageId = feedbackData?.meta?.message_id}\n\t\t\t\t\t\t\t{@const messages = feedbackData?.snapshot?.chat?.chat?.history.messages}\n\n\t\t\t\t\t\t\t{#if messages[messages[messageId]?.parentId]}\n\t\t\t\t\t\t\t\t<div class=\"flex flex-col w-full mb-2\">\n\t\t\t\t\t\t\t\t\t<div class=\"mb-1 text-xs text-gray-500\">{$i18n.t('Prompt')}</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"flex-1 text-xs whitespace-pre-line break-words\">\n\t\t\t\t\t\t\t\t\t\t<span>{messages[messages[messageId]?.parentId]?.content || '-'}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if messages[messageId]}\n\t\t\t\t\t\t\t\t<div class=\"flex flex-col w-full mb-2\">\n\t\t\t\t\t\t\t\t\t<div class=\"mb-1 text-xs text-gray-500\">{$i18n.t('Response')}</div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"flex-1 text-xs whitespace-pre-line break-words max-h-32 overflow-y-auto\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>{messages[messageId]?.content || '-'}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"flex flex-col w-full mb-2\">\n\t\t\t\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('Rating')}</div>\n\n\t\t\t\t\t\t\t<div class=\"flex-1 text-xs\">\n\t\t\t\t\t\t\t\t<span>{selectedFeedback?.data?.details?.rating ?? '-'}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex flex-col w-full mb-2\">\n\t\t\t\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('Reason')}</div>\n\n\t\t\t\t\t\t\t<div class=\"flex-1 text-xs\">\n\t\t\t\t\t\t\t\t<span>{selectedFeedback?.data?.reason || '-'}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex flex-col w-full mb-2\">\n\t\t\t\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('Comment')}</div>\n\n\t\t\t\t\t\t\t<div class=\"flex-1 text-xs\">\n\t\t\t\t\t\t\t\t<span>{selectedFeedback?.data?.comment || '-'}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if selectedFeedback?.data?.tags && selectedFeedback?.data?.tags.length}\n\t\t\t\t\t\t\t<div class=\"mb-2 -mx-1\">\n\t\t\t\t\t\t\t\t<div class=\"flex flex-wrap gap-1 mt-1\">\n\t\t\t\t\t\t\t\t\t{#each selectedFeedback?.data?.tags as tag}\n\t\t\t\t\t\t\t\t\t\t<span class=\"px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-850 text-[9px]\"\n\t\t\t\t\t\t\t\t\t\t\t>{tag}</span\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"flex justify-end pt-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\ton:click={close}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Close')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"flex items-center justify-center w-full h-32\">\n\t\t\t\t\t\t<Spinner className={'size-5'} />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</Modal>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\tdayjs.extend(relativeTime);\n\n\timport { onMount, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { deleteFeedbackById, exportAllFeedbacks, getAllFeedbacks } from '$lib/apis/evaluations';\n\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Download from '$lib/components/icons/Download.svelte';\n\timport Badge from '$lib/components/common/Badge.svelte';\n\timport CloudArrowUp from '$lib/components/icons/CloudArrowUp.svelte';\n\timport Pagination from '$lib/components/common/Pagination.svelte';\n\timport FeedbackMenu from './FeedbackMenu.svelte';\n\timport FeedbackModal from './FeedbackModal.svelte';\n\timport EllipsisHorizontal from '$lib/components/icons/EllipsisHorizontal.svelte';\n\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { config } from '$lib/stores';\n\n\texport let feedbacks = [];\n\n\tlet page = 1;\n\t$: paginatedFeedbacks = sortedFeedbacks.slice((page - 1) * 10, page * 10);\n\n\tlet orderBy: string = 'updated_at';\n\tlet direction: 'asc' | 'desc' = 'desc';\n\n\ttype Feedback = {\n\t\tid: string;\n\t\tdata: {\n\t\t\trating: number;\n\t\t\tmodel_id: string;\n\t\t\tsibling_model_ids: string[] | null;\n\t\t\treason: string;\n\t\t\tcomment: string;\n\t\t\ttags: string[];\n\t\t};\n\t\tuser: {\n\t\t\tname: string;\n\t\t\tprofile_image_url: string;\n\t\t};\n\t\tupdated_at: number;\n\t};\n\n\ttype ModelStats = {\n\t\trating: number;\n\t\twon: number;\n\t\tlost: number;\n\t};\n\n\tfunction setSortKey(key: string) {\n\t\tif (orderBy === key) {\n\t\t\tdirection = direction === 'asc' ? 'desc' : 'asc';\n\t\t} else {\n\t\t\torderBy = key;\n\t\t\tif (key === 'user' || key === 'model_id') {\n\t\t\t\tdirection = 'asc';\n\t\t\t} else {\n\t\t\t\tdirection = 'desc';\n\t\t\t}\n\t\t}\n\t\tpage = 1;\n\t}\n\n\t$: sortedFeedbacks = [...feedbacks].sort((a, b) => {\n\t\tlet aVal, bVal;\n\n\t\tswitch (orderBy) {\n\t\t\tcase 'user':\n\t\t\t\taVal = a.user?.name || '';\n\t\t\t\tbVal = b.user?.name || '';\n\t\t\t\treturn direction === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n\t\t\tcase 'model_id':\n\t\t\t\taVal = a.data.model_id || '';\n\t\t\t\tbVal = b.data.model_id || '';\n\t\t\t\treturn direction === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n\t\t\tcase 'rating':\n\t\t\t\taVal = a.data.rating;\n\t\t\t\tbVal = b.data.rating;\n\t\t\t\treturn direction === 'asc' ? aVal - bVal : bVal - aVal;\n\t\t\tcase 'updated_at':\n\t\t\t\taVal = a.updated_at;\n\t\t\t\tbVal = b.updated_at;\n\t\t\t\treturn direction === 'asc' ? aVal - bVal : bVal - aVal;\n\t\t\tdefault:\n\t\t\t\treturn 0;\n\t\t}\n\t});\n\n\tlet showFeedbackModal = false;\n\tlet selectedFeedback = null;\n\n\tconst openFeedbackModal = (feedback) => {\n\t\tshowFeedbackModal = true;\n\t\tselectedFeedback = feedback;\n\t};\n\n\tconst closeFeedbackModal = () => {\n\t\tshowFeedbackModal = false;\n\t\tselectedFeedback = null;\n\t};\n\n\t//////////////////////\n\t//\n\t// CRUD operations\n\t//\n\t//////////////////////\n\n\tconst deleteFeedbackHandler = async (feedbackId: string) => {\n\t\tconst response = await deleteFeedbackById(localStorage.token, feedbackId).catch((err) => {\n\t\t\ttoast.error(err);\n\t\t\treturn null;\n\t\t});\n\t\tif (response) {\n\t\t\tfeedbacks = feedbacks.filter((f) => f.id !== feedbackId);\n\t\t}\n\t};\n\n\tconst shareHandler = async () => {\n\t\ttoast.success($i18n.t('Redirecting you to Open WebUI Community'));\n\n\t\t// remove snapshot from feedbacks\n\t\tconst feedbacksToShare = feedbacks.map((f) => {\n\t\t\tconst { snapshot, user, ...rest } = f;\n\t\t\treturn rest;\n\t\t});\n\t\tconsole.log(feedbacksToShare);\n\n\t\tconst url = 'https://openwebui.com';\n\t\tconst tab = await window.open(`${url}/leaderboard`, '_blank');\n\n\t\t// Define the event handler function\n\t\tconst messageHandler = (event) => {\n\t\t\tif (event.origin !== url) return;\n\t\t\tif (event.data === 'loaded') {\n\t\t\t\ttab.postMessage(JSON.stringify(feedbacksToShare), '*');\n\n\t\t\t\t// Remove the event listener after handling the message\n\t\t\t\twindow.removeEventListener('message', messageHandler);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener('message', messageHandler, false);\n\t};\n\n\tconst exportHandler = async () => {\n\t\tconst _feedbacks = await exportAllFeedbacks(localStorage.token).catch((err) => {\n\t\t\ttoast.error(err);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (_feedbacks) {\n\t\t\tlet blob = new Blob([JSON.stringify(_feedbacks)], {\n\t\t\t\ttype: 'application/json'\n\t\t\t});\n\t\t\tsaveAs(blob, `feedback-history-export-${Date.now()}.json`);\n\t\t}\n\t};\n</script>\n\n<FeedbackModal bind:show={showFeedbackModal} {selectedFeedback} onClose={closeFeedbackModal} />\n\n<div class=\"mt-0.5 mb-1 gap-1 flex flex-row justify-between\">\n\t<div class=\"flex md:self-center text-lg font-medium px-0.5\">\n\t\t{$i18n.t('Feedback History')}\n\n\t\t<div class=\"flex self-center w-[1px] h-6 mx-2.5 bg-gray-50 dark:bg-gray-850\" />\n\n\t\t<span class=\"text-lg font-medium text-gray-500 dark:text-gray-300\">{feedbacks.length}</span>\n\t</div>\n\n\t{#if feedbacks.length > 0}\n\t\t<div>\n\t\t\t<Tooltip content={$i18n.t('Export')}>\n\t\t\t\t<button\n\t\t\t\t\tclass=\" p-2 rounded-xl hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 transition font-medium text-sm flex items-center space-x-1\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\texportHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Download className=\"size-3\" />\n\t\t\t\t</button>\n\t\t\t</Tooltip>\n\t\t</div>\n\t{/if}\n</div>\n\n<div class=\"scrollbar-hidden relative whitespace-nowrap overflow-x-auto max-w-full\">\n\t{#if (feedbacks ?? []).length === 0}\n\t\t<div class=\"text-center text-xs text-gray-500 dark:text-gray-400 py-1\">\n\t\t\t{$i18n.t('No feedbacks found')}\n\t\t</div>\n\t{:else}\n\t\t<table class=\"w-full text-sm text-left text-gray-500 dark:text-gray-400 table-auto max-w-full\">\n\t\t\t<thead class=\"text-xs text-gray-800 uppercase bg-transparent dark:text-gray-200\">\n\t\t\t\t<tr class=\" border-b-[1.5px] border-gray-50 dark:border-gray-850\">\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 cursor-pointer select-none w-3\"\n\t\t\t\t\t\ton:click={() => setSortKey('user')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center justify-end\">\n\t\t\t\t\t\t\t{$i18n.t('User')}\n\t\t\t\t\t\t\t{#if orderBy === 'user'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 cursor-pointer select-none\"\n\t\t\t\t\t\ton:click={() => setSortKey('model_id')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center\">\n\t\t\t\t\t\t\t{$i18n.t('Models')}\n\t\t\t\t\t\t\t{#if orderBy === 'model_id'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 text-right cursor-pointer select-none w-fit\"\n\t\t\t\t\t\ton:click={() => setSortKey('rating')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center justify-end\">\n\t\t\t\t\t\t\t{$i18n.t('Result')}\n\t\t\t\t\t\t\t{#if orderBy === 'rating'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclass=\"px-2.5 py-2 text-right cursor-pointer select-none w-0\"\n\t\t\t\t\t\ton:click={() => setSortKey('updated_at')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center justify-end\">\n\t\t\t\t\t\t\t{$i18n.t('Updated At')}\n\t\t\t\t\t\t\t{#if orderBy === 'updated_at'}\n\t\t\t\t\t\t\t\t<span class=\"font-normal\">\n\t\t\t\t\t\t\t\t\t{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\n\t\t\t\t\t<th scope=\"col\" class=\"px-2.5 py-2 text-right cursor-pointer select-none w-0\"> </th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody class=\"\">\n\t\t\t\t{#each paginatedFeedbacks as feedback (feedback.id)}\n\t\t\t\t\t<tr\n\t\t\t\t\t\tclass=\"bg-white dark:bg-gray-900 dark:border-gray-850 text-xs cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-850/50 transition\"\n\t\t\t\t\t\ton:click={() => openFeedbackModal(feedback)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<td class=\" py-0.5 text-right font-semibold\">\n\t\t\t\t\t\t\t<div class=\"flex justify-center\">\n\t\t\t\t\t\t\t\t<Tooltip content={feedback?.user?.name}>\n\t\t\t\t\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={feedback?.user?.profile_image_url ?? `${WEBUI_BASE_URL}/user.png`}\n\t\t\t\t\t\t\t\t\t\t\talt={feedback?.user?.name}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5 rounded-full object-cover shrink-0\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\" py-1 pl-3 flex flex-col\">\n\t\t\t\t\t\t\t<div class=\"flex flex-col items-start gap-0.5 h-full\">\n\t\t\t\t\t\t\t\t<div class=\"flex flex-col h-full\">\n\t\t\t\t\t\t\t\t\t{#if feedback.data?.sibling_model_ids}\n\t\t\t\t\t\t\t\t\t\t<div class=\"font-semibold text-gray-600 dark:text-gray-400 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t{feedback.data?.model_id}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={feedback.data.sibling_model_ids.join(', ')}>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" text-[0.65rem] text-gray-600 dark:text-gray-400 line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t{#if feedback.data.sibling_model_ids.length > 2}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- {$i18n.t('and {{COUNT}} more')} -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t{feedback.data.sibling_model_ids.slice(0, 2).join(', ')}, {$i18n.t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'and {{COUNT}} more',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ COUNT: feedback.data.sibling_model_ids.length - 2 }\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{feedback.data.sibling_model_ids.join(', ')}\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\" text-sm font-medium text-gray-600 dark:text-gray-400 flex-1 py-1.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{feedback.data?.model_id}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t{#if feedback?.data?.rating}\n\t\t\t\t\t\t\t<td class=\"px-3 py-1 text-right font-medium text-gray-900 dark:text-white w-max\">\n\t\t\t\t\t\t\t\t<div class=\" flex justify-end\">\n\t\t\t\t\t\t\t\t\t{#if feedback?.data?.rating.toString() === '1'}\n\t\t\t\t\t\t\t\t\t\t<Badge type=\"info\" content={$i18n.t('Won')} />\n\t\t\t\t\t\t\t\t\t{:else if feedback?.data?.rating.toString() === '0'}\n\t\t\t\t\t\t\t\t\t\t<Badge type=\"muted\" content={$i18n.t('Draw')} />\n\t\t\t\t\t\t\t\t\t{:else if feedback?.data?.rating.toString() === '-1'}\n\t\t\t\t\t\t\t\t\t\t<Badge type=\"error\" content={$i18n.t('Lost')} />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<td class=\" px-3 py-1 text-right font-medium\">\n\t\t\t\t\t\t\t{dayjs(feedback.updated_at * 1000).fromNow()}\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td class=\" px-3 py-1 text-right font-semibold\" on:click={(e) => e.stopPropagation()}>\n\t\t\t\t\t\t\t<FeedbackMenu\n\t\t\t\t\t\t\t\ton:delete={(e) => {\n\t\t\t\t\t\t\t\t\tdeleteFeedbackHandler(feedback.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<EllipsisHorizontal />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</FeedbackMenu>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t{/each}\n\t\t\t</tbody>\n\t\t</table>\n\t{/if}\n</div>\n\n{#if feedbacks.length > 0 && $config?.features?.enable_community_sharing}\n\t<div class=\" flex flex-col justify-end w-full text-right gap-1\">\n\t\t<div class=\"line-clamp-1 text-gray-500 text-xs\">\n\t\t\t{$i18n.t('Help us create the best community leaderboard by sharing your feedback history!')}\n\t\t</div>\n\n\t\t<div class=\"flex space-x-1 ml-auto\">\n\t\t\t<Tooltip\n\t\t\t\tcontent={$i18n.t(\n\t\t\t\t\t'To protect your privacy, only ratings, model IDs, tags, and metadata are shared from your feedbackâ€”your chat logs remain private and are not included.'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex text-xs items-center px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition\"\n\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\tshareHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center mr-2 font-medium line-clamp-1\">\n\t\t\t\t\t\t{$i18n.t('Share to Open WebUI Community')}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t<CloudArrowUp className=\"size-3\" strokeWidth=\"3\" />\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</Tooltip>\n\t\t</div>\n\t</div>\n{/if}\n\n{#if feedbacks.length > 10}\n\t<Pagination bind:page count={feedbacks.length} perPage={10} />\n{/if}\n","<script>\n\timport { getContext, tick, onMount } from 'svelte';\n\timport { goto } from '$app/navigation';\n\timport { page } from '$app/stores';\n\n\timport Leaderboard from './Evaluations/Leaderboard.svelte';\n\timport Feedbacks from './Evaluations/Feedbacks.svelte';\n\n\timport { getAllFeedbacks } from '$lib/apis/evaluations';\n\n\tconst i18n = getContext('i18n');\n\n\tlet selectedTab;\n\t$: {\n\t\tconst pathParts = $page.url.pathname.split('/');\n\t\tconst tabFromPath = pathParts[pathParts.length - 1];\n\t\tselectedTab = ['leaderboard', 'feedbacks'].includes(tabFromPath) ? tabFromPath : 'leaderboard';\n\t}\n\n\t$: if (selectedTab) {\n\t\t// scroll to selectedTab\n\t\tscrollToTab(selectedTab);\n\t}\n\n\tconst scrollToTab = (tabId) => {\n\t\tconst tabElement = document.getElementById(tabId);\n\t\tif (tabElement) {\n\t\t\ttabElement.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });\n\t\t}\n\t};\n\n\tlet loaded = false;\n\tlet feedbacks = [];\n\n\tonMount(async () => {\n\t\tfeedbacks = await getAllFeedbacks(localStorage.token);\n\t\tloaded = true;\n\n\t\tconst containerElement = document.getElementById('users-tabs-container');\n\n\t\tif (containerElement) {\n\t\t\tcontainerElement.addEventListener('wheel', function (event) {\n\t\t\t\tif (event.deltaY !== 0) {\n\t\t\t\t\t// Adjust horizontal scroll position based on vertical scroll\n\t\t\t\t\tcontainerElement.scrollLeft += event.deltaY;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Scroll to the selected tab on mount\n\t\tscrollToTab(selectedTab);\n\t});\n</script>\n\n{#if loaded}\n\t<div class=\"flex flex-col lg:flex-row w-full h-full pb-2 lg:space-x-4\">\n\t\t<div\n\t\t\tid=\"users-tabs-container\"\n\t\t\tclass=\"tabs mx-[16px] lg:mx-0 lg:px-[16px] flex flex-row overflow-x-auto gap-2.5 max-w-full lg:gap-1 lg:flex-col lg:flex-none lg:w-50 dark:text-gray-200 text-sm font-medium text-left scrollbar-none\"\n\t\t>\n\t\t\t<button\n\t\t\t\tid=\"leaderboard\"\n\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg lg:flex-none flex text-right transition {selectedTab ===\n\t\t\t\t'leaderboard'\n\t\t\t\t\t? ''\n\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tgoto('/admin/evaluations/leaderboard');\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm6 5.75a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-1.5 0v-3.5Zm-2.75 1.5a.75.75 0 0 1 1.5 0v2a.75.75 0 0 1-1.5 0v-2Zm-2 .75a.75.75 0 0 0-.75.75v.5a.75.75 0 0 0 1.5 0v-.5a.75.75 0 0 0-.75-.75Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center\">{$i18n.t('Leaderboard')}</div>\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tid=\"feedbacks\"\n\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg lg:flex-none flex text-right transition {selectedTab ===\n\t\t\t\t'feedbacks'\n\t\t\t\t\t? ''\n\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tgoto('/admin/evaluations/feedbacks');\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M5.25 2A2.25 2.25 0 0 0 3 4.25v9a.75.75 0 0 0 1.183.613l1.692-1.195 1.692 1.195a.75.75 0 0 0 .866 0l1.692-1.195 1.693 1.195A.75.75 0 0 0 13 13.25v-9A2.25 2.25 0 0 0 10.75 2h-5.5Zm3.03 3.28a.75.75 0 0 0-1.06-1.06L4.97 6.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 0 0 1.06-1.06l-.97-.97h1.315c.76 0 1.375.616 1.375 1.375a.75.75 0 0 0 1.5 0A2.875 2.875 0 0 0 8.625 6.25H7.311l.97-.97Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center\">{$i18n.t('Feedbacks')}</div>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex-1 mt-1 lg:mt-0 px-[16px] lg:pr-[16px] lg:pl-0 overflow-y-scroll\">\n\t\t\t{#if selectedTab === 'leaderboard'}\n\t\t\t\t<Leaderboard {feedbacks} />\n\t\t\t{:else if selectedTab === 'feedbacks'}\n\t\t\t\t<Feedbacks {feedbacks} />\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n{/if}\n"],"file":"_app/immutable/chunks/Ch5VB-J5.js"}