import{S as Me,i as Ae,s as Pe,H as he,I as _e,C as W,D as G,E as K,K as ge,q as B,r as N,F as q,k as ue,v as Le,e as w,t as x,l as V,c as v,a as $,b as M,d as u,p as U,f as h,g as C,h as f,G as te,j as A,y as Oe,u as xe,N as ct,x as dt,z as mt,A as pt,B as ht,M as _t,L as rt,J as gt,X as bt}from"./BsAB9Z30.js";import"./IHki7fMi.js";import{e as se,d as wt,c as vt,u as kt}from"./Px_ajtSr.js";import{t as Se}from"./DQjSdZ1e.js";import{a as Ne,s as yt,b as $t}from"./B26fW9V3.js";import{i as Et}from"./C06TgqeF.js";import{M as it}from"./C_R67QgC.js";import{L as It}from"./FMLTfk-j.js";import{X as ut}from"./CubwYUHd.js";import"./CgqN014N.js";import{b as Dt,c as Fe}from"./fl9Qo3pM.js";import{f as St}from"./g5t9vw8M.js";import{D as jt}from"./ozVhkuYd.js";import{G as Tt}from"./C-kqD5vK.js";import{P as Ct}from"./BrJK0JaC.js";import{T as Bt}from"./cMkWkffq.js";import{D as Vt}from"./5-chS5bE.js";import{S as Ut}from"./CbQmQGdd.js";import"./BYfvXhfD.js";import{T as Nt}from"./DmxdQp_j.js";import{K as Ft}from"./C6HpZrrV.js";const Dl=async(s,e)=>{let t=null;const l=await fetch(`${se}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify(e)}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(t=a.detail,null));if(t)throw t;return l},Sl=async(s="")=>{let e=null;const t=await fetch(`${se}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).then(l=>l).catch(l=>(e=l.detail,null));if(e)throw e;return t},Ot=async(s,e)=>{let t=null;const l=await fetch(`${se}/folders/${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).then(a=>a).catch(a=>(t=a.detail,null));if(t)throw t;return l},jl=async(s,e,t)=>{let l=null;const a=await fetch(`${se}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify(t)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(l=o.detail,null));if(l)throw l;return a},Tl=async(s,e,t)=>{let l=null;const a=await fetch(`${se}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify({is_expanded:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(l=o.detail,null));if(l)throw l;return a},Cl=async(s,e,t)=>{let l=null;const a=await fetch(`${se}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify({parent_id:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(l=o.detail,null));if(l)throw l;return a},Bl=async(s,e)=>{let t=null;const l=await fetch(`${se}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).then(a=>a).catch(a=>(t=a.detail,null));if(t)throw t;return l};function nt(s){var z;let e,t,l,a,o,n,r,i,g,_,E,m,c;function b(p,y){return p[2].share_id?Mt:xt}let S=b(s),j=S(s),k=((z=s[4])==null?void 0:z.features.enable_community_sharing)&&at(s);g=new It({});function O(p,y){return p[2].share_id?Pt:At}let d=O(s),T=d(s);return{c(){e=w("div"),t=w("div"),j.c(),l=V(),a=w("div"),o=w("div"),n=w("div"),k&&k.c(),r=V(),i=w("button"),W(g.$$.fragment),_=V(),T.c(),this.h()},l(p){e=v(p,"DIV",{class:!0});var y=$(e);t=v(y,"DIV",{class:!0});var Y=$(t);j.l(Y),Y.forEach(u),l=U(y),a=v(y,"DIV",{class:!0});var Q=$(a);o=v(Q,"DIV",{class:!0});var I=$(o);n=v(I,"DIV",{class:!0});var R=$(n);k&&k.l(R),r=U(R),i=v(R,"BUTTON",{class:!0,type:!0,id:!0});var J=$(i);G(g.$$.fragment,J),_=U(J),T.l(J),J.forEach(u),R.forEach(u),I.forEach(u),Q.forEach(u),y.forEach(u),this.h()},h(){h(t,"class","text-sm dark:text-gray-300 mb-1"),h(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),h(i,"type","button"),h(i,"id","copy-and-share-chat-button"),h(n,"class","flex gap-1"),h(o,"class","flex flex-col items-end space-x-1 mt-3"),h(a,"class","flex justify-end"),h(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(p,y){C(p,e,y),f(e,t),j.m(t,null),f(e,l),f(e,a),f(a,o),f(o,n),k&&k.m(n,null),f(n,r),f(n,i),K(g,i,null),f(i,_),T.m(i,null),E=!0,m||(c=te(i,"click",s[11]),m=!0)},p(p,y){var Y;S===(S=b(p))&&j?j.p(p,y):(j.d(1),j=S(p),j&&(j.c(),j.m(t,null))),(Y=p[4])!=null&&Y.features.enable_community_sharing?k?k.p(p,y):(k=at(p),k.c(),k.m(n,r)):k&&(k.d(1),k=null),d===(d=O(p))&&T?T.p(p,y):(T.d(1),T=d(p),T&&(T.c(),T.m(i,null)))},i(p){E||(B(g.$$.fragment,p),E=!0)},o(p){N(g.$$.fragment,p),E=!1},d(p){p&&u(e),j.d(),k&&k.d(),q(g),T.d(),m=!1,c()}}}function xt(s){let e=s[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",t;return{c(){t=x(e)},l(l){t=M(l,e)},m(l,a){C(l,t,a)},p(l,a){a&8&&e!==(e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&A(t,e)},d(l){l&&u(t)}}}function Mt(s){let e,t=s[3].t("You have shared this chat")+"",l,a,o,n=s[3].t("before")+"",r,i,g,_,E=s[3].t("Click here to")+"",m,c,b,S=s[3].t("delete this link")+"",j,k,O=s[3].t("and create a new shared link.")+"",d,T,z;return{c(){e=w("a"),l=x(t),a=V(),o=w("span"),r=x(n),i=x("."),_=V(),m=x(E),c=V(),b=w("button"),j=x(S),k=V(),d=x(O),this.h()},l(p){e=v(p,"A",{href:!0,target:!0});var y=$(e);l=M(y,t),a=U(y),o=v(y,"SPAN",{class:!0});var Y=$(o);r=M(Y,n),Y.forEach(u),i=M(y,"."),y.forEach(u),_=U(p),m=M(p,E),c=U(p),b=v(p,"BUTTON",{class:!0});var Q=$(b);j=M(Q,S),Q.forEach(u),k=U(p),d=M(p,O),this.h()},h(){h(o,"class","underline"),h(e,"href",g="/s/"+s[2].share_id),h(e,"target","_blank"),h(b,"class","underline")},m(p,y){C(p,e,y),f(e,l),f(e,a),f(e,o),f(o,r),f(e,i),C(p,_,y),C(p,m,y),C(p,c,y),C(p,b,y),f(b,j),C(p,k,y),C(p,d,y),T||(z=te(b,"click",s[9]),T=!0)},p(p,y){y&8&&t!==(t=p[3].t("You have shared this chat")+"")&&A(l,t),y&8&&n!==(n=p[3].t("before")+"")&&A(r,n),y&4&&g!==(g="/s/"+p[2].share_id)&&h(e,"href",g),y&8&&E!==(E=p[3].t("Click here to")+"")&&A(m,E),y&8&&S!==(S=p[3].t("delete this link")+"")&&A(j,S),y&8&&O!==(O=p[3].t("and create a new shared link.")+"")&&A(d,O)},d(p){p&&(u(e),u(_),u(m),u(c),u(b),u(k),u(d)),T=!1,z()}}}function at(s){let e,t=s[3].t("Share to Open WebUI Community")+"",l,a,o;return{c(){e=w("button"),l=x(t),this.h()},l(n){e=v(n,"BUTTON",{class:!0,type:!0});var r=$(e);l=M(r,t),r.forEach(u),this.h()},h(){h(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),h(e,"type","button")},m(n,r){C(n,e,r),f(e,l),a||(o=te(e,"click",s[10]),a=!0)},p(n,r){r&8&&t!==(t=n[3].t("Share to Open WebUI Community")+"")&&A(l,t)},d(n){n&&u(e),a=!1,o()}}}function At(s){let e=s[3].t("Copy Link")+"",t;return{c(){t=x(e)},l(l){t=M(l,e)},m(l,a){C(l,t,a)},p(l,a){a&8&&e!==(e=l[3].t("Copy Link")+"")&&A(t,e)},d(l){l&&u(t)}}}function Pt(s){let e=s[3].t("Update and Copy Link")+"",t;return{c(){t=x(e)},l(l){t=M(l,e)},m(l,a){C(l,t,a)},p(l,a){a&8&&e!==(e=l[3].t("Update and Copy Link")+"")&&A(t,e)},d(l){l&&u(t)}}}function Lt(s){let e,t,l,a=s[3].t("Share Chat")+"",o,n,r,i,g,_,E,m;i=new ut({props:{className:"size-5"}});let c=s[2]&&nt(s);return{c(){e=w("div"),t=w("div"),l=w("div"),o=x(a),n=V(),r=w("button"),W(i.$$.fragment),g=V(),c&&c.c(),this.h()},l(b){e=v(b,"DIV",{});var S=$(e);t=v(S,"DIV",{class:!0});var j=$(t);l=v(j,"DIV",{class:!0});var k=$(l);o=M(k,a),k.forEach(u),n=U(j),r=v(j,"BUTTON",{class:!0});var O=$(r);G(i.$$.fragment,O),O.forEach(u),j.forEach(u),g=U(S),c&&c.l(S),S.forEach(u),this.h()},h(){h(l,"class","text-lg font-medium self-center"),h(r,"class","self-center"),h(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(b,S){C(b,e,S),f(e,t),f(t,l),f(l,o),f(t,n),f(t,r),K(i,r,null),f(e,g),c&&c.m(e,null),_=!0,E||(m=te(r,"click",s[8]),E=!0)},p(b,S){(!_||S&8)&&a!==(a=b[3].t("Share Chat")+"")&&A(o,a),b[2]?c?(c.p(b,S),S&4&&B(c,1)):(c=nt(b),c.c(),B(c,1),c.m(e,null)):c&&(Oe(),N(c,1,1,()=>{c=null}),xe())},i(b){_||(B(i.$$.fragment,b),B(c),_=!0)},o(b){N(i.$$.fragment,b),N(c),_=!1},d(b){b&&u(e),q(i),c&&c.d(),E=!1,m()}}}function zt(s){let e,t,l;function a(n){s[12](n)}let o={size:"md",$$slots:{default:[Lt]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new it({props:o}),he.push(()=>_e(e,"show",a)),{c(){W(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,r){K(e,n,r),l=!0},p(n,[r]){const i={};r&65567&&(i.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,i.show=n[0],ge(()=>t=!1)),e.$set(i)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function Rt(s,e,t){let l,a,o;ue(s,wt,d=>t(14,l=d)),ue(s,vt,d=>t(4,o=d));let{chatId:n}=e,r=null,i=null;const g=Le("i18n");ue(s,g,d=>t(3,a=d));const _=async()=>{const d=await yt(localStorage.token,n);return i=`${window.location.origin}/s/${d.id}`,t(2,r=await Ne(localStorage.token,n)),i},E=async()=>{const d=r.chat;Se.success(a.t("Redirecting you to Open WebUI Community"));const T="https://openwebui.com",z=await window.open(`${T}/chats/upload`,"_blank");window.addEventListener("message",p=>{p.origin===T&&p.data==="loaded"&&z.postMessage(JSON.stringify({chat:d,models:l.filter(y=>d.models.includes(y.id))}),"*")},!1)};let{show:m=!1}=e;const c=d=>r?d?r.id!==d.id||r.share_id!==d.share_id:!1:!0,b=()=>{t(0,m=!1)},S=async()=>{await $t(localStorage.token,n)&&t(2,r=await Ne(localStorage.token,n))},j=()=>{E(),t(0,m=!1)},k=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const T=async()=>{const z=await _();return new Blob([z],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":T()})]).then(()=>!0).catch(z=>!1)}else Et(await _());Se.success(a.t("Copied shared chat URL to clipboard!")),t(0,m=!1)};function O(d){m=d,t(0,m)}return s.$$set=d=>{"chatId"in d&&t(1,n=d.chatId),"show"in d&&t(0,m=d.show)},s.$$.update=()=>{s.$$.dirty&7&&m&&(async()=>{if(n){const d=await Ne(localStorage.token,n);c(d)&&t(2,r=d)}else t(2,r=null)})()},[m,n,r,a,o,g,_,E,b,S,j,k,O]}class Vl extends Me{constructor(e){super(),Ae(this,e,Rt,zt,Pe,{chatId:1,show:0})}}function Jt(s){let e,t,l,a;const o=s[8].default,n=dt(o,s,s[15],null);return{c(){e=w("button"),n&&n.c()},l(r){e=v(r,"BUTTON",{});var i=$(e);n&&n.l(i),i.forEach(u)},m(r,i){C(r,e,i),n&&n.m(e,null),t=!0,l||(a=te(e,"click",s[12]),l=!0)},p(r,i){n&&n.p&&(!t||i&32768)&&mt(n,o,r,r[15],t?ht(o,r[15],i,null):pt(r[15]),null)},i(r){t||(B(n,r),t=!0)},o(r){N(n,r),t=!1},d(r){r&&u(e),n&&n.d(r),l=!1,a()}}}function Wt(s){let e,t;return e=new Bt({props:{content:s[5].t("More"),$$slots:{default:[Jt]},$$scope:{ctx:s}}}),{c(){W(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,a){K(e,l,a),t=!0},p(l,a){const o={};a&32&&(o.content=l[5].t("More")),a&32784&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Gt(s){let e,t,l,a=s[5].t("Edit")+"",o,n;return e=new Ct({}),{c(){W(e.$$.fragment),t=V(),l=w("div"),o=x(a),this.h()},l(r){G(e.$$.fragment,r),t=U(r),l=v(r,"DIV",{class:!0});var i=$(l);o=M(i,a),i.forEach(u),this.h()},h(){h(l,"class","flex items-center")},m(r,i){K(e,r,i),C(r,t,i),C(r,l,i),f(l,o),n=!0},p(r,i){(!n||i&32)&&a!==(a=r[5].t("Edit")+"")&&A(o,a)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){r&&(u(t),u(l)),q(e,r)}}}function Kt(s){let e,t,l,a=s[5].t("Export")+"",o,n;return e=new Vt({}),{c(){W(e.$$.fragment),t=V(),l=w("div"),o=x(a),this.h()},l(r){G(e.$$.fragment,r),t=U(r),l=v(r,"DIV",{class:!0});var i=$(l);o=M(i,a),i.forEach(u),this.h()},h(){h(l,"class","flex items-center")},m(r,i){K(e,r,i),C(r,t,i),C(r,l,i),f(l,o),n=!0},p(r,i){(!n||i&32)&&a!==(a=r[5].t("Export")+"")&&A(o,a)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){r&&(u(t),u(l)),q(e,r)}}}function qt(s){let e,t,l,a=s[5].t("Delete")+"",o,n;return e=new Tt({}),{c(){W(e.$$.fragment),t=V(),l=w("div"),o=x(a),this.h()},l(r){G(e.$$.fragment,r),t=U(r),l=v(r,"DIV",{class:!0});var i=$(l);o=M(i,a),i.forEach(u),this.h()},h(){h(l,"class","flex items-center")},m(r,i){K(e,r,i),C(r,t,i),C(r,l,i),f(l,o),n=!0},p(r,i){(!n||i&32)&&a!==(a=r[5].t("Delete")+"")&&A(o,a)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){r&&(u(t),u(l)),q(e,r)}}}function Yt(s){let e,t,l,a,o,n;return e=new Fe({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Gt]},$$scope:{ctx:s}}}),e.$on("click",s[9]),l=new Fe({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Kt]},$$scope:{ctx:s}}}),l.$on("click",s[10]),o=new Fe({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[qt]},$$scope:{ctx:s}}}),o.$on("click",s[11]),{c(){W(e.$$.fragment),t=V(),W(l.$$.fragment),a=V(),W(o.$$.fragment)},l(r){G(e.$$.fragment,r),t=U(r),G(l.$$.fragment,r),a=U(r),G(o.$$.fragment,r)},m(r,i){K(e,r,i),C(r,t,i),K(l,r,i),C(r,a,i),K(o,r,i),n=!0},p(r,i){const g={};i&32800&&(g.$$scope={dirty:i,ctx:r}),e.$set(g);const _={};i&32800&&(_.$$scope={dirty:i,ctx:r}),l.$set(_);const E={};i&32800&&(E.$$scope={dirty:i,ctx:r}),o.$set(E)},i(r){n||(B(e.$$.fragment,r),B(l.$$.fragment,r),B(o.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),N(l.$$.fragment,r),N(o.$$.fragment,r),n=!1},d(r){r&&(u(t),u(a)),q(e,r),q(l,r),q(o,r)}}}function Ht(s){let e,t,l;return t=new Dt({props:{class:"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800   z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:s[0],transition:St,$$slots:{default:[Yt]},$$scope:{ctx:s}}}),{c(){e=w("div"),W(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{slot:!0});var o=$(e);G(t.$$.fragment,o),o.forEach(u),this.h()},h(){h(e,"slot","content")},m(a,o){C(a,e,o),K(t,e,null),l=!0},p(a,o){const n={};o&1&&(n.align=a[0]),o&32814&&(n.$$scope={dirty:o,ctx:a}),t.$set(n)},i(a){l||(B(t.$$.fragment,a),l=!0)},o(a){N(t.$$.fragment,a),l=!1},d(a){a&&u(e),q(t)}}}function Xt(s){let e,t,l;function a(n){s[13](n)}let o={$$slots:{content:[Ht],default:[Wt]},$$scope:{ctx:s}};return s[4]!==void 0&&(o.show=s[4]),e=new jt({props:o}),he.push(()=>_e(e,"show",a)),e.$on("change",s[14]),{c(){W(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,r){K(e,n,r),l=!0},p(n,[r]){const i={};r&32831&&(i.$$scope={dirty:r,ctx:n}),!t&&r&16&&(t=!0,i.show=n[4],ge(()=>t=!1)),e.$set(i)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function Qt(s,e,t){let l,{$$slots:a={},$$scope:o}=e;const n=Le("i18n");ue(s,n,d=>t(5,l=d));const r=ct();let{align:i="start"}=e,{onEdit:g=()=>{}}=e,{onExport:_=()=>{}}=e,{onDelete:E=()=>{}}=e,m=!1;const c=()=>{g()},b=()=>{_()},S=()=>{E()},j=d=>{d.stopPropagation(),t(4,m=!m)};function k(d){m=d,t(4,m)}const O=d=>{d.detail===!1&&r("close")};return s.$$set=d=>{"align"in d&&t(0,i=d.align),"onEdit"in d&&t(1,g=d.onEdit),"onExport"in d&&t(2,_=d.onExport),"onDelete"in d&&t(3,E=d.onDelete),"$$scope"in d&&t(15,o=d.$$scope)},[i,g,_,E,m,l,n,r,a,c,b,S,j,k,O,o]}class Ul extends Me{constructor(e){super(),Ae(this,e,Qt,Xt,Pe,{align:0,onEdit:1,onExport:2,onDelete:3})}}function Zt(s){let e=s[6].t("Create Folder")+"",t;return{c(){t=x(e)},l(l){t=M(l,e)},m(l,a){C(l,t,a)},p(l,a){a&64&&e!==(e=l[6].t("Create Folder")+"")&&A(t,e)},d(l){l&&u(t)}}}function el(s){let e=s[6].t("Edit Folder")+"",t;return{c(){t=x(e)},l(l){t=M(l,e)},m(l,a){C(l,t,a)},p(l,a){a&64&&e!==(e=l[6].t("Edit Folder")+"")&&A(t,e)},d(l){l&&u(t)}}}function st(s){let e,t,l=s[6].t("System Prompt")+"",a,o,n,r,i,g;function _(m){s[16](m)}let E={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:s[6].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`),maxSize:200};return s[4].system_prompt!==void 0&&(E.value=s[4].system_prompt),r=new Nt({props:E}),he.push(()=>_e(r,"value",_)),{c(){e=w("div"),t=w("div"),a=x(l),o=V(),n=w("div"),W(r.$$.fragment),this.h()},l(m){e=v(m,"DIV",{class:!0});var c=$(e);t=v(c,"DIV",{class:!0});var b=$(t);a=M(b,l),b.forEach(u),o=U(c),n=v(c,"DIV",{});var S=$(n);G(r.$$.fragment,S),S.forEach(u),c.forEach(u),this.h()},h(){h(t,"class","mb-2 text-xs text-gray-500"),h(e,"class","my-1")},m(m,c){C(m,e,c),f(e,t),f(t,a),f(e,o),f(e,n),K(r,n,null),g=!0},p(m,c){(!g||c&64)&&l!==(l=m[6].t("System Prompt")+"")&&A(a,l);const b={};c&64&&(b.placeholder=m[6].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`)),!i&&c&16&&(i=!0,b.value=m[4].system_prompt,ge(()=>i=!1)),r.$set(b)},i(m){g||(B(r.$$.fragment,m),g=!0)},o(m){N(r.$$.fragment,m),g=!1},d(m){m&&u(e),q(r)}}}function tl(s){let e,t,l,a=s[6].t("Knowledge")+"",o;return{c(){e=w("div"),t=w("div"),l=w("div"),o=x(a),this.h()},l(n){e=v(n,"DIV",{slot:!0});var r=$(e);t=v(r,"DIV",{class:!0});var i=$(t);l=v(i,"DIV",{class:!0});var g=$(l);o=M(g,a),g.forEach(u),i.forEach(u),r.forEach(u),this.h()},h(){h(l,"class","mb-2 text-xs text-gray-500"),h(t,"class","flex w-full justify-between"),h(e,"slot","label")},m(n,r){C(n,e,r),f(e,t),f(t,l),f(l,o)},p(n,r){r&64&&a!==(a=n[6].t("Knowledge")+"")&&A(o,a)},d(n){n&&u(e)}}}function ot(s){let e,t,l;return t=new Ut({}),{c(){e=w("div"),W(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var o=$(e);G(t.$$.fragment,o),o.forEach(u),this.h()},h(){h(e,"class","ml-2 self-center")},m(a,o){C(a,e,o),K(t,e,null),l=!0},i(a){l||(B(t.$$.fragment,a),l=!0)},o(a){N(t.$$.fragment,a),l=!1},d(a){a&&u(e),q(t)}}}function ll(s){var We,Ge,Ke,qe;let e,t,l,a,o,n,r,i,g,_,E,m,c=s[6].t("Folder Name")+"",b,S,j,k,O,d,T,z,p,y,Y=s[6].t("Folder Background Image")+"",Q,I,R,J,le,ae=((((We=s[3])==null?void 0:We.background_image_url)??null)===null?s[6].t("Upload"):s[6].t("Reset"))+"",be,je,we,Te,ve,oe,re,Ce,Be,ie,X,fe=s[6].t("Save")+"",ke,Ve,ye,Z,Ue,ze;function Re(D,F){return D[1]?el:Zt}let $e=Re(s),ee=$e(s);n=new ut({props:{className:"size-5"}});let P=(((Ge=s[7])==null?void 0:Ge.role)==="admin"||(((qe=(Ke=s[7])==null?void 0:Ke.permissions.chat)==null?void 0:qe.system_prompt)??!0))&&st(s);function ft(D){s[17](D)}let Je={$$slots:{label:[tl]},$$scope:{ctx:s}};s[4].files!==void 0&&(Je.selectedItems=s[4].files),re=new Ft({props:Je}),he.push(()=>_e(re,"selectedItems",ft));let L=s[5]&&ot();return{c(){e=w("div"),t=w("div"),l=w("div"),ee.c(),a=V(),o=w("button"),W(n.$$.fragment),r=V(),i=w("div"),g=w("div"),_=w("form"),E=w("div"),m=w("div"),b=x(c),S=V(),j=w("div"),k=w("input"),d=V(),T=w("input"),z=V(),p=w("div"),y=w("div"),Q=x(Y),I=V(),R=w("div"),J=w("button"),le=w("span"),be=x(ae),je=V(),we=w("hr"),Te=V(),P&&P.c(),ve=V(),oe=w("div"),W(re.$$.fragment),Be=V(),ie=w("div"),X=w("button"),ke=x(fe),Ve=V(),L&&L.c(),this.h()},l(D){e=v(D,"DIV",{});var F=$(e);t=v(F,"DIV",{class:!0});var ne=$(t);l=v(ne,"DIV",{class:!0});var ce=$(l);ee.l(ce),ce.forEach(u),a=U(ne),o=v(ne,"BUTTON",{class:!0});var de=$(o);G(n.$$.fragment,de),de.forEach(u),ne.forEach(u),r=U(F),i=v(F,"DIV",{class:!0});var me=$(i);g=v(me,"DIV",{class:!0});var pe=$(g);_=v(pe,"FORM",{class:!0});var H=$(_);E=v(H,"DIV",{class:!0});var Ee=$(E);m=v(Ee,"DIV",{class:!0});var Ye=$(m);b=M(Ye,c),Ye.forEach(u),S=U(Ee),j=v(Ee,"DIV",{class:!0});var He=$(j);k=v(He,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0,autocomplete:!0}),He.forEach(u),Ee.forEach(u),d=U(H),T=v(H,"INPUT",{id:!0,type:!0,accept:!0}),z=U(H),p=v(H,"DIV",{class:!0});var Ie=$(p);y=v(Ie,"DIV",{class:!0});var Xe=$(y);Q=M(Xe,Y),Xe.forEach(u),I=U(Ie),R=v(Ie,"DIV",{class:!0});var Qe=$(R);J=v(Qe,"BUTTON",{"aria-labelledby":!0,class:!0,type:!0});var Ze=$(J);le=v(Ze,"SPAN",{class:!0,id:!0});var et=$(le);be=M(et,ae),et.forEach(u),Ze.forEach(u),Qe.forEach(u),Ie.forEach(u),je=U(H),we=v(H,"HR",{class:!0}),Te=U(H),P&&P.l(H),ve=U(H),oe=v(H,"DIV",{class:!0});var tt=$(oe);G(re.$$.fragment,tt),tt.forEach(u),Be=U(H),ie=v(H,"DIV",{class:!0});var lt=$(ie);X=v(lt,"BUTTON",{class:!0,type:!0});var De=$(X);ke=M(De,fe),Ve=U(De),L&&L.l(De),De.forEach(u),lt.forEach(u),H.forEach(u),pe.forEach(u),me.forEach(u),F.forEach(u),this.h()},h(){h(l,"class","text-lg font-medium self-center"),h(o,"class","self-center"),h(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),h(m,"class","mb-1 text-xs text-gray-500"),h(k,"id","folder-name"),h(k,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),h(k,"type","text"),h(k,"placeholder",O=s[6].t("Enter folder name")),h(k,"autocomplete","off"),h(j,"class","flex-1"),h(E,"class","flex flex-col w-full mt-1"),h(T,"id","folder-background-image-input"),h(T,"type","file"),T.hidden=!0,h(T,"accept","image/*"),h(y,"class","text-xs text-gray-500"),h(le,"class","ml-2 self-center"),h(le,"id","background-image-url-state"),h(J,"aria-labelledby","chat-background-label background-image-url-state"),h(J,"class","p-1 px-3 text-xs flex rounded-sm transition"),h(J,"type","button"),h(R,"class",""),h(p,"class","flex justify-between w-full mt-1 items-center"),h(we,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),h(oe,"class","my-2"),h(X,"class",ye="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(s[5]?" cursor-not-allowed":"")),h(X,"type","submit"),X.disabled=s[5],h(ie,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),h(_,"class","flex flex-col w-full"),h(g,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),h(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(D,F){C(D,e,F),f(e,t),f(t,l),ee.m(l,null),f(t,a),f(t,o),K(n,o,null),f(e,r),f(e,i),f(i,g),f(g,_),f(_,E),f(E,m),f(m,b),f(E,S),f(E,j),f(j,k),rt(k,s[2]),f(_,d),f(_,T),f(_,z),f(_,p),f(p,y),f(y,Q),f(p,I),f(p,R),f(R,J),f(J,le),f(le,be),f(_,je),f(_,we),f(_,Te),P&&P.m(_,null),f(_,ve),f(_,oe),K(re,oe,null),f(_,Be),f(_,ie),f(ie,X),f(X,ke),f(X,Ve),L&&L.m(X,null),Z=!0,Ue||(ze=[te(o,"click",s[12]),te(k,"input",s[13]),te(T,"change",s[14]),te(J,"click",s[15]),te(_,"submit",gt(s[18]))],Ue=!0)},p(D,F){var ce,de,me,pe;$e===($e=Re(D))&&ee?ee.p(D,F):(ee.d(1),ee=$e(D),ee&&(ee.c(),ee.m(l,null))),(!Z||F&64)&&c!==(c=D[6].t("Folder Name")+"")&&A(b,c),(!Z||F&64&&O!==(O=D[6].t("Enter folder name")))&&h(k,"placeholder",O),F&4&&k.value!==D[2]&&rt(k,D[2]),(!Z||F&64)&&Y!==(Y=D[6].t("Folder Background Image")+"")&&A(Q,Y),(!Z||F&72)&&ae!==(ae=((((ce=D[3])==null?void 0:ce.background_image_url)??null)===null?D[6].t("Upload"):D[6].t("Reset"))+"")&&A(be,ae),((de=D[7])==null?void 0:de.role)==="admin"||(((pe=(me=D[7])==null?void 0:me.permissions.chat)==null?void 0:pe.system_prompt)??!0)?P?(P.p(D,F),F&128&&B(P,1)):(P=st(D),P.c(),B(P,1),P.m(_,ve)):P&&(Oe(),N(P,1,1,()=>{P=null}),xe());const ne={};F&8388672&&(ne.$$scope={dirty:F,ctx:D}),!Ce&&F&16&&(Ce=!0,ne.selectedItems=D[4].files,ge(()=>Ce=!1)),re.$set(ne),(!Z||F&64)&&fe!==(fe=D[6].t("Save")+"")&&A(ke,fe),D[5]?L?F&32&&B(L,1):(L=ot(),L.c(),B(L,1),L.m(X,null)):L&&(Oe(),N(L,1,1,()=>{L=null}),xe()),(!Z||F&32&&ye!==(ye="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(D[5]?" cursor-not-allowed":"")))&&h(X,"class",ye),(!Z||F&32)&&(X.disabled=D[5])},i(D){Z||(B(n.$$.fragment,D),B(P),B(re.$$.fragment,D),B(L),Z=!0)},o(D){N(n.$$.fragment,D),N(P),N(re.$$.fragment,D),N(L),Z=!1},d(D){D&&u(e),ee.d(),q(n),P&&P.d(),q(re),L&&L.d(),Ue=!1,bt(ze)}}}function rl(s){let e,t,l;function a(n){s[19](n)}let o={size:"md",$$slots:{default:[ll]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new it({props:o}),he.push(()=>_e(e,"show",a)),{c(){W(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,r){K(e,n,r),l=!0},p(n,[r]){const i={};r&8388863&&(i.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,i.show=n[0],ge(()=>t=!1)),e.$set(i)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function nl(s,e,t){let l,a;ue(s,kt,I=>t(7,a=I));const o=Le("i18n");ue(s,o,I=>t(6,l=I));let{show:n=!1}=e,{onSubmit:r=I=>{}}=e,{folderId:i=null}=e,{edit:g=!1}=e,_=null,E="",m={background_image_url:null},c={system_prompt:"",files:[]},b=!1;const S=async()=>{if(t(5,b=!0),((c==null?void 0:c.files)??[]).some(I=>I.status==="uploading")){Se.error(l.t("Please wait until all files are uploaded.")),t(5,b=!1);return}await r({name:E,meta:m,data:c}),t(0,n=!1),t(5,b=!1)},j=async()=>{i&&(_=await Ot(localStorage.token,i).catch(I=>(Se.error(`${I}`),null)),t(2,E=_.name),t(3,m=_.meta||{background_image_url:null}),t(4,c=_.data||{system_prompt:"",files:[]})),k()},k=async()=>{await _t();const I=document.getElementById("folder-name");I&&(I.focus(),I.select())},O=()=>{t(0,n=!1)};function d(){E=this.value,t(2,E),t(0,n),t(1,g)}const T=I=>{const R=I.target.files;let J=new FileReader;J.onload=le=>{let ae=`${le.target.result}`;t(3,m.background_image_url=ae,m)},R&&R.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(R[0].type)?J.readAsDataURL(R[0]):(`${R[0].type}`,I.target.value="")},z=()=>{if((m==null?void 0:m.background_image_url)!==null)t(3,m.background_image_url=null,m);else{const I=document.getElementById("folder-background-image-input");I&&I.click()}};function p(I){s.$$.not_equal(c.system_prompt,I)&&(c.system_prompt=I,t(4,c),t(0,n),t(1,g))}function y(I){s.$$.not_equal(c.files,I)&&(c.files=I,t(4,c),t(0,n),t(1,g))}const Y=()=>{S()};function Q(I){n=I,t(0,n)}return s.$$set=I=>{"show"in I&&t(0,n=I.show),"onSubmit"in I&&t(10,r=I.onSubmit),"folderId"in I&&t(11,i=I.folderId),"edit"in I&&t(1,g=I.edit)},s.$$.update=()=>{s.$$.dirty&1&&n&&j(),s.$$.dirty&3&&!n&&!g&&(t(2,E=""),t(3,m={background_image_url:null}),t(4,c={system_prompt:"",files:[]}))},[n,g,E,m,c,b,l,a,o,S,r,i,O,d,T,z,p,y,Y,Q]}class Nl extends Me{constructor(e){super(),Ae(this,e,nl,rl,Pe,{show:0,onSubmit:10,folderId:11,edit:1})}}export{Nl as F,Vl as S,Ul as a,Tl as b,Cl as c,Bl as d,Sl as e,Dl as f,Ot as g,jl as u};
//# sourceMappingURL=8FeVl3bP.js.map
