{"version":3,"file":"COKWU28c.js","sources":["../../../../../../src/lib/components/chat/Messages/RateComment.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/WebSearchResults.svelte","../../../../../../src/lib/components/chat/Messages/Error.svelte","../../../../../../src/lib/components/chat/Messages/Citations/CitationModal.svelte","../../../../../../src/lib/components/chat/Messages/Citations.svelte","../../../../../../src/lib/components/chat/Messages/CodeExecutionModal.svelte","../../../../../../src/lib/components/chat/Messages/CodeExecutions.svelte","../../../../../../src/lib/components/chat/ContentRenderer/FloatingButtons.svelte","../../../../../../src/lib/components/chat/Messages/ContentRenderer.svelte","../../../../../../src/lib/workers/KokoroWorker.ts","../../../../../../src/lib/components/chat/Messages/ResponseMessage/FollowUps.svelte","../../../../../../src/lib/components/icons/LineSpace.svelte","../../../../../../src/lib/components/icons/LineSpaceSmaller.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/RegenerateMenu.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/StatusHistory/StatusItem.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/StatusHistory.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage.svelte","../../../../../../src/lib/components/icons/Merge.svelte","../../../../../../src/lib/components/chat/Messages/MultiResponseMessages.svelte","../../../../../../src/lib/components/chat/Messages/UserMessage.svelte","../../../../../../src/lib/components/chat/Messages/Message.svelte","../../../../../../src/lib/components/chat/Suggestions.svelte","../../../../../../src/lib/components/chat/ChatPlaceholder.svelte","../../../../../../src/lib/components/chat/Messages.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\n\timport { config, models } from '$lib/stores';\n\timport Tags from '$lib/components/common/Tags.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let message;\n\texport let show = false;\n\n\tlet LIKE_REASONS = [\n\t\t'accurate_information',\n\t\t'followed_instructions_perfectly',\n\t\t'showcased_creativity',\n\t\t'positive_attitude',\n\t\t'attention_to_detail',\n\t\t'thorough_explanation',\n\t\t'other'\n\t];\n\tlet DISLIKE_REASONS = [\n\t\t'dont_like_the_style',\n\t\t'too_verbose',\n\t\t'not_helpful',\n\t\t'not_factually_correct',\n\t\t'didnt_fully_follow_instructions',\n\t\t'refused_when_it_shouldnt_have',\n\t\t'being_lazy',\n\t\t'other'\n\t];\n\n\tlet tags = [];\n\n\tlet reasons = [];\n\tlet selectedReason = null;\n\tlet comment = '';\n\n\tlet detailedRating = null;\n\tlet selectedModel = null;\n\n\t$: if (message?.annotation?.rating === 1) {\n\t\treasons = LIKE_REASONS;\n\t} else if (message?.annotation?.rating === -1) {\n\t\treasons = DISLIKE_REASONS;\n\t}\n\n\t$: if (message) {\n\t\tinit();\n\t}\n\n\tconst init = () => {\n\t\tif (!selectedReason) {\n\t\t\tselectedReason = message?.annotation?.reason ?? '';\n\t\t}\n\n\t\tif (!comment) {\n\t\t\tcomment = message?.annotation?.comment ?? '';\n\t\t}\n\n\t\ttags = (message?.annotation?.tags ?? []).map((tag) => ({\n\t\t\tname: tag\n\t\t}));\n\n\t\tif (!detailedRating) {\n\t\t\tdetailedRating = message?.annotation?.details?.rating ?? null;\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tif (message?.arena) {\n\t\t\tselectedModel = $models.find((m) => m.id === message.selectedModelId);\n\t\t\ttoast.success(\n\t\t\t\t$i18n.t('This response was generated by \"{{model}}\"', {\n\t\t\t\t\tmodel: selectedModel ? (selectedModel?.name ?? selectedModel.id) : message.selectedModelId\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tconst saveHandler = () => {\n\t\tconsole.log('saveHandler');\n\t\t// if (!selectedReason) {\n\t\t// \ttoast.error($i18n.t('Please select a reason'));\n\t\t// \treturn;\n\t\t// }\n\n\t\tdispatch('save', {\n\t\t\treason: selectedReason,\n\t\t\tcomment: comment,\n\t\t\ttags: tags.map((tag) => tag.name),\n\t\t\tdetails: {\n\t\t\t\trating: detailedRating\n\t\t\t}\n\t\t});\n\n\t\ttoast.success($i18n.t('Thanks for your feedback!'));\n\t\tshow = false;\n\t};\n</script>\n\n{#if message?.arena}\n\t<div class=\"text-xs font-medium pt-1.5 -mb-0.5\">\n\t\t{$i18n.t('This response was generated by \"{{model}}\"', {\n\t\t\tmodel: selectedModel ? (selectedModel?.name ?? selectedModel.id) : message.selectedModelId\n\t\t})}\n\t</div>\n{/if}\n\n<div\n\tclass=\" my-2.5 rounded-xl px-4 py-3 border border-gray-100 dark:border-gray-850\"\n\tid=\"message-feedback-{message.id}\"\n>\n\t<div class=\"flex justify-between items-center\">\n\t\t<div class=\"text-sm font-medium\">{$i18n.t('How would you rate this response?')}</div>\n\n\t\t<!-- <div class=\" text-sm\">{$i18n.t('Tell us more:')}</div> -->\n\n\t\t<button\n\t\t\ton:click={() => {\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t<XMark className={'size-4'} />\n\t\t</button>\n\t</div>\n\n\t<div class=\"w-full flex justify-center\">\n\t\t<div class=\" relative w-fit overflow-x-auto scrollbar-none\">\n\t\t\t<div class=\"mt-1.5 w-fit flex gap-1 pb-2\">\n\t\t\t\t<!-- 1-10 scale -->\n\t\t\t\t{#each Array.from({ length: 10 }).map((_, i) => i + 1) as rating}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 {detailedRating ===\n\t\t\t\t\t\trating\n\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t: ''} transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tdetailedRating = rating;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={message?.annotation?.rating === -1 ? rating > 5 : rating < 6}\n\t\t\t\t\t>\n\t\t\t\t\t\t{rating}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\n\t\t\t<div class=\"sticky top-0 bottom-0 left-0 right-0 flex justify-between text-xs\">\n\t\t\t\t<div>\n\t\t\t\t\t1 - {$i18n.t('Awful')}\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t10 - {$i18n.t('Amazing')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div>\n\t\t{#if reasons.length > 0}\n\t\t\t<div class=\"text-sm mt-1.5 font-medium\">{$i18n.t('Why?')}</div>\n\n\t\t\t<div class=\"flex flex-wrap gap-1.5 text-sm mt-1.5\">\n\t\t\t\t{#each reasons as reason}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 {selectedReason ===\n\t\t\t\t\t\treason\n\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t: ''} transition rounded-xl\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedReason = reason;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if reason === 'accurate_information'}\n\t\t\t\t\t\t\t{$i18n.t('Accurate information')}\n\t\t\t\t\t\t{:else if reason === 'followed_instructions_perfectly'}\n\t\t\t\t\t\t\t{$i18n.t('Followed instructions perfectly')}\n\t\t\t\t\t\t{:else if reason === 'showcased_creativity'}\n\t\t\t\t\t\t\t{$i18n.t('Showcased creativity')}\n\t\t\t\t\t\t{:else if reason === 'positive_attitude'}\n\t\t\t\t\t\t\t{$i18n.t('Positive attitude')}\n\t\t\t\t\t\t{:else if reason === 'attention_to_detail'}\n\t\t\t\t\t\t\t{$i18n.t('Attention to detail')}\n\t\t\t\t\t\t{:else if reason === 'thorough_explanation'}\n\t\t\t\t\t\t\t{$i18n.t('Thorough explanation')}\n\t\t\t\t\t\t{:else if reason === 'dont_like_the_style'}\n\t\t\t\t\t\t\t{$i18n.t(\"Don't like the style\")}\n\t\t\t\t\t\t{:else if reason === 'too_verbose'}\n\t\t\t\t\t\t\t{$i18n.t('Too verbose')}\n\t\t\t\t\t\t{:else if reason === 'not_helpful'}\n\t\t\t\t\t\t\t{$i18n.t('Not helpful')}\n\t\t\t\t\t\t{:else if reason === 'not_factually_correct'}\n\t\t\t\t\t\t\t{$i18n.t('Not factually correct')}\n\t\t\t\t\t\t{:else if reason === 'didnt_fully_follow_instructions'}\n\t\t\t\t\t\t\t{$i18n.t(\"Didn't fully follow instructions\")}\n\t\t\t\t\t\t{:else if reason === 'refused_when_it_shouldnt_have'}\n\t\t\t\t\t\t\t{$i18n.t(\"Refused when it shouldn't have\")}\n\t\t\t\t\t\t{:else if reason === 'being_lazy'}\n\t\t\t\t\t\t\t{$i18n.t('Being lazy')}\n\t\t\t\t\t\t{:else if reason === 'other'}\n\t\t\t\t\t\t\t{$i18n.t('Other')}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{reason}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<div class=\"mt-2\">\n\t\t<textarea\n\t\t\tbind:value={comment}\n\t\t\tclass=\"w-full text-sm px-1 py-2 bg-transparent outline-hidden resize-none rounded-xl\"\n\t\t\tplaceholder={$i18n.t('Feel free to add specific details')}\n\t\t\trows=\"3\"\n\t\t/>\n\t</div>\n\n\t<div class=\"mt-2 gap-1.5 flex justify-between\">\n\t\t<div class=\"flex items-end group\">\n\t\t\t<Tags\n\t\t\t\t{tags}\n\t\t\t\ton:delete={(e) => {\n\t\t\t\t\ttags = tags.filter(\n\t\t\t\t\t\t(tag) =>\n\t\t\t\t\t\t\ttag.name.replaceAll(' ', '_').toLowerCase() !==\n\t\t\t\t\t\t\te.detail.replaceAll(' ', '_').toLowerCase()\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\ton:add={(e) => {\n\t\t\t\t\ttags = [...tags, { name: e.detail }];\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\n\t\t<button\n\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\ton:click={() => {\n\t\t\t\tsaveHandler();\n\t\t\t}}\n\t\t>\n\t\t\t{$i18n.t('Save')}\n\t\t</button>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\timport Collapsible from '$lib/components/common/Collapsible.svelte';\n\n\texport let status = { urls: [], query: '' };\n\tlet state = false;\n</script>\n\n<Collapsible grow={true} className=\"w-full\" buttonClassName=\"w-full\" bind:open={state}>\n\t<div class=\"flex items-center gap-2 text-gray-500 transition\">\n\t\t<slot />\n\t\t{#if state}\n\t\t\t<ChevronUp strokeWidth=\"2.5\" className=\"size-3.5 \" />\n\t\t{:else}\n\t\t\t<ChevronDown strokeWidth=\"2.5\" className=\"size-3.5 \" />\n\t\t{/if}\n\t</div>\n\n\t<div\n\t\tclass=\"text-sm border border-gray-50 dark:border-gray-850 rounded-xl my-1.5 p-2 w-full\"\n\t\tslot=\"content\"\n\t>\n\t\t{#if status?.query}\n\t\t\t<a\n\t\t\t\thref=\"https://www.google.com/search?q={status.query}\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tclass=\"flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 font-normal! no-underline!\"\n\t\t\t>\n\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t<Search />\n\n\t\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t\t{status.query}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t>\n\t\t\t\t\t<!--  -->\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t{/if}\n\n\t\t{#if status?.items}\n\t\t\t{#each status.items as item, itemIdx}\n\t\t\t\t<a\n\t\t\t\t\thref={item.link}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 rounded-lg font-normal! no-underline! mb-1\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" flex justify-center items-center gap-3\">\n\t\t\t\t\t\t<div class=\"w-fit\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc=\"https://www.google.com/s2/favicons?sz=32&domain={item.link}\"\n\t\t\t\t\t\t\t\talt=\"favicon\"\n\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"w-full text-sm line-clamp-1\">\n\t\t\t\t\t\t\t{item?.title ?? item.link}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!--  -->\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t{/each}\n\t\t{:else if status?.urls}\n\t\t\t{#each status.urls as url, urlIdx}\n\t\t\t\t<a\n\t\t\t\t\thref={url}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 rounded-lg no-underline mb-1\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" flex justify-center items-center gap-3\">\n\t\t\t\t\t\t<div class=\"w-fit\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc=\"https://www.google.com/s2/favicons?sz=32&domain={url}\"\n\t\t\t\t\t\t\t\talt=\"favicon\"\n\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"w-full text-sm line-clamp-1\">\n\t\t\t\t\t\t\t{url}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!--  -->\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n</Collapsible>\n","<script lang=\"ts\">\n\timport Info from '$lib/components/icons/Info.svelte';\n\n\texport let content = '';\n</script>\n\n<div class=\"flex my-2 gap-2.5 border px-4 py-3 border-red-600/10 bg-red-600/10 rounded-lg\">\n\t<div class=\" self-start mt-0.5\">\n\t\t<Info className=\"size-5 text-red-700 dark:text-red-400\" />\n\t</div>\n\n\t<div class=\" self-center text-sm\">\n\t\t{#if typeof content === 'string'}\n\t\t\t{content}\n\t\t{:else if typeof content === 'object' && content !== null}\n\t\t\t{#if content?.error && content?.error?.message}\n\t\t\t\t{content.error.message}\n\t\t\t{:else if content?.detail}\n\t\t\t\t{content.detail}\n\t\t\t{:else if content?.message}\n\t\t\t\t{content.message}\n\t\t\t{:else}\n\t\t\t\t{JSON.stringify(content)}\n\t\t\t{/if}\n\t\t{:else}\n\t\t\t{JSON.stringify(content)}\n\t\t{/if}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { getContext, onMount, tick } from 'svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let citation;\n\texport let showPercentage = false;\n\texport let showRelevance = true;\n\n\tlet mergedDocuments = [];\n\n\tfunction calculatePercentage(distance: number) {\n\t\tif (typeof distance !== 'number') return null;\n\t\tif (distance < 0) return 0;\n\t\tif (distance > 1) return 100;\n\t\treturn Math.round(distance * 10000) / 100;\n\t}\n\n\tfunction getRelevanceColor(percentage: number) {\n\t\tif (percentage >= 80)\n\t\t\treturn 'bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200';\n\t\tif (percentage >= 60)\n\t\t\treturn 'bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200';\n\t\tif (percentage >= 40)\n\t\t\treturn 'bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200';\n\t\treturn 'bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200';\n\t}\n\n\t$: if (citation) {\n\t\tmergedDocuments = citation.document?.map((c, i) => {\n\t\t\treturn {\n\t\t\t\tsource: citation.source,\n\t\t\t\tdocument: c,\n\t\t\t\tmetadata: citation.metadata?.[i],\n\t\t\t\tdistance: citation.distances?.[i]\n\t\t\t};\n\t\t});\n\t\tif (mergedDocuments.every((doc) => doc.distance !== undefined)) {\n\t\t\tmergedDocuments = mergedDocuments.sort(\n\t\t\t\t(a, b) => (b.distance ?? Infinity) - (a.distance ?? Infinity)\n\t\t\t);\n\t\t}\n\t}\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n<Modal size=\"lg\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-4.5 pt-3 pb-2\">\n\t\t\t<div class=\" text-lg font-medium self-center flex items-center\">\n\t\t\t\t{#if citation?.source?.name}\n\t\t\t\t\t{@const document = mergedDocuments?.[0]}\n\t\t\t\t\t{#if document?.metadata?.file_id || document.source?.url?.includes('http')}\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tclassName=\"w-fit\"\n\t\t\t\t\t\t\tcontent={document.source?.url?.includes('http')\n\t\t\t\t\t\t\t\t? $i18n.t('Open link')\n\t\t\t\t\t\t\t\t: $i18n.t('Open file')}\n\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\ttippyOptions={{ duration: [500, 0] }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclass=\"hover:text-gray-500 dark:hover:text-gray-100 underline grow line-clamp-1\"\n\t\t\t\t\t\t\t\thref={document?.metadata?.file_id\n\t\t\t\t\t\t\t\t\t? `${WEBUI_API_BASE_URL}/files/${document?.metadata?.file_id}/content${document?.metadata?.page !== undefined ? `#page=${document.metadata.page + 1}` : ''}`\n\t\t\t\t\t\t\t\t\t: document.source?.url?.includes('http')\n\t\t\t\t\t\t\t\t\t\t? document.source.url\n\t\t\t\t\t\t\t\t\t\t: `#`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{decodeString(citation?.source?.name)}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{decodeString(citation?.source?.name)}\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t{$i18n.t('Citation')}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-5'} />\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-5 md:space-x-4\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-thin gap-1\"\n\t\t\t>\n\t\t\t\t{#each mergedDocuments as document, documentIdx}\n\t\t\t\t\t<div class=\"flex flex-col w-full gap-2\">\n\t\t\t\t\t\t{#if document.metadata?.parameters}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm font-medium dark:text-gray-300 mb-1\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('Parameters')}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<Textarea readonly value={JSON.stringify(document.metadata.parameters, null, 2)}\n\t\t\t\t\t\t\t\t></Textarea>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" text-sm font-medium dark:text-gray-300 flex items-center gap-2 w-fit mb-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Content')}\n\n\t\t\t\t\t\t\t\t{#if showRelevance && document.distance !== undefined}\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-fit\"\n\t\t\t\t\t\t\t\t\t\tcontent={$i18n.t('Relevance')}\n\t\t\t\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\t\t\t\ttippyOptions={{ duration: [500, 0] }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm my-1 dark:text-gray-400 flex items-center gap-2 w-fit\">\n\t\t\t\t\t\t\t\t\t\t\t{#if showPercentage}\n\t\t\t\t\t\t\t\t\t\t\t\t{@const percentage = calculatePercentage(document.distance)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{#if typeof percentage === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`px-1 rounded-sm font-medium ${getRelevanceColor(percentage)}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{percentage.toFixed(2)}%\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t{:else if typeof document?.distance === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-gray-500 dark:text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t({(document?.distance ?? 0).toFixed(4)})\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if Number.isInteger(document?.metadata?.page)}\n\t\t\t\t\t\t\t\t\t<span class=\"text-sm text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t({$i18n.t('page')}\n\t\t\t\t\t\t\t\t\t\t{document.metadata.page + 1})\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{#if document.metadata?.html}\n\t\t\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\t\t\tclass=\"w-full border-0 h-auto rounded-none\"\n\t\t\t\t\t\t\t\t\tsandbox=\"allow-scripts allow-forms allow-same-origin\"\n\t\t\t\t\t\t\t\t\tsrcdoc={document.document}\n\t\t\t\t\t\t\t\t\ttitle={$i18n.t('Content')}\n\t\t\t\t\t\t\t\t></iframe>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<pre class=\"text-sm dark:text-gray-400 whitespace-pre-line\">\n                {document.document}\n              </pre>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport CitationModal from './Citations/CitationModal.svelte';\n\timport { embed, showControls, showEmbeds } from '$lib/stores';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = '';\n\texport let sources = [];\n\texport let readOnly = false;\n\n\tlet citations = [];\n\tlet showPercentage = false;\n\tlet showRelevance = true;\n\n\tlet citationModal = null;\n\n\tlet showCitations = false;\n\tlet showCitationModal = false;\n\n\tlet selectedCitation: any = null;\n\n\texport const showSourceModal = (sourceIdx) => {\n\t\tif (citations[sourceIdx]) {\n\t\t\tconsole.log('Showing citation modal for:', citations[sourceIdx]);\n\n\t\t\tif (citations[sourceIdx]?.source?.embed_url) {\n\t\t\t\tconst embedUrl = citations[sourceIdx].source.embed_url;\n\t\t\t\tif (embedUrl) {\n\t\t\t\t\tif (readOnly) {\n\t\t\t\t\t\t// Open in new tab if readOnly\n\t\t\t\t\t\twindow.open(embedUrl, '_blank');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowControls.set(true);\n\t\t\t\t\t\tshowEmbeds.set(true);\n\t\t\t\t\t\tembed.set({\n\t\t\t\t\t\t\ttitle: citations[sourceIdx]?.source?.name || 'Embedded Content',\n\t\t\t\t\t\t\turl: embedUrl\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tselectedCitation = citations[sourceIdx];\n\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tselectedCitation = citations[sourceIdx];\n\t\t\t\tshowCitationModal = true;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction calculateShowRelevance(sources: any[]) {\n\t\tconst distances = sources.flatMap((citation) => citation.distances ?? []);\n\t\tconst inRange = distances.filter((d) => d !== undefined && d >= -1 && d <= 1).length;\n\t\tconst outOfRange = distances.filter((d) => d !== undefined && (d < -1 || d > 1)).length;\n\n\t\tif (distances.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t(inRange === distances.length - 1 && outOfRange === 1) ||\n\t\t\t(outOfRange === distances.length - 1 && inRange === 1)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction shouldShowPercentage(sources: any[]) {\n\t\tconst distances = sources.flatMap((citation) => citation.distances ?? []);\n\t\treturn distances.every((d) => d !== undefined && d >= -1 && d <= 1);\n\t}\n\n\t$: {\n\t\tcitations = sources.reduce((acc, source) => {\n\t\t\tif (Object.keys(source).length === 0) {\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tsource?.document?.forEach((document, index) => {\n\t\t\t\tconst metadata = source?.metadata?.[index];\n\t\t\t\tconst distance = source?.distances?.[index];\n\n\t\t\t\t// Within the same citation there could be multiple documents\n\t\t\t\tconst id = metadata?.source ?? source?.source?.id ?? 'N/A';\n\t\t\t\tlet _source = source?.source;\n\n\t\t\t\tif (metadata?.name) {\n\t\t\t\t\t_source = { ..._source, name: metadata.name };\n\t\t\t\t}\n\n\t\t\t\tif (id.startsWith('http://') || id.startsWith('https://')) {\n\t\t\t\t\t_source = { ..._source, name: id, url: id };\n\t\t\t\t}\n\n\t\t\t\tconst existingSource = acc.find((item) => item.id === id);\n\n\t\t\t\tif (existingSource) {\n\t\t\t\t\texistingSource.document.push(document);\n\t\t\t\t\texistingSource.metadata.push(metadata);\n\t\t\t\t\tif (distance !== undefined) existingSource.distances.push(distance);\n\t\t\t\t} else {\n\t\t\t\t\tacc.push({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tsource: _source,\n\t\t\t\t\t\tdocument: [document],\n\t\t\t\t\t\tmetadata: metadata ? [metadata] : [],\n\t\t\t\t\t\tdistances: distance !== undefined ? [distance] : undefined\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn acc;\n\t\t}, []);\n\t\tconsole.log('citations', citations);\n\n\t\tshowRelevance = calculateShowRelevance(citations);\n\t\tshowPercentage = shouldShowPercentage(citations);\n\t}\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n<CitationModal\n\tbind:show={showCitationModal}\n\tcitation={selectedCitation}\n\t{showPercentage}\n\t{showRelevance}\n/>\n\n{#if citations.length > 0}\n\t{@const urlCitations = citations.filter((c) => c?.source?.name?.startsWith('http'))}\n\t<div class=\" py-1 -mx-0.5 w-full flex gap-1 items-center flex-wrap\">\n\t\t<button\n\t\t\tclass=\"text-xs font-medium text-gray-600 dark:text-gray-300 px-3.5 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition flex items-center gap-1 border border-gray-50 dark:border-gray-850\"\n\t\t\ton:click={() => {\n\t\t\t\tshowCitations = !showCitations;\n\t\t\t}}\n\t\t>\n\t\t\t{#if urlCitations.length > 0}\n\t\t\t\t<div class=\"flex -space-x-1 items-center\">\n\t\t\t\t\t{#each urlCitations.slice(0, 3) as citation, idx}\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://www.google.com/s2/favicons?sz=32&domain={citation.source.name}\"\n\t\t\t\t\t\t\talt=\"favicon\"\n\t\t\t\t\t\t\tclass=\"size-4 rounded-full shrink-0 border border-white dark:border-gray-850 bg-white dark:bg-gray-900\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<div>\n\t\t\t\t{#if citations.length === 1}\n\t\t\t\t\t{$i18n.t('1 Source')}\n\t\t\t\t{:else}\n\t\t\t\t\t{$i18n.t('{{COUNT}} Sources', {\n\t\t\t\t\t\tCOUNT: citations.length\n\t\t\t\t\t})}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</button>\n\t</div>\n{/if}\n\n{#if showCitations}\n\t<div class=\"py-1.5\">\n\t\t<div class=\"text-xs gap-2 flex flex-col\">\n\t\t\t{#each citations as citation, idx}\n\t\t\t\t<button\n\t\t\t\t\tid={`source-${id}-${idx + 1}`}\n\t\t\t\t\tclass=\"no-toggle outline-hidden flex dark:text-gray-300 bg-transparent text-gray-600 rounded-xl gap-1.5 items-center\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t\t\tselectedCitation = citation;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" font-medium bg-gray-50 dark:bg-gray-850 rounded-md px-1\">\n\t\t\t\t\t\t{idx + 1}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 truncate hover:text-black dark:text-white/60 dark:hover:text-white transition text-left\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{decodeString(citation.source.name)}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport CodeBlock from './CodeBlock.svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Badge from '$lib/components/common/Badge.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let codeExecution = null;\n</script>\n\n<Modal size=\"lg\" bind:show>\n\t<div>\n\t\t<div class=\"flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\"text-lg font-medium self-center flex flex-col gap-0.5 capitalize\">\n\t\t\t\t{#if codeExecution?.result}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if codeExecution.result?.error}\n\t\t\t\t\t\t\t<Badge type=\"error\" content=\"error\" />\n\t\t\t\t\t\t{:else if codeExecution.result?.output}\n\t\t\t\t\t\t\t<Badge type=\"success\" content=\"success\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Badge type=\"warning\" content=\"incomplete\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t{#if !codeExecution?.result}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if codeExecution?.name}\n\t\t\t\t\t\t\t{$i18n.t('Code execution')}: {codeExecution?.name}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{$i18n.t('Code execution')}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t\tcodeExecution = null;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-5'} />\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-4 pb-5\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden\"\n\t\t\t>\n\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t<CodeBlock\n\t\t\t\t\t\tid=\"code-exec-{codeExecution?.id}-code\"\n\t\t\t\t\t\tlang={codeExecution?.language ?? ''}\n\t\t\t\t\t\tcode={codeExecution?.code ?? ''}\n\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\teditorClassName={codeExecution?.result &&\n\t\t\t\t\t\t(codeExecution?.result?.error || codeExecution?.result?.output)\n\t\t\t\t\t\t\t? 'rounded-b-none'\n\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\trun={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{#if codeExecution?.result && (codeExecution?.result?.error || codeExecution?.result?.output)}\n\t\t\t\t\t<div class=\"dark:bg-[#202123] dark:text-white px-4 py-4 rounded-b-lg flex flex-col gap-3\">\n\t\t\t\t\t\t{#if codeExecution?.result?.error}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-xs mb-1\">{$i18n.t('ERROR')}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm\">{codeExecution?.result?.error}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if codeExecution?.result?.output}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-xs mb-1\">{$i18n.t('OUTPUT')}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm\">{codeExecution?.result?.output}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if codeExecution?.result?.files && codeExecution?.result?.files.length > 0}\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<hr class=\"border-gray-100 dark:border-gray-850 my-2\" />\n\t\t\t\t\t\t<div class=\" text-sm font-medium dark:text-gray-300\">\n\t\t\t\t\t\t\t{$i18n.t('Files')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul class=\"mt-1 list-disc pl-4 text-xs\">\n\t\t\t\t\t\t\t{#each codeExecution?.result?.files as file}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href={file.url} target=\"_blank\">{file.name}</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport CodeExecutionModal from './CodeExecutionModal.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Check from '$lib/components/icons/Check.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport EllipsisHorizontal from '$lib/components/icons/EllipsisHorizontal.svelte';\n\n\texport let codeExecutions = [];\n\n\tlet selectedCodeExecution = null;\n\tlet showCodeExecutionModal = false;\n\n\t$: if (codeExecutions) {\n\t\tupdateSelectedCodeExecution();\n\t}\n\n\tconst updateSelectedCodeExecution = () => {\n\t\tif (selectedCodeExecution) {\n\t\t\tselectedCodeExecution = codeExecutions.find(\n\t\t\t\t(execution) => execution.id === selectedCodeExecution.id\n\t\t\t);\n\t\t}\n\t};\n</script>\n\n<CodeExecutionModal bind:show={showCodeExecutionModal} codeExecution={selectedCodeExecution} />\n\n{#if codeExecutions.length > 0}\n\t<div class=\"mt-1 mb-2 w-full flex gap-1 items-center flex-wrap\">\n\t\t{#each codeExecutions as execution (execution.id)}\n\t\t\t<div class=\"flex gap-1 text-xs font-semibold\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex dark:text-gray-300 py-1 px-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-xl max-w-96\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tselectedCodeExecution = execution;\n\t\t\t\t\t\tshowCodeExecutionModal = true;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"bg-white dark:bg-gray-700 rounded-full size-4 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if execution?.result}\n\t\t\t\t\t\t\t{#if execution.result?.error}\n\t\t\t\t\t\t\t\t<XMark />\n\t\t\t\t\t\t\t{:else if execution.result?.output}\n\t\t\t\t\t\t\t\t<Check strokeWidth=\"3\" className=\"size-3\" />\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<EllipsisHorizontal />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 mx-2 line-clamp-1 code-execution-name {execution?.result ? '' : 'pulse'}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{execution.name}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n{/if}\n\n<style>\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.6;\n\t\t}\n\t}\n\n\t.pulse {\n\t\topacity: 1;\n\t\tanimation: pulse 1.5s ease;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport DOMPurify from 'dompurify';\n\timport { marked } from 'marked';\n\n\timport { getContext, tick, onDestroy } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { chatCompletion } from '$lib/apis/openai';\n\n\timport ChatBubble from '$lib/components/icons/ChatBubble.svelte';\n\timport LightBulb from '$lib/components/icons/LightBulb.svelte';\n\timport Markdown from '../Messages/Markdown.svelte';\n\timport Skeleton from '../Messages/Skeleton.svelte';\n\timport { chatId, models, socket } from '$lib/stores';\n\n\texport let id = '';\n\texport let messageId = '';\n\n\texport let model = null;\n\texport let messages = [];\n\texport let actions = [];\n\texport let onAdd = (e) => {};\n\n\tlet floatingInput = false;\n\tlet selectedAction = null;\n\n\tlet selectedText = '';\n\tlet floatingInputValue = '';\n\n\tlet content = '';\n\tlet responseContent = null;\n\tlet responseDone = false;\n\tlet controller = null;\n\n\t$: if (actions.length === 0) {\n\t\tactions = DEFAULT_ACTIONS;\n\t}\n\n\tconst DEFAULT_ACTIONS = [\n\t\t{\n\t\t\tid: 'ask',\n\t\t\tlabel: $i18n.t('Ask'),\n\t\t\ticon: ChatBubble,\n\t\t\tinput: true,\n\t\t\tprompt: `{{SELECTED_CONTENT}}\\n\\n\\n{{INPUT_CONTENT}}`\n\t\t},\n\t\t{\n\t\t\tid: 'explain',\n\t\t\tlabel: $i18n.t('Explain'),\n\t\t\ticon: LightBulb,\n\t\t\tprompt: `{{SELECTED_CONTENT}}\\n\\n\\n${$i18n.t('Explain')}`\n\t\t}\n\t];\n\n\tconst autoScroll = async () => {\n\t\tconst responseContainer = document.getElementById('response-container');\n\t\tif (responseContainer) {\n\t\t\t// Scroll to bottom only if the scroll is at the bottom give 50px buffer\n\t\t\tif (\n\t\t\t\tresponseContainer.scrollHeight - responseContainer.clientHeight <=\n\t\t\t\tresponseContainer.scrollTop + 50\n\t\t\t) {\n\t\t\t\tresponseContainer.scrollTop = responseContainer.scrollHeight;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst actionHandler = async (actionId) => {\n\t\tif (!model) {\n\t\t\ttoast.error($i18n.t('Model not selected'));\n\t\t\treturn;\n\t\t}\n\n\t\tlet selectedContent = selectedText\n\t\t\t.split('\\n')\n\t\t\t.map((line) => `> ${line}`)\n\t\t\t.join('\\n');\n\n\t\tlet selectedAction = actions.find((action) => action.id === actionId);\n\t\tif (!selectedAction) {\n\t\t\ttoast.error($i18n.t('Action not found'));\n\t\t\treturn;\n\t\t}\n\n\t\tlet prompt = selectedAction?.prompt ?? '';\n\t\tlet toolIds = [];\n\n\t\t// Handle: {{variableId|tool:id=\"toolId\"}} pattern\n\t\t// This regex captures variableId and toolId from {{variableId|tool:id=\"toolId\"}}\n\t\tconst varToolPattern = /\\{\\{(.*?)\\|tool:id=\"([^\"]+)\"\\}\\}/g;\n\t\tprompt = prompt.replace(varToolPattern, (match, variableId, toolId) => {\n\t\t\ttoolIds.push(toolId);\n\t\t\treturn variableId; // Replace with just variableId\n\t\t});\n\n\t\t// legacy {{TOOL:toolId}} pattern (for backward compatibility)\n\t\tlet toolIdPattern = /\\{\\{TOOL:([^\\}]+)\\}\\}/g;\n\t\tlet match;\n\t\twhile ((match = toolIdPattern.exec(prompt)) !== null) {\n\t\t\ttoolIds.push(match[1]);\n\t\t}\n\n\t\t// Remove all TOOL placeholders from the prompt\n\t\tprompt = prompt.replace(toolIdPattern, '');\n\n\t\tif (prompt.includes('{{INPUT_CONTENT}}') && floatingInput) {\n\t\t\tprompt = prompt.replace('{{INPUT_CONTENT}}', floatingInputValue);\n\t\t\tfloatingInputValue = '';\n\t\t}\n\n\t\tprompt = prompt.replace('{{CONTENT}}', selectedText);\n\t\tprompt = prompt.replace('{{SELECTED_CONTENT}}', selectedContent);\n\n\t\tcontent = prompt;\n\t\tresponseContent = '';\n\n\t\tlet res;\n\t\t[res, controller] = await chatCompletion(localStorage.token, {\n\t\t\tmodel: model,\n\t\t\tmodel_item: $models.find((m) => m.id === model),\n\t\t\tsession_id: $socket?.id,\n\t\t\tchat_id: $chatId,\n\t\t\tmessages: [\n\t\t\t\t...messages,\n\t\t\t\t{\n\t\t\t\t\trole: 'user',\n\t\t\t\t\tcontent: content\n\t\t\t\t}\n\t\t\t].map((message) => ({\n\t\t\t\trole: message.role,\n\t\t\t\tcontent: message.content\n\t\t\t})),\n\t\t\t...(toolIds.length > 0\n\t\t\t\t? {\n\t\t\t\t\t\ttool_ids: toolIds\n\t\t\t\t\t\t// params: {\n\t\t\t\t\t\t// \tfunction_calling: 'native'\n\t\t\t\t\t\t// }\n\t\t\t\t\t}\n\t\t\t\t: {}),\n\n\t\t\tstream: true // Enable streaming\n\t\t});\n\n\t\tif (res && res.ok) {\n\t\t\tconst reader = res.body.getReader();\n\t\t\tconst decoder = new TextDecoder();\n\n\t\t\tconst processStream = async () => {\n\t\t\t\twhile (true) {\n\t\t\t\t\t// Read data chunks from the response stream\n\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Decode the received chunk\n\t\t\t\t\tconst chunk = decoder.decode(value, { stream: true });\n\n\t\t\t\t\t// Process lines within the chunk\n\t\t\t\t\tconst lines = chunk.split('\\n').filter((line) => line.trim() !== '');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line.startsWith('data: ')) {\n\t\t\t\t\t\t\tif (line.startsWith('data: [DONE]')) {\n\t\t\t\t\t\t\t\tresponseDone = true;\n\n\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Parse the JSON chunk\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst data = JSON.parse(line.slice(6));\n\n\t\t\t\t\t\t\t\t\t// Append the `content` field from the \"choices\" object\n\t\t\t\t\t\t\t\t\tif (data.choices && data.choices[0]?.delta?.content) {\n\t\t\t\t\t\t\t\t\t\tresponseContent += data.choices[0].delta.content;\n\n\t\t\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Process the stream in the background\n\t\t\ttry {\n\t\t\t\tawait processStream();\n\t\t\t} catch (e) {\n\t\t\t\tif (e.name !== 'AbortError') {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\ttoast.error($i18n.t('An error occurred while fetching the explanation'));\n\t\t}\n\t};\n\n\tconst addHandler = async () => {\n\t\tconst messages = [\n\t\t\t{\n\t\t\t\trole: 'user',\n\t\t\t\tcontent: content\n\t\t\t},\n\t\t\t{\n\t\t\t\trole: 'assistant',\n\t\t\t\tcontent: responseContent\n\t\t\t}\n\t\t];\n\n\t\tonAdd({\n\t\t\tmodelId: model,\n\t\t\tparentId: messageId,\n\t\t\tmessages: messages\n\t\t});\n\t};\n\n\texport const closeHandler = () => {\n\t\tif (controller) {\n\t\t\tcontroller.abort();\n\t\t}\n\n\t\tselectedAction = null;\n\t\tselectedText = '';\n\t\tresponseContent = null;\n\t\tresponseDone = false;\n\t\tfloatingInput = false;\n\t\tfloatingInputValue = '';\n\t};\n\n\tonDestroy(() => {\n\t\tif (controller) {\n\t\t\tcontroller.abort();\n\t\t}\n\t});\n</script>\n\n<div\n\tid={`floating-buttons-${id}`}\n\tclass=\"absolute rounded-lg mt-1 text-xs z-9999\"\n\tstyle=\"display: none\"\n>\n\t{#if responseContent === null}\n\t\t{#if !floatingInput}\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-row shrink-0 p-0.5 bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-xl shadow-xl border border-gray-100 dark:border-gray-800\"\n\t\t\t>\n\t\t\t\t{#each actions as action}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"px-1.5 py-[1px] hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl flex items-center gap-1 min-w-fit transition\"\n\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\tselectedText = window.getSelection().toString();\n\t\t\t\t\t\t\tselectedAction = action;\n\n\t\t\t\t\t\t\tif (action.prompt.includes('{{INPUT_CONTENT}}')) {\n\t\t\t\t\t\t\t\tfloatingInput = true;\n\t\t\t\t\t\t\t\tfloatingInputValue = '';\n\n\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tconst input = document.getElementById('floating-message-input');\n\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tactionHandler(action.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if action.icon}\n\t\t\t\t\t\t\t<svelte:component this={action.icon} className=\"size-3 shrink-0\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t<div class=\"shrink-0\">{action.label}</div>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div\n\t\t\t\tclass=\"py-1 flex dark:text-gray-100 bg-white dark:bg-gray-850 border border-gray-100 dark:border-gray-800 w-72 rounded-full shadow-xl\"\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"floating-message-input\"\n\t\t\t\t\tclass=\"ml-5 bg-transparent outline-hidden w-full flex-1 text-sm\"\n\t\t\t\t\tplaceholder={$i18n.t('Ask a question')}\n\t\t\t\t\tbind:value={floatingInputValue}\n\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tactionHandler(selectedAction?.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"ml-1 mr-1\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"{floatingInputValue !== ''\n\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1.5 m-0.5 self-center\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tactionHandler(selectedAction?.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div\n\t\t\tclass=\"bg-white dark:bg-gray-850 dark:text-gray-100 rounded-3xl shadow-xl w-80 max-w-full border border-gray-100 dark:border-gray-800\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-3xl px-3.5 pt-3 w-full\"\n\t\t\t>\n\t\t\t\t<div class=\"font-medium\">\n\t\t\t\t\t<Markdown id={`${id}-float-prompt`} {content} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-4xl w-full\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\" max-h-80 overflow-y-auto w-full markdown-prose-xs px-3.5 py-3\"\n\t\t\t\t\tid=\"response-container\"\n\t\t\t\t>\n\t\t\t\t\t{#if !responseContent || responseContent?.trim() === ''}\n\t\t\t\t\t\t<Skeleton size=\"sm\" />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Markdown id={`${id}-float-response`} content={responseContent} />\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if responseDone}\n\t\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\t\t\t\t\t\ton:click={addHandler}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Add')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</div>\n","<script>\n\timport { onDestroy, onMount, tick, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport Markdown from './Markdown.svelte';\n\timport {\n\t\tartifactCode,\n\t\tchatId,\n\t\tmobile,\n\t\tsettings,\n\t\tshowArtifacts,\n\t\tshowControls,\n\t\tshowEmbeds,\n\t\tshowOverview\n\t} from '$lib/stores';\n\timport FloatingButtons from '../ContentRenderer/FloatingButtons.svelte';\n\timport { createMessagesList } from '$lib/utils';\n\n\texport let id;\n\texport let content;\n\n\texport let history;\n\texport let messageId;\n\n\texport let selectedModels = [];\n\n\texport let done = true;\n\texport let model = null;\n\texport let sources = null;\n\n\texport let save = false;\n\texport let preview = false;\n\texport let floatingButtons = true;\n\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\texport let onSave = (e) => {};\n\texport let onSourceClick = (e) => {};\n\texport let onTaskClick = (e) => {};\n\texport let onAddMessages = (e) => {};\n\n\tlet contentContainerElement;\n\tlet floatingButtonsElement;\n\n\tconst updateButtonPosition = (event) => {\n\t\tconst buttonsContainerElement = document.getElementById(`floating-buttons-${id}`);\n\t\tif (\n\t\t\t!contentContainerElement?.contains(event.target) &&\n\t\t\t!buttonsContainerElement?.contains(event.target)\n\t\t) {\n\t\t\tcloseFloatingButtons();\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(async () => {\n\t\t\tawait tick();\n\n\t\t\tif (!contentContainerElement?.contains(event.target)) return;\n\n\t\t\tlet selection = window.getSelection();\n\n\t\t\tif (selection.toString().trim().length > 0) {\n\t\t\t\tconst range = selection.getRangeAt(0);\n\t\t\t\tconst rect = range.getBoundingClientRect();\n\n\t\t\t\tconst parentRect = contentContainerElement.getBoundingClientRect();\n\n\t\t\t\t// Adjust based on parent rect\n\t\t\t\tconst top = rect.bottom - parentRect.top;\n\t\t\t\tconst left = rect.left - parentRect.left;\n\n\t\t\t\tif (buttonsContainerElement) {\n\t\t\t\t\tbuttonsContainerElement.style.display = 'block';\n\n\t\t\t\t\t// Calculate space available on the right\n\t\t\t\t\tconst spaceOnRight = parentRect.width - left;\n\t\t\t\t\tlet halfScreenWidth = $mobile ? window.innerWidth / 2 : window.innerWidth / 3;\n\n\t\t\t\t\tif (spaceOnRight < halfScreenWidth) {\n\t\t\t\t\t\tconst right = parentRect.right - rect.right;\n\t\t\t\t\t\tbuttonsContainerElement.style.right = `${right}px`;\n\t\t\t\t\t\tbuttonsContainerElement.style.left = 'auto'; // Reset left\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Enough space, position using 'left'\n\t\t\t\t\t\tbuttonsContainerElement.style.left = `${left}px`;\n\t\t\t\t\t\tbuttonsContainerElement.style.right = 'auto'; // Reset right\n\t\t\t\t\t}\n\t\t\t\t\tbuttonsContainerElement.style.top = `${top + 5}px`; // +5 to add some spacing\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloseFloatingButtons();\n\t\t\t}\n\t\t}, 0);\n\t};\n\n\tconst closeFloatingButtons = () => {\n\t\tconst buttonsContainerElement = document.getElementById(`floating-buttons-${id}`);\n\t\tif (buttonsContainerElement) {\n\t\t\tbuttonsContainerElement.style.display = 'none';\n\t\t}\n\n\t\tif (floatingButtonsElement) {\n\t\t\t// check if closeHandler is defined\n\n\t\t\tif (typeof floatingButtonsElement?.closeHandler === 'function') {\n\t\t\t\t// call the closeHandler function\n\t\t\t\tfloatingButtonsElement?.closeHandler();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst keydownHandler = (e) => {\n\t\tif (e.key === 'Escape') {\n\t\t\tcloseFloatingButtons();\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tif (floatingButtons) {\n\t\t\tcontentContainerElement?.addEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.addEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.addEventListener('keydown', keydownHandler);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (floatingButtons) {\n\t\t\tcontentContainerElement?.removeEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.removeEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.removeEventListener('keydown', keydownHandler);\n\t\t}\n\t});\n</script>\n\n<div bind:this={contentContainerElement}>\n\t<Markdown\n\t\t{id}\n\t\t{content}\n\t\t{model}\n\t\t{save}\n\t\t{preview}\n\t\t{done}\n\t\t{editCodeBlock}\n\t\t{topPadding}\n\t\tsourceIds={(sources ?? []).reduce((acc, source) => {\n\t\t\tlet ids = [];\n\t\t\tsource.document.forEach((document, index) => {\n\t\t\t\tif (model?.info?.meta?.capabilities?.citations == false) {\n\t\t\t\t\tids.push('N/A');\n\t\t\t\t\treturn ids;\n\t\t\t\t}\n\n\t\t\t\tconst metadata = source.metadata?.[index];\n\t\t\t\tconst id = metadata?.source ?? 'N/A';\n\n\t\t\t\tif (metadata?.name) {\n\t\t\t\t\tids.push(metadata.name);\n\t\t\t\t\treturn ids;\n\t\t\t\t}\n\n\t\t\t\tif (id.startsWith('http://') || id.startsWith('https://')) {\n\t\t\t\t\tids.push(id);\n\t\t\t\t} else {\n\t\t\t\t\tids.push(source?.source?.name ?? id);\n\t\t\t\t}\n\n\t\t\t\treturn ids;\n\t\t\t});\n\n\t\t\tacc = [...acc, ...ids];\n\n\t\t\t// remove duplicates\n\t\t\treturn acc.filter((item, index) => acc.indexOf(item) === index);\n\t\t}, [])}\n\t\t{onSourceClick}\n\t\t{onTaskClick}\n\t\t{onSave}\n\t\tonUpdate={(token) => {\n\t\t\tconst { lang, text: code } = token;\n\n\t\t\tif (\n\t\t\t\t($settings?.detectArtifacts ?? true) &&\n\t\t\t\t(['html', 'svg'].includes(lang) || (lang === 'xml' && code.includes('svg'))) &&\n\t\t\t\t!$mobile &&\n\t\t\t\t$chatId\n\t\t\t) {\n\t\t\t\tshowArtifacts.set(true);\n\t\t\t\tshowControls.set(true);\n\t\t\t}\n\t\t}}\n\t\tonPreview={async (value) => {\n\t\t\tconsole.log('Preview', value);\n\t\t\tawait artifactCode.set(value);\n\t\t\tawait showControls.set(true);\n\t\t\tawait showArtifacts.set(true);\n\t\t\tawait showOverview.set(false);\n\t\t\tawait showEmbeds.set(false);\n\t\t}}\n\t/>\n</div>\n\n{#if floatingButtons && model}\n\t<FloatingButtons\n\t\tbind:this={floatingButtonsElement}\n\t\t{id}\n\t\t{messageId}\n\t\tactions={$settings?.floatingActionButtons ?? []}\n\t\tmodel={(selectedModels ?? []).includes(model?.id)\n\t\t\t? model?.id\n\t\t\t: (selectedModels ?? []).length > 0\n\t\t\t\t? selectedModels.at(0)\n\t\t\t\t: model?.id}\n\t\tmessages={createMessagesList(history, messageId)}\n\t\tonAdd={({ modelId, parentId, messages }) => {\n\t\t\tconsole.log(modelId, parentId, messages);\n\t\t\tonAddMessages({ modelId, parentId, messages });\n\t\t\tcloseFloatingButtons();\n\t\t}}\n\t/>\n{/if}\n","import WorkerInstance from '$lib/workers/kokoro.worker?worker';\n\nexport class KokoroWorker {\n\tprivate worker: Worker | null = null;\n\tprivate initialized: boolean = false;\n\tprivate dtype: string;\n\tprivate requestQueue: Array<{\n\t\ttext: string;\n\t\tvoice: string;\n\t\tresolve: (value: string) => void;\n\t\treject: (reason: any) => void;\n\t}> = [];\n\tprivate processing = false; // To track if a request is being processed\n\n\tconstructor(dtype: string = 'fp32') {\n\t\tthis.dtype = dtype;\n\t}\n\n\tpublic async init() {\n\t\tif (this.worker) {\n\t\t\tconsole.warn('KokoroWorker is already initialized.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.worker = new WorkerInstance();\n\n\t\t// Handle worker messages\n\t\tthis.worker.onmessage = (event) => {\n\t\t\tconst { status, error, audioUrl } = event.data;\n\n\t\t\tif (status === 'init:complete') {\n\t\t\t\tthis.initialized = true;\n\t\t\t} else if (status === 'init:error') {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.initialized = false;\n\t\t\t} else if (status === 'generate:complete') {\n\t\t\t\t// Resolve promise from queue\n\t\t\t\tconst request = this.requestQueue.shift();\n\t\t\t\tif (request) {\n\t\t\t\t\trequest.resolve(audioUrl);\n\t\t\t\t\tthis.processNextRequest(); // Process next request in queue\n\t\t\t\t}\n\t\t\t} else if (status === 'generate:error') {\n\t\t\t\tconst request = this.requestQueue.shift();\n\t\t\t\tif (request) {\n\t\t\t\t\trequest.reject(new Error(error));\n\t\t\t\t\tthis.processNextRequest(); // Continue processing next in queue\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tthis.worker!.postMessage({\n\t\t\t\ttype: 'init',\n\t\t\t\tpayload: { dtype: this.dtype }\n\t\t\t});\n\n\t\t\tconst handleMessage = (event: MessageEvent) => {\n\t\t\t\tif (event.data.status === 'init:complete') {\n\t\t\t\t\tthis.worker!.removeEventListener('message', handleMessage);\n\t\t\t\t\tthis.initialized = true;\n\t\t\t\t\tresolve();\n\t\t\t\t} else if (event.data.status === 'init:error') {\n\t\t\t\t\tthis.worker!.removeEventListener('message', handleMessage);\n\t\t\t\t\treject(new Error(event.data.error));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.worker!.addEventListener('message', handleMessage);\n\t\t});\n\t}\n\n\tpublic async generate({ text, voice }: { text: string; voice: string }): Promise<string> {\n\t\tif (!this.initialized || !this.worker) {\n\t\t\tthrow new Error('KokoroTTS Worker is not initialized yet.');\n\t\t}\n\n\t\treturn new Promise<string>((resolve, reject) => {\n\t\t\tthis.requestQueue.push({ text, voice, resolve, reject });\n\t\t\tif (!this.processing) {\n\t\t\t\tthis.processNextRequest();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate processNextRequest() {\n\t\tif (this.requestQueue.length === 0) {\n\t\t\tthis.processing = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.processing = true;\n\t\tconst { text, voice } = this.requestQueue[0]; // Get first request but don't remove yet\n\t\tthis.worker!.postMessage({ type: 'generate', payload: { text, voice } });\n\t}\n\n\tpublic terminate() {\n\t\tif (this.worker) {\n\t\t\tthis.worker.terminate();\n\t\t\tthis.worker = null;\n\t\t\tthis.initialized = false;\n\t\t\tthis.requestQueue = [];\n\t\t\tthis.processing = false;\n\t\t}\n\t}\n}\n","<script lang=\"ts\">\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { onMount, tick, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let followUps: string[] = [];\n\texport let onClick: (followUp: string) => void = () => {};\n</script>\n\n<div class=\"mt-4\">\n\t<div class=\"text-sm font-medium\">\n\t\t{$i18n.t('Follow up')}\n\t</div>\n\n\t<div class=\"flex flex-col text-left gap-1 mt-1.5\">\n\t\t{#each followUps as followUp, idx (idx)}\n\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t<Tooltip content={followUp} placement=\"top-start\" className=\"line-clamp-1\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\" py-1.5 bg-transparent text-left text-sm flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition cursor-pointer\"\n\t\t\t\t\ton:click={() => onClick(followUp)}\n\t\t\t\t\taria-label={followUp}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"line-clamp-1\">\n\t\t\t\t\t\t{followUp}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Tooltip>\n\n\t\t\t{#if idx < followUps.length - 1}\n\t\t\t\t<hr class=\"border-gray-50 dark:border-gray-850\" />\n\t\t\t{/if}\n\t\t{/each}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n\t><path d=\"M11 6H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M11 12H21\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path d=\"M11 18H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M5 19V5M5 19L3 16.5M5 19L7 16.5M5 5L3 7M5 5L7 7\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path></svg\n>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path d=\"M11 6H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M11 12H21\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path>\n\t<path d=\"M11 18H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M5 19V5M5 10L3 8M5 10L7 8M5 14L3 16M5 14L7 16\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext } from 'svelte';\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport LineSpace from '$lib/components/icons/LineSpace.svelte';\n\timport LineSpaceSmaller from '$lib/components/icons/LineSpaceSmaller.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let onRegenerate: Function = (prompt = null) => {};\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n\tlet inputValue = '';\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n\talign=\"end\"\n>\n\t<slot></slot>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[200px] rounded-2xl px-1 py-1 border border-gray-100 dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg transition\"\n\t\t\tsideOffset={-2}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<div class=\"py-1.5 px-2.5 flex dark:text-gray-100\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"floating-message-input\"\n\t\t\t\t\tclass=\"bg-transparent outline-hidden w-full flex-1 text-sm\"\n\t\t\t\t\tplaceholder={$i18n.t('Suggest a change')}\n\t\t\t\t\tbind:value={inputValue}\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tonRegenerate(inputValue);\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"ml-2 self-center flex items-center\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"{inputValue !== ''\n\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1 self-center\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tonRegenerate(inputValue);\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<hr class=\"border-gray-50 dark:border-gray-800 my-1 mx-2\" />\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonRegenerate();\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Try Again')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonRegenerate($i18n.t('Add Details'));\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<LineSpace strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Add Details')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonRegenerate($i18n.t('More Concise'));\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<LineSpaceSmaller strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('More Concise')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script>\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\timport WebSearchResults from '../WebSearchResults.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\timport { t } from 'i18next';\n\n\texport let status = null;\n\texport let done = false;\n</script>\n\n{#if !status?.hidden}\n\t<div class=\"status-description flex items-center gap-2 py-0.5 w-full text-left\">\n\t\t{#if status?.action === 'web_search' && (status?.urls || status?.items)}\n\t\t\t<WebSearchResults {status}>\n\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t\t: ''} text-base line-clamp-1 text-wrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- $i18n.t(\"Generating search query\") -->\n\t\t\t\t\t\t<!-- $i18n.t(\"No search query generated\") -->\n\t\t\t\t\t\t<!-- $i18n.t('Searched {{count}} sites') -->\n\t\t\t\t\t\t{#if status?.description?.includes('{{count}}')}\n\t\t\t\t\t\t\t{$i18n.t(status?.description, {\n\t\t\t\t\t\t\t\tcount: (status?.urls || status?.items).length\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t{:else if status?.description === 'No search query generated'}\n\t\t\t\t\t\t\t{$i18n.t('No search query generated')}\n\t\t\t\t\t\t{:else if status?.description === 'Generating search query'}\n\t\t\t\t\t\t\t{$i18n.t('Generating search query')}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</WebSearchResults>\n\t\t{:else if status?.action === 'knowledge_search'}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{$i18n.t(`Searching Knowledge for \"{{searchQuery}}\"`, {\n\t\t\t\t\t\tsearchQuery: status.query\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if status?.action === 'web_search_queries_generated' && status?.queries}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{$i18n.t(`Searching`)}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" flex gap-1 flex-wrap mt-2\">\n\t\t\t\t\t{#each status.queries as query, idx (query)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"bg-gray-50 dark:bg-gray-850 flex rounded-lg py-1 px-2 items-center gap-1 text-xs\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Search className=\"size-3\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<span class=\"line-clamp-1\">\n\t\t\t\t\t\t\t\t{query}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if status?.action === 'queries_generated' && status?.queries}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{$i18n.t(`Querying`)}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" flex gap-1 flex-wrap mt-2\">\n\t\t\t\t\t{#each status.queries as query, idx (query)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"bg-gray-50 dark:bg-gray-850 flex rounded-lg py-1 px-2 items-center gap-1 text-xs\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Search className=\"size-3\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<span class=\"line-clamp-1\">\n\t\t\t\t\t\t\t\t{query}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if status?.action === 'sources_retrieved' && status?.count !== undefined}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{#if status.count === 0}\n\t\t\t\t\t\t{$i18n.t('No sources found')}\n\t\t\t\t\t{:else if status.count === 1}\n\t\t\t\t\t\t{$i18n.t('Retrieved 1 source')}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<!-- {$i18n.t('Source')} -->\n\t\t\t\t\t\t<!-- {$i18n.t('No source available')} -->\n\t\t\t\t\t\t<!-- {$i18n.t('No distance available')} -->\n\t\t\t\t\t\t<!-- {$i18n.t('Retrieved {{count}} sources')} -->\n\t\t\t\t\t\t{$i18n.t('Retrieved {{count}} sources', {\n\t\t\t\t\t\t\tcount: status.count\n\t\t\t\t\t\t})}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t<!-- $i18n.t(`Searching \"{{searchQuery}}\"`) -->\n\t\t\t\t\t{#if status?.description?.includes('{{searchQuery}}')}\n\t\t\t\t\t\t{$i18n.t(status?.description, {\n\t\t\t\t\t\t\tsearchQuery: status?.query\n\t\t\t\t\t\t})}\n\t\t\t\t\t{:else if status?.description === 'No search query generated'}\n\t\t\t\t\t\t{$i18n.t('No search query generated')}\n\t\t\t\t\t{:else if status?.description === 'Generating search query'}\n\t\t\t\t\t\t{$i18n.t('Generating search query')}\n\t\t\t\t\t{:else if status?.description === 'Searching the web'}\n\t\t\t\t\t\t{$i18n.t('Searching the web')}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<script>\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport StatusItem from './StatusHistory/StatusItem.svelte';\n\texport let statusHistory = [];\n\texport let expand = false;\n\n\tlet showHistory = true;\n\n\t$: if (expand) {\n\t\tshowHistory = true;\n\t} else {\n\t\tshowHistory = false;\n\t}\n\n\tlet history = [];\n\tlet status = null;\n\n\t$: if (history && history.length > 0) {\n\t\tstatus = history.at(-1);\n\t}\n\n\t$: if (JSON.stringify(statusHistory) !== JSON.stringify(history)) {\n\t\thistory = statusHistory;\n\t}\n</script>\n\n{#if history && history.length > 0}\n\t{#if status?.hidden !== true}\n\t\t<div class=\"text-sm flex flex-col w-full\">\n\t\t\t{#if showHistory}\n\t\t\t\t<div class=\"flex flex-row\">\n\t\t\t\t\t{#if history.length > 1}\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t{#each history as status, idx}\n\t\t\t\t\t\t\t\t{#if idx !== history.length - 1}\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-stretch gap-2 mb-1\">\n\t\t\t\t\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"pt-3 px-1 mb-1.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"relative flex size-1.5 rounded-full justify-center items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"relative inline-flex size-1.5 rounded-full bg-gray-500 dark:bg-gray-300\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-[0.5px] ml-[6.5px] h-[calc(100%-14px)] bg-gray-300 dark:bg-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<StatusItem {status} done={true} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<button\n\t\t\t\tclass=\"w-full\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshowHistory = !showHistory;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"flex items-start gap-2\">\n\t\t\t\t\t{#if history.length > 1}\n\t\t\t\t\t\t<div class=\"pt-3 px-1\">\n\t\t\t\t\t\t\t<span class=\"relative flex size-1.5 rounded-full justify-center items-center\">\n\t\t\t\t\t\t\t\t{#if status?.done === false}\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-gray-500 dark:bg-gray-300 opacity-75\"\n\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"relative inline-flex size-1.5 rounded-full bg-gray-500 dark:bg-gray-300\"\n\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<StatusItem {status} />\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t</div>\n\t{/if}\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport dayjs from 'dayjs';\n\n\timport { createEventDispatcher } from 'svelte';\n\timport { onMount, tick, getContext } from 'svelte';\n\timport type { Writable } from 'svelte/store';\n\timport type { i18n as i18nType, t } from 'i18next';\n\n\tconst i18n = getContext<Writable<i18nType>>('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\timport { createNewFeedback, getFeedbackById, updateFeedbackById } from '$lib/apis/evaluations';\n\timport { getChatById } from '$lib/apis/chats';\n\timport { generateTags } from '$lib/apis';\n\n\timport { config, models, settings, temporaryChatEnabled, TTSWorker, user } from '$lib/stores';\n\timport { synthesizeOpenAISpeech } from '$lib/apis/audio';\n\timport { imageGenerations } from '$lib/apis/images';\n\timport {\n\t\tcopyToClipboard as _copyToClipboard,\n\t\tapproximateToHumanReadable,\n\t\tgetMessageContentParts,\n\t\tsanitizeResponseContent,\n\t\tcreateMessagesList,\n\t\tformatDate,\n\t\tremoveDetails,\n\t\tremoveAllDetails\n\t} from '$lib/utils';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport Skeleton from './Skeleton.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport RateComment from './RateComment.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport WebSearchResults from './ResponseMessage/WebSearchResults.svelte';\n\timport Sparkles from '$lib/components/icons/Sparkles.svelte';\n\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\n\timport Error from './Error.svelte';\n\timport Citations from './Citations.svelte';\n\timport CodeExecutions from './CodeExecutions.svelte';\n\timport ContentRenderer from './ContentRenderer.svelte';\n\timport { KokoroWorker } from '$lib/workers/KokoroWorker';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport FollowUps from './ResponseMessage/FollowUps.svelte';\n\timport { fade } from 'svelte/transition';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport RegenerateMenu from './ResponseMessage/RegenerateMenu.svelte';\n\timport StatusHistory from './ResponseMessage/StatusHistory.svelte';\n\timport FullHeightIframe from '$lib/components/common/FullHeightIframe.svelte';\n\n\tinterface MessageType {\n\t\tid: string;\n\t\tmodel: string;\n\t\tcontent: string;\n\t\tfiles?: { type: string; url: string }[];\n\t\ttimestamp: number;\n\t\trole: string;\n\t\tstatusHistory?: {\n\t\t\tdone: boolean;\n\t\t\taction: string;\n\t\t\tdescription: string;\n\t\t\turls?: string[];\n\t\t\tquery?: string;\n\t\t}[];\n\t\tstatus?: {\n\t\t\tdone: boolean;\n\t\t\taction: string;\n\t\t\tdescription: string;\n\t\t\turls?: string[];\n\t\t\tquery?: string;\n\t\t};\n\t\tdone: boolean;\n\t\terror?: boolean | { content: string };\n\t\tsources?: string[];\n\t\tcode_executions?: {\n\t\t\tuuid: string;\n\t\t\tname: string;\n\t\t\tcode: string;\n\t\t\tlanguage?: string;\n\t\t\tresult?: {\n\t\t\t\terror?: string;\n\t\t\t\toutput?: string;\n\t\t\t\tfiles?: { name: string; url: string }[];\n\t\t\t};\n\t\t}[];\n\t\tinfo?: {\n\t\t\topenai?: boolean;\n\t\t\tprompt_tokens?: number;\n\t\t\tcompletion_tokens?: number;\n\t\t\ttotal_tokens?: number;\n\t\t\teval_count?: number;\n\t\t\teval_duration?: number;\n\t\t\tprompt_eval_count?: number;\n\t\t\tprompt_eval_duration?: number;\n\t\t\ttotal_duration?: number;\n\t\t\tload_duration?: number;\n\t\t\tusage?: unknown;\n\t\t};\n\t\tannotation?: { type: string; rating: number };\n\t}\n\n\texport let chatId = '';\n\texport let history;\n\texport let messageId;\n\texport let selectedModels = [];\n\n\tlet message: MessageType = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\texport let siblings;\n\n\texport let setInputText: Function = () => {};\n\texport let gotoMessage: Function = () => {};\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\n\texport let updateChat: Function;\n\texport let editMessage: Function;\n\texport let saveMessage: Function;\n\texport let rateMessage: Function;\n\texport let actionMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let submitMessage: Function;\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\n\texport let addMessages: Function;\n\n\texport let isLastMessage = true;\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\tlet citationsElement: HTMLDivElement;\n\tlet buttonsContainerElement: HTMLDivElement;\n\tlet showDeleteConfirm = false;\n\n\tlet model = null;\n\t$: model = $models.find((m) => m.id === message.model);\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet editTextAreaElement: HTMLTextAreaElement;\n\n\tlet messageIndexEdit = false;\n\n\tlet audioParts: Record<number, HTMLAudioElement | null> = {};\n\tlet speaking = false;\n\tlet speakingIdx: number | undefined;\n\n\tlet loadingSpeech = false;\n\tlet generatingImage = false;\n\n\tlet showRateComment = false;\n\n\tconst copyToClipboard = async (text) => {\n\t\ttext = removeAllDetails(text);\n\n\t\tif (($config?.ui?.response_watermark ?? '').trim() !== '') {\n\t\t\ttext = `${text}\\n\\n${$config?.ui?.response_watermark}`;\n\t\t}\n\n\t\tconst res = await _copyToClipboard(text, null, $settings?.copyFormatted ?? false);\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copying to clipboard was successful!'));\n\t\t}\n\t};\n\n\tconst playAudio = (idx: number) => {\n\t\treturn new Promise<void>((res) => {\n\t\t\tspeakingIdx = idx;\n\t\t\tconst audio = audioParts[idx];\n\n\t\t\tif (!audio) {\n\t\t\t\treturn res();\n\t\t\t}\n\n\t\t\taudio.play();\n\t\t\taudio.onended = async () => {\n\t\t\t\tawait new Promise((r) => setTimeout(r, 300));\n\n\t\t\t\tif (Object.keys(audioParts).length - 1 === idx) {\n\t\t\t\t\tspeaking = false;\n\t\t\t\t}\n\n\t\t\t\tres();\n\t\t\t};\n\t\t});\n\t};\n\n\tconst toggleSpeakMessage = async () => {\n\t\tif (speaking) {\n\t\t\ttry {\n\t\t\t\tspeechSynthesis.cancel();\n\n\t\t\t\tif (speakingIdx !== undefined && audioParts[speakingIdx]) {\n\t\t\t\t\taudioParts[speakingIdx]!.pause();\n\t\t\t\t\taudioParts[speakingIdx]!.currentTime = 0;\n\t\t\t\t}\n\t\t\t} catch {}\n\n\t\t\tspeaking = false;\n\t\t\tspeakingIdx = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(message?.content ?? '').trim().length) {\n\t\t\ttoast.info($i18n.t('No content to speak'));\n\t\t\treturn;\n\t\t}\n\n\t\tspeaking = true;\n\n\t\tconst content = removeAllDetails(message.content);\n\n\t\tif ($config.audio.tts.engine === '') {\n\t\t\tlet voices = [];\n\t\t\tconst getVoicesLoop = setInterval(() => {\n\t\t\t\tvoices = speechSynthesis.getVoices();\n\t\t\t\tif (voices.length > 0) {\n\t\t\t\t\tclearInterval(getVoicesLoop);\n\n\t\t\t\t\tconst voice =\n\t\t\t\t\t\tvoices\n\t\t\t\t\t\t\t?.filter(\n\t\t\t\t\t\t\t\t(v) => v.voiceURI === ($settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t?.at(0) ?? undefined;\n\n\t\t\t\t\tconsole.log(voice);\n\n\t\t\t\t\tconst speak = new SpeechSynthesisUtterance(content);\n\t\t\t\t\tspeak.rate = $settings.audio?.tts?.playbackRate ?? 1;\n\n\t\t\t\t\tconsole.log(speak);\n\n\t\t\t\t\tspeak.onend = () => {\n\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\tif ($settings.conversationMode) {\n\t\t\t\t\t\t\tdocument.getElementById('voice-input-button')?.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (voice) {\n\t\t\t\t\t\tspeak.voice = voice;\n\t\t\t\t\t}\n\n\t\t\t\t\tspeechSynthesis.speak(speak);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t} else {\n\t\t\tloadingSpeech = true;\n\n\t\t\tconst messageContentParts: string[] = getMessageContentParts(\n\t\t\t\tcontent,\n\t\t\t\t$config?.audio?.tts?.split_on ?? 'punctuation'\n\t\t\t);\n\n\t\t\tif (!messageContentParts.length) {\n\t\t\t\tconsole.log('No content to speak');\n\t\t\t\ttoast.info($i18n.t('No content to speak'));\n\n\t\t\t\tspeaking = false;\n\t\t\t\tloadingSpeech = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.debug('Prepared message content for TTS', messageContentParts);\n\n\t\t\taudioParts = messageContentParts.reduce(\n\t\t\t\t(acc, _sentence, idx) => {\n\t\t\t\t\tacc[idx] = null;\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t{} as typeof audioParts\n\t\t\t);\n\n\t\t\tlet lastPlayedAudioPromise = Promise.resolve(); // Initialize a promise that resolves immediately\n\n\t\t\tif ($settings.audio?.tts?.engine === 'browser-kokoro') {\n\t\t\t\tif (!$TTSWorker) {\n\t\t\t\t\tawait TTSWorker.set(\n\t\t\t\t\t\tnew KokoroWorker({\n\t\t\t\t\t\t\tdtype: $settings.audio?.tts?.engineConfig?.dtype ?? 'fp32'\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tawait $TTSWorker.init();\n\t\t\t\t}\n\n\t\t\t\tfor (const [idx, sentence] of messageContentParts.entries()) {\n\t\t\t\t\tconst blob = await $TTSWorker\n\t\t\t\t\t\t.generate({\n\t\t\t\t\t\t\ttext: sentence,\n\t\t\t\t\t\t\tvoice: $settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\n\t\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tif (blob) {\n\t\t\t\t\t\tconst audio = new Audio(blob);\n\t\t\t\t\t\taudio.playbackRate = $settings.audio?.tts?.playbackRate ?? 1;\n\n\t\t\t\t\t\taudioParts[idx] = audio;\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\tlastPlayedAudioPromise = lastPlayedAudioPromise.then(() => playAudio(idx));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const [idx, sentence] of messageContentParts.entries()) {\n\t\t\t\t\tconst res = await synthesizeOpenAISpeech(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t$settings?.audio?.tts?.defaultVoice === $config.audio.tts.voice\n\t\t\t\t\t\t\t? ($settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice)\n\t\t\t\t\t\t\t: $config?.audio?.tts?.voice,\n\t\t\t\t\t\tsentence\n\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\ttoast.error(`${error}`);\n\n\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tconst blob = await res.blob();\n\t\t\t\t\t\tconst blobUrl = URL.createObjectURL(blob);\n\t\t\t\t\t\tconst audio = new Audio(blobUrl);\n\t\t\t\t\t\taudio.playbackRate = $settings.audio?.tts?.playbackRate ?? 1;\n\n\t\t\t\t\t\taudioParts[idx] = audio;\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\tlastPlayedAudioPromise = lastPlayedAudioPromise.then(() => playAudio(idx));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tlet preprocessedDetailsCache = [];\n\n\tfunction preprocessForEditing(content: string): string {\n\t\t// Replace <details>...</details> with unique ID placeholder\n\t\tconst detailsBlocks = [];\n\t\tlet i = 0;\n\n\t\tcontent = content.replace(/<details[\\s\\S]*?<\\/details>/gi, (match) => {\n\t\t\tdetailsBlocks.push(match);\n\t\t\treturn `<details id=\"__DETAIL_${i++}__\"/>`;\n\t\t});\n\n\t\t// Store original blocks in the editedContent or globally (see merging later)\n\t\tpreprocessedDetailsCache = detailsBlocks;\n\n\t\treturn content;\n\t}\n\n\tfunction postprocessAfterEditing(content: string): string {\n\t\tconst restoredContent = content.replace(\n\t\t\t/<details id=\"__DETAIL_(\\d+)__\"\\/>/g,\n\t\t\t(_, index) => preprocessedDetailsCache[parseInt(index)] || ''\n\t\t);\n\n\t\treturn restoredContent;\n\t}\n\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\n\t\teditedContent = preprocessForEditing(message.content);\n\n\t\tawait tick();\n\n\t\teditTextAreaElement.style.height = '';\n\t\teditTextAreaElement.style.height = `${editTextAreaElement.scrollHeight}px`;\n\t};\n\n\tconst editMessageConfirmHandler = async () => {\n\t\tconst messageContent = postprocessAfterEditing(editedContent ? editedContent : '');\n\t\teditMessage(message.id, { content: messageContent }, false);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\n\t\tawait tick();\n\t};\n\n\tconst saveAsCopyHandler = async () => {\n\t\tconst messageContent = postprocessAfterEditing(editedContent ? editedContent : '');\n\n\t\teditMessage(message.id, { content: messageContent });\n\n\t\tedit = false;\n\t\teditedContent = '';\n\n\t\tawait tick();\n\t};\n\n\tconst cancelEditMessage = async () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t\tawait tick();\n\t};\n\n\tconst generateImage = async (message: MessageType) => {\n\t\tgeneratingImage = true;\n\t\tconst res = await imageGenerations(localStorage.token, message.content).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t});\n\t\tconsole.log(res);\n\n\t\tif (res) {\n\t\t\tconst files = res.map((image) => ({\n\t\t\t\ttype: 'image',\n\t\t\t\turl: `${image.url}`\n\t\t\t}));\n\n\t\t\tsaveMessage(message.id, {\n\t\t\t\t...message,\n\t\t\t\tfiles: files\n\t\t\t});\n\t\t}\n\n\t\tgeneratingImage = false;\n\t};\n\n\tlet feedbackLoading = false;\n\n\tconst feedbackHandler = async (rating: number | null = null, details: object | null = null) => {\n\t\tfeedbackLoading = true;\n\t\tconsole.log('Feedback', rating, details);\n\n\t\tconst updatedMessage = {\n\t\t\t...message,\n\t\t\tannotation: {\n\t\t\t\t...(message?.annotation ?? {}),\n\t\t\t\t...(rating !== null ? { rating: rating } : {}),\n\t\t\t\t...(details ? details : {})\n\t\t\t}\n\t\t};\n\n\t\tconst chat = await getChatById(localStorage.token, chatId).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t});\n\t\tif (!chat) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst messages = createMessagesList(history, message.id);\n\n\t\tlet feedbackItem = {\n\t\t\ttype: 'rating',\n\t\t\tdata: {\n\t\t\t\t...(updatedMessage?.annotation ? updatedMessage.annotation : {}),\n\t\t\t\tmodel_id: message?.selectedModelId ?? message.model,\n\t\t\t\t...(history.messages[message.parentId].childrenIds.length > 1\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tsibling_model_ids: history.messages[message.parentId].childrenIds\n\t\t\t\t\t\t\t\t.filter((id) => id !== message.id)\n\t\t\t\t\t\t\t\t.map((id) => history.messages[id]?.selectedModelId ?? history.messages[id].model)\n\t\t\t\t\t\t}\n\t\t\t\t\t: {})\n\t\t\t},\n\t\t\tmeta: {\n\t\t\t\tarena: message ? message.arena : false,\n\t\t\t\tmodel_id: message.model,\n\t\t\t\tmessage_id: message.id,\n\t\t\t\tmessage_index: messages.length,\n\t\t\t\tchat_id: chatId\n\t\t\t},\n\t\t\tsnapshot: {\n\t\t\t\tchat: chat\n\t\t\t}\n\t\t};\n\n\t\tconst baseModels = [\n\t\t\tfeedbackItem.data.model_id,\n\t\t\t...(feedbackItem.data.sibling_model_ids ?? [])\n\t\t].reduce((acc, modelId) => {\n\t\t\tconst model = $models.find((m) => m.id === modelId);\n\t\t\tif (model) {\n\t\t\t\tacc[model.id] = model?.info?.base_model_id ?? null;\n\t\t\t} else {\n\t\t\t\t// Log or handle cases where corresponding model is not found\n\t\t\t\tconsole.warn(`Model with ID ${modelId} not found`);\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {});\n\t\tfeedbackItem.meta.base_models = baseModels;\n\n\t\tlet feedback = null;\n\t\tif (message?.feedbackId) {\n\t\t\tfeedback = await updateFeedbackById(\n\t\t\t\tlocalStorage.token,\n\t\t\t\tmessage.feedbackId,\n\t\t\t\tfeedbackItem\n\t\t\t).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t});\n\t\t} else {\n\t\t\tfeedback = await createNewFeedback(localStorage.token, feedbackItem).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t});\n\n\t\t\tif (feedback) {\n\t\t\t\tupdatedMessage.feedbackId = feedback.id;\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(updatedMessage);\n\t\tsaveMessage(message.id, updatedMessage);\n\n\t\tawait tick();\n\n\t\tif (!details) {\n\t\t\tshowRateComment = true;\n\n\t\t\tif (!updatedMessage.annotation?.tags && (message?.content ?? '') !== '') {\n\t\t\t\t// attempt to generate tags\n\t\t\t\tconst tags = await generateTags(localStorage.token, message.model, messages, chatId).catch(\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tconsole.log(tags);\n\n\t\t\t\tif (tags) {\n\t\t\t\t\tupdatedMessage.annotation.tags = tags;\n\t\t\t\t\tfeedbackItem.data.tags = tags;\n\n\t\t\t\t\tsaveMessage(message.id, updatedMessage);\n\t\t\t\t\tawait updateFeedbackById(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\tupdatedMessage.feedbackId,\n\t\t\t\t\t\tfeedbackItem\n\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfeedbackLoading = false;\n\t};\n\n\tconst deleteMessageHandler = async () => {\n\t\tdeleteMessage(message.id);\n\t};\n\n\t$: if (!edit) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t})();\n\t}\n\n\tonMount(async () => {\n\t\t// console.log('ResponseMessage mounted');\n\n\t\tawait tick();\n\t\tif (buttonsContainerElement) {\n\t\t\tbuttonsContainerElement.addEventListener('wheel', function (event) {\n\t\t\t\tif (buttonsContainerElement.scrollWidth <= buttonsContainerElement.clientWidth) {\n\t\t\t\t\t// If the container is not scrollable, horizontal scroll\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tif (event.deltaY !== 0) {\n\t\t\t\t\t\t// Adjust horizontal scroll position based on vertical scroll\n\t\t\t\t\t\tbuttonsContainerElement.scrollLeft += event.deltaY;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n</script>\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete message?')}\n\ton:confirm={() => {\n\t\tdeleteMessageHandler();\n\t}}\n/>\n\n{#key message.id}\n\t<div\n\t\tclass=\" flex w-full message-{message.id}\"\n\t\tid=\"message-{message.id}\"\n\t\tdir={$settings.chatDirection}\n\t>\n\t\t<div class={`shrink-0 ltr:mr-3 rtl:ml-3 hidden @lg:flex mt-1 `}>\n\t\t\t<ProfileImage\n\t\t\t\tsrc={model?.info?.meta?.profile_image_url ??\n\t\t\t\t\t($i18n.language === 'dg-DG'\n\t\t\t\t\t\t? `${WEBUI_BASE_URL}/doge.png`\n\t\t\t\t\t\t: `${WEBUI_BASE_URL}/favicon.png`)}\n\t\t\t\tclassName={'size-8 assistant-message-profile-image'}\n\t\t\t/>\n\t\t</div>\n\n\t\t<div class=\"flex-auto w-0 pl-1 relative\">\n\t\t\t<Name>\n\t\t\t\t<Tooltip content={model?.name ?? message.model} placement=\"top-start\">\n\t\t\t\t\t<span class=\"line-clamp-1 text-black dark:text-white\">\n\t\t\t\t\t\t{model?.name ?? message.model}\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] {($settings?.highContrastMode ??\n\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t? 'dark:text-gray-100 text-gray-900'\n\t\t\t\t\t\t\t: 'invisible group-hover:visible transition text-gray-400'}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t<span class=\"line-clamp-1\"\n\t\t\t\t\t\t\t\t>{$i18n.t(formatDate(message.timestamp * 1000), {\n\t\t\t\t\t\t\t\t\tLOCALIZED_TIME: dayjs(message.timestamp * 1000).format('LT'),\n\t\t\t\t\t\t\t\t\tLOCALIZED_DATE: dayjs(message.timestamp * 1000).format('L')\n\t\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</Name>\n\n\t\t\t<div>\n\t\t\t\t<div class=\"chat-{message.role} w-full min-w-full markdown-prose\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if model?.info?.meta?.capabilities?.status_updates ?? true}\n\t\t\t\t\t\t\t<StatusHistory\n\t\t\t\t\t\t\t\tstatusHistory={message?.statusHistory}\n\t\t\t\t\t\t\t\texpand={message?.content === ''}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if message?.files && message.files?.filter((f) => f.type === 'image').length > 0}\n\t\t\t\t\t\t\t<div class=\"my-1 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t\t\t<Image src={file.url} alt={message.content} />\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\t\t\tsmall={true}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if message?.embeds && message.embeds.length > 0}\n\t\t\t\t\t\t\t<div class=\"my-1 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t\t\t\t{#each message.embeds as embed, idx}\n\t\t\t\t\t\t\t\t\t<div class=\"my-2 w-full\" id={`${message.id}-embeds-${idx}`}>\n\t\t\t\t\t\t\t\t\t\t<FullHeightIframe\n\t\t\t\t\t\t\t\t\t\t\tsrc={embed}\n\t\t\t\t\t\t\t\t\t\t\tallowScripts={true}\n\t\t\t\t\t\t\t\t\t\t\tallowForms={true}\n\t\t\t\t\t\t\t\t\t\t\tallowSameOrigin={true}\n\t\t\t\t\t\t\t\t\t\t\tallowPopups={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if edit === true}\n\t\t\t\t\t\t\t<div class=\"w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 my-2\">\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\t\t\t\tbind:this={editTextAreaElement}\n\t\t\t\t\t\t\t\t\tclass=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-between text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"save-new-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tsaveAsCopyHandler();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save As Copy')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"w-full flex flex-col relative\" id=\"response-content-container\">\n\t\t\t\t\t\t\t\t{#if message.content === '' && !message.error && ((model?.info?.meta?.capabilities?.status_updates ?? true) ? (message?.statusHistory ?? [...(message?.status ? [message?.status] : [])]).length === 0 || (message?.statusHistory?.at(-1)?.hidden ?? false) : true)}\n\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t{:else if message.content && message.error !== true}\n\t\t\t\t\t\t\t\t\t<!-- always show message contents even if there's an error -->\n\t\t\t\t\t\t\t\t\t<!-- unless message.error === true which is legacy error handling, where the error message is stored in message.content -->\n\t\t\t\t\t\t\t\t\t<ContentRenderer\n\t\t\t\t\t\t\t\t\t\tid={`${chatId}-${message.id}`}\n\t\t\t\t\t\t\t\t\t\tmessageId={message.id}\n\t\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t\t\t\t\tsources={message.sources}\n\t\t\t\t\t\t\t\t\t\tfloatingButtons={message?.done &&\n\t\t\t\t\t\t\t\t\t\t\t!readOnly &&\n\t\t\t\t\t\t\t\t\t\t\t($settings?.showFloatingActionButtons ?? true)}\n\t\t\t\t\t\t\t\t\t\tsave={!readOnly}\n\t\t\t\t\t\t\t\t\t\tpreview={!readOnly}\n\t\t\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t\t\tdone={($settings?.chatFadeStreamingText ?? true)\n\t\t\t\t\t\t\t\t\t\t\t? (message?.done ?? false)\n\t\t\t\t\t\t\t\t\t\t\t: true}\n\t\t\t\t\t\t\t\t\t\t{model}\n\t\t\t\t\t\t\t\t\t\tonTaskClick={async (e) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonSourceClick={async (id, idx) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(id, idx);\n\n\t\t\t\t\t\t\t\t\t\t\tif (citationsElement) {\n\t\t\t\t\t\t\t\t\t\t\t\tcitationsElement?.showSourceModal(idx - 1);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonAddMessages={({ modelId, parentId, messages }) => {\n\t\t\t\t\t\t\t\t\t\t\taddMessages({ modelId, parentId, messages });\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonSave={({ raw, oldContent, newContent }) => {\n\t\t\t\t\t\t\t\t\t\t\thistory.messages[message.id].content = history.messages[\n\t\t\t\t\t\t\t\t\t\t\t\tmessage.id\n\t\t\t\t\t\t\t\t\t\t\t].content.replace(raw, raw.replace(oldContent, newContent));\n\n\t\t\t\t\t\t\t\t\t\t\tupdateChat();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if message?.error}\n\t\t\t\t\t\t\t\t\t<Error content={message?.error?.content ?? message.content} />\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if (message?.sources || message?.citations) && (model?.info?.meta?.capabilities?.citations ?? true)}\n\t\t\t\t\t\t\t\t\t<Citations\n\t\t\t\t\t\t\t\t\t\tbind:this={citationsElement}\n\t\t\t\t\t\t\t\t\t\tid={message?.id}\n\t\t\t\t\t\t\t\t\t\tsources={message?.sources ?? message?.citations}\n\t\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if message.code_executions}\n\t\t\t\t\t\t\t\t\t<CodeExecutions codeExecutions={message.code_executions} />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{#if !edit}\n\t\t\t\t\t<div\n\t\t\t\t\t\tbind:this={buttonsContainerElement}\n\t\t\t\t\t\tclass=\"flex justify-start overflow-x-auto buttons text-gray-600 dark:text-gray-500 mt-0.5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if message.done || siblings.length > 1}\n\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t<div class=\"flex self-center min-w-fit\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Previous message')}\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(`message-index-input-${message.id}`);\n\t\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Next message')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.done}\n\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t{#if $user?.role === 'user' ? ($user?.permissions?.chat?.edit ?? true) : true}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Edit')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Copy')}\n\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions?.chat?.tts ?? true)}\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Read Aloud')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Read Aloud')}\n\t\t\t\t\t\t\t\t\t\t\tid=\"speak-button-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!loadingSpeech) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleSpeakMessage();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if loadingSpeech}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_S1WN {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_MGfb 0.8s linear infinite;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.8s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_Km9P {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.65s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_JApP {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.5s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_MGfb {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t93.75%,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN\" cx=\"4\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_Km9P\" cx=\"12\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_JApP\" cx=\"20\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else if speaking}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if $config?.features.enable_image_generation && ($user?.role === 'admin' || $user?.permissions?.features?.image_generation) && !readOnly}\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Generate Image')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Generate Image')}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'}  p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!generatingImage) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgenerateImage(message);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if generatingImage}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_S1WN {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_MGfb 0.8s linear infinite;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.8s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_Km9P {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.65s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_JApP {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.5s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_MGfb {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t93.75%,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN\" cx=\"4\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_Km9P\" cx=\"12\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_JApP\" cx=\"20\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if message.usage}\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tcontent={message.usage\n\t\t\t\t\t\t\t\t\t\t\t? `<pre>${sanitizeResponseContent(\n\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(message.usage, null, 2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\"([^(\")\"]+)\":/g, '$1:')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(1, -1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((line) => line.slice(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((line) => (line.endsWith(',') ? line.slice(0, -1) : line))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join('\\n')\n\t\t\t\t\t\t\t\t\t\t\t\t)}</pre>`\n\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\" {isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(message);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tid=\"info-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t{#if !$temporaryChatEnabled && ($config?.features.enable_message_rating ?? true) && ($user?.role === 'admin' || ($user?.permissions?.chat?.rate_response ?? true))}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Good Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Good Response')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.annotation?.rating ?? ''\n\t\t\t\t\t\t\t\t\t\t\t\t).toString() === '1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={feedbackLoading}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait feedbackHandler(1);\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Bad Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Bad Response')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.annotation?.rating ?? ''\n\t\t\t\t\t\t\t\t\t\t\t\t).toString() === '-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={feedbackLoading}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait feedbackHandler(-1);\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if isLastMessage && ($user?.role === 'admin' || ($user?.permissions?.chat?.continue_response ?? true))}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Continue Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Continue Response')}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"continue-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontinueResponse();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions?.chat?.regenerate_response ?? true)}\n\t\t\t\t\t\t\t\t\t\t{#if $settings?.regenerateMenu ?? true}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"hidden regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t(model?.actions ?? []).forEach((action) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch('action', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'regenerate-response',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId: message.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<RegenerateMenu\n\t\t\t\t\t\t\t\t\t\t\t\tonRegenerate={(prompt = null) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message, prompt);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t(model?.actions ?? []).forEach((action) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch('action', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'regenerate-response',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId: message.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Regenerate')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Regenerate')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</RegenerateMenu>\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Regenerate')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Regenerate')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(model?.actions ?? []).forEach((action) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch('action', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'regenerate-response',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId: message.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions?.chat?.delete_message ?? true)}\n\t\t\t\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Delete')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"delete-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if isLastMessage}\n\t\t\t\t\t\t\t\t\t\t{#each model?.actions ?? [] as action}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={action.name} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={action.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactionMessage(action.id, message);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if action?.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={action.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4 {action.icon.includes('svg')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'dark:invert-[80%]'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"fill: currentColor;\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={action.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Sparkles strokeWidth=\"2.1\" className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if message.done && showRateComment}\n\t\t\t\t\t\t<RateComment\n\t\t\t\t\t\t\tbind:message\n\t\t\t\t\t\t\tbind:show={showRateComment}\n\t\t\t\t\t\t\ton:save={async (e) => {\n\t\t\t\t\t\t\t\tawait feedbackHandler(null, {\n\t\t\t\t\t\t\t\t\t...e.detail\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if (isLastMessage || ($settings?.keepFollowUpPrompts ?? false)) && message.done && !readOnly && (message?.followUps ?? []).length > 0}\n\t\t\t\t\t\t<div class=\"mt-2.5\" in:fade={{ duration: 100 }}>\n\t\t\t\t\t\t\t<FollowUps\n\t\t\t\t\t\t\t\tfollowUps={message?.followUps}\n\t\t\t\t\t\t\t\tonClick={(prompt) => {\n\t\t\t\t\t\t\t\t\tif ($settings?.insertFollowUpPrompt ?? false) {\n\t\t\t\t\t\t\t\t\t\t// Insert the follow-up prompt into the input box\n\t\t\t\t\t\t\t\t\t\tsetInputText(prompt);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Submit the follow-up prompt directly\n\t\t\t\t\t\t\t\t\t\tsubmitMessage(message?.id, prompt);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/key}\n\n<style>\n\t.buttons::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.buttons {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm6-2a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm0 0h-1a5 5 0 0 1-5-5v-.5\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport { onMount, tick, getContext } from 'svelte';\n\timport { createEventDispatcher } from 'svelte';\n\n\timport { mobile, models, settings } from '$lib/stores';\n\n\timport { generateMoACompletion } from '$lib/apis';\n\timport { updateChatById } from '$lib/apis/chats';\n\timport { createOpenAITextStream } from '$lib/apis/streaming';\n\n\timport ResponseMessage from './ResponseMessage.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Merge from '$lib/components/icons/Merge.svelte';\n\n\timport Markdown from './Markdown.svelte';\n\timport Name from './Name.svelte';\n\timport Skeleton from './Skeleton.svelte';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\tconst i18n = getContext('i18n');\n\tdayjs.extend(localizedFormat);\n\n\texport let chatId;\n\texport let history;\n\texport let messageId;\n\texport let selectedModels = [];\n\n\texport let isLastMessage;\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\n\texport let setInputText: Function = () => {};\n\texport let updateChat: Function;\n\texport let editMessage: Function;\n\texport let saveMessage: Function;\n\texport let rateMessage: Function;\n\texport let actionMessage: Function;\n\n\texport let submitMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\texport let mergeResponses: Function;\n\n\texport let addMessages: Function;\n\n\texport let triggerScroll: Function;\n\n\texport let topPadding = false;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet currentMessageId;\n\tlet parentMessage;\n\tlet groupedMessageIds = {};\n\tlet groupedMessageIdsIdx = {};\n\n\tlet selectedModelIdx = null;\n\n\tlet message = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\tconst gotoMessage = async (modelIdx, messageIdx) => {\n\t\t// Clamp messageIdx to ensure it's within valid range\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.max(\n\t\t\t0,\n\t\t\tMath.min(messageIdx, groupedMessageIds[modelIdx].messageIds.length - 1)\n\t\t);\n\n\t\t// Get the messageId at the specified index\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\t// Traverse the branch to find the deepest child message\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\t// Update the current message ID in history\n\t\thistory.currentId = messageId;\n\n\t\t// Await UI updates\n\t\tawait tick();\n\t\tawait updateChat();\n\n\t\t// Trigger scrolling after navigation\n\t\ttriggerScroll();\n\t};\n\n\tconst showPreviousMessage = async (modelIdx) => {\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.max(0, groupedMessageIdsIdx[modelIdx] - 1);\n\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tawait tick();\n\t\tawait updateChat();\n\t\ttriggerScroll();\n\t};\n\n\tconst showNextMessage = async (modelIdx) => {\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.min(\n\t\t\tgroupedMessageIds[modelIdx].messageIds.length - 1,\n\t\t\tgroupedMessageIdsIdx[modelIdx] + 1\n\t\t);\n\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tawait tick();\n\t\tawait updateChat();\n\t\ttriggerScroll();\n\t};\n\n\tconst initHandler = async () => {\n\t\tconsole.log('multiresponse:initHandler');\n\t\tawait tick();\n\n\t\tcurrentMessageId = messageId;\n\t\tparentMessage = history.messages[messageId].parentId\n\t\t\t? history.messages[history.messages[messageId].parentId]\n\t\t\t: null;\n\n\t\tgroupedMessageIds = parentMessage?.models.reduce((a, model, modelIdx) => {\n\t\t\t// Find all messages that are children of the parent message and have the same model\n\t\t\tlet modelMessageIds = parentMessage?.childrenIds\n\t\t\t\t.map((id) => history.messages[id])\n\t\t\t\t.filter((m) => m?.modelIdx === modelIdx)\n\t\t\t\t.map((m) => m.id);\n\n\t\t\t// Legacy support for messages that don't have a modelIdx\n\t\t\t// Find all messages that are children of the parent message and have the same model\n\t\t\tif (modelMessageIds.length === 0) {\n\t\t\t\tlet modelMessages = parentMessage?.childrenIds\n\t\t\t\t\t.map((id) => history.messages[id])\n\t\t\t\t\t.filter((m) => m?.model === model);\n\n\t\t\t\tmodelMessages.forEach((m) => {\n\t\t\t\t\tm.modelIdx = modelIdx;\n\t\t\t\t});\n\n\t\t\t\tmodelMessageIds = modelMessages.map((m) => m.id);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...a,\n\t\t\t\t[modelIdx]: { messageIds: modelMessageIds }\n\t\t\t};\n\t\t}, {});\n\n\t\tgroupedMessageIdsIdx = parentMessage?.models.reduce((a, model, modelIdx) => {\n\t\t\tconst idx = groupedMessageIds[modelIdx].messageIds.findIndex((id) => id === messageId);\n\t\t\tif (idx !== -1) {\n\t\t\t\treturn {\n\t\t\t\t\t...a,\n\t\t\t\t\t[modelIdx]: idx\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t...a,\n\t\t\t\t\t[modelIdx]: groupedMessageIds[modelIdx].messageIds.length - 1\n\t\t\t\t};\n\t\t\t}\n\t\t}, {});\n\n\t\tselectedModelIdx = history.messages[messageId]?.modelIdx;\n\n\t\tconsole.log(groupedMessageIds, groupedMessageIdsIdx);\n\n\t\tawait tick();\n\t};\n\n\tconst onGroupClick = async (_messageId, modelIdx) => {\n\t\tif (messageId != _messageId) {\n\t\t\tlet currentMessageId = _messageId;\n\t\t\tlet messageChildrenIds = history.messages[currentMessageId].childrenIds;\n\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\tcurrentMessageId = messageChildrenIds.at(-1);\n\t\t\t\tmessageChildrenIds = history.messages[currentMessageId].childrenIds;\n\t\t\t}\n\t\t\thistory.currentId = currentMessageId;\n\t\t\tselectedModelIdx = modelIdx;\n\n\t\t\t// await tick();\n\t\t\t// await updateChat();\n\t\t\t// triggerScroll();\n\t\t}\n\t};\n\n\tconst mergeResponsesHandler = async () => {\n\t\tconst responses = Object.keys(groupedMessageIds).map((modelIdx) => {\n\t\t\tconst { messageIds } = groupedMessageIds[modelIdx];\n\t\t\tconst messageId = messageIds[groupedMessageIdsIdx[modelIdx]];\n\n\t\t\treturn history.messages[messageId].content;\n\t\t});\n\t\tmergeResponses(messageId, responses, chatId);\n\t};\n\n\tonMount(async () => {\n\t\tawait initHandler();\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst messageElement = document.getElementById(`message-${messageId}`);\n\t\t\tif (messageElement) {\n\t\t\t\tmessageElement.scrollIntoView({ block: 'start' });\n\t\t\t}\n\t\t}\n\t});\n</script>\n\n{#if parentMessage}\n\t<div>\n\t\t<div\n\t\t\tclass=\"flex snap-x snap-mandatory overflow-x-auto scrollbar-hidden\"\n\t\t\tid=\"responses-container-{chatId}-{parentMessage.id}\"\n\t\t>\n\t\t\t{#if $settings?.displayMultiModelResponsesInTabs ?? false}\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<div class=\" flex w-full mb-4.5 border-b border-gray-200 dark:border-gray-850\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"flex gap-2 scrollbar-none overflow-x-auto w-fit text-center font-medium bg-transparent pt-1 text-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#each Object.keys(groupedMessageIds) as modelIdx}\n\t\t\t\t\t\t\t\t{#if groupedMessageIdsIdx[modelIdx] !== undefined && groupedMessageIds[modelIdx].messageIds.length > 0}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\n\t\t\t\t\t\t\t\t\t{@const _messageId =\n\t\t\t\t\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]]}\n\n\t\t\t\t\t\t\t\t\t{@const model = $models.find((m) => m.id === history.messages[_messageId]?.model)}\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"min-w-fit {selectedModelIdx == modelIdx\n\t\t\t\t\t\t\t\t\t\t\t? ' dark:border-gray-300 '\n\t\t\t\t\t\t\t\t\t\t\t: ' opacity-35 border-transparent'} pb-1.5 px-2.5 transition border-b-2\"\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\tif (selectedModelIdx != modelIdx) {\n\t\t\t\t\t\t\t\t\t\t\t\tselectedModelIdx = modelIdx;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tonGroupClick(_messageId, modelIdx);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- <ProfileImage\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={model?.info?.meta?.profile_image_url ??\n\t\t\t\t\t\t\t\t\t\t\t\t\t($i18n.language === 'dg-DG'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `${WEBUI_BASE_URL}/doge.png`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `${WEBUI_BASE_URL}/favicon.png`)}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={'size-5 assistant-message-profile-image'}\n\t\t\t\t\t\t\t\t\t\t\t/> -->\n\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"-translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t{model ? `${model.name}` : history.messages[_messageId]?.model}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if selectedModelIdx !== null}\n\t\t\t\t\t\t{@const _messageId =\n\t\t\t\t\t\t\tgroupedMessageIds[selectedModelIdx].messageIds[\n\t\t\t\t\t\t\t\tgroupedMessageIdsIdx[selectedModelIdx]\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t{#key history.currentId}\n\t\t\t\t\t\t\t{#if message}\n\t\t\t\t\t\t\t\t<ResponseMessage\n\t\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\tmessageId={_messageId}\n\t\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\t\tisLastMessage={true}\n\t\t\t\t\t\t\t\t\tsiblings={groupedMessageIds[selectedModelIdx].messageIds}\n\t\t\t\t\t\t\t\t\tgotoMessage={(message, messageIdx) => gotoMessage(selectedModelIdx, messageIdx)}\n\t\t\t\t\t\t\t\t\tshowPreviousMessage={() => showPreviousMessage(selectedModelIdx)}\n\t\t\t\t\t\t\t\t\tshowNextMessage={() => showNextMessage(selectedModelIdx)}\n\t\t\t\t\t\t\t\t\t{setInputText}\n\t\t\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t\t\tregenerateResponse={async (message, prompt = null) => {\n\t\t\t\t\t\t\t\t\t\tregenerateResponse(message, prompt);\n\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\tgroupedMessageIdsIdx[selectedModelIdx] =\n\t\t\t\t\t\t\t\t\t\t\tgroupedMessageIds[selectedModelIdx].messageIds.length - 1;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/key}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t{#each Object.keys(groupedMessageIds) as modelIdx}\n\t\t\t\t\t{#if groupedMessageIdsIdx[modelIdx] !== undefined && groupedMessageIds[modelIdx].messageIds.length > 0}\n\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t\t\t\t{@const _messageId =\n\t\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]]}\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" snap-center w-full max-w-full m-1 border {history.messages[messageId]\n\t\t\t\t\t\t\t\t?.modelIdx == modelIdx\n\t\t\t\t\t\t\t\t? `bg-gray-50 dark:bg-gray-850 border-gray-100 dark:border-gray-800 border-2 ${\n\t\t\t\t\t\t\t\t\t\t$mobile ? 'min-w-full' : 'min-w-80'\n\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t: `border-gray-100 dark:border-gray-850 border-dashed ${\n\t\t\t\t\t\t\t\t\t\t$mobile ? 'min-w-full' : 'min-w-80'\n\t\t\t\t\t\t\t\t\t}`} transition-all p-5 rounded-2xl\"\n\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\tonGroupClick(_messageId, modelIdx);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#key history.currentId}\n\t\t\t\t\t\t\t\t{#if message}\n\t\t\t\t\t\t\t\t\t<ResponseMessage\n\t\t\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\t\tmessageId={_messageId}\n\t\t\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\t\t\tisLastMessage={true}\n\t\t\t\t\t\t\t\t\t\tsiblings={groupedMessageIds[modelIdx].messageIds}\n\t\t\t\t\t\t\t\t\t\tgotoMessage={(message, messageIdx) => gotoMessage(modelIdx, messageIdx)}\n\t\t\t\t\t\t\t\t\t\tshowPreviousMessage={() => showPreviousMessage(modelIdx)}\n\t\t\t\t\t\t\t\t\t\tshowNextMessage={() => showNextMessage(modelIdx)}\n\t\t\t\t\t\t\t\t\t\t{setInputText}\n\t\t\t\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t\t\t\tregenerateResponse={async (message, prompt = null) => {\n\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message, prompt);\n\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\tgroupedMessageIdsIdx[modelIdx] =\n\t\t\t\t\t\t\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds.length - 1;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if !readOnly}\n\t\t\t{#if !Object.keys(groupedMessageIds).find((modelIdx) => {\n\t\t\t\tconst { messageIds } = groupedMessageIds[modelIdx];\n\t\t\t\tconst _messageId = messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\t\t\treturn !history.messages[_messageId]?.done ?? false;\n\t\t\t})}\n\t\t\t\t<div class=\"flex justify-end\">\n\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t{#if history.messages[messageId]?.merged?.status}\n\t\t\t\t\t\t\t{@const message = history.messages[messageId]?.merged}\n\n\t\t\t\t\t\t\t<div class=\"w-full rounded-xl pl-5 pr-2 py-2 mt-2\">\n\t\t\t\t\t\t\t\t<Name>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Merged Response')}\n\n\t\t\t\t\t\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\" self-center invisible group-hover:visible text-gray-400 text-xs font-medium uppercase ml-0.5 -mt-0.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{dayjs(message.timestamp * 1000).format('LT')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</Name>\n\n\t\t\t\t\t\t\t\t<div class=\"mt-1 markdown-prose w-full min-w-full\">\n\t\t\t\t\t\t\t\t\t{#if (message?.content ?? '') === ''}\n\t\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<Markdown id={`merged`} content={message.content ?? ''} />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if isLastMessage}\n\t\t\t\t\t\t<div class=\" shrink-0 text-gray-600 dark:text-gray-500 mt-1\">\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Merge Responses')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tid=\"merge-response-button\"\n\t\t\t\t\t\t\t\t\tclass=\"{true\n\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tmergeResponsesHandler();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Merge className=\" size-5 \" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport { toast } from 'svelte-sonner';\n\timport { tick, getContext, onMount } from 'svelte';\n\n\timport { models, settings } from '$lib/stores';\n\timport { user as _user } from '$lib/stores';\n\timport { copyToClipboard as _copyToClipboard, formatDate } from '$lib/utils';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport Markdown from './Markdown.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\n\tconst i18n = getContext('i18n');\n\tdayjs.extend(localizedFormat);\n\n\texport let user;\n\n\texport let chatId;\n\texport let history;\n\texport let messageId;\n\n\texport let siblings;\n\n\texport let gotoMessage: Function;\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\n\texport let editMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let isFirstMessage: boolean;\n\texport let readOnly: boolean;\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\tlet showDeleteConfirm = false;\n\n\tlet messageIndexEdit = false;\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet editedFiles = [];\n\n\tlet messageEditTextAreaElement: HTMLTextAreaElement;\n\n\tlet message = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\tconst copyToClipboard = async (text) => {\n\t\tconst res = await _copyToClipboard(text);\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copying to clipboard was successful!'));\n\t\t}\n\t};\n\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\t\teditedContent = message?.content ?? '';\n\t\teditedFiles = message.files;\n\n\t\tawait tick();\n\n\t\tif (messageEditTextAreaElement) {\n\t\t\tmessageEditTextAreaElement.style.height = '';\n\t\t\tmessageEditTextAreaElement.style.height = `${messageEditTextAreaElement.scrollHeight}px`;\n\n\t\t\tmessageEditTextAreaElement?.focus();\n\t\t}\n\t};\n\n\tconst editMessageConfirmHandler = async (submit = true) => {\n\t\tif (!editedContent && (editedFiles ?? []).length === 0) {\n\t\t\ttoast.error($i18n.t('Please enter a message or attach a file.'));\n\t\t\treturn;\n\t\t}\n\n\t\teditMessage(message.id, { content: editedContent, files: editedFiles }, submit);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\t\teditedFiles = [];\n\t};\n\n\tconst cancelEditMessage = () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t\teditedFiles = [];\n\t};\n\n\tconst deleteMessageHandler = async () => {\n\t\tdeleteMessage(message.id);\n\t};\n\n\tonMount(() => {\n\t\t// console.log('UserMessage mounted');\n\t});\n</script>\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete message?')}\n\ton:confirm={() => {\n\t\tdeleteMessageHandler();\n\t}}\n/>\n\n<div\n\tclass=\" flex w-full user-message group\"\n\tdir={$settings.chatDirection}\n\tid=\"message-{message.id}\"\n>\n\t{#if !($settings?.chatBubble ?? true)}\n\t\t<div class={`shrink-0 ltr:mr-3 rtl:ml-3 mt-1`}>\n\t\t\t<ProfileImage\n\t\t\t\tsrc={message.user\n\t\t\t\t\t? ($models.find((m) => m.id === message.user)?.info?.meta?.profile_image_url ??\n\t\t\t\t\t\t`${WEBUI_BASE_URL}/user.png`)\n\t\t\t\t\t: (user?.profile_image_url ?? `${WEBUI_BASE_URL}/user.png`)}\n\t\t\t\tclassName={'size-8 user-message-profile-image'}\n\t\t\t/>\n\t\t</div>\n\t{/if}\n\t<div class=\"flex-auto w-0 max-w-full pl-1\">\n\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t<div>\n\t\t\t\t<Name>\n\t\t\t\t\t{#if message.user}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t\t<span class=\" text-gray-500 text-sm font-medium\">{message?.user ?? ''}</span>\n\t\t\t\t\t{:else if $settings.showUsername || $_user.name !== user.name}\n\t\t\t\t\t\t{user.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] {($settings?.highContrastMode ??\n\t\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t\t? 'dark:text-gray-900 text-gray-100'\n\t\t\t\t\t\t\t\t: 'invisible group-hover:visible transition'}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t\t<!-- $i18n.t('Today at {{LOCALIZED_TIME}}') -->\n\t\t\t\t\t\t\t\t<!-- $i18n.t('Yesterday at {{LOCALIZED_TIME}}') -->\n\t\t\t\t\t\t\t\t<!-- $i18n.t('{{LOCALIZED_DATE}} at {{LOCALIZED_TIME}}') -->\n\n\t\t\t\t\t\t\t\t<span class=\"line-clamp-1\"\n\t\t\t\t\t\t\t\t\t>{$i18n.t(formatDate(message.timestamp * 1000), {\n\t\t\t\t\t\t\t\t\t\tLOCALIZED_TIME: dayjs(message.timestamp * 1000).format('LT'),\n\t\t\t\t\t\t\t\t\t\tLOCALIZED_DATE: dayjs(message.timestamp * 1000).format('L')\n\t\t\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</Name>\n\t\t\t</div>\n\t\t{:else if message.timestamp}\n\t\t\t<div class=\"flex justify-end pr-2 text-xs\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"text-[0.65rem] font-medium first-letter:capitalize mb-0.5 {($settings?.highContrastMode ??\n\t\t\t\t\tfalse)\n\t\t\t\t\t\t? 'dark:text-gray-100 text-gray-900'\n\t\t\t\t\t\t: 'invisible group-hover:visible transition text-gray-400'}\"\n\t\t\t\t>\n\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t<span class=\"line-clamp-1\"\n\t\t\t\t\t\t\t>{$i18n.t(formatDate(message.timestamp * 1000), {\n\t\t\t\t\t\t\t\tLOCALIZED_TIME: dayjs(message.timestamp * 1000).format('LT'),\n\t\t\t\t\t\t\t\tLOCALIZED_DATE: dayjs(message.timestamp * 1000).format('L')\n\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div class=\"chat-{message.role} w-full min-w-full markdown-prose\">\n\t\t\t{#if edit !== true}\n\t\t\t\t{#if message.files}\n\t\t\t\t\t<div class=\"mb-1 w-full flex flex-col justify-end overflow-x-auto gap-1 flex-wrap\">\n\t\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t\t<div class={($settings?.chatBubble ?? true) ? 'self-end' : ''}>\n\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t<Image src={file.url} imageClassName=\" max-h-96 rounded-lg\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tsmall={true}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\n\t\t\t{#if edit === true}\n\t\t\t\t<div class=\" w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 mb-2\">\n\t\t\t\t\t{#if (editedFiles ?? []).length > 0}\n\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-2 -mx-2 mb-1\">\n\t\t\t\t\t\t\t{#each editedFiles as file, fileIdx}\n\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t<div class=\" relative group\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"relative flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"input\"\n\t\t\t\t\t\t\t\t\t\t\t\timageClassName=\" size-14 rounded-xl object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\" bg-white text-black border border-white rounded-full {($settings?.highContrastMode ??\n\t\t\t\t\t\t\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'group-hover:visible invisible transition'}\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\teditedFiles.splice(fileIdx, 1);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\teditedFiles = editedFiles;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\tedit={true}\n\t\t\t\t\t\t\t\t\t\ton:dismiss={async () => {\n\t\t\t\t\t\t\t\t\t\t\teditedFiles.splice(fileIdx, 1);\n\n\t\t\t\t\t\t\t\t\t\t\teditedFiles = editedFiles;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(file);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"max-h-96 overflow-auto\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\t\tbind:this={messageEditTextAreaElement}\n\t\t\t\t\t\t\tclass=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-between text-sm font-medium\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"save-edit-message-button\"\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\teditMessageConfirmHandler(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Send')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{:else if message.content !== ''}\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<div class=\"flex {($settings?.chatBubble ?? true) ? 'justify-end pb-1' : 'w-full'}\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"rounded-3xl {($settings?.chatBubble ?? true)\n\t\t\t\t\t\t\t\t? `max-w-[90%] px-4 py-1.5  bg-gray-50 dark:bg-gray-850 ${\n\t\t\t\t\t\t\t\t\t\tmessage.files ? 'rounded-tr-lg' : ''\n\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t: ' w-full'}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if message.content}\n\t\t\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\t\t\tid={`${chatId}-${message.id}`}\n\t\t\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t{#if edit !== true}\n\t\t\t\t<div\n\t\t\t\t\tclass=\" flex {($settings?.chatBubble ?? true)\n\t\t\t\t\t\t? 'justify-end'\n\t\t\t\t\t\t: ''}  text-gray-600 dark:text-gray-500\"\n\t\t\t\t>\n\t\t\t\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(`message-index-input-${message.id}`);\n\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"{($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message?.content}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"{($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if $_user?.role === 'admin' || ($_user?.permissions?.chat?.delete_message ?? false)}\n\t\t\t\t\t\t{#if !readOnly && (!isFirstMessage || siblings.length > 1)}\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"{($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1 rounded-sm dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if $settings?.chatBubble ?? true}\n\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(`message-index-input-${message.id}`);\n\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\tconst i18n = getContext('i18n');\n\n\timport { settings } from '$lib/stores';\n\timport { copyToClipboard } from '$lib/utils';\n\n\timport MultiResponseMessages from './MultiResponseMessages.svelte';\n\timport ResponseMessage from './ResponseMessage.svelte';\n\timport UserMessage from './UserMessage.svelte';\n\n\texport let chatId;\n\texport let selectedModels = [];\n\texport let idx = 0;\n\n\texport let history;\n\texport let messageId;\n\n\texport let user;\n\n\texport let setInputText: Function = () => {};\n\texport let gotoMessage;\n\texport let showPreviousMessage;\n\texport let showNextMessage;\n\texport let updateChat;\n\n\texport let editMessage;\n\texport let saveMessage;\n\texport let deleteMessage;\n\texport let rateMessage;\n\texport let actionMessage;\n\texport let submitMessage;\n\n\texport let regenerateResponse;\n\texport let continueResponse;\n\texport let mergeResponses;\n\n\texport let addMessages;\n\texport let triggerScroll;\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n</script>\n\n<div\n\tclass=\"flex flex-col justify-between px-5 mb-3 w-full {($settings?.widescreenMode ?? null)\n\t\t? 'max-w-full'\n\t\t: 'max-w-5xl'} mx-auto rounded-lg group\"\n>\n\t{#if history.messages[messageId]}\n\t\t{#if history.messages[messageId].role === 'user'}\n\t\t\t<UserMessage\n\t\t\t\t{user}\n\t\t\t\t{chatId}\n\t\t\t\t{history}\n\t\t\t\t{messageId}\n\t\t\t\tisFirstMessage={idx === 0}\n\t\t\t\tsiblings={history.messages[messageId].parentId !== null\n\t\t\t\t\t? (history.messages[history.messages[messageId].parentId]?.childrenIds ?? [])\n\t\t\t\t\t: (Object.values(history.messages)\n\t\t\t\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t\t\t\t.map((message) => message.id) ?? [])}\n\t\t\t\t{gotoMessage}\n\t\t\t\t{showPreviousMessage}\n\t\t\t\t{showNextMessage}\n\t\t\t\t{editMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{readOnly}\n\t\t\t\t{editCodeBlock}\n\t\t\t\t{topPadding}\n\t\t\t/>\n\t\t{:else if (history.messages[history.messages[messageId].parentId]?.models?.length ?? 1) === 1}\n\t\t\t<ResponseMessage\n\t\t\t\t{chatId}\n\t\t\t\t{history}\n\t\t\t\t{messageId}\n\t\t\t\t{selectedModels}\n\t\t\t\tisLastMessage={messageId === history.currentId}\n\t\t\t\tsiblings={history.messages[history.messages[messageId].parentId]?.childrenIds ?? []}\n\t\t\t\t{setInputText}\n\t\t\t\t{gotoMessage}\n\t\t\t\t{showPreviousMessage}\n\t\t\t\t{showNextMessage}\n\t\t\t\t{updateChat}\n\t\t\t\t{editMessage}\n\t\t\t\t{saveMessage}\n\t\t\t\t{rateMessage}\n\t\t\t\t{actionMessage}\n\t\t\t\t{submitMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{continueResponse}\n\t\t\t\t{regenerateResponse}\n\t\t\t\t{addMessages}\n\t\t\t\t{readOnly}\n\t\t\t\t{editCodeBlock}\n\t\t\t\t{topPadding}\n\t\t\t/>\n\t\t{:else}\n\t\t\t<MultiResponseMessages\n\t\t\t\tbind:history\n\t\t\t\t{chatId}\n\t\t\t\t{messageId}\n\t\t\t\t{selectedModels}\n\t\t\t\tisLastMessage={messageId === history?.currentId}\n\t\t\t\t{setInputText}\n\t\t\t\t{updateChat}\n\t\t\t\t{editMessage}\n\t\t\t\t{saveMessage}\n\t\t\t\t{rateMessage}\n\t\t\t\t{actionMessage}\n\t\t\t\t{submitMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{continueResponse}\n\t\t\t\t{regenerateResponse}\n\t\t\t\t{mergeResponses}\n\t\t\t\t{triggerScroll}\n\t\t\t\t{addMessages}\n\t\t\t\t{readOnly}\n\t\t\t\t{editCodeBlock}\n\t\t\t\t{topPadding}\n\t\t\t/>\n\t\t{/if}\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport Fuse from 'fuse.js';\n\timport Bolt from '$lib/components/icons/Bolt.svelte';\n\timport { onMount, getContext } from 'svelte';\n\timport { settings, WEBUI_NAME } from '$lib/stores';\n\timport { WEBUI_VERSION } from '$lib/constants';\n\n\tconst i18n = getContext('i18n');\n\n\texport let suggestionPrompts = [];\n\texport let className = '';\n\texport let inputValue = '';\n\texport let onSelect = (e) => {};\n\n\tlet sortedPrompts = [];\n\n\tconst fuseOptions = {\n\t\tkeys: ['content', 'title'],\n\t\tthreshold: 0.5\n\t};\n\n\tlet fuse;\n\tlet filteredPrompts = [];\n\n\t// Initialize Fuse\n\t$: fuse = new Fuse(sortedPrompts, fuseOptions);\n\n\t// Update the filteredPrompts if inputValue changes\n\t// Only increase version if something wirklich gendert hat\n\t$: getFilteredPrompts(inputValue);\n\n\t// Helper function to check if arrays are the same\n\t// (based on unique IDs oder content)\n\tfunction arraysEqual(a, b) {\n\t\tif (a.length !== b.length) return false;\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif ((a[i].id ?? a[i].content) !== (b[i].id ?? b[i].content)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tconst getFilteredPrompts = (inputValue) => {\n\t\tif (inputValue.length > 500) {\n\t\t\tfilteredPrompts = [];\n\t\t} else {\n\t\t\tconst newFilteredPrompts =\n\t\t\t\tinputValue.trim() && fuse\n\t\t\t\t\t? fuse.search(inputValue.trim()).map((result) => result.item)\n\t\t\t\t\t: sortedPrompts;\n\n\t\t\t// Compare with the oldFilteredPrompts\n\t\t\t// If there's a difference, update array + version\n\t\t\tif (!arraysEqual(filteredPrompts, newFilteredPrompts)) {\n\t\t\t\tfilteredPrompts = newFilteredPrompts;\n\t\t\t}\n\t\t}\n\t};\n\n\t$: if (suggestionPrompts) {\n\t\tsortedPrompts = [...(suggestionPrompts ?? [])].sort(() => Math.random() - 0.5);\n\t\tgetFilteredPrompts(inputValue);\n\t}\n</script>\n\n<div class=\"mb-1 flex gap-1 text-xs font-medium items-center text-gray-600 dark:text-gray-400\">\n\t{#if filteredPrompts.length > 0}\n\t\t<Bolt />\n\t\t{$i18n.t('Suggested')}\n\t{:else}\n\t\t<!-- Keine Vorschlge -->\n\n\t\t<div\n\t\t\tclass=\"flex w-full {$settings?.landingPageMode === 'chat'\n\t\t\t\t? ' -mt-1'\n\t\t\t\t: 'text-center items-center justify-center'}  self-start text-gray-600 dark:text-gray-400\"\n\t\t>\n\t\t\t{$WEBUI_NAME}  v{WEBUI_VERSION}\n\t\t</div>\n\t{/if}\n</div>\n\n<div class=\"h-40 w-full\">\n\t{#if filteredPrompts.length > 0}\n\t\t<div role=\"list\" class=\"max-h-40 overflow-auto scrollbar-none items-start {className}\">\n\t\t\t{#each filteredPrompts as prompt, idx (prompt.id || prompt.content)}\n\t\t\t\t<!-- svelte-ignore a11y-no-interactive-element-to-noninteractive-role -->\n\t\t\t\t<button\n\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\tclass=\"waterfall flex flex-col flex-1 shrink-0 w-full justify-between\n\t\t\t\t       px-3 py-2 rounded-xl bg-transparent hover:bg-black/5\n\t\t\t\t       dark:hover:bg-white/5 transition group\"\n\t\t\t\t\tstyle=\"animation-delay: {idx * 60}ms\"\n\t\t\t\t\ton:click={() => onSelect({ type: 'prompt', data: prompt.content })}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex flex-col text-left\">\n\t\t\t\t\t\t{#if prompt.title && prompt.title[0] !== ''}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.title[0]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1\">\n\t\t\t\t\t\t\t\t{prompt.title[1]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1\">\n\t\t\t\t\t\t\t\t{$i18n.t('Prompt')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t/* Waterfall animation for the suggestions */\n\t@keyframes fadeInUp {\n\t\t0% {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(20px);\n\t\t}\n\t\t100% {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}\n\n\t.waterfall {\n\t\topacity: 0;\n\t\tanimation-name: fadeInUp;\n\t\tanimation-duration: 200ms;\n\t\tanimation-fill-mode: forwards;\n\t\tanimation-timing-function: ease;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { marked } from 'marked';\n\n\timport { config, user, models as _models, temporaryChatEnabled } from '$lib/stores';\n\timport { onMount, getContext } from 'svelte';\n\n\timport { blur, fade } from 'svelte/transition';\n\n\timport Suggestions from './Suggestions.svelte';\n\timport { sanitizeResponseContent } from '$lib/utils';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport EyeSlash from '$lib/components/icons/EyeSlash.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let modelIds = [];\n\texport let models = [];\n\texport let atSelectedModel;\n\n\texport let onSelect = (e) => {};\n\n\tlet mounted = false;\n\tlet selectedModelIdx = 0;\n\n\t$: if (modelIds.length > 0) {\n\t\tselectedModelIdx = models.length - 1;\n\t}\n\n\t$: models = modelIds.map((id) => $_models.find((m) => m.id === id));\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n</script>\n\n{#key mounted}\n\t<div class=\"m-auto w-full max-w-6xl px-8 lg:px-20\">\n\t\t<div class=\"flex justify-start\">\n\t\t\t<div class=\"flex -space-x-4 mb-0.5\" in:fade={{ duration: 200 }}>\n\t\t\t\t{#each models as model, modelIdx}\n\t\t\t\t\t<button\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedModelIdx = modelIdx;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={marked.parse(\n\t\t\t\t\t\t\t\tsanitizeResponseContent(\n\t\t\t\t\t\t\t\t\tmodels[selectedModelIdx]?.info?.meta?.description ?? ''\n\t\t\t\t\t\t\t\t).replaceAll('\\n', '<br>')\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tplacement=\"right\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tcrossorigin=\"anonymous\"\n\t\t\t\t\t\t\t\tsrc={model?.info?.meta?.profile_image_url ??\n\t\t\t\t\t\t\t\t\t($i18n.language === 'dg-DG'\n\t\t\t\t\t\t\t\t\t\t? `${WEBUI_BASE_URL}/doge.png`\n\t\t\t\t\t\t\t\t\t\t: `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t\t\t\t\t\t\tclass=\" size-[2.7rem] rounded-full border-[1px] border-gray-100 dark:border-none\"\n\t\t\t\t\t\t\t\talt=\"logo\"\n\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if $temporaryChatEnabled}\n\t\t\t<Tooltip\n\t\t\t\tcontent={$i18n.t(\"This chat won't appear in history and your messages will not be saved.\")}\n\t\t\t\tclassName=\"w-full flex justify-start mb-0.5\"\n\t\t\t\tplacement=\"top\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center gap-2 text-gray-500 text-lg mt-2 w-fit\">\n\t\t\t\t\t<EyeSlash strokeWidth=\"2.5\" className=\"size-5\" />{$i18n.t('Temporary Chat')}\n\t\t\t\t</div>\n\t\t\t</Tooltip>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\" mt-2 mb-4 text-3xl text-gray-800 dark:text-gray-100 text-left flex items-center gap-4 font-primary\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<div class=\" capitalize line-clamp-1\" in:fade={{ duration: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.name}\n\t\t\t\t\t\t{models[selectedModelIdx]?.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('Hello, {{name}}', { name: $user?.name })}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div in:fade={{ duration: 200, delay: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.description ?? null}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-0.5 text-base font-normal text-gray-500 dark:text-gray-400 line-clamp-3 markdown\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{@html marked.parse(\n\t\t\t\t\t\t\t\tsanitizeResponseContent(\n\t\t\t\t\t\t\t\t\tmodels[selectedModelIdx]?.info?.meta?.description\n\t\t\t\t\t\t\t\t).replaceAll('\\n', '<br>')\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user}\n\t\t\t\t\t\t\t<div class=\"mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500\">\n\t\t\t\t\t\t\t\tBy\n\t\t\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user.community}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref=\"https://openwebui.com/m/{models[selectedModelIdx]?.info?.meta?.user\n\t\t\t\t\t\t\t\t\t\t\t.username}\"\n\t\t\t\t\t\t\t\t\t\t>{models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t? models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t: `@${models[selectedModelIdx]?.info?.meta?.user.username}`}</a\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{models[selectedModelIdx]?.info?.meta?.user.name}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\" text-gray-400 dark:text-gray-500 line-clamp-1 font-p\">\n\t\t\t\t\t\t\t{$i18n.t('How can I help you today?')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" w-full font-primary\" in:fade={{ duration: 200, delay: 300 }}>\n\t\t\t<Suggestions\n\t\t\t\tclassName=\"grid grid-cols-2\"\n\t\t\t\tsuggestionPrompts={atSelectedModel?.info?.meta?.suggestion_prompts ??\n\t\t\t\t\tmodels[selectedModelIdx]?.info?.meta?.suggestion_prompts ??\n\t\t\t\t\t$config?.default_prompt_suggestions ??\n\t\t\t\t\t[]}\n\t\t\t\t{onSelect}\n\t\t\t/>\n\t\t</div>\n\t</div>\n{/key}\n","<script lang=\"ts\">\n\timport { v4 as uuidv4 } from 'uuid';\n\timport {\n\t\tchats,\n\t\tconfig,\n\t\tsettings,\n\t\tuser as _user,\n\t\tmobile,\n\t\tcurrentChatPage,\n\t\ttemporaryChatEnabled\n\t} from '$lib/stores';\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport { toast } from 'svelte-sonner';\n\timport { getChatList, updateChatById } from '$lib/apis/chats';\n\timport { copyToClipboard, extractCurlyBraceWords } from '$lib/utils';\n\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\n\timport ChatPlaceholder from './ChatPlaceholder.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let className = 'h-full flex pt-8';\n\n\texport let chatId = '';\n\texport let user = $_user;\n\n\texport let prompt;\n\texport let history = {};\n\texport let selectedModels;\n\texport let atSelectedModel;\n\n\tlet messages = [];\n\n\texport let setInputText: Function = () => {};\n\n\texport let sendMessage: Function;\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\texport let mergeResponses: Function;\n\n\texport let chatActionHandler: Function;\n\texport let showMessage: Function = () => {};\n\texport let submitMessage: Function = () => {};\n\texport let addMessages: Function = () => {};\n\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\n\texport let topPadding = false;\n\texport let bottomPadding = false;\n\texport let autoScroll;\n\n\texport let onSelect = (e) => {};\n\n\texport let messagesCount: number | null = 20;\n\tlet messagesLoading = false;\n\n\tconst loadMoreMessages = async () => {\n\t\t// scroll slightly down to disable continuous loading\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollTop + 100;\n\n\t\tmessagesLoading = true;\n\t\tmessagesCount += 20;\n\n\t\tawait tick();\n\n\t\tmessagesLoading = false;\n\t};\n\n\t$: if (history.currentId) {\n\t\tlet _messages = [];\n\n\t\tlet message = history.messages[history.currentId];\n\t\twhile (message && (messagesCount !== null ? _messages.length <= messagesCount : true)) {\n\t\t\t_messages.unshift({ ...message });\n\t\t\tmessage = message.parentId !== null ? history.messages[message.parentId] : null;\n\t\t}\n\n\t\tmessages = _messages;\n\t} else {\n\t\tmessages = [];\n\t}\n\n\t$: if (autoScroll && bottomPadding) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t})();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollHeight;\n\t};\n\n\tconst updateChat = async () => {\n\t\tif (!$temporaryChatEnabled) {\n\t\t\thistory = history;\n\t\t\tawait tick();\n\t\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\t\thistory: history,\n\t\t\t\tmessages: messages\n\t\t\t});\n\n\t\t\tcurrentChatPage.set(1);\n\t\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\n\t\t}\n\t};\n\n\tconst gotoMessage = async (message, idx) => {\n\t\t// Determine the correct sibling list (either parent's children or root messages)\n\t\tlet siblings;\n\t\tif (message.parentId !== null) {\n\t\t\tsiblings = history.messages[message.parentId].childrenIds;\n\t\t} else {\n\t\t\tsiblings = Object.values(history.messages)\n\t\t\t\t.filter((msg) => msg.parentId === null)\n\t\t\t\t.map((msg) => msg.id);\n\t\t}\n\n\t\t// Clamp index to a valid range\n\t\tidx = Math.max(0, Math.min(idx, siblings.length - 1));\n\n\t\tlet messageId = siblings[idx];\n\n\t\t// If we're navigating to a different message\n\t\tif (message.id !== messageId) {\n\t\t\t// Drill down to the deepest child of that branch\n\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t}\n\n\t\t\thistory.currentId = messageId;\n\t\t}\n\n\t\tawait tick();\n\n\t\t// Optional auto-scroll\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst showPreviousMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.max(history.messages[message.parentId].childrenIds.indexOf(message.id) - 1, 0)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId = childrenIds[Math.max(childrenIds.indexOf(message.id) - 1, 0)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst showNextMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.min(\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.indexOf(message.id) + 1,\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.length - 1\n\t\t\t\t\t)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId =\n\t\t\t\tchildrenIds[Math.min(childrenIds.indexOf(message.id) + 1, childrenIds.length - 1)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst rateMessage = async (messageId, rating) => {\n\t\thistory.messages[messageId].annotation = {\n\t\t\t...history.messages[messageId].annotation,\n\t\t\trating: rating\n\t\t};\n\n\t\tawait updateChat();\n\t};\n\n\tconst editMessage = async (messageId, { content, files }, submit = true) => {\n\t\tif ((selectedModels ?? []).filter((id) => id).length === 0) {\n\t\t\ttoast.error($i18n.t('Model not selected'));\n\t\t\treturn;\n\t\t}\n\t\tif (history.messages[messageId].role === 'user') {\n\t\t\tif (submit) {\n\t\t\t\t// New user message\n\t\t\t\tlet userPrompt = content;\n\t\t\t\tlet userMessageId = uuidv4();\n\n\t\t\t\tlet userMessage = {\n\t\t\t\t\tid: userMessageId,\n\t\t\t\t\tparentId: history.messages[messageId].parentId,\n\t\t\t\t\tchildrenIds: [],\n\t\t\t\t\trole: 'user',\n\t\t\t\t\tcontent: userPrompt,\n\t\t\t\t\t...(files && { files: files }),\n\t\t\t\t\tmodels: selectedModels,\n\t\t\t\t\ttimestamp: Math.floor(Date.now() / 1000) // Unix epoch\n\t\t\t\t};\n\n\t\t\t\tlet messageParentId = history.messages[messageId].parentId;\n\n\t\t\t\tif (messageParentId !== null) {\n\t\t\t\t\thistory.messages[messageParentId].childrenIds = [\n\t\t\t\t\t\t...history.messages[messageParentId].childrenIds,\n\t\t\t\t\t\tuserMessageId\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\thistory.messages[userMessageId] = userMessage;\n\t\t\t\thistory.currentId = userMessageId;\n\n\t\t\t\tawait tick();\n\t\t\t\tawait sendMessage(history, userMessageId);\n\t\t\t} else {\n\t\t\t\t// Edit user message\n\t\t\t\thistory.messages[messageId].content = content;\n\t\t\t\thistory.messages[messageId].files = files;\n\t\t\t\tawait updateChat();\n\t\t\t}\n\t\t} else {\n\t\t\tif (submit) {\n\t\t\t\t// New response message\n\t\t\t\tconst responseMessageId = uuidv4();\n\t\t\t\tconst message = history.messages[messageId];\n\t\t\t\tconst parentId = message.parentId;\n\n\t\t\t\tconst responseMessage = {\n\t\t\t\t\t...message,\n\t\t\t\t\tid: responseMessageId,\n\t\t\t\t\tparentId: parentId,\n\t\t\t\t\tchildrenIds: [],\n\t\t\t\t\tfiles: undefined,\n\t\t\t\t\tcontent: content,\n\t\t\t\t\ttimestamp: Math.floor(Date.now() / 1000) // Unix epoch\n\t\t\t\t};\n\n\t\t\t\thistory.messages[responseMessageId] = responseMessage;\n\t\t\t\thistory.currentId = responseMessageId;\n\n\t\t\t\t// Append messageId to childrenIds of parent message\n\t\t\t\tif (parentId !== null) {\n\t\t\t\t\thistory.messages[parentId].childrenIds = [\n\t\t\t\t\t\t...history.messages[parentId].childrenIds,\n\t\t\t\t\t\tresponseMessageId\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tawait updateChat();\n\t\t\t} else {\n\t\t\t\t// Edit response message\n\t\t\t\thistory.messages[messageId].originalContent = history.messages[messageId].content;\n\t\t\t\thistory.messages[messageId].content = content;\n\t\t\t\tawait updateChat();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst actionMessage = async (actionId, message, event = null) => {\n\t\tawait chatActionHandler(chatId, actionId, message.model, message.id, event);\n\t};\n\n\tconst saveMessage = async (messageId, message) => {\n\t\thistory.messages[messageId] = message;\n\t\tawait updateChat();\n\t};\n\n\tconst deleteMessage = async (messageId) => {\n\t\tconst messageToDelete = history.messages[messageId];\n\t\tconst parentMessageId = messageToDelete.parentId;\n\t\tconst childMessageIds = messageToDelete.childrenIds ?? [];\n\n\t\t// Collect all grandchildren\n\t\tconst grandchildrenIds = childMessageIds.flatMap(\n\t\t\t(childId) => history.messages[childId]?.childrenIds ?? []\n\t\t);\n\n\t\t// Update parent's children\n\t\tif (parentMessageId && history.messages[parentMessageId]) {\n\t\t\thistory.messages[parentMessageId].childrenIds = [\n\t\t\t\t...history.messages[parentMessageId].childrenIds.filter((id) => id !== messageId),\n\t\t\t\t...grandchildrenIds\n\t\t\t];\n\t\t}\n\n\t\t// Update grandchildren's parent\n\t\tgrandchildrenIds.forEach((grandchildId) => {\n\t\t\tif (history.messages[grandchildId]) {\n\t\t\t\thistory.messages[grandchildId].parentId = parentMessageId;\n\t\t\t}\n\t\t});\n\n\t\t// Delete the message and its children\n\t\t[messageId, ...childMessageIds].forEach((id) => {\n\t\t\tdelete history.messages[id];\n\t\t});\n\n\t\tawait tick();\n\n\t\tshowMessage({ id: parentMessageId });\n\n\t\t// Update the chat\n\t\tawait updateChat();\n\t};\n\n\tconst triggerScroll = () => {\n\t\tif (autoScroll) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n</script>\n\n<div class={className}>\n\t{#if Object.keys(history?.messages ?? {}).length == 0}\n\t\t<ChatPlaceholder modelIds={selectedModels} {atSelectedModel} {onSelect} />\n\t{:else}\n\t\t<div class=\"w-full pt-2\">\n\t\t\t{#key chatId}\n\t\t\t\t<section class=\"w-full\" aria-labelledby=\"chat-conversation\">\n\t\t\t\t\t<h2 class=\"sr-only\" id=\"chat-conversation\">{$i18n.t('Chat Conversation')}</h2>\n\t\t\t\t\t{#if messages.at(0)?.parentId !== null}\n\t\t\t\t\t\t<Loader\n\t\t\t\t\t\t\ton:visible={(e) => {\n\t\t\t\t\t\t\t\tconsole.log('visible');\n\t\t\t\t\t\t\t\tif (!messagesLoading) {\n\t\t\t\t\t\t\t\t\tloadMoreMessages();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t\t\t\t<div class=\" \">{$i18n.t('Loading...')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Loader>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<ul role=\"log\" aria-live=\"polite\" aria-relevant=\"additions\" aria-atomic=\"false\">\n\t\t\t\t\t\t{#each messages as message, messageIdx (message.id)}\n\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\tbind:history\n\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\tmessageId={message.id}\n\t\t\t\t\t\t\t\tidx={messageIdx}\n\t\t\t\t\t\t\t\t{user}\n\t\t\t\t\t\t\t\t{setInputText}\n\t\t\t\t\t\t\t\t{gotoMessage}\n\t\t\t\t\t\t\t\t{showPreviousMessage}\n\t\t\t\t\t\t\t\t{showNextMessage}\n\t\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t\t{regenerateResponse}\n\t\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t\t{mergeResponses}\n\t\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t\t{triggerScroll}\n\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</ul>\n\t\t\t\t</section>\n\t\t\t\t<div class=\"pb-18\" />\n\t\t\t\t{#if bottomPadding}\n\t\t\t\t\t<div class=\"  pb-6\" />\n\t\t\t\t{/if}\n\t\t\t{/key}\n\t\t</div>\n\t{/if}\n</div>\n"],"names":["ctx","_a","insert_hydration","target","div","anchor","attr","button","button_class_value","button_disabled_value","_b","dirty","div0","div1","set_data","t0","t0_value","i","t_value","create_if_block_1","create_if_block_2","create_if_block_3","create_if_block_4","create_if_block_5","create_if_block_6","create_if_block_7","create_if_block_8","create_if_block_9","create_if_block_10","create_if_block_11","create_if_block_12","create_if_block_13","create_if_block_14","if_block0","create_if_block_15","each_value_1","ensure_array_like","func","create_if_block","div12","div12_id_value","append_hydration","button0","div7","div6","div2","div5","div3","div4","div8","div9","textarea","div11","div10","button1","t1","t1_value","t6","t6_value","t9","t9_value","t14","t14_value","current","_","i18n","getContext","dispatch","createEventDispatcher","message","$$props","show","LIKE_REASONS","DISLIKE_REASONS","tags","reasons","selectedReason","comment","detailedRating","selectedModel","init","$$invalidate","_c","tag","_e","_d","onMount","$models","m","toast","$i18n","saveHandler","rating","reason","e","a","a_href_value","each_value","img","img_src_value","src_url_equal","status","state","value","content","calculatePercentage","child_ctx","constants_0","show_if","tooltip_changes","WEBUI_API_BASE_URL","_f","_h","_g","t","_j","_i","span","if_block","span_class_value","getRelevanceColor","t3_value","t3","pre","iframe","iframe_srcdoc_value","if_block1","each_blocks","distance","percentage","citation","showPercentage","showRelevance","mergedDocuments","decodeString","str","c","doc","b","t2_value","t2","get_if_ctx","calculateShowRelevance","sources","distances","inRange","d","outOfRange","shouldShowPercentage","id","readOnly","citations","showCitations","showCitationModal","selectedCitation","showSourceModal","sourceIdx","embedUrl","showControls","showEmbeds","embed","acc","source","document","index","metadata","_source","existingSource","item","hr","ul","li","if_block3","_k","_m","_l","_o","_n","if_block4","_q","_p","_s","_r","codeblock_changes","codeExecution","get_key","div1_class_value","codeExecutions","selectedCodeExecution","showCodeExecutionModal","updateSelectedCodeExecution","execution","input","svg","path","switch_value","messageId","model","messages","actions","onAdd","floatingInput","selectedAction","selectedText","floatingInputValue","responseContent","responseDone","controller","DEFAULT_ACTIONS","ChatBubble","LightBulb","autoScroll","responseContainer","actionHandler","actionId","selectedContent","line","action","prompt","toolIds","varToolPattern","match","variableId","toolId","toolIdPattern","res","chatCompletion","$socket","$chatId","reader","decoder","processStream","done","lines","tick","data","addHandler","closeHandler","onDestroy","createMessagesList","floatingbuttons_changes","markdown_changes","history","selectedModels","save","preview","floatingButtons","editCodeBlock","topPadding","onSave","onSourceClick","onTaskClick","onAddMessages","contentContainerElement","floatingButtonsElement","updateButtonPosition","event","buttonsContainerElement","closeFloatingButtons","selection","rect","parentRect","top","left","spaceOnRight","halfScreenWidth","$mobile","right","keydownHandler","ids","token","lang","code","$settings","showArtifacts","artifactCode","showOverview","$$value","modelId","parentId","KokoroWorker","dtype","__publicField","WorkerInstance","error","audioUrl","request","resolve","reject","handleMessage","text","voice","followUps","onClick","click_handler","followUp","path0","path1","path2","path3","className","strokeWidth","flyAndScale","onRegenerate","onClose","inputValue","div0_class_value","t_1_value","t_1","span1","span0","statusHistory","expand","showHistory","dayjs","formatDate","create_if_block_34","statushistory_changes","each_value_2","fileitem_changes","image_changes","create_if_block_27","if_block2","create_if_block_26","create_if_block_25","textarea_id_value","button2","t5","t5_value","contentrenderer_changes","error_changes","citations_changes","codeexecutions_changes","create_if_block_22","create_if_block_23","svg0","svg1","input_id_value","input_value_value","input_max_value","create_if_block_20","create_if_block_17","create_if_block_21","style","circle0","circle1","circle2","create_if_block_18","create_if_block_19","button_id_value","create_if_block_16","sanitizeResponseContent","func_5","func_6","div_class_value","img_class_value","img_alt_value","button_aria_label_value","followups_changes","div_intro","create_in_transition","fade","WEBUI_BASE_URL","create_if_block_33","create_if_block_30","div2_class_value","div5_class_value","div5_id_value","div5_dir_value","previous_key","safe_not_equal","f","chatId","siblings","setInputText","gotoMessage","showPreviousMessage","showNextMessage","updateChat","editMessage","saveMessage","rateMessage","actionMessage","deleteMessage","submitMessage","continueResponse","regenerateResponse","addMessages","isLastMessage","citationsElement","showDeleteConfirm","edit","editedContent","editTextAreaElement","messageIndexEdit","audioParts","speaking","speakingIdx","loadingSpeech","generatingImage","showRateComment","copyToClipboard","removeAllDetails","$config","_copyToClipboard","playAudio","idx","audio","r","toggleSpeakMessage","voices","getVoicesLoop","v","speak","messageContentParts","getMessageContentParts","_sentence","lastPlayedAudioPromise","$TTSWorker","TTSWorker","sentence","blob","synthesizeOpenAISpeech","_u","_t","blobUrl","_w","_v","preprocessedDetailsCache","preprocessForEditing","detailsBlocks","postprocessAfterEditing","editMessageHandler","editMessageConfirmHandler","messageContent","saveAsCopyHandler","cancelEditMessage","generateImage","imageGenerations","files","image","feedbackLoading","feedbackHandler","details","updatedMessage","chat","getChatById","feedbackItem","baseModels","feedback","updateFeedbackById","createNewFeedback","generateTags","deleteMessageHandler","isCmdOrCtrlPressed","isEnterPressed","func_2","raw","oldContent","newContent","func_7","constants_1","args","get_if_ctx_1","get_if_ctx_3","get_if_ctx_2","localizedFormat","mergeResponses","triggerScroll","parentMessage","groupedMessageIds","groupedMessageIdsIdx","selectedModelIdx","modelIdx","messageIdx","messageChildrenIds","initHandler","modelMessageIds","modelMessages","onGroupClick","_messageId","currentMessageId","mergeResponsesHandler","responses","messageIds","messageElement","func_3","func_4","func_8","profileimage_changes","t4","t4_value","create_if_block_24","div2_dir_value","div2_id_value","user","isFirstMessage","editedFiles","messageEditTextAreaElement","submit","fileIdx","func_1","usermessage_changes","WEBUI_VERSION","set_style","arraysEqual","suggestionPrompts","onSelect","sortedPrompts","fuseOptions","fuse","filteredPrompts","getFilteredPrompts","newFilteredPrompts","result","Fuse","marked","raw_value","html_tag","suggestions_changes","div0_intro","div2_intro","div3_intro","div6_intro","modelIds","models","atSelectedModel","mounted","$_models","message_1_changes","section","h2","$_user","sendMessage","chatActionHandler","showMessage","bottomPadding","messagesCount","messagesLoading","loadMoreMessages","element","scrollToBottom","$temporaryChatEnabled","updateChatById","currentChatPage","chats","getChatList","$currentChatPage","msg","childrenIds","userPrompt","userMessageId","uuidv4","userMessage","messageParentId","responseMessageId","responseMessage","messageToDelete","parentMessageId","childMessageIds","grandchildrenIds","childId","grandchildId","_messages"],"mappings":"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"}