import{S as ue,i as fe,s as ge,x as Re,e as ke,c as we,a as x,d as M,f as _,ax as de,g as U,G as De,z as Ze,A as Fe,B as Ge,q as Y,r as p,X as ut,v as Rt,k as J,C as ee,l as ve,t as $e,D as ie,p as Ce,b as et,E as te,j as tt,F as ne,a7 as Te,a8 as Me,a9 as nt,ab as qe,a3 as Le,ae as X,a2 as ye,V as Ee,m as Ie,W as Se,y as Be,u as Ye,ai as Zt,w as Jt,ay as sn,N as St,H as Bn,ao as Fi,_ as gn,a6 as rn,ad as ze,h as se,n as _e,aa as Vt,T as el,Q as tl,ah as nl,az as il,ar as ol,ap as Un,ak as qn,M as ll}from"./BsAB9Z30.js";import"./IHki7fMi.js";import{w as oe,a as Je,d as It}from"./BYfvXhfD.js";import{g as Jn,C as sl,d as rl,u as al,P as Qn}from"./Px_ajtSr.js";import{P as Gi}from"./X57m8tU6.js";import{g as mt,a as Ft,T as ul}from"./cMkWkffq.js";import{H as fl}from"./4CqoFmPD.js";import{s as Qe,i as Yn,T as Cn,a as zn,t as cl}from"./aA1VTlmX.js";import{g as ji}from"./fNyk_A45.js";import{i as dl}from"./C-V_EQOO.js";import{e as At,u as Xn,o as Wn}from"./BjVHJN9o.js";import{g as hl}from"./D0QH3NT1.js";import{X as gl}from"./CubwYUHd.js";function Oe(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Oe(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}function ml(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ot(t,e){if(t=ml(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const bl={passive:!1},Gt={capture:!0,passive:!1};function Pn(t){t.stopImmediatePropagation()}function Tt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ui(t){var e=t.document.documentElement,n=Qe(t).on("dragstart.drag",Tt,Gt);"onselectstart"in e?n.on("selectstart.drag",Tt,Gt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function qi(t,e){var n=t.document.documentElement,i=Qe(t).on("dragstart.drag",null);e&&(i.on("click.drag",Tt,Gt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const tn=t=>()=>t;function Tn(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:l,x:r,y:s,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Tn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function yl(t){return!t.ctrlKey&&!t.button}function _l(){return this.parentNode}function kl(t,e){return e??{x:t.x,y:t.y}}function wl(){return navigator.maxTouchPoints||"ontouchstart"in this}function El(){var t=yl,e=_l,n=kl,i=wl,o={},l=ji("start","drag","end"),r=0,s,a,u,f,d=0;function h(C){C.on("mousedown.drag",c).filter(i).on("touchstart.drag",E).on("touchmove.drag",g,bl).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(C,P){if(!(f||!t.call(this,C,P))){var A=k(this,e.call(this,C,P),C,P,"mouse");A&&(Qe(C.view).on("mousemove.drag",b,Gt).on("mouseup.drag",w,Gt),Ui(C.view),Pn(C),u=!1,s=C.clientX,a=C.clientY,A("start",C))}}function b(C){if(Tt(C),!u){var P=C.clientX-s,A=C.clientY-a;u=P*P+A*A>d}o.mouse("drag",C)}function w(C){Qe(C.view).on("mousemove.drag mouseup.drag",null),qi(C.view,u),Tt(C),o.mouse("end",C)}function E(C,P){if(t.call(this,C,P)){var A=C.changedTouches,D=e.call(this,C,P),N=A.length,O,W;for(O=0;O<N;++O)(W=k(this,D,C,P,A[O].identifier,A[O]))&&(Pn(C),W("start",C,A[O]))}}function g(C){var P=C.changedTouches,A=P.length,D,N;for(D=0;D<A;++D)(N=o[P[D].identifier])&&(Tt(C),N("drag",C,P[D]))}function S(C){var P=C.changedTouches,A=P.length,D,N;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),D=0;D<A;++D)(N=o[P[D].identifier])&&(Pn(C),N("end",C,P[D]))}function k(C,P,A,D,N,O){var W=l.copy(),R=ot(O||A,P),V,Z,m;if((m=n.call(C,new Tn("beforestart",{sourceEvent:A,target:h,identifier:N,active:r,x:R[0],y:R[1],dx:0,dy:0,dispatch:W}),D))!=null)return V=m.x-R[0]||0,Z=m.y-R[1]||0,function I(y,z,H){var T=R,K;switch(y){case"start":o[N]=I,K=r++;break;case"end":delete o[N],--r;case"drag":R=ot(H||z,P),K=r;break}W.call(y,C,new Tn(y,{sourceEvent:z,subject:m,target:h,identifier:N,active:K,x:R[0]+V,y:R[1]+Z,dx:R[0]-T[0],dy:R[1]-T[1],dispatch:W}),D)}}return h.filter=function(C){return arguments.length?(t=typeof C=="function"?C:tn(!!C),h):t},h.container=function(C){return arguments.length?(e=typeof C=="function"?C:tn(C),h):e},h.subject=function(C){return arguments.length?(n=typeof C=="function"?C:tn(C),h):n},h.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:tn(!!C),h):i},h.on=function(){var C=l.on.apply(l,arguments);return C===l?h:C},h.clickDistance=function(C){return arguments.length?(d=(C=+C)*C,h):Math.sqrt(d)},h}const nn=t=>()=>t;function Sl(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Mn(t){t.stopImmediatePropagation()}function pt(t){t.preventDefault(),t.stopImmediatePropagation()}function vl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Cl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function xn(){return this.__zoom||Yn}function zl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Pl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ml(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function Dl(){var t=vl,e=Cl,n=Ml,i=zl,o=Pl,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],s=250,a=dl,u=ji("start","zoom","end"),f,d,h,c=500,b=150,w=0,E=10;function g(m){m.property("__zoom",xn).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",W).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(m,I,y,z){var H=m.selection?m.selection():m;H.property("__zoom",xn),m!==H?P(m,I,y,z):H.interrupt().each(function(){A(this,arguments).event(z).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},g.scaleBy=function(m,I,y,z){g.scaleTo(m,function(){var H=this.__zoom.k,T=typeof I=="function"?I.apply(this,arguments):I;return H*T},y,z)},g.scaleTo=function(m,I,y,z){g.transform(m,function(){var H=e.apply(this,arguments),T=this.__zoom,K=y==null?C(H):typeof y=="function"?y.apply(this,arguments):y,j=T.invert(K),q=typeof I=="function"?I.apply(this,arguments):I;return n(k(S(T,q),K,j),H,r)},y,z)},g.translateBy=function(m,I,y,z){g.transform(m,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),r)},null,z)},g.translateTo=function(m,I,y,z,H){g.transform(m,function(){var T=e.apply(this,arguments),K=this.__zoom,j=z==null?C(T):typeof z=="function"?z.apply(this,arguments):z;return n(Yn.translate(j[0],j[1]).scale(K.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof y=="function"?-y.apply(this,arguments):-y),T,r)},z,H)};function S(m,I){return I=Math.max(l[0],Math.min(l[1],I)),I===m.k?m:new Cn(I,m.x,m.y)}function k(m,I,y){var z=I[0]-y[0]*m.k,H=I[1]-y[1]*m.k;return z===m.x&&H===m.y?m:new Cn(m.k,z,H)}function C(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function P(m,I,y,z){m.on("start.zoom",function(){A(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(z).end()}).tween("zoom",function(){var H=this,T=arguments,K=A(H,T).event(z),j=e.apply(H,T),q=y==null?C(j):typeof y=="function"?y.apply(H,T):y,Q=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),B=H.__zoom,le=typeof I=="function"?I.apply(H,T):I,re=a(B.invert(q).concat(Q/B.k),le.invert(q).concat(Q/le.k));return function(L){if(L===1)L=le;else{var ae=re(L),ce=Q/ae[2];L=new Cn(ce,q[0]-ae[0]*ce,q[1]-ae[1]*ce)}K.zoom(null,L)}})}function A(m,I,y){return!y&&m.__zooming||new D(m,I)}function D(m,I){this.that=m,this.args=I,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,I),this.taps=0}D.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,I){return this.mouse&&m!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var I=Qe(this.that).datum();u.call(m,this.that,new Sl(m,{sourceEvent:this.sourceEvent,target:g,type:m,transform:this.that.__zoom,dispatch:u}),I)}};function N(m,...I){if(!t.apply(this,arguments))return;var y=A(this,I).event(m),z=this.__zoom,H=Math.max(l[0],Math.min(l[1],z.k*Math.pow(2,i.apply(this,arguments)))),T=ot(m);if(y.wheel)(y.mouse[0][0]!==T[0]||y.mouse[0][1]!==T[1])&&(y.mouse[1]=z.invert(y.mouse[0]=T)),clearTimeout(y.wheel);else{if(z.k===H)return;y.mouse=[T,z.invert(T)],zn(this),y.start()}pt(m),y.wheel=setTimeout(K,b),y.zoom("mouse",n(k(S(z,H),y.mouse[0],y.mouse[1]),y.extent,r));function K(){y.wheel=null,y.end()}}function O(m,...I){if(h||!t.apply(this,arguments))return;var y=m.currentTarget,z=A(this,I,!0).event(m),H=Qe(m.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",Q,!0),T=ot(m,y),K=m.clientX,j=m.clientY;Ui(m.view),Mn(m),z.mouse=[T,this.__zoom.invert(T)],zn(this),z.start();function q(B){if(pt(B),!z.moved){var le=B.clientX-K,re=B.clientY-j;z.moved=le*le+re*re>w}z.event(B).zoom("mouse",n(k(z.that.__zoom,z.mouse[0]=ot(B,y),z.mouse[1]),z.extent,r))}function Q(B){H.on("mousemove.zoom mouseup.zoom",null),qi(B.view,z.moved),pt(B),z.event(B).end()}}function W(m,...I){if(t.apply(this,arguments)){var y=this.__zoom,z=ot(m.changedTouches?m.changedTouches[0]:m,this),H=y.invert(z),T=y.k*(m.shiftKey?.5:2),K=n(k(S(y,T),z,H),e.apply(this,I),r);pt(m),s>0?Qe(this).transition().duration(s).call(P,K,z,m):Qe(this).call(g.transform,K,z,m)}}function R(m,...I){if(t.apply(this,arguments)){var y=m.touches,z=y.length,H=A(this,I,m.changedTouches.length===z).event(m),T,K,j,q;for(Mn(m),K=0;K<z;++K)j=y[K],q=ot(j,this),q=[q,this.__zoom.invert(q),j.identifier],H.touch0?!H.touch1&&H.touch0[2]!==q[2]&&(H.touch1=q,H.taps=0):(H.touch0=q,T=!0,H.taps=1+!!f);f&&(f=clearTimeout(f)),T&&(H.taps<2&&(d=q[0],f=setTimeout(function(){f=null},c)),zn(this),H.start())}}function V(m,...I){if(this.__zooming){var y=A(this,I).event(m),z=m.changedTouches,H=z.length,T,K,j,q;for(pt(m),T=0;T<H;++T)K=z[T],j=ot(K,this),y.touch0&&y.touch0[2]===K.identifier?y.touch0[0]=j:y.touch1&&y.touch1[2]===K.identifier&&(y.touch1[0]=j);if(K=y.that.__zoom,y.touch1){var Q=y.touch0[0],B=y.touch0[1],le=y.touch1[0],re=y.touch1[1],L=(L=le[0]-Q[0])*L+(L=le[1]-Q[1])*L,ae=(ae=re[0]-B[0])*ae+(ae=re[1]-B[1])*ae;K=S(K,Math.sqrt(L/ae)),j=[(Q[0]+le[0])/2,(Q[1]+le[1])/2],q=[(B[0]+re[0])/2,(B[1]+re[1])/2]}else if(y.touch0)j=y.touch0[0],q=y.touch0[1];else return;y.zoom("touch",n(k(K,j,q),y.extent,r))}}function Z(m,...I){if(this.__zooming){var y=A(this,I).event(m),z=m.changedTouches,H=z.length,T,K;for(Mn(m),h&&clearTimeout(h),h=setTimeout(function(){h=null},c),T=0;T<H;++T)K=z[T],y.touch0&&y.touch0[2]===K.identifier?delete y.touch0:y.touch1&&y.touch1[2]===K.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(K=ot(K,this),Math.hypot(d[0]-K[0],d[1]-K[1])<E)){var j=Qe(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return g.wheelDelta=function(m){return arguments.length?(i=typeof m=="function"?m:nn(+m),g):i},g.filter=function(m){return arguments.length?(t=typeof m=="function"?m:nn(!!m),g):t},g.touchable=function(m){return arguments.length?(o=typeof m=="function"?m:nn(!!m),g):o},g.extent=function(m){return arguments.length?(e=typeof m=="function"?m:nn([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),g):e},g.scaleExtent=function(m){return arguments.length?(l[0]=+m[0],l[1]=+m[1],g):[l[0],l[1]]},g.translateExtent=function(m){return arguments.length?(r[0][0]=+m[0][0],r[1][0]=+m[1][0],r[0][1]=+m[0][1],r[1][1]=+m[1][1],g):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},g.constrain=function(m){return arguments.length?(n=m,g):n},g.duration=function(m){return arguments.length?(s=+m,g):s},g.interpolate=function(m){return arguments.length?(a=m,g):a},g.on=function(){var m=u.on.apply(u,arguments);return m===u?g:m},g.clickDistance=function(m){return arguments.length?(w=(m=+m)*m,g):Math.sqrt(w)},g.tapDistance=function(m){return arguments.length?(E=+m,g):E},g}const Qt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},an=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Et;(function(t){t.Strict="strict",t.Loose="loose"})(Et||(Et={}));var lt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(lt||(lt={}));var un;(function(t){t.Partial="partial",t.Full="full"})(un||(un={}));const Hn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ht;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ht||(Ht={}));var fn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(fn||(fn={}));var he;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(he||(he={}));const $n={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function Nl(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function ei(t,e,n){if(!n)return;const i=[];t.forEach((o,l)=>{e!=null&&e.has(l)||i.push(o)}),i.length&&n(i)}function ti(t){return t===null?null:t?"valid":"invalid"}const Ol=t=>"id"in t&&"source"in t&&"target"in t,Il=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Kn=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),mn=(t,e=[0,0])=>{const{width:n,height:i}=Kt(t),o=t.origin??e,l=n*o[0],r=i*o[1];return{x:t.position.x-l,y:t.position.y-r}},Tl=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const l=typeof o=="string";let r=!e.nodeLookup&&!l?o:void 0;e.nodeLookup&&(r=l?e.nodeLookup.get(o):Kn(o)?o:e.nodeLookup.get(o.id));const s=r?cn(r,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return yn(i,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _n(n)},bn=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const o=cn(i);n=yn(n,o)}}),_n(n)},Ji=(t,e,[n,i,o]=[0,0,1],l=!1,r=!1)=>{const s={...xt(e,[n,i,o]),width:e.width/o,height:e.height/o},a=[];for(const u of t.values()){const{measured:f,selectable:d=!0,hidden:h=!1}=u;if(r&&!d||h)continue;const c=f.width??u.width??u.initialWidth??null,b=f.height??u.height??u.initialHeight??null,w=jt(s,Yt(u)),E=(c??0)*(b??0),g=l&&w>0;(!u.internals.handleBounds||g||w>=E||u.dragging)&&a.push(u)}return a},Vn=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function ni(t,e){const n=new Map,i=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function ii({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:l},r){if(t.size===0)return Promise.resolve(!1);const s=bn(t),a=Rn(s,e,n,(r==null?void 0:r.minZoom)??o,(r==null?void 0:r.maxZoom)??l,(r==null?void 0:r.padding)??.1);return await i.setViewport(a,{duration:r==null?void 0:r.duration}),Promise.resolve(!0)}function Hl({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:l}){const r=n.get(t),s=r.parentId?n.get(r.parentId):void 0,{x:a,y:u}=s?s.internals.positionAbsolute:{x:0,y:0},f=r.origin??i;let d=o;if(r.extent==="parent"&&!r.expandParent)if(!s)l==null||l("005",Qt.error005());else{const c=s.measured.width,b=s.measured.height;c&&b&&(d=[[a,u],[a+c,u+b]])}else s&&Ut(r.extent)&&(d=[[r.extent[0][0]+a,r.extent[0][1]+u],[r.extent[1][0]+a,r.extent[1][1]+u]]);const h=Ut(d)?Bt(e,d,r.measured):e;return{position:{x:h.x-a+r.measured.width*f[0],y:h.y-u+r.measured.height*f[1]},positionAbsolute:h}}async function Qi({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const l=new Set(t.map(h=>h.id)),r=[];for(const h of n){if(h.deletable===!1)continue;const c=l.has(h.id),b=!c&&h.parentId&&r.find(w=>w.id===h.parentId);(c||b)&&r.push(h)}const s=new Set(e.map(h=>h.id)),a=i.filter(h=>h.deletable!==!1),f=Vn(r,a);for(const h of a)s.has(h.id)&&!f.find(b=>b.id===h.id)&&f.push(h);if(!o)return{edges:f,nodes:r};const d=await o({nodes:r,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:r}:{edges:[],nodes:[]}:d}const Lt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Bt=(t={x:0,y:0},e,n)=>({x:Lt(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:Lt(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function xi(t,e,n){const{width:i,height:o}=Kt(n),{x:l,y:r}=n.internals.positionAbsolute;return Bt(t,[[l,r],[l+i,r+o]],e)}const oi=(t,e,n)=>t<e?Lt(Math.abs(t-e),1,e)/e:t>n?-Lt(Math.abs(t-n),1,e)/e:0,$i=(t,e,n=15,i=40)=>{const o=oi(t.x,i,e.width-i)*n,l=oi(t.y,i,e.height-i)*n;return[o,l]},yn=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),An=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),_n=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Yt=(t,e=[0,0])=>{var o,l;const{x:n,y:i}=Kn(t)?t.internals.positionAbsolute:mn(t,e);return{x:n,y:i,width:((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0,height:((l=t.measured)==null?void 0:l.height)??t.height??t.initialHeight??0}},cn=(t,e=[0,0])=>{var o,l;const{x:n,y:i}=Kn(t)?t.internals.positionAbsolute:mn(t,e);return{x:n,y:i,x2:n+(((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0),y2:i+(((l=t.measured)==null?void 0:l.height)??t.height??t.initialHeight??0)}},Vl=(t,e)=>_n(yn(An(t),An(e))),jt=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},li=t=>xe(t.width)&&xe(t.height)&&xe(t.x)&&xe(t.y),xe=t=>!isNaN(t)&&isFinite(t),Al=(t,e)=>{},pn=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),xt=({x:t,y:e},[n,i,o],l=!1,r=[1,1])=>{const s={x:(t-n)/o,y:(e-i)/o};return l?pn(s,r):s},eo=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),Rn=(t,e,n,i,o,l)=>{const r=e/(t.width*(1+l)),s=n/(t.height*(1+l)),a=Math.min(r,s),u=Lt(a,i,o),f=t.x+t.width/2,d=t.y+t.height/2,h=e/2-f*u,c=n/2-d*u;return{x:h,y:c,zoom:u}},dn=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function Ut(t){return t!==void 0&&t!=="parent"}function Kt(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function si(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Ll(t,e={width:0,height:0},n,i,o){let l=n;const r={...t};for(;l;){const s=i.get(l);if(l=s==null?void 0:s.parentId,s){const a=s.origin||o;r.x+=s.internals.positionAbsolute.x-(e.width??0)*a[0],r.y+=s.internals.positionAbsolute.y-(e.height??0)*a[1]}}return r}function Dn(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:l}=rt(t),r=xt({x:o,y:l},i),{x:s,y:a}=n?pn(r,e):r;return{xSnapped:s,ySnapped:a,...r}}const to=t=>({width:t.offsetWidth,height:t.offsetHeight}),Bl=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Yl=["INPUT","SELECT","TEXTAREA"];function Xl(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return Yl.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const no=t=>"clientX"in t,rt=(t,e)=>{var l,r;const n=no(t),i=n?t.clientX:(l=t.touches)==null?void 0:l[0].clientX,o=n?t.clientY:(r=t.touches)==null?void 0:r[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},ri=(t,e,n,i,o)=>{const l=e.querySelectorAll(`.${t}`);return!l||!l.length?null:Array.from(l).map(r=>{const s=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),type:t,nodeId:o,position:r.getAttribute("data-handlepos"),x:(s.left-n.left)/i,y:(s.top-n.top)/i,...to(r)}})};function Wl({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:r,targetControlY:s}){const a=t*.125+o*.375+r*.375+n*.125,u=e*.125+l*.375+s*.375+i*.125,f=Math.abs(a-t),d=Math.abs(u-e);return[a,u,f,d]}function on(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ai({pos:t,x1:e,y1:n,x2:i,y2:o,c:l}){switch(t){case he.Left:return[e-on(e-i,l),n];case he.Right:return[e+on(i-e,l),n];case he.Top:return[e,n-on(n-o,l)];case he.Bottom:return[e,n+on(o-n,l)]}}function io({sourceX:t,sourceY:e,sourcePosition:n=he.Bottom,targetX:i,targetY:o,targetPosition:l=he.Top,curvature:r=.25}){const[s,a]=ai({pos:n,x1:t,y1:e,x2:i,y2:o,c:r}),[u,f]=ai({pos:l,x1:i,y1:o,x2:t,y2:e,c:r}),[d,h,c,b]=Wl({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${t},${e} C${s},${a} ${u},${f} ${i},${o}`,d,h,c,b]}function oo({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,l=n<t?n+o:n-o,r=Math.abs(i-e)/2,s=i<e?i+r:i-r;return[l,s,o,r]}function Kl({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const l=n||e.selected||t.selected,r=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(l?r:0)}function pl({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const l=yn(cn(t),cn(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const r={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return jt(r,_n(l))>0}const Rl=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,Zl=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Fl=(t,e)=>{if(!t.source||!t.target)return e;let n;return Ol(t)?n={...t}:n={...t,id:Rl(t)},Zl(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function lo({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,l,r,s]=oo({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,l,r,s]}const ui={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},Gl=({source:t,sourcePosition:e=he.Bottom,target:n})=>e===he.Left||e===he.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},fi=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function jl({source:t,sourcePosition:e=he.Bottom,target:n,targetPosition:i=he.Top,center:o,offset:l}){const r=ui[e],s=ui[i],a={x:t.x+r.x*l,y:t.y+r.y*l},u={x:n.x+s.x*l,y:n.y+s.y*l},f=Gl({source:a,sourcePosition:e,target:u}),d=f.x!==0?"x":"y",h=f[d];let c=[],b,w;const E={x:0,y:0},g={x:0,y:0},[S,k,C,P]=oo({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(r[d]*s[d]===-1){b=o.x??S,w=o.y??k;const D=[{x:b,y:a.y},{x:b,y:u.y}],N=[{x:a.x,y:w},{x:u.x,y:w}];r[d]===h?c=d==="x"?D:N:c=d==="x"?N:D}else{const D=[{x:a.x,y:u.y}],N=[{x:u.x,y:a.y}];if(d==="x"?c=r.x===h?N:D:c=r.y===h?D:N,e===i){const Z=Math.abs(t[d]-n[d]);if(Z<=l){const m=Math.min(l-1,l-Z);r[d]===h?E[d]=(a[d]>t[d]?-1:1)*m:g[d]=(u[d]>n[d]?-1:1)*m}}if(e!==i){const Z=d==="x"?"y":"x",m=r[d]===s[Z],I=a[Z]>u[Z],y=a[Z]<u[Z];(r[d]===1&&(!m&&I||m&&y)||r[d]!==1&&(!m&&y||m&&I))&&(c=d==="x"?D:N)}const O={x:a.x+E.x,y:a.y+E.y},W={x:u.x+g.x,y:u.y+g.y},R=Math.max(Math.abs(O.x-c[0].x),Math.abs(W.x-c[0].x)),V=Math.max(Math.abs(O.y-c[0].y),Math.abs(W.y-c[0].y));R>=V?(b=(O.x+W.x)/2,w=c[0].y):(b=c[0].x,w=(O.y+W.y)/2)}return[[t,{x:a.x+E.x,y:a.y+E.y},...c,{x:u.x+g.x,y:u.y+g.y},n],b,w,C,P]}function Ul(t,e,n,i){const o=Math.min(fi(t,e)/2,fi(e,n)/2,i),{x:l,y:r}=e;if(t.x===l&&l===n.x||t.y===r&&r===n.y)return`L${l} ${r}`;if(t.y===r){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${l+o*u},${r}Q ${l},${r} ${l},${r+o*f}`}const s=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${l},${r+o*a}Q ${l},${r} ${l+o*s},${r}`}function hn({sourceX:t,sourceY:e,sourcePosition:n=he.Bottom,targetX:i,targetY:o,targetPosition:l=he.Top,borderRadius:r=5,centerX:s,centerY:a,offset:u=20}){const[f,d,h,c,b]=jl({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:l,center:{x:s,y:a},offset:u});return[f.reduce((E,g,S)=>{let k="";return S>0&&S<f.length-1?k=Ul(f[S-1],g,f[S+1],r):k=`${S===0?"M":"L"}${g.x} ${g.y}`,E+=k,E},""),d,h,c,b]}function ci(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function ql(t){var d;const{sourceNode:e,targetNode:n}=t;if(!ci(e)||!ci(n))return null;const i=e.internals.handleBounds||di(e.handles),o=n.internals.handleBounds||di(n.handles),l=hi((i==null?void 0:i.source)??[],t.sourceHandle),r=hi(t.connectionMode===Et.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle);if(!l||!r)return(d=t.onError)==null||d.call(t,"008",Qt.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const s=(l==null?void 0:l.position)||he.Bottom,a=(r==null?void 0:r.position)||he.Top,u=qt(e,l,s),f=qt(n,r,a);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:s,targetPosition:a}}function di(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function qt(t,e,n=he.Left,i=!1){const o=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,l=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:r,height:s}=e??Kt(t);if(i)return{x:o+r/2,y:l+s/2};switch((e==null?void 0:e.position)??n){case he.Top:return{x:o+r/2,y:l};case he.Right:return{x:o+r,y:l+s/2};case he.Bottom:return{x:o+r/2,y:l+s};case he.Left:return{x:o,y:l+s/2}}}function hi(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Ln(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function Jl(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const l=new Set;return t.reduce((r,s)=>([s.markerStart||i,s.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=Ln(a,e);l.has(u)||(r.push({id:u,color:a.color||n,...a}),l.add(u))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))}const so={nodeOrigin:[0,0],nodeExtent:an,elevateNodesOnSelect:!0,defaults:{}},Ql={...so,checkEquality:!0};function ro(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function ao(t,e,n,i){var s,a;const o=ro(Ql,i),l=new Map(e),r=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let f=l.get(u.id);if(o.checkEquality&&u===(f==null?void 0:f.internals.userNode))e.set(u.id,f);else{const d=mn(u,o.nodeOrigin),h=Ut(u.extent)?u.extent:o.nodeExtent,c=Bt(d,h,Kt(u));f={...o.defaults,...u,measured:{width:(s=u.measured)==null?void 0:s.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:c,handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:fo(u,r),userNode:u}},e.set(u.id,f)}u.parentId&&uo(f,e,n,i)}}function xl(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function uo(t,e,n,i){const{elevateNodesOnSelect:o,nodeOrigin:l,nodeExtent:r}=ro(so,i),s=t.parentId,a=e.get(s);if(!a){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}xl(t,n);const u=o?1e3:0,{x:f,y:d,z:h}=$l(t,a,l,r,u),{positionAbsolute:c}=t.internals,b=f!==c.x||d!==c.y;(b||h!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:b?{x:f,y:d}:c,z:h})}function fo(t,e){return(xe(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function $l(t,e,n,i,o){const{x:l,y:r}=e.internals.positionAbsolute,s=Kt(t),a=mn(t,n),u=Ut(t.extent)?Bt(a,t.extent,s):a;let f=Bt({x:l+u.x,y:r+u.y},i,s);t.extent==="parent"&&(f=xi(f,s,e));const d=fo(t,o),h=e.internals.z??0;return{x:f.x,y:f.y,z:h>d?h:d}}function es(t,e,n,i=[0,0]){var r;const o=[],l=new Map;for(const s of t){const a=e.get(s.parentId);if(!a)continue;const u=((r=l.get(s.parentId))==null?void 0:r.expandedRect)??Yt(a),f=Vl(u,s.rect);l.set(s.parentId,{expandedRect:f,parent:a})}return l.size>0&&l.forEach(({expandedRect:s,parent:a},u)=>{var k;const f=a.internals.positionAbsolute,d=Kt(a),h=a.origin??i,c=s.x<f.x?Math.round(Math.abs(f.x-s.x)):0,b=s.y<f.y?Math.round(Math.abs(f.y-s.y)):0,w=Math.max(d.width,Math.round(s.width)),E=Math.max(d.height,Math.round(s.height)),g=(w-d.width)*h[0],S=(E-d.height)*h[1];(c>0||b>0||g||S)&&(o.push({id:u,type:"position",position:{x:a.position.x-c+g,y:a.position.y-b+S}}),(k=n.get(u))==null||k.forEach(C=>{t.some(P=>P.id===C.id)||o.push({id:C.id,type:"position",position:{x:C.position.x+c,y:C.position.y+b}})})),(d.width<s.width||d.height<s.height||c||b)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:w+(c?h[0]*c-g:0),height:E+(b?h[1]*b-S:0)}})}),o}function ts(t,e,n,i,o,l){const r=i==null?void 0:i.querySelector(".xyflow__viewport");let s=!1;if(!r)return{changes:[],updatedInternals:s};const a=[],u=window.getComputedStyle(r),{m22:f}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const h of t.values()){const c=e.get(h.id);if(c)if(c.hidden)c.internals={...c.internals,handleBounds:void 0},s=!0;else{const b=to(h.nodeElement),w=c.measured.width!==b.width||c.measured.height!==b.height;if(!!(b.width&&b.height&&(w||!c.internals.handleBounds||h.force))){const g=h.nodeElement.getBoundingClientRect(),S=Ut(c.extent)?c.extent:l;let{positionAbsolute:k}=c.internals;c.parentId&&c.extent==="parent"?k=xi(k,b,e.get(c.parentId)):S&&(k=Bt(k,S,b)),c.measured=b,c.internals={...c.internals,positionAbsolute:k,handleBounds:{source:ri("source",h.nodeElement,g,f,c.id),target:ri("target",h.nodeElement,g,f,c.id)}},c.parentId&&uo(c,e,n,{nodeOrigin:o}),s=!0,w&&(a.push({id:c.id,type:"dimensions",dimensions:b}),c.expandParent&&c.parentId&&d.push({id:c.id,parentId:c.parentId,rect:Yt(c,o)}))}}}if(d.length>0){const h=es(d,e,n,o);a.push(...h)}return{changes:a,updatedInternals:s}}async function ns({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:l}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const r=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,l]],i),s=!!r&&(r.x!==n[0]||r.y!==n[1]||r.k!==n[2]);return Promise.resolve(s)}function co(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:l,sourceHandle:r=null,targetHandle:s=null}=i,a=`${o}-source-${r}`,u=`${l}-target-${s}`,f=t.get(a)||new Map,d=t.get(u)||new Map,h={edgeId:i.id,source:o,target:l,sourceHandle:r,targetHandle:s};e.set(i.id,i),t.set(a,f.set(`${l}-${s}`,h)),t.set(u,d.set(`${o}-${r}`,h))}}function ho(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:ho(n,e):!1}function gi(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function is(t,e,n,i){const o=new Map;for(const[l,r]of t)if((r.selected||r.id===i)&&(!r.parentId||!ho(r,t))&&(r.draggable||e&&typeof r.draggable>"u")){const s=t.get(l);s&&o.set(l,{id:l,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function Nn({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){var r,s;const o=[];for(const[a,u]of e){const f=(r=n.get(a))==null?void 0:r.internals.userNode;f&&o.push({...f,position:u.position,dragging:i})}if(!t)return[o[0],o];const l=n.get(t).internals.userNode;return[{...l,position:((s=e.get(t))==null?void 0:s.position)||l.position,dragging:i},o]}function os({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let l={x:null,y:null},r=0,s=new Map,a=!1,u={x:0,y:0},f=null,d=!1,h=null,c=!1;function b({noDragClassName:E,handleSelector:g,domNode:S,isSelectable:k,nodeId:C,nodeClickDistance:P=0}){h=Qe(S);function A({x:W,y:R},V){const{nodeLookup:Z,nodeExtent:m,snapGrid:I,snapToGrid:y,nodeOrigin:z,onNodeDrag:H,onSelectionDrag:T,onError:K,updateNodePositions:j}=e();l={x:W,y:R};let q=!1,Q={x:0,y:0,x2:0,y2:0};if(s.size>1&&m){const B=bn(s);Q=An(B)}for(const[B,le]of s){let re={x:W-le.distance.x,y:R-le.distance.y};y&&(re=pn(re,I));let L=[[m[0][0],m[0][1]],[m[1][0],m[1][1]]];if(s.size>1&&m&&!le.extent){const{positionAbsolute:me}=le.internals,be=me.x-Q.x+m[0][0],Pe=me.x+le.measured.width-Q.x2+m[1][0],Xe=me.y-Q.y+m[0][1],G=me.y+le.measured.height-Q.y2+m[1][1];L=[[be,Xe],[Pe,G]]}const{position:ae,positionAbsolute:ce}=Hl({nodeId:B,nextPosition:re,nodeLookup:Z,nodeExtent:L,nodeOrigin:z,onError:K});q=q||le.position.x!==ae.x||le.position.y!==ae.y,le.position=ae,le.internals.positionAbsolute=ce}if(q&&(j(s,!0),V&&(i||H||!C&&T))){const[B,le]=Nn({nodeId:C,dragItems:s,nodeLookup:Z});i==null||i(V,s,B,le),H==null||H(V,B,le),C||T==null||T(V,le)}}async function D(){if(!f)return;const{transform:W,panBy:R,autoPanSpeed:V}=e(),[Z,m]=$i(u,f,V);(Z!==0||m!==0)&&(l.x=(l.x??0)-Z/W[2],l.y=(l.y??0)-m/W[2],await R({x:Z,y:m})&&A(l,null)),r=requestAnimationFrame(D)}function N(W){var q;const{nodeLookup:R,multiSelectionActive:V,nodesDraggable:Z,transform:m,snapGrid:I,snapToGrid:y,selectNodesOnDrag:z,onNodeDragStart:H,onSelectionDragStart:T,unselectNodesAndEdges:K}=e();d=!0,(!z||!k)&&!V&&C&&((q=R.get(C))!=null&&q.selected||K()),k&&z&&C&&(t==null||t(C));const j=Dn(W.sourceEvent,{transform:m,snapGrid:I,snapToGrid:y});if(l=j,s=is(R,Z,j,C),s.size>0&&(n||H||!C&&T)){const[Q,B]=Nn({nodeId:C,dragItems:s,nodeLookup:R});n==null||n(W.sourceEvent,s,Q,B),H==null||H(W.sourceEvent,Q,B),C||T==null||T(W.sourceEvent,B)}}const O=El().clickDistance(P).on("start",W=>{const{domNode:R,nodeDragThreshold:V,transform:Z,snapGrid:m,snapToGrid:I}=e();c=!1,V===0&&N(W),l=Dn(W.sourceEvent,{transform:Z,snapGrid:m,snapToGrid:I}),f=(R==null?void 0:R.getBoundingClientRect())||null,u=rt(W.sourceEvent,f)}).on("drag",W=>{const{autoPanOnNodeDrag:R,transform:V,snapGrid:Z,snapToGrid:m,nodeDragThreshold:I}=e(),y=Dn(W.sourceEvent,{transform:V,snapGrid:Z,snapToGrid:m});if(W.sourceEvent.type==="touchmove"&&W.sourceEvent.touches.length>1&&(c=!0),!c){if(!a&&R&&d&&(a=!0,D()),!d){const z=y.xSnapped-(l.x??0),H=y.ySnapped-(l.y??0);Math.sqrt(z*z+H*H)>I&&N(W)}(l.x!==y.xSnapped||l.y!==y.ySnapped)&&s&&d&&(u=rt(W.sourceEvent,f),A(y,W.sourceEvent))}}).on("end",W=>{if(!(!d||c)&&(a=!1,d=!1,cancelAnimationFrame(r),s.size>0)){const{nodeLookup:R,updateNodePositions:V,onNodeDragStop:Z,onSelectionDragStop:m}=e();if(V(s,!1),o||Z||!C&&m){const[I,y]=Nn({nodeId:C,dragItems:s,nodeLookup:R,dragging:!1});o==null||o(W.sourceEvent,s,I,y),Z==null||Z(W.sourceEvent,I,y),C||m==null||m(W.sourceEvent,y)}}}).filter(W=>{const R=W.target;return!W.button&&(!E||!gi(R,`.${E}`,S))&&(!g||gi(R,g,S))});h.call(O)}function w(){h==null||h.on(".drag",null)}return{update:b,destroy:w}}function ls(t,e,n){const i=[],o={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const l of e.values())jt(o,Yt(l))>0&&i.push(l);return i}const ss=250;function rs(t,e,n,i){var s,a;let o=[],l=1/0;const r=ls(t,n,e+ss);for(const u of r){const f=[...((s=u.internals.handleBounds)==null?void 0:s.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const d of f){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:h,y:c}=qt(u,d,d.position,!0),b=Math.sqrt(Math.pow(h-t.x,2)+Math.pow(c-t.y,2));b>e||(b<l?(o=[{...d,x:h,y:c}],l=b):b===l&&o.push({...d,x:h,y:c}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(f=>f.type===u)??o[0]}return o[0]}function go(t,e,n,i,o,l=!1){var u,f,d;const r=i.get(t);if(!r)return null;const s=o==="strict"?(u=r.internals.handleBounds)==null?void 0:u[e]:[...((f=r.internals.handleBounds)==null?void 0:f.source)??[],...((d=r.internals.handleBounds)==null?void 0:d.target)??[]],a=(n?s==null?void 0:s.find(h=>h.id===n):s==null?void 0:s[0])??null;return a&&l?{...a,...qt(r,a,a.position,!0)}:a}function mo(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function as(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const bo=()=>!0;function us(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:l,isTarget:r,domNode:s,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:d,panBy:h,cancelConnection:c,onConnectStart:b,onConnect:w,onConnectEnd:E,isValidConnection:g=bo,onReconnectEnd:S,updateConnection:k,getTransform:C,getFromHandle:P,autoPanSpeed:A}){const D=Bl(t.target);let N=0,O;const{x:W,y:R}=rt(t),V=D==null?void 0:D.elementFromPoint(W,R),Z=mo(l,V),m=s==null?void 0:s.getBoundingClientRect();if(!m||!Z)return;const I=go(o,Z,i,a,e);if(!I)return;let y=rt(t,m),z=!1,H=null,T=!1,K=null;function j(){if(!f||!m)return;const[ce,me]=$i(y,m,A);h({x:ce,y:me}),N=requestAnimationFrame(j)}const q={...I,nodeId:o,type:Z,position:I.position},Q=a.get(o),le={inProgress:!0,isValid:null,from:qt(Q,q,he.Left,!0),fromHandle:q,fromPosition:q.position,fromNode:Q,to:y,toHandle:null,toPosition:$n[q.position],toNode:null};k(le);let re=le;b==null||b(t,{nodeId:o,handleId:i,handleType:Z});function L(ce){if(!P()||!q){ae(ce);return}const me=C();y=rt(ce,m),O=rs(xt(y,me,!1,[1,1]),n,a,q),z||(j(),z=!0);const be=yo(ce,{handle:O,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:r?"target":"source",isValidConnection:g,doc:D,lib:u,flowId:d,nodeLookup:a});K=be.handleDomNode,H=be.connection,T=as(!!O,be.isValid);const Pe={...re,isValid:T,to:O&&T?eo({x:O.x,y:O.y},me):y,toHandle:be.toHandle,toPosition:T&&be.toHandle?be.toHandle.position:$n[q.position],toNode:be.toHandle?a.get(be.toHandle.nodeId):null};T&&O&&re.toHandle&&Pe.toHandle&&re.toHandle.type===Pe.toHandle.type&&re.toHandle.nodeId===Pe.toHandle.nodeId&&re.toHandle.id===Pe.toHandle.id&&re.to.x===Pe.to.x&&re.to.y===Pe.to.y||(k(Pe),re=Pe)}function ae(ce){(O||K)&&H&&T&&(w==null||w(H));const{inProgress:me,...be}=re,Pe={...be,toPosition:re.toHandle?re.toPosition:null};E==null||E(ce,Pe),l&&(S==null||S(ce,Pe)),c(),cancelAnimationFrame(N),z=!1,T=!1,H=null,K=null,D.removeEventListener("mousemove",L),D.removeEventListener("mouseup",ae),D.removeEventListener("touchmove",L),D.removeEventListener("touchend",ae)}D.addEventListener("mousemove",L),D.addEventListener("mouseup",ae),D.addEventListener("touchmove",L),D.addEventListener("touchend",ae)}function yo(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:l,doc:r,lib:s,flowId:a,isValidConnection:u=bo,nodeLookup:f}){const d=l==="target",h=e?r.querySelector(`.${s}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:c,y:b}=rt(t),w=r.elementFromPoint(c,b),E=w!=null&&w.classList.contains(`${s}-flow__handle`)?w:h,g={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const S=mo(void 0,E),k=E.getAttribute("data-nodeid"),C=E.getAttribute("data-handleid"),P=E.classList.contains("connectable"),A=E.classList.contains("connectableend");if(!k||!S)return g;const D={source:d?k:i,sourceHandle:d?C:o,target:d?i:k,targetHandle:d?o:C};g.connection=D;const O=P&&A&&(n===Et.Strict?d&&S==="source"||!d&&S==="target":k!==i||C!==o);g.isValid=O&&u(D),g.toHandle=go(k,S,C,f,n,!1)}return g}const fs={onPointerDown:us,isValid:yo},cs=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,kn=t=>({x:t.x,y:t.y,zoom:t.k}),On=({x:t,y:e,zoom:n})=>Yn.translate(t,e).scale(n),Ot=(t,e)=>t.target.closest(`.${e}`),_o=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),In=(t,e=0,n=()=>{})=>{const i=typeof e=="number"&&e>0;return i||n(),i?t.transition().duration(e).on("end",n):t},ko=t=>{const e=t.ctrlKey&&dn()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function ds({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:l,zoomOnPinch:r,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(Ot(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&r){const E=ot(f),g=ko(f),S=d*Math.pow(2,g);i.scaleTo(n,S,E,f);return}const h=f.deltaMode===1?20:1;let c=o===lt.Vertical?0:f.deltaX*h,b=o===lt.Horizontal?0:f.deltaY*h;!dn()&&f.shiftKey&&o!==lt.Vertical&&(c=f.deltaY*h,b=0),i.translateBy(n,-(c/d)*l,-(b/d)*l,{internal:!0});const w=kn(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,s==null||s(f,w)),t.isPanScrolling&&(a==null||a(f,w),t.panScrollTimeout=setTimeout(()=>{u==null||u(f,w),t.isPanScrolling=!1},150))}}function hs({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e&&i.type==="wheel"&&!i.ctrlKey||Ot(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function gs({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var l,r,s;if((l=i.sourceEvent)!=null&&l.internal)return;const o=kn(i.transform);t.mouseButton=((r=i.sourceEvent)==null?void 0:r.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((s=i.sourceEvent)==null?void 0:s.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function ms({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return l=>{var r,s;t.usedRightMouseButton=!!(n&&_o(e,t.mouseButton??0)),(r=l.sourceEvent)!=null&&r.sync||i([l.transform.x,l.transform.y,l.transform.k]),o&&!((s=l.sourceEvent)!=null&&s.internal)&&(o==null||o(l.sourceEvent,kn(l.transform)))}}function bs({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:l}){return r=>{var s;if(!((s=r.sourceEvent)!=null&&s.internal)&&(t.isZoomingOrPanning=!1,l&&_o(e,t.mouseButton??0)&&!t.usedRightMouseButton&&r.sourceEvent&&l(r.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&cs(t.prevViewport,r.transform))){const a=kn(r.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(r.sourceEvent,a)},n?150:0)}}}function ys({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:l,userSelectionActive:r,noWheelClassName:s,noPanClassName:a,lib:u}){return f=>{var b;const d=t||e,h=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Ot(f,`${u}-flow__node`)||Ot(f,`${u}-flow__edge`)))return!0;if(!i&&!d&&!o&&!l&&!n||r||Ot(f,s)&&f.type==="wheel"||Ot(f,a)&&(f.type!=="wheel"||o&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((b=f.touches)==null?void 0:b.length)>1)return f.preventDefault(),!1;if(!d&&!o&&!h&&f.type==="wheel"||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const c=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&c}}function _s({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:l,onPanZoom:r,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=t.getBoundingClientRect(),h=Dl().clickDistance(!xe(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(o),c=Qe(t).call(h);k({x:l.x,y:l.y,zoom:Lt(l.zoom,e,n)},[[0,0],[d.width,d.height]],o);const b=c.on("wheel.zoom"),w=c.on("dblclick.zoom");h.wheelDelta(ko);function E(V,Z){return c?new Promise(m=>{h==null||h.transform(In(c,Z==null?void 0:Z.duration,()=>m(!0)),V)}):Promise.resolve(!1)}function g({noWheelClassName:V,noPanClassName:Z,onPaneContextMenu:m,userSelectionActive:I,panOnScroll:y,panOnDrag:z,panOnScrollMode:H,panOnScrollSpeed:T,preventScrolling:K,zoomOnPinch:j,zoomOnScroll:q,zoomOnDoubleClick:Q,zoomActivationKeyPressed:B,lib:le,onTransformChange:re}){I&&!f.isZoomingOrPanning&&S();const ae=y&&!B&&!I?ds({zoomPanValues:f,noWheelClassName:V,d3Selection:c,d3Zoom:h,panOnScrollMode:H,panOnScrollSpeed:T,zoomOnPinch:j,onPanZoomStart:s,onPanZoom:r,onPanZoomEnd:a}):hs({noWheelClassName:V,preventScrolling:K,d3ZoomHandler:b});if(c.on("wheel.zoom",ae,{passive:!1}),!I){const me=gs({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:s});h.on("start",me);const be=ms({zoomPanValues:f,panOnDrag:z,onPaneContextMenu:!!m,onPanZoom:r,onTransformChange:re});h.on("zoom",be);const Pe=bs({zoomPanValues:f,panOnDrag:z,panOnScroll:y,onPaneContextMenu:m,onPanZoomEnd:a,onDraggingChange:u});h.on("end",Pe)}const ce=ys({zoomActivationKeyPressed:B,panOnDrag:z,zoomOnScroll:q,panOnScroll:y,zoomOnDoubleClick:Q,zoomOnPinch:j,userSelectionActive:I,noPanClassName:Z,noWheelClassName:V,lib:le});h.filter(ce),Q?c.on("dblclick.zoom",w):c.on("dblclick.zoom",null)}function S(){h.on("zoom",null)}async function k(V,Z,m){const I=On(V),y=h==null?void 0:h.constrain()(I,Z,m);return y&&await E(y),new Promise(z=>z(y))}async function C(V,Z){const m=On(V);return await E(m,Z),new Promise(I=>I(m))}function P(V){if(c){const Z=On(V),m=c.property("__zoom");(m.k!==V.zoom||m.x!==V.x||m.y!==V.y)&&(h==null||h.transform(c,Z,null,{sync:!0}))}}function A(){const V=c?cl(c.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function D(V,Z){return c?new Promise(m=>{h==null||h.scaleTo(In(c,Z==null?void 0:Z.duration,()=>m(!0)),V)}):Promise.resolve(!1)}function N(V,Z){return c?new Promise(m=>{h==null||h.scaleBy(In(c,Z==null?void 0:Z.duration,()=>m(!0)),V)}):Promise.resolve(!1)}function O(V){h==null||h.scaleExtent(V)}function W(V){h==null||h.translateExtent(V)}function R(V){const Z=!xe(V)||V<0?0:V;h==null||h.clickDistance(Z)}return{update:g,destroy:S,setViewport:C,setViewportConstrained:k,getViewport:A,scaleTo:D,scaleBy:N,setScaleExtent:O,setTranslateExtent:W,syncViewport:P,setClickDistance:R}}var mi;(function(t){t.Line="line",t.Handle="handle"})(mi||(mi={}));function ks(t){let e,n,i,o,l,r;const s=t[45].default,a=Re(s,t,t[44],null);return{c(){e=ke("div"),a&&a.c(),this.h()},l(u){e=we(u,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var f=x(e);a&&a.l(f),f.forEach(M),this.h()},h(){_(e,"data-handleid",t[6]),_(e,"data-nodeid",t[14]),_(e,"data-handlepos",t[2]),_(e,"data-id",n=t[13]+"-"+t[14]+"-"+(t[0]||null)+"-"+t[1]),_(e,"class",i=Oe(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],t[4]])),_(e,"style",t[3]),_(e,"role","button"),_(e,"tabindex","-1"),de(e,"valid",t[7]),de(e,"connectingto",t[5]),de(e,"connectingfrom",t[9]),de(e,"source",!t[11]),de(e,"target",t[11]),de(e,"connectablestart",t[12]),de(e,"connectableend",t[12]),de(e,"connectable",t[12]),de(e,"connectionindicator",t[12]&&(!t[10]||t[8]))},m(u,f){U(u,e,f),a&&a.m(e,null),o=!0,l||(r=[De(e,"mousedown",t[32]),De(e,"touchstart",t[32])],l=!0)},p(u,f){a&&a.p&&(!o||f[1]&8192)&&Ze(a,s,u,u[44],o?Ge(s,u[44],f,null):Fe(u[44]),null),(!o||f[0]&64)&&_(e,"data-handleid",u[6]),(!o||f[0]&4)&&_(e,"data-handlepos",u[2]),(!o||f[0]&8195&&n!==(n=u[13]+"-"+u[14]+"-"+(u[0]||null)+"-"+u[1]))&&_(e,"data-id",n),(!o||f[0]&20&&i!==(i=Oe(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],u[4]])))&&_(e,"class",i),(!o||f[0]&8)&&_(e,"style",u[3]),(!o||f[0]&148)&&de(e,"valid",u[7]),(!o||f[0]&52)&&de(e,"connectingto",u[5]),(!o||f[0]&532)&&de(e,"connectingfrom",u[9]),(!o||f[0]&2068)&&de(e,"source",!u[11]),(!o||f[0]&2068)&&de(e,"target",u[11]),(!o||f[0]&4116)&&de(e,"connectablestart",u[12]),(!o||f[0]&4116)&&de(e,"connectableend",u[12]),(!o||f[0]&4116)&&de(e,"connectable",u[12]),(!o||f[0]&5396)&&de(e,"connectionindicator",u[12]&&(!u[10]||u[8]))},i(u){o||(Y(a,u),o=!0)},o(u){p(a,u),o=!1},d(u){u&&M(e),a&&a.d(u),l=!1,ut(r)}}}function ws(t,e,n){let i,o,l,r,s,a,u,f,d,h,c,b,w,E,g,S,k,C,P,A,D,N,O,W,R,{$$slots:V={},$$scope:Z}=e,{id:m=void 0}=e,{type:I="source"}=e,{position:y=he.Top}=e,{style:z=void 0}=e,{isValidConnection:H=void 0}=e,{onconnect:T=void 0}=e,{ondisconnect:K=void 0}=e,{isConnectable:j=void 0}=e,{class:q=void 0}=e;const Q=Rt("svelteflow__node_id"),B=Rt("svelteflow__node_connectable");J(t,B,$=>n(43,R=$));const le=He(),{connectionMode:re,domNode:L,nodeLookup:ae,connectionRadius:ce,viewport:me,isValidConnection:be,lib:Pe,addEdge:Xe,onedgecreate:G,panBy:Ae,cancelConnection:Ne,updateConnection:vt,autoPanOnConnect:bt,edges:yt,connectionLookup:_t,onconnect:kt,onconnectstart:ft,onconnectend:ct,flowId:dt,connection:F}=le;J(t,re,$=>n(40,h=$)),J(t,L,$=>n(55,O=$)),J(t,ae,$=>n(54,N=$)),J(t,ce,$=>n(56,W=$)),J(t,me,$=>n(46,w=$)),J(t,be,$=>n(51,C=$)),J(t,Pe,$=>n(53,D=$)),J(t,G,$=>n(50,k=$)),J(t,bt,$=>n(52,A=$)),J(t,yt,$=>n(42,b=$)),J(t,_t,$=>n(41,c=$)),J(t,kt,$=>n(49,S=$)),J(t,ft,$=>n(48,g=$)),J(t,ct,$=>n(47,E=$)),J(t,dt,$=>n(13,P=$)),J(t,F,$=>n(39,d=$));function ht($){const st=no($);(st&&$.button===0||!st)&&fs.onPointerDown($,{handleId:l,nodeId:Q,isTarget:i,connectionRadius:W,domNode:O,nodeLookup:N,connectionMode:h,lib:D,autoPanOnConnect:A,flowId:P,isValidConnection:H??C,updateConnection:vt,cancelConnection:Ne,panBy:Ae,onConnect:Ue=>{const Ke=k?k(Ue):Ue;Ke&&(Xe(Ke),S==null||S(Ue))},onConnectStart:(Ue,Ke)=>{g==null||g(Ue,{nodeId:Ke.nodeId,handleId:Ke.handleId,handleType:Ke.handleType})},onConnectEnd:(Ue,Ke)=>{E==null||E(Ue,Ke)},getTransform:()=>[w.x,w.y,w.zoom],getFromHandle:()=>d.fromHandle})}let We=null,je;return t.$$set=$=>{"id"in $&&n(0,m=$.id),"type"in $&&n(1,I=$.type),"position"in $&&n(2,y=$.position),"style"in $&&n(3,z=$.style),"isValidConnection"in $&&n(33,H=$.isValidConnection),"onconnect"in $&&n(34,T=$.onconnect),"ondisconnect"in $&&n(35,K=$.ondisconnect),"isConnectable"in $&&n(36,j=$.isConnectable),"class"in $&&n(4,q=$.class),"$$scope"in $&&n(44,Z=$.$$scope)},t.$$.update=()=>{var $,st,Ue,Ke,Ct,zt,Pt,Mt,gt;if(t.$$.dirty[0]&2&&n(11,i=I==="target"),t.$$.dirty[1]&4128&&n(12,o=j!==void 0?j:R),t.$$.dirty[0]&1&&n(6,l=m||null),t.$$.dirty[0]&3|t.$$.dirty[1]&3096&&(T||K)&&n(38,je=c.get(`${Q}-${I}-${m||null}`)),t.$$.dirty[1]&216){if(We&&!Nl(je,We)){const wt=je??new Map;ei(We,wt,K),ei(wt,We,T)}n(37,We=je??new Map)}t.$$.dirty[1]&256&&n(10,r=!!d.fromHandle),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(9,s=(($=d.fromHandle)==null?void 0:$.nodeId)===Q&&((st=d.fromHandle)==null?void 0:st.type)===I&&((Ue=d.fromHandle)==null?void 0:Ue.id)===l),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(5,a=((Ke=d.toHandle)==null?void 0:Ke.nodeId)===Q&&((Ct=d.toHandle)==null?void 0:Ct.type)===I&&((zt=d.toHandle)==null?void 0:zt.id)===l),t.$$.dirty[0]&66|t.$$.dirty[1]&768&&n(8,u=h===Et.Strict?((Pt=d.fromHandle)==null?void 0:Pt.type)!==I:Q!==((Mt=d.fromHandle)==null?void 0:Mt.nodeId)||l!==((gt=d.fromHandle)==null?void 0:gt.id)),t.$$.dirty[0]&32|t.$$.dirty[1]&256&&n(7,f=a&&d.isValid)},[m,I,y,z,q,a,l,f,u,s,r,i,o,P,Q,B,re,L,ae,ce,me,be,Pe,G,bt,yt,_t,kt,ft,ct,dt,F,ht,H,T,K,j,We,je,d,h,c,b,R,Z,V]}class Xt extends ue{constructor(e){super(),fe(this,e,ws,ks,ge,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function Es(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+"",o,l,r,s;return e=new Xt({props:{type:"target",position:t[1]??he.Top}}),r=new Xt({props:{type:"source",position:t[2]??he.Bottom}}),{c(){ee(e.$$.fragment),n=ve(),o=$e(i),l=ve(),ee(r.$$.fragment)},l(u){ie(e.$$.fragment,u),n=Ce(u),o=et(u,i),l=Ce(u),ie(r.$$.fragment,u)},m(u,f){te(e,u,f),U(u,n,f),U(u,o,f),U(u,l,f),te(r,u,f),s=!0},p(u,[f]){var c;const d={};f&2&&(d.position=u[1]??he.Top),e.$set(d),(!s||f&1)&&i!==(i=((c=u[0])==null?void 0:c.label)+"")&&tt(o,i);const h={};f&4&&(h.position=u[2]??he.Bottom),r.$set(h)},i(u){s||(Y(e.$$.fragment,u),Y(r.$$.fragment,u),s=!0)},o(u){p(e.$$.fragment,u),p(r.$$.fragment,u),s=!1},d(u){u&&(M(n),M(o),M(l)),ne(e,u),ne(r,u)}}}function Ss(t,e,n){const i=["data","targetPosition","sourcePosition"];Te(e,i);let{data:o={label:"Node"}}=e,{targetPosition:l=void 0}=e,{sourcePosition:r=void 0}=e;return t.$$set=s=>{e=Me(Me({},e),nt(s)),n(3,Te(e,i)),"data"in s&&n(0,o=s.data),"targetPosition"in s&&n(1,l=s.targetPosition),"sourcePosition"in s&&n(2,r=s.sourcePosition)},[o,l,r]}class wo extends ue{constructor(e){super(),fe(this,e,Ss,Es,ge,{data:0,targetPosition:1,sourcePosition:2})}}function vs(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,l;return o=new Xt({props:{type:"source",position:t[1]??he.Bottom}}),{c(){n=$e(e),i=ve(),ee(o.$$.fragment)},l(s){n=et(s,e),i=Ce(s),ie(o.$$.fragment,s)},m(s,a){U(s,n,a),U(s,i,a),te(o,s,a),l=!0},p(s,[a]){var f;(!l||a&1)&&e!==(e=((f=s[0])==null?void 0:f.label)+"")&&tt(n,e);const u={};a&2&&(u.position=s[1]??he.Bottom),o.$set(u)},i(s){l||(Y(o.$$.fragment,s),l=!0)},o(s){p(o.$$.fragment,s),l=!1},d(s){s&&(M(n),M(i)),ne(o,s)}}}function Cs(t,e,n){const i=["data","sourcePosition"];Te(e,i);let{data:o={label:"Node"}}=e,{sourcePosition:l=void 0}=e;return t.$$set=r=>{e=Me(Me({},e),nt(r)),n(2,Te(e,i)),"data"in r&&n(0,o=r.data),"sourcePosition"in r&&n(1,l=r.sourcePosition)},[o,l]}class zs extends ue{constructor(e){super(),fe(this,e,Cs,vs,ge,{data:0,sourcePosition:1})}}function Ps(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,l;return o=new Xt({props:{type:"target",position:t[1]??he.Top}}),{c(){n=$e(e),i=ve(),ee(o.$$.fragment)},l(s){n=et(s,e),i=Ce(s),ie(o.$$.fragment,s)},m(s,a){U(s,n,a),U(s,i,a),te(o,s,a),l=!0},p(s,[a]){var f;(!l||a&1)&&e!==(e=((f=s[0])==null?void 0:f.label)+"")&&tt(n,e);const u={};a&2&&(u.position=s[1]??he.Top),o.$set(u)},i(s){l||(Y(o.$$.fragment,s),l=!0)},o(s){p(o.$$.fragment,s),l=!1},d(s){s&&(M(n),M(i)),ne(o,s)}}}function Ms(t,e,n){const i=["data","targetPosition"];Te(e,i);let{data:o={label:"Node"}}=e,{targetPosition:l=void 0}=e;return t.$$set=r=>{e=Me(Me({},e),nt(r)),n(2,Te(e,i)),"data"in r&&n(0,o=r.data),"targetPosition"in r&&n(1,l=r.targetPosition)},[o,l]}class Ds extends ue{constructor(e){super(),fe(this,e,Ms,Ps,ge,{data:0,targetPosition:1})}}function Ns(t,e,n){const i=[];return Te(e,i),t.$$set=o=>{e=Me(Me({},e),nt(o)),n(0,Te(e,i))},[]}class Os extends ue{constructor(e){super(),fe(this,e,Ns,null,ge,{})}}function bi(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function Is(t,{target:e,domNode:n}){return bi(t,n,e),{async update({target:i,domNode:o}){bi(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Ts(t){let e,n,i,o,l;const r=t[3].default,s=Re(r,t,t[2],null);return{c(){e=ke("div"),s&&s.c()},l(a){e=we(a,"DIV",{});var u=x(e);s&&s.l(u),u.forEach(M)},m(a,u){U(a,e,u),s&&s.m(e,null),i=!0,o||(l=qe(n=Is.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(a,[u]){s&&s.p&&(!i||u&4)&&Ze(s,r,a,a[2],i?Ge(r,a[2],u,null):Fe(a[2]),null),n&&Le(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(Y(s,a),i=!0)},o(a){p(s,a),i=!1},d(a){a&&M(e),s&&s.d(a),o=!1,l()}}}function Hs(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{domNode:r}=He();return J(t,r,s=>n(0,i=s)),t.$$set=s=>{"$$scope"in s&&n(2,l=s.$$scope)},[i,r,l,o]}class Vs extends ue{constructor(e){super(),fe(this,e,Hs,Ts,ge,{})}}function Eo(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:l,elementsSelectable:r}=He();return s=>{const a=X(t).get(s);if(!a){console.warn("012",Qt.error012(s));return}(a.selectable||X(r)&&typeof a.selectable>"u")&&(e.set(null),n.set(null),a.selected?a.selected&&X(i)&&l({nodes:[],edges:[a]}):o([s]))}}function As(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,l,r;const s=t[5].default,a=Re(s,t,t[7],null);return{c(){e=ke("div"),a&&a.c(),this.h()},l(u){e=we(u,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var f=x(e);a&&a.l(f),f.forEach(M),this.h()},h(){_(e,"class","svelte-flow__edge-label"),_(e,"style",n="pointer-events: all;"+t[0]),_(e,"role","button"),_(e,"tabindex","-1"),ye(e,"transform",i)},m(u,f){U(u,e,f),a&&a.m(e,null),o=!0,l||(r=[De(e,"keyup",Bs),De(e,"click",t[6])],l=!0)},p(u,f){a&&a.p&&(!o||f&128)&&Ze(a,s,u,u[7],o?Ge(s,u[7],f,null):Fe(u[7]),null),(!o||f&1&&n!==(n="pointer-events: all;"+u[0]))&&_(e,"style",n);const d=f&1;(f&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||d)&&ye(e,"transform",i)},i(u){o||(Y(a,u),o=!0)},o(u){p(a,u),o=!1},d(u){u&&M(e),a&&a.d(u),l=!1,ut(r)}}}function Ls(t){let e,n;return e=new Vs({props:{$$slots:{default:[As]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,[o]){const l={};o&135&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}const Bs=()=>{};function Ys(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:l=void 0}=e,{x:r=void 0}=e,{y:s=void 0}=e;const a=Eo(),u=Rt("svelteflow__edge_id"),f=()=>{u&&a(u)};return t.$$set=d=>{"style"in d&&n(0,l=d.style),"x"in d&&n(1,r=d.x),"y"in d&&n(2,s=d.y),"$$scope"in d&&n(7,o=d.$$scope)},[l,r,s,a,u,i,f,o]}class Xs extends ue{constructor(e){super(),fe(this,e,Ys,Ls,ge,{style:0,x:1,y:2})}}function Ws(t){let e;return{c(){e=Ee("path"),this.h()},l(n){e=Se(n,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),x(e).forEach(M),this.h()},h(){_(e,"d",t[1]),_(e,"stroke-opacity",0),_(e,"stroke-width",t[10]),_(e,"fill","none"),_(e,"class","svelte-flow__edge-interaction")},m(n,i){U(n,e,i)},p(n,i){i&2&&_(e,"d",n[1])},d(n){n&&M(e)}}}function yi(t){let e,n;return e=new Xs({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Ks]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o&8&&(l.x=i[3]),o&16&&(l.y=i[4]),o&32&&(l.style=i[5]),o&4100&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Ks(t){let e;return{c(){e=$e(t[2])},l(n){e=et(n,t[2])},m(n,i){U(n,e,i)},p(n,i){i&4&&tt(e,n[2])},d(n){n&&M(e)}}}function ps(t){let e,n,i,o,l,r,s=t[10]&&Ws(t),a=t[2]&&yi(t);return{c(){e=Ee("path"),i=ve(),s&&s.c(),o=ve(),a&&a.c(),l=Ie(),this.h()},l(u){e=Se(u,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),x(e).forEach(M),i=Ce(u),s&&s.l(u),o=Ce(u),a&&a.l(u),l=Ie(),this.h()},h(){_(e,"id",t[0]),_(e,"d",t[1]),_(e,"class",n=Oe(["svelte-flow__edge-path",t[9]])),_(e,"marker-start",t[6]),_(e,"marker-end",t[7]),_(e,"fill","none"),_(e,"style",t[8])},m(u,f){U(u,e,f),U(u,i,f),s&&s.m(u,f),U(u,o,f),a&&a.m(u,f),U(u,l,f),r=!0},p(u,[f]){(!r||f&1)&&_(e,"id",u[0]),(!r||f&2)&&_(e,"d",u[1]),(!r||f&512&&n!==(n=Oe(["svelte-flow__edge-path",u[9]])))&&_(e,"class",n),(!r||f&64)&&_(e,"marker-start",u[6]),(!r||f&128)&&_(e,"marker-end",u[7]),(!r||f&256)&&_(e,"style",u[8]),u[10]&&s.p(u,f),u[2]?a?(a.p(u,f),f&4&&Y(a,1)):(a=yi(u),a.c(),Y(a,1),a.m(l.parentNode,l)):a&&(Be(),p(a,1,1,()=>{a=null}),Ye())},i(u){r||(Y(a),r=!0)},o(u){p(a),r=!1},d(u){u&&(M(e),M(i),M(o),M(l)),s&&s.d(u),a&&a.d(u)}}}function Rs(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:l=void 0}=e,{labelX:r=void 0}=e,{labelY:s=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{style:d=void 0}=e,{interactionWidth:h=20}=e,{class:c=void 0}=e,b=h===void 0?20:h;return t.$$set=w=>{"id"in w&&n(0,i=w.id),"path"in w&&n(1,o=w.path),"label"in w&&n(2,l=w.label),"labelX"in w&&n(3,r=w.labelX),"labelY"in w&&n(4,s=w.labelY),"labelStyle"in w&&n(5,a=w.labelStyle),"markerStart"in w&&n(6,u=w.markerStart),"markerEnd"in w&&n(7,f=w.markerEnd),"style"in w&&n(8,d=w.style),"interactionWidth"in w&&n(11,h=w.interactionWidth),"class"in w&&n(9,c=w.class)},[i,o,l,r,s,a,u,f,d,c,b,h]}class wn extends ue{constructor(e){super(),fe(this,e,Rs,ps,ge,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Zs(t){let e,n;return e=new wn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Fs(t,e,n){let i,o,l;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,r);let{label:s=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:w}=e,{targetX:E}=e,{targetY:g}=e,{targetPosition:S}=e;return t.$$set=k=>{e=Me(Me({},e),nt(k)),n(15,Te(e,r)),"label"in k&&n(0,s=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,d=k.markerEnd),"interactionWidth"in k&&n(5,h=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,b=k.sourceY),"sourcePosition"in k&&n(11,w=k.sourcePosition),"targetX"in k&&n(12,E=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,S=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,l]=io({sourceX:c,sourceY:b,targetX:E,targetY:g,sourcePosition:w,targetPosition:S}),i,(n(7,o),n(9,c),n(10,b),n(12,E),n(13,g),n(11,w),n(14,S)),(n(6,l),n(9,c),n(10,b),n(12,E),n(13,g),n(11,w),n(14,S)))},[s,a,u,f,d,h,l,o,i,c,b,w,E,g,S]}class So extends ue{constructor(e){super(),fe(this,e,Fs,Zs,ge,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Gs(t){let e,n;return e=new wn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function js(t,e,n){let i,o,l;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,r);let{label:s=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:w}=e,{targetX:E}=e,{targetY:g}=e,{targetPosition:S}=e;return t.$$set=k=>{e=Me(Me({},e),nt(k)),n(15,Te(e,r)),"label"in k&&n(0,s=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,d=k.markerEnd),"interactionWidth"in k&&n(5,h=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,b=k.sourceY),"sourcePosition"in k&&n(11,w=k.sourcePosition),"targetX"in k&&n(12,E=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,S=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,l]=hn({sourceX:c,sourceY:b,targetX:E,targetY:g,sourcePosition:w,targetPosition:S}),i,(n(7,o),n(9,c),n(10,b),n(12,E),n(13,g),n(11,w),n(14,S)),(n(6,l),n(9,c),n(10,b),n(12,E),n(13,g),n(11,w),n(14,S)))},[s,a,u,f,d,h,l,o,i,c,b,w,E,g,S]}class Us extends ue{constructor(e){super(),fe(this,e,js,Gs,ge,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function qs(t){let e,n;return e=new wn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Js(t,e,n){let i,o,l;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Te(e,r);let{label:s=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{targetX:w}=e,{targetY:E}=e;return t.$$set=g=>{e=Me(Me({},e),nt(g)),n(13,Te(e,r)),"label"in g&&n(0,s=g.label),"labelStyle"in g&&n(1,a=g.labelStyle),"style"in g&&n(2,u=g.style),"markerStart"in g&&n(3,f=g.markerStart),"markerEnd"in g&&n(4,d=g.markerEnd),"interactionWidth"in g&&n(5,h=g.interactionWidth),"sourceX"in g&&n(9,c=g.sourceX),"sourceY"in g&&n(10,b=g.sourceY),"targetX"in g&&n(11,w=g.targetX),"targetY"in g&&n(12,E=g.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,o,l]=lo({sourceX:c,sourceY:b,targetX:w,targetY:E}),i,(n(7,o),n(9,c),n(10,b),n(11,w),n(12,E)),(n(6,l),n(9,c),n(10,b),n(11,w),n(12,E)))},[s,a,u,f,d,h,l,o,i,c,b,w,E]}class Qs extends ue{constructor(e){super(),fe(this,e,Js,qs,ge,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function xs(t){let e,n;return e=new wn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function $s(t,e,n){let i,o,l;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,r);let{label:s=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:w}=e,{targetX:E}=e,{targetY:g}=e,{targetPosition:S}=e;return t.$$set=k=>{e=Me(Me({},e),nt(k)),n(15,Te(e,r)),"label"in k&&n(0,s=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,d=k.markerEnd),"interactionWidth"in k&&n(5,h=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,b=k.sourceY),"sourcePosition"in k&&n(11,w=k.sourcePosition),"targetX"in k&&n(12,E=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,S=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,l]=hn({sourceX:c,sourceY:b,targetX:E,targetY:g,sourcePosition:w,targetPosition:S,borderRadius:0}),i,(n(7,o),n(9,c),n(10,b),n(12,E),n(13,g),n(11,w),n(14,S)),(n(6,l),n(9,c),n(10,b),n(12,E),n(13,g),n(11,w),n(14,S)))},[s,a,u,f,d,h,l,o,i,c,b,w,E,g,S]}class er extends ue{constructor(e){super(),fe(this,e,$s,xs,ge,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function tr(t,e){const n=t.set,i=e.set,o=X(t),l=X(e);let s=o.length===0&&l.length>0?l:o;t.set(s);const a=u=>{const f=n(u);return s=f,i(s),f};t.set=e.set=a,t.update=e.update=u=>a(u(s))}function nr(t,e){const n=t.set,i=e.set;let o=X(e);t.set(o);const l=r=>{n(r),i(r),o=r};t.set=e.set=l,t.update=e.update=r=>l(r(o))}const ir=(t,e,n)=>{if(!n)return;const i=X(t),o=e.set,l=n.set;let r=n?X(n):{x:0,y:0,zoom:1};e.set(r),e.set=s=>(o(s),l(s),r=s,s),n.set=s=>(i==null||i.syncViewport(s),o(s),l(s),r=s,s),e.update=s=>{e.set(s(r))},n.update=s=>{n.set(s(r))}},or=(t,e,n,i=[0,0],o=an)=>{const{subscribe:l,set:r,update:s}=oe([]);let a=t,u={},f=!0;const d=w=>(ao(w,e,n,{elevateNodesOnSelect:f,nodeOrigin:i,nodeExtent:o,defaults:u,checkEquality:!1}),a=w,r(a),a),h=w=>d(w(a)),c=w=>{u=w},b=w=>{f=w.elevateNodesOnSelect??f};return d(a),{subscribe:l,set:d,update:h,setDefaultOptions:c,setOptions:b}},lr=(t,e,n,i)=>{const{subscribe:o,set:l,update:r}=oe([]);let s=t,a={};const u=h=>{const c=a?h.map(b=>({...a,...b})):h;co(e,n,c),s=c,l(s)},f=h=>u(h(s)),d=h=>{a=h};return u(s),{subscribe:o,set:u,update:f,setDefaultOptions:d}},vo={input:zs,output:Ds,default:wo,group:Os},Co={straight:Qs,smoothstep:Us,default:So,step:er},sr=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o,nodeOrigin:l,nodeExtent:r})=>{const s=new Map,a=new Map,u=new Map,f=new Map,d=l??[0,0],h=r??an;ao(t,s,a,{nodeExtent:h,nodeOrigin:d,elevateNodesOnSelect:!1,checkEquality:!1}),co(u,f,e);let c={x:0,y:0,zoom:1};if(o&&n&&i){const b=bn(s,{filter:w=>!!((w.width||w.initialWidth)&&(w.height||w.initialHeight))});c=Rn(b,n,i,.5,2,.1)}return{flowId:oe(null),nodes:or(t,s,a,d,h),nodeLookup:Je(s),parentLookup:Je(a),edgeLookup:Je(f),visibleNodes:Je([]),edges:lr(e,u,f),visibleEdges:Je([]),connectionLookup:Je(u),height:oe(500),width:oe(500),minZoom:oe(.5),maxZoom:oe(2),nodeOrigin:oe(d),nodeDragThreshold:oe(1),nodeExtent:oe(h),translateExtent:oe(an),autoPanOnNodeDrag:oe(!0),autoPanOnConnect:oe(!0),fitViewOnInit:oe(!1),fitViewOnInitDone:oe(!1),fitViewOptions:oe(void 0),panZoom:oe(null),snapGrid:oe(null),dragging:oe(!1),selectionRect:oe(null),selectionKeyPressed:oe(!1),multiselectionKeyPressed:oe(!1),deleteKeyPressed:oe(!1),panActivationKeyPressed:oe(!1),zoomActivationKeyPressed:oe(!1),selectionRectMode:oe(null),selectionMode:oe(un.Partial),nodeTypes:oe(vo),edgeTypes:oe(Co),viewport:oe(c),connectionMode:oe(Et.Strict),domNode:oe(null),connection:Je(Hn),connectionLineType:oe(Ht.Bezier),connectionRadius:oe(20),isValidConnection:oe(()=>!0),nodesDraggable:oe(!0),nodesConnectable:oe(!0),elementsSelectable:oe(!0),selectNodesOnDrag:oe(!0),markers:Je([]),defaultMarkerColor:oe("#b1b1b7"),lib:Je("svelte"),onlyRenderVisibleElements:oe(!1),onerror:oe(Al),ondelete:oe(void 0),onedgecreate:oe(void 0),onconnect:oe(void 0),onconnectstart:oe(void 0),onconnectend:oe(void 0),onbeforedelete:oe(void 0),nodesInitialized:oe(!1),edgesInitialized:oe(!1),viewportInitialized:oe(!1),initialized:Je(!1)}};function rr(t){const e=It([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,l,r,s])=>o&&r&&s?n.filter(u=>{const f=i.get(u.source),d=i.get(u.target);return f&&d&&pl({sourceNode:f,targetNode:d,width:r,height:s,transform:[l.x,l.y,l.zoom]})}):n);return It([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,l])=>n.reduce((s,a)=>{const u=i.get(a.source),f=i.get(a.target);if(!u||!f)return s;const d=ql({id:a.id,sourceNode:u,targetNode:f,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:l});return d&&s.push({...a,zIndex:Kl({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:f,elevateOnSelect:!1}),...d}),s},[]))}function ar(t){return It([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,o,l])=>{const r=[l.x,l.y,l.zoom];return n?Ji(e,{x:0,y:0,width:i,height:o},r,!0):Array.from(e.values())})}const En=Symbol();function zo({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:l,nodeExtent:r}){const s=sr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:l,nodeExtent:r});function a(y){s.nodeTypes.set({...vo,...y})}function u(y){s.edgeTypes.set({...Co,...y})}function f(y){const z=X(s.edges);s.edges.set(Fl(y,z))}const d=(y,z=!1)=>{var T;const H=X(s.nodeLookup);for(const[K,j]of y){const q=(T=H.get(K))==null?void 0:T.internals.userNode;q&&(q.position=j.position,q.dragging=z)}s.nodes.update(K=>K)};function h(y){var K,j,q;const z=X(s.nodeLookup),{changes:H,updatedInternals:T}=ts(y,z,X(s.parentLookup),X(s.domNode),X(s.nodeOrigin));if(T){if(!X(s.fitViewOnInitDone)&&X(s.fitViewOnInit)){const Q=X(s.fitViewOptions),B=b({...Q,nodes:Q==null?void 0:Q.nodes});s.fitViewOnInitDone.set(B)}for(const Q of H){const B=(K=z.get(Q.id))==null?void 0:K.internals.userNode;if(B)switch(Q.type){case"dimensions":{const le={...B.measured,...Q.dimensions};Q.setAttributes&&(B.width=((j=Q.dimensions)==null?void 0:j.width)??B.width,B.height=((q=Q.dimensions)==null?void 0:q.height)??B.height),B.measured=le;break}case"position":B.position=Q.position??B.position;break}}s.nodes.update(Q=>Q),X(s.nodesInitialized)||s.nodesInitialized.set(!0)}}function c(y){const z=X(s.panZoom);if(!z)return Promise.resolve(!1);const H=ni(X(s.nodeLookup),y);return ii({nodes:H,width:X(s.width),height:X(s.height),minZoom:X(s.minZoom),maxZoom:X(s.maxZoom),panZoom:z},y)}function b(y){const z=X(s.panZoom);if(!z)return!1;const H=ni(X(s.nodeLookup),y);return ii({nodes:H,width:X(s.width),height:X(s.height),minZoom:X(s.minZoom),maxZoom:X(s.maxZoom),panZoom:z},y),H.size>0}function w(y,z){const H=X(s.panZoom);return H?H.scaleBy(y,z):Promise.resolve(!1)}function E(y){return w(1.2,y)}function g(y){return w(1/1.2,y)}function S(y){const z=X(s.panZoom);z&&(z.setScaleExtent([y,X(s.maxZoom)]),s.minZoom.set(y))}function k(y){const z=X(s.panZoom);z&&(z.setScaleExtent([X(s.minZoom),y]),s.maxZoom.set(y))}function C(y){const z=X(s.panZoom);z&&(z.setTranslateExtent(y),s.translateExtent.set(y))}function P(y){let z=!1;return y.forEach(H=>{H.selected&&(H.selected=!1,z=!0)}),z}function A(y){var z;(z=X(s.panZoom))==null||z.setClickDistance(y)}function D(y){P((y==null?void 0:y.nodes)||X(s.nodes))&&s.nodes.set(X(s.nodes)),P((y==null?void 0:y.edges)||X(s.edges))&&s.edges.set(X(s.edges))}s.deleteKeyPressed.subscribe(async y=>{var z;if(y){const H=X(s.nodes),T=X(s.edges),K=H.filter(B=>B.selected),j=T.filter(B=>B.selected),{nodes:q,edges:Q}=await Qi({nodesToRemove:K,edgesToRemove:j,nodes:H,edges:T,onBeforeDelete:X(s.onbeforedelete)});(q.length||Q.length)&&(s.nodes.update(B=>B.filter(le=>!q.some(re=>re.id===le.id))),s.edges.update(B=>B.filter(le=>!Q.some(re=>re.id===le.id))),(z=X(s.ondelete))==null||z({nodes:q,edges:Q}))}});function N(y){const z=X(s.multiselectionKeyPressed);s.nodes.update(H=>H.map(T=>{const K=y.includes(T.id),j=z&&T.selected||K;return T.selected=j,T})),z||s.edges.update(H=>H.map(T=>(T.selected=!1,T)))}function O(y){const z=X(s.multiselectionKeyPressed);s.edges.update(H=>H.map(T=>{const K=y.includes(T.id),j=z&&T.selected||K;return T.selected=j,T})),z||s.nodes.update(H=>H.map(T=>(T.selected=!1,T)))}function W(y){var H;const z=(H=X(s.nodes))==null?void 0:H.find(T=>T.id===y);if(!z){console.warn("012",Qt.error012(y));return}s.selectionRect.set(null),s.selectionRectMode.set(null),z.selected?z.selected&&X(s.multiselectionKeyPressed)&&D({nodes:[z],edges:[]}):N([y])}function R(y){const z=X(s.viewport);return ns({delta:y,panZoom:X(s.panZoom),transform:[z.x,z.y,z.zoom],translateExtent:X(s.translateExtent),width:X(s.width),height:X(s.height)})}const V=oe(Hn),Z=y=>{V.set({...y})};function m(){V.set(Hn)}function I(){s.fitViewOnInitDone.set(!1),s.selectionRect.set(null),s.selectionRectMode.set(null),s.snapGrid.set(null),s.isValidConnection.set(()=>!0),D(),m()}return{...s,visibleEdges:rr(s),visibleNodes:ar(s),connection:It([V,s.viewport],([y,z])=>y.inProgress?{...y,to:xt(y.to,[z.x,z.y,z.zoom])}:{...y}),markers:It([s.edges,s.defaultMarkerColor,s.flowId],([y,z,H])=>Jl(y,{defaultColor:z,id:H})),initialized:(()=>{let y=!1;const z=X(s.nodes).length,H=X(s.edges).length;return It([s.nodesInitialized,s.edgesInitialized,s.viewportInitialized],([T,K,j])=>y||(z===0?y=j:H===0?y=j&&T:y=j&&T&&K,y))})(),syncNodeStores:y=>tr(s.nodes,y),syncEdgeStores:y=>nr(s.edges,y),syncViewport:y=>ir(s.panZoom,s.viewport,y),setNodeTypes:a,setEdgeTypes:u,addEdge:f,updateNodePositions:d,updateNodeInternals:h,zoomIn:E,zoomOut:g,fitView:y=>c(y),setMinZoom:S,setMaxZoom:k,setTranslateExtent:C,setPaneClickDistance:A,unselectNodesAndEdges:D,addSelectedNodes:N,addSelectedEdges:O,handleNodeSelection:W,panBy:R,updateConnection:Z,cancelConnection:m,reset:I}}function He(){const t=Rt(En);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function ur({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:l,nodeExtent:r}){const s=zo({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:l,nodeExtent:r});return Zt(En,{getStore:()=>s}),s}function fr(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:l,viewport:r,dragging:s,translateExtent:a,paneClickDistance:u}=e,f=_s({domNode:t,minZoom:i,maxZoom:o,translateExtent:a,viewport:l,paneClickDistance:u,onDraggingChange:s.set}),d=f.getViewport();return r.set(d),n.set(f),f.update(e),{update(h){f.update(h)}}}function cr(t){let e,n,i,o,l;const r=t[35].default,s=Re(r,t,t[34],null);return{c(){e=ke("div"),s&&s.c(),this.h()},l(a){e=we(a,"DIV",{class:!0});var u=x(e);s&&s.l(u),u.forEach(M),this.h()},h(){_(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){U(a,e,u),s&&s.m(e,null),i=!0,o||(l=qe(n=fr.call(null,e,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||lt.Free,zoomActivationKeyPressed:t[14],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8],onTransformChange:t[29]})),o=!0)},p(a,u){s&&s.p&&(!i||u[1]&8)&&Ze(s,r,a,a[34],i?Ge(r,a[34],u,null):Fe(a[34]),null),n&&Le(n.update)&&u[0]&262143&&n.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||lt.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){i||(Y(s,a),i=!0)},o(a){p(s,a),i=!1},d(a){a&&M(e),s&&s.d(a),o=!1,l()}}}function dr(t,e,n){let i,o,l,r,s,a,u,f,d,h,c,{$$slots:b={},$$scope:w}=e,{initialViewport:E=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:S=void 0}=e,{onMoveEnd:k=void 0}=e,{panOnScrollMode:C}=e,{preventScrolling:P}=e,{zoomOnScroll:A}=e,{zoomOnDoubleClick:D}=e,{zoomOnPinch:N}=e,{panOnDrag:O}=e,{panOnScroll:W}=e,{paneClickDistance:R}=e;const{viewport:V,panZoom:Z,selectionRect:m,minZoom:I,maxZoom:y,dragging:z,translateExtent:H,lib:T,panActivationKeyPressed:K,zoomActivationKeyPressed:j,viewportInitialized:q}=He();J(t,m,B=>n(15,d=B)),J(t,I,B=>n(12,a=B)),J(t,y,B=>n(13,u=B)),J(t,H,B=>n(16,h=B)),J(t,T,B=>n(17,c=B)),J(t,K,B=>n(33,s=B)),J(t,j,B=>n(14,f=B)),J(t,q,B=>n(36,r=B));const Q=B=>V.set({x:B[0],y:B[1],zoom:B[2]});return Jt(()=>{sn(q,r=!0,r)}),t.$$set=B=>{"initialViewport"in B&&n(30,E=B.initialViewport),"onMoveStart"in B&&n(0,g=B.onMoveStart),"onMove"in B&&n(1,S=B.onMove),"onMoveEnd"in B&&n(2,k=B.onMoveEnd),"panOnScrollMode"in B&&n(3,C=B.panOnScrollMode),"preventScrolling"in B&&n(4,P=B.preventScrolling),"zoomOnScroll"in B&&n(5,A=B.zoomOnScroll),"zoomOnDoubleClick"in B&&n(6,D=B.zoomOnDoubleClick),"zoomOnPinch"in B&&n(7,N=B.zoomOnPinch),"panOnDrag"in B&&n(31,O=B.panOnDrag),"panOnScroll"in B&&n(32,W=B.panOnScroll),"paneClickDistance"in B&&n(8,R=B.paneClickDistance),"$$scope"in B&&n(34,w=B.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1073741824&&n(11,i=E||{x:0,y:0,zoom:1}),t.$$.dirty[1]&5&&n(10,o=s||O),t.$$.dirty[1]&6&&n(9,l=s||W)},[g,S,k,C,P,A,D,N,R,l,o,i,a,u,f,d,h,c,V,Z,m,I,y,z,H,T,K,j,q,Q,E,O,W,s,w,b]}class hr extends ue{constructor(e){super(),fe(this,e,dr,cr,ge,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function gr(t){let e,n,i,o;const l=t[28].default,r=Re(l,t,t[27],null);return{c(){e=ke("div"),r&&r.c(),this.h()},l(s){e=we(s,"DIV",{class:!0});var a=x(e);r&&r.l(a),a.forEach(M),this.h()},h(){_(e,"class","svelte-flow__pane svelte-1esy7hx"),de(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),de(e,"dragging",t[4]),de(e,"selection",t[1])},m(s,a){U(s,e,a),r&&r.m(e,null),t[29](e),n=!0,i||(o=[De(e,"click",function(){Le(t[3]?void 0:ln(t[15],t[2]))&&(t[3]?void 0:ln(t[15],t[2])).apply(this,arguments)}),De(e,"pointerdown",function(){Le(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),De(e,"pointermove",function(){Le(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),De(e,"pointerup",function(){Le(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),De(e,"contextmenu",function(){Le(ln(t[19],t[2]))&&ln(t[19],t[2]).apply(this,arguments)})],i=!0)},p(s,a){t=s,r&&r.p&&(!n||a[0]&134217728)&&Ze(r,l,t,t[27],n?Ge(l,t[27],a,null):Fe(t[27]),null),(!n||a[0]&1)&&de(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),(!n||a[0]&16)&&de(e,"dragging",t[4]),(!n||a[0]&2)&&de(e,"selection",t[1])},i(s){n||(Y(r,s),n=!0)},o(s){p(r,s),n=!1},d(s){s&&M(e),r&&r.d(s),t[29](null),i=!1,ut(o)}}}function ln(t,e){return n=>{n.target===e&&(t==null||t(n))}}function _i(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function mr(t,e,n){let i,o,l,r,s,a,u,f,d,h,c,b,w,{$$slots:E={},$$scope:g}=e,{panOnDrag:S=void 0}=e,{selectionOnDrag:k=void 0}=e;const C=St(),{nodes:P,nodeLookup:A,edges:D,viewport:N,dragging:O,elementsSelectable:W,selectionRect:R,selectionRectMode:V,selectionKeyPressed:Z,selectionMode:m,panActivationKeyPressed:I,unselectNodesAndEdges:y}=He();J(t,A,L=>n(36,d=L)),J(t,D,L=>n(33,a=L)),J(t,N,L=>n(35,f=L)),J(t,O,L=>n(4,w=L)),J(t,W,L=>n(25,c=L)),J(t,R,L=>n(24,h=L)),J(t,V,L=>n(23,s=L)),J(t,Z,L=>n(22,r=L)),J(t,m,L=>n(34,u=L)),J(t,I,L=>n(26,b=L));let z,H=null,T=[],K=!1;function j(L){if(K){K=!1;return}C("paneclick",{event:L}),y(),V.set(null)}function q(L){var me,be;if(H=z.getBoundingClientRect(),!W||!o||L.button!==0||L.target!==z||!H)return;(be=(me=L.target)==null?void 0:me.setPointerCapture)==null||be.call(me,L.pointerId);const{x:ae,y:ce}=rt(L,H);y(),R.set({width:0,height:0,startX:ae,startY:ce,x:ae,y:ce})}function Q(L){if(!o||!H||!h)return;K=!0;const ae=rt(L,H),ce=h.startX??0,me=h.startY??0,be={...h,x:ae.x<ce?ae.x:ce,y:ae.y<me?ae.y:me,width:Math.abs(ae.x-ce),height:Math.abs(ae.y-me)},Pe=T.map(Ne=>Ne.id),Xe=Vn(T,a).map(Ne=>Ne.id);T=Ji(d,be,[f.x,f.y,f.zoom],u===un.Partial,!0);const G=Vn(T,a).map(Ne=>Ne.id),Ae=T.map(Ne=>Ne.id);(Pe.length!==Ae.length||Ae.some(Ne=>!Pe.includes(Ne)))&&P.update(Ne=>Ne.map(_i(Ae))),(Xe.length!==G.length||G.some(Ne=>!Xe.includes(Ne)))&&D.update(Ne=>Ne.map(_i(G))),V.set("user"),R.set(be)}function B(L){var ae,ce;L.button===0&&((ce=(ae=L.target)==null?void 0:ae.releasePointerCapture)==null||ce.call(ae,L.pointerId),!o&&s==="user"&&L.target===z&&(j==null||j(L)),R.set(null),T.length>0&&sn(V,s="nodes",s),r&&(K=!1))}const le=L=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){L.preventDefault();return}C("panecontextmenu",{event:L})};function re(L){Bn[L?"unshift":"push"](()=>{z=L,n(2,z)})}return t.$$set=L=>{"panOnDrag"in L&&n(0,S=L.panOnDrag),"selectionOnDrag"in L&&n(20,k=L.selectionOnDrag),"$$scope"in L&&n(27,g=L.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(21,i=b||S),t.$$.dirty[0]&24117248&&n(1,o=r||h||k&&i!==!0),t.$$.dirty[0]&41943042&&n(3,l=c&&(o||s==="user"))},[S,o,z,l,w,A,D,N,O,W,R,V,Z,m,I,j,q,Q,B,le,k,i,r,s,h,c,b,g,E,re]}class br extends ue{constructor(e){super(),fe(this,e,mr,gr,ge,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function yr(t){let e,n;const i=t[3].default,o=Re(i,t,t[2],null);return{c(){e=ke("div"),o&&o.c(),this.h()},l(l){e=we(l,"DIV",{class:!0,style:!0});var r=x(e);o&&o.l(r),r.forEach(M),this.h()},h(){_(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),ye(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(l,r){U(l,e,r),o&&o.m(e,null),n=!0},p(l,[r]){o&&o.p&&(!n||r&4)&&Ze(o,i,l,l[2],n?Ge(i,l[2],r,null):Fe(l[2]),null),(!n||r&1)&&ye(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},i(l){n||(Y(o,l),n=!0)},o(l){p(o,l),n=!1},d(l){l&&M(e),o&&o.d(l)}}}function _r(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{viewport:r}=He();return J(t,r,s=>n(0,i=s)),t.$$set=s=>{"$$scope"in s&&n(2,l=s.$$scope)},[i,r,l,o]}class kr extends ue{constructor(e){super(),fe(this,e,_r,yr,ge,{})}}function Po(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:r}=e,s=os({onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:r,getStoreItems:()=>{const u=X(n.snapGrid),f=X(n.viewport);return{nodes:X(n.nodes),nodeLookup:X(n.nodeLookup),edges:X(n.edges),nodeExtent:X(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:X(n.nodeOrigin),multiSelectionActive:X(n.multiselectionKeyPressed),domNode:X(n.domNode),transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:X(n.autoPanOnNodeDrag),nodesDraggable:X(n.nodesDraggable),selectNodesOnDrag:X(n.selectNodesOnDrag),nodeDragThreshold:X(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,f){if(f.disabled){s.destroy();return}s.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return a(t,e),{update(u){a(t,u)},destroy(){s.destroy()}}}function wr({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:l}){if(o===void 0&&l===void 0){const r=t??n,s=e??i;return{width:r?`width:${r}px;`:"",height:s?`height:${s}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function ki(t){let e,n,i,o,l,r=`translate(${t[12]}px, ${t[13]}px)`,s,a,u;var f=t[27];function d(h,c){return{props:{data:h[2],id:h[1],selected:h[3],selectable:h[5],deletable:h[7],sourcePosition:h[14],targetPosition:h[15],zIndex:h[16],dragging:h[9],draggable:h[4],dragHandle:h[19],parentId:h[21],type:h[25],isConnectable:h[28],positionAbsoluteX:h[12],positionAbsoluteY:h[13],width:h[17],height:h[18]}}}return f&&(n=rn(f,d(t))),{c(){e=ke("div"),n&&ee(n.$$.fragment),this.h()},l(h){e=we(h,"DIV",{"data-id":!0,class:!0,style:!0});var c=x(e);n&&ie(n.$$.fragment,c),c.forEach(M),this.h()},h(){_(e,"data-id",t[1]),_(e,"class",i=Oe(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])),_(e,"style",o=(t[10]??"")+";"+t[26].width+t[26].height),de(e,"dragging",t[9]),de(e,"selected",t[3]),de(e,"draggable",t[4]),de(e,"connectable",t[6]),de(e,"selectable",t[5]),de(e,"nopan",t[4]),de(e,"parent",t[11]),ye(e,"z-index",t[16]),ye(e,"transform",r),ye(e,"visibility",t[20]?"visible":"hidden")},m(h,c){U(h,e,c),n&&te(n,e,null),t[50](e),s=!0,a||(u=[qe(l=Po.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]})),De(e,"click",t[34]),De(e,"mouseenter",t[51]),De(e,"mouseleave",t[52]),De(e,"mousemove",t[53]),De(e,"contextmenu",t[54])],a=!0)},p(h,c){if(c[0]&134217728&&f!==(f=h[27])){if(n){Be();const w=n;p(w.$$.fragment,1,0,()=>{ne(w,1)}),Ye()}f?(n=rn(f,d(h)),ee(n.$$.fragment),Y(n.$$.fragment,1),te(n,e,null)):n=null}else if(f){const w={};c[0]&4&&(w.data=h[2]),c[0]&2&&(w.id=h[1]),c[0]&8&&(w.selected=h[3]),c[0]&32&&(w.selectable=h[5]),c[0]&128&&(w.deletable=h[7]),c[0]&16384&&(w.sourcePosition=h[14]),c[0]&32768&&(w.targetPosition=h[15]),c[0]&65536&&(w.zIndex=h[16]),c[0]&512&&(w.dragging=h[9]),c[0]&16&&(w.draggable=h[4]),c[0]&524288&&(w.dragHandle=h[19]),c[0]&2097152&&(w.parentId=h[21]),c[0]&33554432&&(w.type=h[25]),c[0]&268435456&&(w.isConnectable=h[28]),c[0]&4096&&(w.positionAbsoluteX=h[12]),c[0]&8192&&(w.positionAbsoluteY=h[13]),c[0]&131072&&(w.width=h[17]),c[0]&262144&&(w.height=h[18]),n.$set(w)}(!s||c[0]&2)&&_(e,"data-id",h[1]),(!s||c[0]&41943040&&i!==(i=Oe(["svelte-flow__node",`svelte-flow__node-${h[25]}`,h[23]])))&&_(e,"class",i),(!s||c[0]&67109888&&o!==(o=(h[10]??"")+";"+h[26].width+h[26].height))&&_(e,"style",o),l&&Le(l.update)&&c[0]&4718626&&l.update.call(null,{nodeId:h[1],isSelectable:h[5],disabled:!1,handleSelector:h[19],noDragClass:"nodrag",nodeClickDistance:h[22],onNodeMouseDown:h[31],onDrag:h[47],onDragStart:h[48],onDragStop:h[49],store:h[29]}),(!s||c[0]&41943552)&&de(e,"dragging",h[9]),(!s||c[0]&41943048)&&de(e,"selected",h[3]),(!s||c[0]&41943056)&&de(e,"draggable",h[4]),(!s||c[0]&41943104)&&de(e,"connectable",h[6]),(!s||c[0]&41943072)&&de(e,"selectable",h[5]),(!s||c[0]&41943056)&&de(e,"nopan",h[4]),(!s||c[0]&41945088)&&de(e,"parent",h[11]);const b=c[0]&67109888;(c[0]&67175424||b)&&ye(e,"z-index",h[16]),(c[0]&67122176&&r!==(r=`translate(${h[12]}px, ${h[13]}px)`)||b)&&ye(e,"transform",r),(c[0]&68158464||b)&&ye(e,"visibility",h[20]?"visible":"hidden")},i(h){s||(n&&Y(n.$$.fragment,h),s=!0)},o(h){n&&p(n.$$.fragment,h),s=!1},d(h){h&&M(e),n&&ne(n),t[50](null),a=!1,ut(u)}}}function Er(t){let e,n,i=!t[8]&&ki(t);return{c(){i&&i.c(),e=Ie()},l(o){i&&i.l(o),e=Ie()},m(o,l){i&&i.m(o,l),U(o,e,l),n=!0},p(o,l){o[8]?i&&(Be(),p(i,1,1,()=>{i=null}),Ye()):i?(i.p(o,l),l[0]&256&&Y(i,1)):(i=ki(o),i.c(),Y(i,1),i.m(e.parentNode,e))},i(o){n||(Y(i),n=!0)},o(o){p(i),n=!1},d(o){o&&M(e),i&&i.d(o)}}}function Sr(t,e,n){let i,o,l,r,s,a,{node:u}=e,{id:f}=e,{data:d={}}=e,{selected:h=!1}=e,{draggable:c=void 0}=e,{selectable:b=void 0}=e,{connectable:w=!0}=e,{deletable:E=!0}=e,{hidden:g=!1}=e,{dragging:S=!1}=e,{resizeObserver:k=null}=e,{style:C=void 0}=e,{type:P="default"}=e,{isParent:A=!1}=e,{positionX:D}=e,{positionY:N}=e,{sourcePosition:O=void 0}=e,{targetPosition:W=void 0}=e,{zIndex:R}=e,{measuredWidth:V=void 0}=e,{measuredHeight:Z=void 0}=e,{initialWidth:m=void 0}=e,{initialHeight:I=void 0}=e,{width:y=void 0}=e,{height:z=void 0}=e,{dragHandle:H=void 0}=e,{initialized:T=!1}=e,{parentId:K=void 0}=e,{nodeClickDistance:j=void 0}=e,{class:q=""}=e;const Q=He(),{nodeTypes:B,nodeDragThreshold:le,selectNodesOnDrag:re,handleNodeSelection:L,updateNodeInternals:ae}=Q;J(t,B,F=>n(46,s=F));let ce,me=null;const be=St(),Pe=oe(w);J(t,Pe,F=>n(28,a=F));let Xe,G,Ae;Zt("svelteflow__node_id",f),Zt("svelteflow__node_connectable",Pe),gn(()=>{me&&(k==null||k.unobserve(me))});function Ne(F){b&&(!X(re)||!c||X(le)>0)&&L(f),be("nodeclick",{node:u.internals.userNode,event:F})}const vt=(F,ht,We,je)=>{be("nodedrag",{event:F,targetNode:We,nodes:je})},bt=(F,ht,We,je)=>{be("nodedragstart",{event:F,targetNode:We,nodes:je})},yt=(F,ht,We,je)=>{be("nodedragstop",{event:F,targetNode:We,nodes:je})};function _t(F){Bn[F?"unshift":"push"](()=>{ce=F,n(24,ce)})}const kt=F=>be("nodemouseenter",{node:u,event:F}),ft=F=>be("nodemouseleave",{node:u,event:F}),ct=F=>be("nodemousemove",{node:u,event:F}),dt=F=>be("nodecontextmenu",{node:u,event:F});return t.$$set=F=>{"node"in F&&n(0,u=F.node),"id"in F&&n(1,f=F.id),"data"in F&&n(2,d=F.data),"selected"in F&&n(3,h=F.selected),"draggable"in F&&n(4,c=F.draggable),"selectable"in F&&n(5,b=F.selectable),"connectable"in F&&n(6,w=F.connectable),"deletable"in F&&n(7,E=F.deletable),"hidden"in F&&n(8,g=F.hidden),"dragging"in F&&n(9,S=F.dragging),"resizeObserver"in F&&n(35,k=F.resizeObserver),"style"in F&&n(10,C=F.style),"type"in F&&n(36,P=F.type),"isParent"in F&&n(11,A=F.isParent),"positionX"in F&&n(12,D=F.positionX),"positionY"in F&&n(13,N=F.positionY),"sourcePosition"in F&&n(14,O=F.sourcePosition),"targetPosition"in F&&n(15,W=F.targetPosition),"zIndex"in F&&n(16,R=F.zIndex),"measuredWidth"in F&&n(37,V=F.measuredWidth),"measuredHeight"in F&&n(38,Z=F.measuredHeight),"initialWidth"in F&&n(39,m=F.initialWidth),"initialHeight"in F&&n(40,I=F.initialHeight),"width"in F&&n(17,y=F.width),"height"in F&&n(18,z=F.height),"dragHandle"in F&&n(19,H=F.dragHandle),"initialized"in F&&n(20,T=F.initialized),"parentId"in F&&n(21,K=F.parentId),"nodeClickDistance"in F&&n(22,j=F.nodeClickDistance),"class"in F&&n(23,q=F.class)},t.$$.update=()=>{t.$$.dirty[1]&32&&n(25,i=P||"default"),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(45,o=!!s[i]),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(27,l=s[i]||wo),t.$$.dirty[1]&16416&&(o||console.warn("003",Qt.error003(P))),t.$$.dirty[0]&393216|t.$$.dirty[1]&960&&n(26,r=wr({width:y,height:z,initialWidth:m,initialHeight:I,measuredWidth:V,measuredHeight:Z})),t.$$.dirty[0]&64&&Pe.set(!!w),t.$$.dirty[0]&50380802|t.$$.dirty[1]&14336&&((Xe&&i!==Xe||G&&O!==G||Ae&&W!==Ae)&&requestAnimationFrame(()=>ae(new Map([[f,{id:f,nodeElement:ce,force:!0}]]))),n(42,Xe=i),n(43,G=O),n(44,Ae=W)),t.$$.dirty[0]&17825792|t.$$.dirty[1]&1040&&k&&(ce!==me||!T)&&(me&&k.unobserve(me),ce&&k.observe(ce),n(41,me=ce))},[u,f,d,h,c,b,w,E,g,S,C,A,D,N,O,W,R,y,z,H,T,K,j,q,ce,i,r,l,a,Q,B,L,be,Pe,Ne,k,P,V,Z,m,I,me,Xe,G,Ae,o,s,vt,bt,yt,_t,kt,ft,ct,dt]}class vr extends ue{constructor(e){super(),fe(this,e,Sr,Er,Fi,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:Cr}=hl;function wi(t,e,n){const i=t.slice();return i[21]=e[n],i}function Ei(t,e){let n,i,o;return i=new vr({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:si(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),i.$on("nodeclick",e[12]),i.$on("nodemouseenter",e[13]),i.$on("nodemousemove",e[14]),i.$on("nodemouseleave",e[15]),i.$on("nodedrag",e[16]),i.$on("nodedragstart",e[17]),i.$on("nodedragstop",e[18]),i.$on("nodecontextmenu",e[19]),{key:t,first:null,c(){n=Ie(),ee(i.$$.fragment),this.h()},l(l){n=Ie(),ie(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,r){U(l,n,r),te(i,l,r),o=!0},p(l,r){e=l;const s={};r&2&&(s.node=e[21]),r&2&&(s.id=e[21].id),r&2&&(s.data=e[21].data),r&2&&(s.selected=!!e[21].selected),r&2&&(s.hidden=!!e[21].hidden),r&6&&(s.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),r&10&&(s.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),r&18&&(s.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),r&2&&(s.deletable=e[21].deletable??!0),r&2&&(s.positionX=e[21].internals.positionAbsolute.x),r&2&&(s.positionY=e[21].internals.positionAbsolute.y),r&34&&(s.isParent=e[5].has(e[21].id)),r&2&&(s.style=e[21].style),r&2&&(s.class=e[21].class),r&2&&(s.type=e[21].type??"default"),r&2&&(s.sourcePosition=e[21].sourcePosition),r&2&&(s.targetPosition=e[21].targetPosition),r&2&&(s.dragging=e[21].dragging),r&2&&(s.zIndex=e[21].internals.z??0),r&2&&(s.dragHandle=e[21].dragHandle),r&2&&(s.initialized=si(e[21])),r&2&&(s.width=e[21].width),r&2&&(s.height=e[21].height),r&2&&(s.initialWidth=e[21].initialWidth),r&2&&(s.initialHeight=e[21].initialHeight),r&2&&(s.measuredWidth=e[21].measured.width),r&2&&(s.measuredHeight=e[21].measured.height),r&2&&(s.parentId=e[21].parentId),r&1&&(s.nodeClickDistance=e[0]),i.$set(s)},i(l){o||(Y(i.$$.fragment,l),o=!0)},o(l){p(i.$$.fragment,l),o=!1},d(l){l&&M(n),ne(i,l)}}}function zr(t){let e,n=[],i=new Cr,o,l=At(t[1]);const r=s=>s[21].id;for(let s=0;s<l.length;s+=1){let a=wi(t,l,s),u=r(a);i.set(u,n[s]=Ei(u,a))}return{c(){e=ke("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=we(s,"DIV",{class:!0});var a=x(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(M),this.h()},h(){_(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(s,a){U(s,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(s,[a]){a&2111&&(l=At(s[1]),Be(),n=Xn(n,a,r,1,s,l,i,e,Wn,Ei,null,wi),Ye())},i(s){if(!o){for(let a=0;a<l.length;a+=1)Y(n[a]);o=!0}},o(s){for(let a=0;a<n.length;a+=1)p(n[a]);o=!1},d(s){s&&M(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Pr(t,e,n){let i,o,l,r,s,{nodeClickDistance:a=0}=e;const{visibleNodes:u,nodesDraggable:f,nodesConnectable:d,elementsSelectable:h,updateNodeInternals:c,parentLookup:b}=He();J(t,u,N=>n(1,i=N)),J(t,f,N=>n(2,o=N)),J(t,d,N=>n(4,r=N)),J(t,h,N=>n(3,l=N)),J(t,b,N=>n(5,s=N));const w=typeof ResizeObserver>"u"?null:new ResizeObserver(N=>{const O=new Map;N.forEach(W=>{const R=W.target.getAttribute("data-id");O.set(R,{id:R,nodeElement:W.target,force:!0})}),c(O)});gn(()=>{w==null||w.disconnect()});function E(N){ze.call(this,t,N)}function g(N){ze.call(this,t,N)}function S(N){ze.call(this,t,N)}function k(N){ze.call(this,t,N)}function C(N){ze.call(this,t,N)}function P(N){ze.call(this,t,N)}function A(N){ze.call(this,t,N)}function D(N){ze.call(this,t,N)}return t.$$set=N=>{"nodeClickDistance"in N&&n(0,a=N.nodeClickDistance)},[a,i,o,l,r,s,u,f,d,h,b,w,E,g,S,k,C,P,A,D]}class Mr extends ue{constructor(e){super(),fe(this,e,Pr,zr,ge,{nodeClickDistance:0})}}function Si(t){let e,n,i,o,l,r,s,a;var u=t[27];function f(d,h){return{props:{id:d[0],source:d[1],target:d[2],sourceX:d[14],sourceY:d[15],targetX:d[16],targetY:d[17],sourcePosition:d[18],targetPosition:d[19],animated:d[6],selected:d[7],label:d[10],labelStyle:d[11],data:d[3],style:d[4],interactionWidth:d[21],selectable:d[24],deletable:d[8]??!0,type:d[23],sourceHandleId:d[12],targetHandleId:d[13],markerStart:d[26],markerEnd:d[25]}}}return u&&(i=rn(u,f(t))),{c(){e=Ee("svg"),n=Ee("g"),i&&ee(i.$$.fragment),this.h()},l(d){e=Se(d,"svg",{});var h=x(e);n=Se(h,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var c=x(n);i&&ie(i.$$.fragment,c),c.forEach(M),h.forEach(M),this.h()},h(){_(n,"class",o=Oe(["svelte-flow__edge",t[22]])),_(n,"data-id",t[0]),_(n,"aria-label",l=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),_(n,"role","img"),de(n,"animated",t[6]),de(n,"selected",t[7]),de(n,"selectable",t[24]),ye(e,"z-index",t[5])},m(d,h){U(d,e,h),se(e,n),i&&te(i,n,null),r=!0,s||(a=[De(n,"click",t[32]),De(n,"contextmenu",t[41]),De(n,"mouseenter",t[42]),De(n,"mouseleave",t[43])],s=!0)},p(d,h){if(h[0]&134217728&&u!==(u=d[27])){if(i){Be();const c=i;p(c.$$.fragment,1,0,()=>{ne(c,1)}),Ye()}u?(i=rn(u,f(d)),ee(i.$$.fragment),Y(i.$$.fragment,1),te(i,n,null)):i=null}else if(u){const c={};h[0]&1&&(c.id=d[0]),h[0]&2&&(c.source=d[1]),h[0]&4&&(c.target=d[2]),h[0]&16384&&(c.sourceX=d[14]),h[0]&32768&&(c.sourceY=d[15]),h[0]&65536&&(c.targetX=d[16]),h[0]&131072&&(c.targetY=d[17]),h[0]&262144&&(c.sourcePosition=d[18]),h[0]&524288&&(c.targetPosition=d[19]),h[0]&64&&(c.animated=d[6]),h[0]&128&&(c.selected=d[7]),h[0]&1024&&(c.label=d[10]),h[0]&2048&&(c.labelStyle=d[11]),h[0]&8&&(c.data=d[3]),h[0]&16&&(c.style=d[4]),h[0]&2097152&&(c.interactionWidth=d[21]),h[0]&16777216&&(c.selectable=d[24]),h[0]&256&&(c.deletable=d[8]??!0),h[0]&8388608&&(c.type=d[23]),h[0]&4096&&(c.sourceHandleId=d[12]),h[0]&8192&&(c.targetHandleId=d[13]),h[0]&67108864&&(c.markerStart=d[26]),h[0]&33554432&&(c.markerEnd=d[25]),i.$set(c)}(!r||h[0]&4194304&&o!==(o=Oe(["svelte-flow__edge",d[22]])))&&_(n,"class",o),(!r||h[0]&1)&&_(n,"data-id",d[0]),(!r||h[0]&1048582&&l!==(l=d[20]===null?void 0:d[20]?d[20]:`Edge from ${d[1]} to ${d[2]}`))&&_(n,"aria-label",l),(!r||h[0]&4194368)&&de(n,"animated",d[6]),(!r||h[0]&4194432)&&de(n,"selected",d[7]),(!r||h[0]&20971520)&&de(n,"selectable",d[24]),h[0]&32&&ye(e,"z-index",d[5])},i(d){r||(i&&Y(i.$$.fragment,d),r=!0)},o(d){i&&p(i.$$.fragment,d),r=!1},d(d){d&&M(e),i&&ne(i),s=!1,ut(a)}}}function Dr(t){let e,n,i=!t[9]&&Si(t);return{c(){i&&i.c(),e=Ie()},l(o){i&&i.l(o),e=Ie()},m(o,l){i&&i.m(o,l),U(o,e,l),n=!0},p(o,l){o[9]?i&&(Be(),p(i,1,1,()=>{i=null}),Ye()):i?(i.p(o,l),l[0]&512&&Y(i,1)):(i=Si(o),i.c(),Y(i,1),i.m(e.parentNode,e))},i(o){n||(Y(i),n=!0)},o(o){p(i),n=!1},d(o){o&&M(e),i&&i.d(o)}}}function Nr(t,e,n){let i,o,l,r,s,a,u,f,d,{id:h}=e,{type:c="default"}=e,{source:b=""}=e,{target:w=""}=e,{data:E={}}=e,{style:g=void 0}=e,{zIndex:S=void 0}=e,{animated:k=!1}=e,{selected:C=!1}=e,{selectable:P=void 0}=e,{deletable:A=void 0}=e,{hidden:D=!1}=e,{label:N=void 0}=e,{labelStyle:O=void 0}=e,{markerStart:W=void 0}=e,{markerEnd:R=void 0}=e,{sourceHandle:V=void 0}=e,{targetHandle:Z=void 0}=e,{sourceX:m}=e,{sourceY:I}=e,{targetX:y}=e,{targetY:z}=e,{sourcePosition:H}=e,{targetPosition:T}=e,{ariaLabel:K=void 0}=e,{interactionWidth:j=void 0}=e,{class:q=""}=e;Zt("svelteflow__edge_id",h);const{edgeLookup:Q,edgeTypes:B,flowId:le,elementsSelectable:re}=He();J(t,Q,G=>n(44,a=G)),J(t,B,G=>n(40,d=G)),J(t,le,G=>n(39,f=G)),J(t,re,G=>n(38,u=G));const L=St(),ae=Eo();function ce(G){const Ae=a.get(h);Ae&&(ae(h),L("edgeclick",{event:G,edge:Ae}))}function me(G,Ae){const Ne=a.get(h);Ne&&L(Ae,{event:G,edge:Ne})}const be=G=>{me(G,"edgecontextmenu")},Pe=G=>{me(G,"edgemouseenter")},Xe=G=>{me(G,"edgemouseleave")};return t.$$set=G=>{"id"in G&&n(0,h=G.id),"type"in G&&n(34,c=G.type),"source"in G&&n(1,b=G.source),"target"in G&&n(2,w=G.target),"data"in G&&n(3,E=G.data),"style"in G&&n(4,g=G.style),"zIndex"in G&&n(5,S=G.zIndex),"animated"in G&&n(6,k=G.animated),"selected"in G&&n(7,C=G.selected),"selectable"in G&&n(35,P=G.selectable),"deletable"in G&&n(8,A=G.deletable),"hidden"in G&&n(9,D=G.hidden),"label"in G&&n(10,N=G.label),"labelStyle"in G&&n(11,O=G.labelStyle),"markerStart"in G&&n(36,W=G.markerStart),"markerEnd"in G&&n(37,R=G.markerEnd),"sourceHandle"in G&&n(12,V=G.sourceHandle),"targetHandle"in G&&n(13,Z=G.targetHandle),"sourceX"in G&&n(14,m=G.sourceX),"sourceY"in G&&n(15,I=G.sourceY),"targetX"in G&&n(16,y=G.targetX),"targetY"in G&&n(17,z=G.targetY),"sourcePosition"in G&&n(18,H=G.sourcePosition),"targetPosition"in G&&n(19,T=G.targetPosition),"ariaLabel"in G&&n(20,K=G.ariaLabel),"interactionWidth"in G&&n(21,j=G.interactionWidth),"class"in G&&n(22,q=G.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=c||"default"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,o=d[i]||So),t.$$.dirty[1]&288&&n(26,l=W?`url('#${Ln(W,f)}')`:void 0),t.$$.dirty[1]&320&&n(25,r=R?`url('#${Ln(R,f)}')`:void 0),t.$$.dirty[1]&144&&n(24,s=P??u)},[h,b,w,E,g,S,k,C,A,D,N,O,V,Z,m,I,y,z,H,T,K,j,q,i,s,r,l,o,Q,B,le,re,ce,me,c,P,W,R,u,f,d,be,Pe,Xe]}class Or extends ue{constructor(e){super(),fe(this,e,Nr,Dr,Fi,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function Ir(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return Jt(()=>(i==null||i(),o)),t.$$set=l=>{"onMount"in l&&n(0,i=l.onMount),"onDestroy"in l&&n(1,o=l.onDestroy)},[i,o]}class Tr extends ue{constructor(e){super(),fe(this,e,Ir,null,ge,{onMount:0,onDestroy:1})}}function vi(t,e,n){const i=t.slice();return i[2]=e[n],i}function Ci(t,e){let n,i,o;const l=[e[2]];let r={};for(let s=0;s<l.length;s+=1)r=Me(r,l[s]);return i=new Wr({props:r}),{key:t,first:null,c(){n=Ie(),ee(i.$$.fragment),this.h()},l(s){n=Ie(),ie(i.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){U(s,n,a),te(i,s,a),o=!0},p(s,a){e=s;const u=a&1?mt(l,[Ft(e[2])]):{};i.$set(u)},i(s){o||(Y(i.$$.fragment,s),o=!0)},o(s){p(i.$$.fragment,s),o=!1},d(s){s&&M(n),ne(i,s)}}}function Hr(t){let e,n=[],i=new Map,o,l=At(t[0]);const r=s=>s[2].id;for(let s=0;s<l.length;s+=1){let a=vi(t,l,s),u=r(a);i.set(u,n[s]=Ci(u,a))}return{c(){e=Ee("defs");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){e=Se(s,"defs",{});var a=x(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(M)},m(s,a){U(s,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(s,[a]){a&1&&(l=At(s[0]),Be(),n=Xn(n,a,r,1,s,l,i,e,Wn,Ci,null,vi),Ye())},i(s){if(!o){for(let a=0;a<l.length;a+=1)Y(n[a]);o=!0}},o(s){for(let a=0;a<n.length;a+=1)p(n[a]);o=!1},d(s){s&&M(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Vr(t,e,n){let i;const{markers:o}=He();return J(t,o,l=>n(0,i=l)),[i,o]}class Ar extends ue{constructor(e){super(),fe(this,e,Vr,Hr,ge,{})}}function Lr(t){let e;return{c(){e=Ee("polyline"),this.h()},l(n){e=Se(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),x(e).forEach(M),this.h()},h(){_(e,"stroke",t[6]),_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round"),_(e,"stroke-width",t[7]),_(e,"fill",t[6]),_(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){U(n,e,i)},p(n,i){i&64&&_(e,"stroke",n[6]),i&128&&_(e,"stroke-width",n[7]),i&64&&_(e,"fill",n[6])},d(n){n&&M(e)}}}function Br(t){let e;return{c(){e=Ee("polyline"),this.h()},l(n){e=Se(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),x(e).forEach(M),this.h()},h(){_(e,"stroke",t[6]),_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round"),_(e,"stroke-width",t[7]),_(e,"fill","none"),_(e,"points","-5,-4 0,0 -5,4")},m(n,i){U(n,e,i)},p(n,i){i&64&&_(e,"stroke",n[6]),i&128&&_(e,"stroke-width",n[7])},d(n){n&&M(e)}}}function Yr(t){let e,n,i;function o(s,a){if(s[1]===fn.Arrow)return Br;if(s[1]===fn.ArrowClosed)return Lr}let l=o(t),r=l&&l(t);return{c(){e=Ee("marker"),r&&r.c(),this.h()},l(s){e=Se(s,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=x(e);r&&r.l(a),a.forEach(M),this.h()},h(){_(e,"class","svelte-flow__arrowhead"),_(e,"id",t[0]),_(e,"markerWidth",n=`${t[2]}`),_(e,"markerHeight",i=`${t[3]}`),_(e,"viewBox","-10 -10 20 20"),_(e,"markerUnits",t[4]),_(e,"orient",t[5]),_(e,"refX","0"),_(e,"refY","0")},m(s,a){U(s,e,a),r&&r.m(e,null)},p(s,[a]){l===(l=o(s))&&r?r.p(s,a):(r&&r.d(1),r=l&&l(s),r&&(r.c(),r.m(e,null))),a&1&&_(e,"id",s[0]),a&4&&n!==(n=`${s[2]}`)&&_(e,"markerWidth",n),a&8&&i!==(i=`${s[3]}`)&&_(e,"markerHeight",i),a&16&&_(e,"markerUnits",s[4]),a&32&&_(e,"orient",s[5])},i:_e,o:_e,d(s){s&&M(e),r&&r.d()}}}function Xr(t,e,n){let{id:i}=e,{type:o}=e,{width:l=12.5}=e,{height:r=12.5}=e,{markerUnits:s="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:f=void 0}=e;return t.$$set=d=>{"id"in d&&n(0,i=d.id),"type"in d&&n(1,o=d.type),"width"in d&&n(2,l=d.width),"height"in d&&n(3,r=d.height),"markerUnits"in d&&n(4,s=d.markerUnits),"orient"in d&&n(5,a=d.orient),"color"in d&&n(6,u=d.color),"strokeWidth"in d&&n(7,f=d.strokeWidth)},[i,o,l,r,s,a,u,f]}class Wr extends ue{constructor(e){super(),fe(this,e,Xr,Yr,ge,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function zi(t,e,n){const i=t.slice();return i[14]=e[n],i}function Pi(t,e){let n,i,o;return i=new Or({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),i.$on("edgeclick",e[7]),i.$on("edgecontextmenu",e[8]),i.$on("edgemouseenter",e[9]),i.$on("edgemouseleave",e[10]),{key:t,first:null,c(){n=Ie(),ee(i.$$.fragment),this.h()},l(l){n=Ie(),ie(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,r){U(l,n,r),te(i,l,r),o=!0},p(l,r){e=l;const s={};r&1&&(s.id=e[14].id),r&1&&(s.source=e[14].source),r&1&&(s.target=e[14].target),r&1&&(s.data=e[14].data),r&1&&(s.style=e[14].style),r&1&&(s.animated=e[14].animated),r&1&&(s.selected=e[14].selected),r&3&&(s.selectable=e[14].selectable??e[1]),r&1&&(s.deletable=e[14].deletable),r&1&&(s.hidden=e[14].hidden),r&1&&(s.label=e[14].label),r&1&&(s.labelStyle=e[14].labelStyle),r&1&&(s.markerStart=e[14].markerStart),r&1&&(s.markerEnd=e[14].markerEnd),r&1&&(s.sourceHandle=e[14].sourceHandle),r&1&&(s.targetHandle=e[14].targetHandle),r&1&&(s.sourceX=e[14].sourceX),r&1&&(s.sourceY=e[14].sourceY),r&1&&(s.targetX=e[14].targetX),r&1&&(s.targetY=e[14].targetY),r&1&&(s.sourcePosition=e[14].sourcePosition),r&1&&(s.targetPosition=e[14].targetPosition),r&1&&(s.ariaLabel=e[14].ariaLabel),r&1&&(s.interactionWidth=e[14].interactionWidth),r&1&&(s.class=e[14].class),r&1&&(s.type=e[14].type||"default"),r&1&&(s.zIndex=e[14].zIndex),i.$set(s)},i(l){o||(Y(i.$$.fragment,l),o=!0)},o(l){p(i.$$.fragment,l),o=!1},d(l){l&&M(n),ne(i,l)}}}function Mi(t){let e,n;return e=new Tr({props:{onMount:t[11],onDestroy:t[12]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o&4&&(l.onMount=i[11]),o&4&&(l.onDestroy=i[12]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Kr(t){let e,n,i,o,l=[],r=new Map,s,a;i=new Ar({});let u=At(t[0]);const f=h=>h[14].id;for(let h=0;h<u.length;h+=1){let c=zi(t,u,h),b=f(c);r.set(b,l[h]=Pi(b,c))}let d=t[0].length>0&&Mi(t);return{c(){e=ke("div"),n=Ee("svg"),ee(i.$$.fragment),o=ve();for(let h=0;h<l.length;h+=1)l[h].c();s=ve(),d&&d.c(),this.h()},l(h){e=we(h,"DIV",{class:!0});var c=x(e);n=Se(c,"svg",{class:!0});var b=x(n);ie(i.$$.fragment,b),b.forEach(M),o=Ce(c);for(let w=0;w<l.length;w+=1)l[w].l(c);s=Ce(c),d&&d.l(c),c.forEach(M),this.h()},h(){_(n,"class","svelte-flow__marker"),_(e,"class","svelte-flow__edges")},m(h,c){U(h,e,c),se(e,n),te(i,n,null),se(e,o);for(let b=0;b<l.length;b+=1)l[b]&&l[b].m(e,null);se(e,s),d&&d.m(e,null),a=!0},p(h,[c]){c&3&&(u=At(h[0]),Be(),l=Xn(l,c,f,1,h,u,r,e,Wn,Pi,s,zi),Ye()),h[0].length>0?d?(d.p(h,c),c&1&&Y(d,1)):(d=Mi(h),d.c(),Y(d,1),d.m(e,null)):d&&(Be(),p(d,1,1,()=>{d=null}),Ye())},i(h){if(!a){Y(i.$$.fragment,h);for(let c=0;c<u.length;c+=1)Y(l[c]);Y(d),a=!0}},o(h){p(i.$$.fragment,h);for(let c=0;c<l.length;c+=1)p(l[c]);p(d),a=!1},d(h){h&&M(e),ne(i);for(let c=0;c<l.length;c+=1)l[c].d();d&&d.d()}}}function pr(t,e,n){let i,o,l,{defaultEdgeOptions:r}=e;const{visibleEdges:s,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:f}=He();J(t,s,g=>n(0,i=g)),J(t,a,g=>n(2,l=g)),J(t,f,g=>n(1,o=g)),Jt(()=>{r&&u(r)});function d(g){ze.call(this,t,g)}function h(g){ze.call(this,t,g)}function c(g){ze.call(this,t,g)}function b(g){ze.call(this,t,g)}const w=()=>{sn(a,l=!0,l)},E=()=>{sn(a,l=!1,l)};return t.$$set=g=>{"defaultEdgeOptions"in g&&n(6,r=g.defaultEdgeOptions)},[i,o,l,s,a,f,r,d,h,c,b,w,E]}class Rr extends ue{constructor(e){super(),fe(this,e,pr,Kr,ge,{defaultEdgeOptions:6})}}function Di(t){let e;return{c(){e=ke("div"),this.h()},l(n){e=we(n,"DIV",{class:!0}),x(e).forEach(M),this.h()},h(){_(e,"class","svelte-flow__selection svelte-1iugwpu"),ye(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),ye(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),ye(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){U(n,e,i)},p(n,i){i&4&&ye(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&ye(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&ye(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&M(e)}}}function Zr(t){let e,n=t[4]&&Di(t);return{c(){n&&n.c(),e=Ie()},l(i){n&&n.l(i),e=Ie()},m(i,o){n&&n.m(i,o),U(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=Di(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:_e,o:_e,d(i){i&&M(e),n&&n.d(i)}}}function Fr(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:l=0}=e,{height:r=0}=e,{isVisible:s=!0}=e;return t.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,l=a.width),"height"in a&&n(3,r=a.height),"isVisible"in a&&n(4,s=a.isVisible)},[i,o,l,r,s]}class Mo extends ue{constructor(e){super(),fe(this,e,Fr,Zr,ge,{x:0,y:1,width:2,height:3,isVisible:4})}}function Gr(t){var i,o,l,r;let e,n;return e=new Mo({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(l=t[0])==null?void 0:l.x,y:(r=t[0])==null?void 0:r.y}}),{c(){ee(e.$$.fragment)},l(s){ie(e.$$.fragment,s)},m(s,a){te(e,s,a),n=!0},p(s,[a]){var f,d,h,c;const u={};a&3&&(u.isVisible=!!(s[0]&&s[1]==="user")),a&1&&(u.width=(f=s[0])==null?void 0:f.width),a&1&&(u.height=(d=s[0])==null?void 0:d.height),a&1&&(u.x=(h=s[0])==null?void 0:h.x),a&1&&(u.y=(c=s[0])==null?void 0:c.y),e.$set(u)},i(s){n||(Y(e.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),n=!1},d(s){ne(e,s)}}}function jr(t,e,n){let i,o;const{selectionRect:l,selectionRectMode:r}=He();return J(t,l,s=>n(0,i=s)),J(t,r,s=>n(1,o=s)),[i,o,l,r]}class Ur extends ue{constructor(e){super(),fe(this,e,jr,Gr,ge,{})}}function Ni(t){let e,n,i,o,l;return n=new Mo({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=ke("div"),ee(n.$$.fragment),this.h()},l(r){e=we(r,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var s=x(e);ie(n.$$.fragment,s),s.forEach(M),this.h()},h(){_(e,"class","selection-wrapper nopan svelte-5pxri"),ye(e,"width",t[1].width+"px"),ye(e,"height",t[1].height+"px"),ye(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)"),_(e,"role","button"),_(e,"tabindex","-1")},m(r,s){U(r,e,s),te(n,e,null),i=!0,o||(l=[qe(Po.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),De(e,"contextmenu",t[7]),De(e,"click",t[8]),De(e,"keyup",Jr)],o=!0)},p(r,s){(!i||s&2)&&ye(e,"width",r[1].width+"px"),(!i||s&2)&&ye(e,"height",r[1].height+"px"),(!i||s&2)&&ye(e,"transform","translate("+r[1].x+"px, "+r[1].y+"px)")},i(r){i||(Y(n.$$.fragment,r),i=!0)},o(r){p(n.$$.fragment,r),i=!1},d(r){r&&M(e),ne(n),o=!1,ut(l)}}}function qr(t){let e=t[0]==="nodes"&&t[1]&&xe(t[1].x)&&xe(t[1].y),n,i,o=e&&Ni(t);return{c(){o&&o.c(),n=Ie()},l(l){o&&o.l(l),n=Ie()},m(l,r){o&&o.m(l,r),U(l,n,r),i=!0},p(l,[r]){r&3&&(e=l[0]==="nodes"&&l[1]&&xe(l[1].x)&&xe(l[1].y)),e?o?(o.p(l,r),r&3&&Y(o,1)):(o=Ni(l),o.c(),Y(o,1),o.m(n.parentNode,n)):o&&(Be(),p(o,1,1,()=>{o=null}),Ye())},i(l){i||(Y(o),i=!0)},o(l){p(o),i=!1},d(l){l&&M(n),o&&o.d(l)}}}const Jr=()=>{};function Qr(t,e,n){let i,o,l;const r=He(),{selectionRectMode:s,nodes:a,nodeLookup:u}=r;J(t,s,g=>n(0,l=g)),J(t,a,g=>n(9,i=g)),J(t,u,g=>n(10,o=g));const f=St();let d=null;function h(g){const S=i.filter(k=>k.selected);f("selectioncontextmenu",{nodes:S,event:g})}function c(g){const S=i.filter(k=>k.selected);f("selectionclick",{nodes:S,event:g})}const b=(g,S,k,C)=>{f("nodedrag",{event:g,targetNode:null,nodes:C})},w=(g,S,k,C)=>{f("nodedragstart",{event:g,targetNode:null,nodes:C})},E=(g,S,k,C)=>{f("nodedragstop",{event:g,targetNode:null,nodes:C})};return t.$$.update=()=>{t.$$.dirty&1537&&l==="nodes"&&n(1,d=bn(o,{filter:g=>!!g.selected}))},[l,d,r,s,a,u,f,h,c,i,o,b,w,E]}class xr extends ue{constructor(e){super(),fe(this,e,Qr,qr,ge,{})}}function it(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function l(r){const s=Array.isArray(i)?i:[i],a={alt:r.altKey,ctrl:r.ctrlKey,shift:r.shiftKey,meta:r.metaKey};for(const u of s){const f={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:d,key:h,callback:c,preventDefault:b,enabled:w}=f;if(w){if(d.length&&!(Array.isArray(d)?d:[d]).map(S=>typeof S=="string"?[S]:S).some(S=>S.every(k=>a[k])))continue;if(r.key===h){b&&r.preventDefault();const E={node:t,trigger:f,originalEvent:r};t.dispatchEvent(new CustomEvent("shortcut",{detail:E})),c==null||c(E)}}}}return n&&t.addEventListener(o,l),{update:r=>{const{enabled:s=!0,type:a="keydown"}=r;n&&(!s||o!==a)?t.removeEventListener(o,l):!n&&s&&t.addEventListener(a,l),n=s,o=a,i=r.trigger},destroy:()=>{t.removeEventListener(o,l)}}}function $r(t){let e,n,i,o,l,r,s,a,u,f,d,h;return{c:_e,l:_e,m(c,b){d||(h=[qe(e=it.call(null,window,{trigger:Ve(t[0],t[11]),type:"keydown"})),qe(n=it.call(null,window,{trigger:Ve(t[0],t[12]),type:"keyup"})),qe(i=it.call(null,window,{trigger:Ve(t[1],t[13]),type:"keydown"})),qe(o=it.call(null,window,{trigger:Ve(t[1],t[14]),type:"keyup"})),qe(l=it.call(null,window,{trigger:Ve(t[2],t[15]),type:"keydown"})),qe(r=it.call(null,window,{trigger:Ve(t[2],t[16]),type:"keyup"})),qe(s=it.call(null,window,{trigger:Ve(t[3],t[17]),type:"keydown"})),qe(a=it.call(null,window,{trigger:Ve(t[3],t[18]),type:"keyup"})),qe(u=it.call(null,window,{trigger:Ve(t[4],t[19]),type:"keydown"})),qe(f=it.call(null,window,{trigger:Ve(t[4],t[20]),type:"keyup"})),De(window,"blur",t[10]),De(window,"contextmenu",t[10])],d=!0)},p(c,[b]){e&&Le(e.update)&&b&1&&e.update.call(null,{trigger:Ve(c[0],c[11]),type:"keydown"}),n&&Le(n.update)&&b&1&&n.update.call(null,{trigger:Ve(c[0],c[12]),type:"keyup"}),i&&Le(i.update)&&b&2&&i.update.call(null,{trigger:Ve(c[1],c[13]),type:"keydown"}),o&&Le(o.update)&&b&2&&o.update.call(null,{trigger:Ve(c[1],c[14]),type:"keyup"}),l&&Le(l.update)&&b&4&&l.update.call(null,{trigger:Ve(c[2],c[15]),type:"keydown"}),r&&Le(r.update)&&b&4&&r.update.call(null,{trigger:Ve(c[2],c[16]),type:"keyup"}),s&&Le(s.update)&&b&8&&s.update.call(null,{trigger:Ve(c[3],c[17]),type:"keydown"}),a&&Le(a.update)&&b&8&&a.update.call(null,{trigger:Ve(c[3],c[18]),type:"keyup"}),u&&Le(u.update)&&b&16&&u.update.call(null,{trigger:Ve(c[4],c[19]),type:"keydown"}),f&&Le(f.update)&&b&16&&f.update.call(null,{trigger:Ve(c[4],c[20]),type:"keyup"})},i:_e,o:_e,d(c){d=!1,ut(h)}}}function Do(t){return t!==null&&typeof t=="object"}function ea(t){return Do(t)?t.modifier||[]:[]}function ta(t){return t==null?"":Do(t)?t.key:t}function Ve(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const o=ta(i);return{key:o,modifier:ea(i),enabled:o!==null,callback:e}})}function na(t,e,n){let{selectionKey:i="Shift"}=e,{multiSelectionKey:o=dn()?"Meta":"Control"}=e,{deleteKey:l="Backspace"}=e,{panActivationKey:r=" "}=e,{zoomActivationKey:s=dn()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:f,panActivationKeyPressed:d,zoomActivationKeyPressed:h,selectionRect:c}=He();function b(){c.set(null),a.set(!1),u.set(!1),f.set(!1),d.set(!1),h.set(!1)}const w=()=>a.set(!0),E=()=>a.set(!1),g=()=>u.set(!0),S=()=>u.set(!1),k=O=>{!(O.originalEvent.ctrlKey||O.originalEvent.metaKey||O.originalEvent.shiftKey)&&!Xl(O.originalEvent)&&f.set(!0)},C=()=>f.set(!1),P=()=>d.set(!0),A=()=>d.set(!1),D=()=>h.set(!0),N=()=>h.set(!1);return t.$$set=O=>{"selectionKey"in O&&n(0,i=O.selectionKey),"multiSelectionKey"in O&&n(1,o=O.multiSelectionKey),"deleteKey"in O&&n(2,l=O.deleteKey),"panActivationKey"in O&&n(3,r=O.panActivationKey),"zoomActivationKey"in O&&n(4,s=O.zoomActivationKey)},[i,o,l,r,s,a,u,f,d,h,b,w,E,g,S,k,C,P,A,D,N]}class ia extends ue{constructor(e){super(),fe(this,e,na,$r,ge,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const oa=t=>({}),Oi=t=>({});function Ii(t){let e,n,i,o;const l=t[13].connectionLine,r=Re(l,t,t[12],Oi);let s=!t[2]&&Ti(t);return{c(){e=Ee("svg"),n=Ee("g"),r&&r.c(),s&&s.c(),this.h()},l(a){e=Se(a,"svg",{width:!0,height:!0,class:!0,style:!0});var u=x(e);n=Se(u,"g",{class:!0});var f=x(n);r&&r.l(f),s&&s.l(f),f.forEach(M),u.forEach(M),this.h()},h(){_(n,"class",i=Oe(["svelte-flow__connection",ti(t[3].isValid)])),_(e,"width",t[5]),_(e,"height",t[6]),_(e,"class","svelte-flow__connectionline"),_(e,"style",t[0])},m(a,u){U(a,e,u),se(e,n),r&&r.m(n,null),s&&s.m(n,null),o=!0},p(a,u){r&&r.p&&(!o||u&4096)&&Ze(r,l,a,a[12],o?Ge(l,a[12],u,oa):Fe(a[12]),Oi),a[2]?s&&(s.d(1),s=null):s?s.p(a,u):(s=Ti(a),s.c(),s.m(n,null)),(!o||u&8&&i!==(i=Oe(["svelte-flow__connection",ti(a[3].isValid)])))&&_(n,"class",i),(!o||u&32)&&_(e,"width",a[5]),(!o||u&64)&&_(e,"height",a[6]),(!o||u&1)&&_(e,"style",a[0])},i(a){o||(Y(r,a),o=!0)},o(a){p(r,a),o=!1},d(a){a&&M(e),r&&r.d(a),s&&s.d()}}}function Ti(t){let e;return{c(){e=Ee("path"),this.h()},l(n){e=Se(n,"path",{d:!0,style:!0,fill:!0,class:!0}),x(e).forEach(M),this.h()},h(){_(e,"d",t[4]),_(e,"style",t[1]),_(e,"fill","none"),_(e,"class","svelte-flow__connection-path")},m(n,i){U(n,e,i)},p(n,i){i&16&&_(e,"d",n[4]),i&2&&_(e,"style",n[1])},d(n){n&&M(e)}}}function la(t){let e,n,i=t[3].inProgress&&Ii(t);return{c(){i&&i.c(),e=Ie()},l(o){i&&i.l(o),e=Ie()},m(o,l){i&&i.m(o,l),U(o,e,l),n=!0},p(o,[l]){o[3].inProgress?i?(i.p(o,l),l&8&&Y(i,1)):(i=Ii(o),i.c(),Y(i,1),i.m(e.parentNode,e)):i&&(Be(),p(i,1,1,()=>{i=null}),Ye())},i(o){n||(Y(i),n=!0)},o(o){p(i),n=!1},d(o){o&&M(e),i&&i.d(o)}}}function sa(t,e,n){let i,o,l,r,{$$slots:s={},$$scope:a}=e,{containerStyle:u=""}=e,{style:f=""}=e,{isCustomComponent:d=!1}=e;const{width:h,height:c,connection:b,connectionLineType:w}=He();J(t,h,g=>n(5,l=g)),J(t,c,g=>n(6,r=g)),J(t,b,g=>n(3,o=g)),J(t,w,g=>n(11,i=g));let E=null;return t.$$set=g=>{"containerStyle"in g&&n(0,u=g.containerStyle),"style"in g&&n(1,f=g.style),"isCustomComponent"in g&&n(2,d=g.isCustomComponent),"$$scope"in g&&n(12,a=g.$$scope)},t.$$.update=()=>{if(t.$$.dirty&2060&&o.inProgress&&!d){const{from:g,to:S,fromPosition:k,toPosition:C}=o,P={sourceX:g.x,sourceY:g.y,sourcePosition:k,targetX:S.x,targetY:S.y,targetPosition:C};switch(i){case Ht.Bezier:n(4,[E]=io(P),E);break;case Ht.Step:n(4,[E]=hn({...P,borderRadius:0}),E);break;case Ht.SmoothStep:n(4,[E]=hn(P),E);break;default:n(4,[E]=lo(P),E)}}},[u,f,d,o,E,l,r,h,c,b,w,i,a,s]}class ra extends ue{constructor(e){super(),fe(this,e,sa,la,ge,{containerStyle:0,style:1,isCustomComponent:2})}}function aa(t){let e,n,i;const o=t[8].default,l=Re(o,t,t[7],null);let r=[{class:n=Oe(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[5]],s={};for(let a=0;a<r.length;a+=1)s=Me(s,r[a]);return{c(){e=ke("div"),l&&l.c(),this.h()},l(a){e=we(a,"DIV",{class:!0,style:!0});var u=x(e);l&&l.l(u),u.forEach(M),this.h()},h(){Vt(e,s),ye(e,"pointer-events",t[3]?"none":"")},m(a,u){U(a,e,u),l&&l.m(e,null),i=!0},p(a,[u]){l&&l.p&&(!i||u&128)&&Ze(l,o,a,a[7],i?Ge(o,a[7],u,null):Fe(a[7]),null),Vt(e,s=mt(r,[(!i||u&6&&n!==(n=Oe(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),ye(e,"pointer-events",a[3]?"none":"")},i(a){i||(Y(l,a),i=!0)},o(a){p(l,a),i=!1},d(a){a&&M(e),l&&l.d(a)}}}function ua(t,e,n){let i;const o=["position","style","class"];let l=Te(e,o),r,{$$slots:s={},$$scope:a}=e,{position:u="top-right"}=e,{style:f=void 0}=e,{class:d=void 0}=e;const{selectionRectMode:h}=He();return J(t,h,c=>n(3,r=c)),t.$$set=c=>{e=Me(Me({},e),nt(c)),n(5,l=Te(e,o)),"position"in c&&n(6,u=c.position),"style"in c&&n(0,f=c.style),"class"in c&&n(1,d=c.class),"$$scope"in c&&n(7,a=c.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split("-"))},[f,d,i,r,h,l,u,a,s]}class No extends ue{constructor(e){super(),fe(this,e,ua,aa,ge,{position:6,style:0,class:1})}}function Hi(t){let e,n;return e=new No({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[fa]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.position=i[1]),o&4&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function fa(t){let e,n="Svelte Flow";return{c(){e=ke("a"),e.textContent=n,this.h()},l(i){e=we(i,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),el(e)!=="svelte-2vm8e4"&&(e.textContent=n),this.h()},h(){_(e,"href","https://svelteflow.dev"),_(e,"target","_blank"),_(e,"rel","noopener noreferrer"),_(e,"aria-label","Svelte Flow attribution")},m(i,o){U(i,e,o)},p:_e,d(i){i&&M(e)}}}function ca(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&Hi(t);return{c(){i&&i.c(),e=Ie()},l(l){i&&i.l(l),e=Ie()},m(l,r){i&&i.m(l,r),U(l,e,r),n=!0},p(l,[r]){var s;(s=l[0])!=null&&s.hideAttribution?i&&(Be(),p(i,1,1,()=>{i=null}),Ye()):i?(i.p(l,r),r&1&&Y(i,1)):(i=Hi(l),i.c(),Y(i,1),i.m(e.parentNode,e))},i(l){n||(Y(i),n=!0)},o(l){p(i),n=!1},d(l){l&&M(e),i&&i.d(l)}}}function da(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=l=>{"proOptions"in l&&n(0,i=l.proOptions),"position"in l&&n(1,o=l.position)},[i,o]}class ha extends ue{constructor(e){super(),fe(this,e,da,ca,ge,{proOptions:0,position:1})}}function Vi(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:l,paneClickDistance:r}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),l!==void 0&&t.setTranslateExtent(l),r!==void 0&&t.setPaneClickDistance(r)}const ga=t=>Object.keys(t);function ma(t,e){ga(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function ba(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ya(t="light"){return Je("light",n=>{if(t!=="system"){n(t);return}const i=ba(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const _a=t=>({}),Ai=t=>({slot:"connectionLine"});function ka(t){let e;const n=t[75].connectionLine,i=Re(n,t,t[99],Ai);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[3]&64)&&Ze(i,n,o,o[99],e?Ge(n,o[99],l,_a):Fe(o[99]),Ai)},i(o){e||(Y(i,o),e=!0)},o(o){p(i,o),e=!1},d(o){i&&i.d(o)}}}function wa(t){let e,n,i,o,l,r,s,a,u,f,d,h;return e=new Rr({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[78]),e.$on("edgecontextmenu",t[79]),e.$on("edgemouseenter",t[80]),e.$on("edgemouseleave",t[81]),i=new ra({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[34].connectionLine,$$slots:{connectionLine:[ka]},$$scope:{ctx:t}}}),u=new Mr({props:{nodeClickDistance:t[23]}}),u.$on("nodeclick",t[82]),u.$on("nodemouseenter",t[83]),u.$on("nodemousemove",t[84]),u.$on("nodemouseleave",t[85]),u.$on("nodedragstart",t[86]),u.$on("nodedrag",t[87]),u.$on("nodedragstop",t[88]),u.$on("nodecontextmenu",t[89]),d=new xr({}),d.$on("selectionclick",t[90]),d.$on("selectioncontextmenu",t[91]),d.$on("nodedragstart",t[92]),d.$on("nodedrag",t[93]),d.$on("nodedragstop",t[94]),{c(){ee(e.$$.fragment),n=ve(),ee(i.$$.fragment),o=ve(),l=ke("div"),r=ve(),s=ke("div"),a=ve(),ee(u.$$.fragment),f=ve(),ee(d.$$.fragment),this.h()},l(c){ie(e.$$.fragment,c),n=Ce(c),ie(i.$$.fragment,c),o=Ce(c),l=we(c,"DIV",{class:!0}),x(l).forEach(M),r=Ce(c),s=we(c,"DIV",{class:!0}),x(s).forEach(M),a=Ce(c),ie(u.$$.fragment,c),f=Ce(c),ie(d.$$.fragment,c),this.h()},h(){_(l,"class","svelte-flow__edgelabel-renderer"),_(s,"class","svelte-flow__viewport-portal")},m(c,b){te(e,c,b),U(c,n,b),te(i,c,b),U(c,o,b),U(c,l,b),U(c,r,b),U(c,s,b),U(c,a,b),te(u,c,b),U(c,f,b),te(d,c,b),h=!0},p(c,b){const w={};b[0]&2097152&&(w.defaultEdgeOptions=c[21]),e.$set(w);const E={};b[0]&128&&(E.containerStyle=c[7]),b[0]&64&&(E.style=c[6]),b[1]&8&&(E.isCustomComponent=c[34].connectionLine),b[3]&64&&(E.$$scope={dirty:b,ctx:c}),i.$set(E);const g={};b[0]&8388608&&(g.nodeClickDistance=c[23]),u.$set(g)},i(c){h||(Y(e.$$.fragment,c),Y(i.$$.fragment,c),Y(u.$$.fragment,c),Y(d.$$.fragment,c),h=!0)},o(c){p(e.$$.fragment,c),p(i.$$.fragment,c),p(u.$$.fragment,c),p(d.$$.fragment,c),h=!1},d(c){c&&(M(n),M(o),M(l),M(r),M(s),M(a),M(f)),ne(e,c),ne(i,c),ne(u,c),ne(d,c)}}}function Ea(t){let e,n,i,o;return e=new kr({props:{$$slots:{default:[wa]},$$scope:{ctx:t}}}),i=new Ur({}),{c(){ee(e.$$.fragment),n=ve(),ee(i.$$.fragment)},l(l){ie(e.$$.fragment,l),n=Ce(l),ie(i.$$.fragment,l)},m(l,r){te(e,l,r),U(l,n,r),te(i,l,r),o=!0},p(l,r){const s={};r[0]&10485952|r[1]&8|r[3]&64&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){o||(Y(e.$$.fragment,l),Y(i.$$.fragment,l),o=!0)},o(l){p(e.$$.fragment,l),p(i.$$.fragment,l),o=!1},d(l){l&&M(n),ne(e,l),ne(i,l)}}}function Sa(t){let e,n;return e=new br({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[Ea]},$$scope:{ctx:t}}}),e.$on("paneclick",t[95]),e.$on("panecontextmenu",t[96]),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o[0]&131072&&(l.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(l.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&64&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function va(t){let e,n,i,o,l,r,s,a,u,f,d,h;n=new ia({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new hr({props:{initialViewport:t[31],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?lt.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],paneClickDistance:t[22]===void 0?0:t[22],$$slots:{default:[Sa]},$$scope:{ctx:t}}}),r=new ha({props:{proOptions:t[20],position:t[19]}});const c=t[75].default,b=Re(c,t,t[99],null);let w=[{style:t[24]},{class:a=Oe(["svelte-flow",t[25],t[30]])},{"data-testid":"svelte-flow__wrapper"},t[33],{role:"application"}],E={};for(let g=0;g<w.length;g+=1)E=Me(E,w[g]);return{c(){e=ke("div"),ee(n.$$.fragment),i=ve(),ee(o.$$.fragment),l=ve(),ee(r.$$.fragment),s=ve(),b&&b.c(),this.h()},l(g){e=we(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var S=x(e);ie(n.$$.fragment,S),i=Ce(S),ie(o.$$.fragment,S),l=Ce(S),ie(r.$$.fragment,S),s=Ce(S),b&&b.l(S),S.forEach(M),this.h()},h(){Vt(e,E),tl(()=>t[98].call(e)),de(e,"svelte-12wlba6",!0)},m(g,S){U(g,e,S),te(n,e,null),se(e,i),te(o,e,null),se(e,l),te(r,e,null),se(e,s),b&&b.m(e,null),t[97](e),u=nl(e,t[98].bind(e)),f=!0,d||(h=[De(e,"dragover",t[76]),De(e,"drop",t[77])],d=!0)},p(g,S){const k={};S[0]&2&&(k.selectionKey=g[1]),S[0]&32&&(k.deleteKey=g[5]),S[0]&4&&(k.panActivationKey=g[2]),S[0]&8&&(k.multiSelectionKey=g[3]),S[0]&16&&(k.zoomActivationKey=g[4]),n.$set(k);const C={};S[0]&256&&(C.onMoveStart=g[8]),S[0]&512&&(C.onMove=g[9]),S[0]&1024&&(C.onMoveEnd=g[10]),S[0]&2048&&(C.panOnScrollMode=g[11]===void 0?lt.Free:g[11]),S[0]&4096&&(C.preventScrolling=g[12]===void 0?!0:g[12]),S[0]&8192&&(C.zoomOnScroll=g[13]===void 0?!0:g[13]),S[0]&16384&&(C.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),S[0]&32768&&(C.zoomOnPinch=g[15]===void 0?!0:g[15]),S[0]&65536&&(C.panOnScroll=g[16]===void 0?!1:g[16]),S[0]&131072&&(C.panOnDrag=g[17]===void 0?!0:g[17]),S[0]&4194304&&(C.paneClickDistance=g[22]===void 0?0:g[22]),S[0]&10879168|S[1]&8|S[3]&64&&(C.$$scope={dirty:S,ctx:g}),o.$set(C);const P={};S[0]&1048576&&(P.proOptions=g[20]),S[0]&524288&&(P.position=g[19]),r.$set(P),b&&b.p&&(!f||S[3]&64)&&Ze(b,c,g,g[99],f?Ge(c,g[99],S,null):Fe(g[99]),null),Vt(e,E=mt(w,[(!f||S[0]&16777216)&&{style:g[24]},(!f||S[0]&1107296256&&a!==(a=Oe(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},S[1]&4&&g[33],{role:"application"}])),de(e,"svelte-12wlba6",!0)},i(g){f||(Y(n.$$.fragment,g),Y(o.$$.fragment,g),Y(r.$$.fragment,g),Y(b,g),f=!0)},o(g){p(n.$$.fragment,g),p(o.$$.fragment,g),p(r.$$.fragment,g),p(b,g),f=!1},d(g){g&&M(e),ne(n),ne(o),ne(r),b&&b.d(g),t[97](null),u(),d=!1,ut(h)}}}function Ca(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let l=Te(e,o),r,s,a=_e,u=()=>(a(),a=Un(N,v=>n(100,s=v)),N),f,d=_e,h=()=>(d(),d=Un(i,v=>n(30,f=v)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>d());let{$$slots:c={},$$scope:b}=e;const w=il(c);let{id:E="1"}=e,{nodes:g}=e,{edges:S}=e,{fitView:k=void 0}=e,{fitViewOptions:C=void 0}=e,{minZoom:P=void 0}=e,{maxZoom:A=void 0}=e,{initialViewport:D=void 0}=e,{viewport:N=void 0}=e;u();let{nodeTypes:O=void 0}=e,{edgeTypes:W=void 0}=e,{selectionKey:R=void 0}=e,{selectionMode:V=void 0}=e,{panActivationKey:Z=void 0}=e,{multiSelectionKey:m=void 0}=e,{zoomActivationKey:I=void 0}=e,{nodesDraggable:y=void 0}=e,{nodesConnectable:z=void 0}=e,{nodeDragThreshold:H=void 0}=e,{elementsSelectable:T=void 0}=e,{snapGrid:K=void 0}=e,{deleteKey:j=void 0}=e,{connectionRadius:q=void 0}=e,{connectionLineType:Q=void 0}=e,{connectionMode:B=Et.Strict}=e,{connectionLineStyle:le=""}=e,{connectionLineContainerStyle:re=""}=e,{onMoveStart:L=void 0}=e,{onMove:ae=void 0}=e,{onMoveEnd:ce=void 0}=e,{isValidConnection:me=void 0}=e,{translateExtent:be=void 0}=e,{nodeExtent:Pe=void 0}=e,{onlyRenderVisibleElements:Xe=void 0}=e,{panOnScrollMode:G=lt.Free}=e,{preventScrolling:Ae=!0}=e,{zoomOnScroll:Ne=!0}=e,{zoomOnDoubleClick:vt=!0}=e,{zoomOnPinch:bt=!0}=e,{panOnScroll:yt=!1}=e,{panOnDrag:_t=!0}=e,{selectionOnDrag:kt=void 0}=e,{autoPanOnConnect:ft=!0}=e,{autoPanOnNodeDrag:ct=!0}=e,{onerror:dt=void 0}=e,{ondelete:F=void 0}=e,{onedgecreate:ht=void 0}=e,{attributionPosition:We=void 0}=e,{proOptions:je=void 0}=e,{defaultEdgeOptions:$=void 0}=e,{width:st=void 0}=e,{height:Ue=void 0}=e,{colorMode:Ke="light"}=e,{onconnect:Ct=void 0}=e,{onconnectstart:zt=void 0}=e,{onconnectend:Pt=void 0}=e,{onbeforedelete:Mt=void 0}=e,{oninit:gt=void 0}=e,{nodeOrigin:wt=void 0}=e,{paneClickDistance:$t=0}=e,{nodeClickDistance:Zn=0}=e,{defaultMarkerColor:Sn="#b1b1b7"}=e,{style:Fn=void 0}=e,{class:Gn=void 0}=e,en,Dt,Nt;const Oo=s||D,pe=ol(En)?He():ur({nodes:X(g),edges:X(S),width:st,height:Ue,fitView:k,nodeOrigin:wt,nodeExtent:Pe});Jt(()=>(pe.width.set(Dt),pe.height.set(Nt),pe.domNode.set(en),pe.syncNodeStores(g),pe.syncEdgeStores(S),pe.syncViewport(N),k!==void 0&&pe.fitViewOnInit.set(k),C&&pe.fitViewOptions.set(C),Vi(pe,{nodeTypes:O,edgeTypes:W,minZoom:P,maxZoom:A,translateExtent:be,paneClickDistance:$t}),()=>{pe.reset()}));const{initialized:jn}=pe;J(t,jn,v=>n(74,r=v));let vn=!1;function Io(v){ze.call(this,t,v)}function To(v){ze.call(this,t,v)}function Ho(v){ze.call(this,t,v)}function Vo(v){ze.call(this,t,v)}function Ao(v){ze.call(this,t,v)}function Lo(v){ze.call(this,t,v)}function Bo(v){ze.call(this,t,v)}function Yo(v){ze.call(this,t,v)}function Xo(v){ze.call(this,t,v)}function Wo(v){ze.call(this,t,v)}function Ko(v){ze.call(this,t,v)}function po(v){ze.call(this,t,v)}function Ro(v){ze.call(this,t,v)}function Zo(v){ze.call(this,t,v)}function Fo(v){ze.call(this,t,v)}function Go(v){ze.call(this,t,v)}function jo(v){ze.call(this,t,v)}function Uo(v){ze.call(this,t,v)}function qo(v){ze.call(this,t,v)}function Jo(v){ze.call(this,t,v)}function Qo(v){ze.call(this,t,v)}function xo(v){Bn[v?"unshift":"push"](()=>{en=v,n(28,en)})}function $o(){Dt=this.clientWidth,Nt=this.clientHeight,n(26,Dt),n(27,Nt)}return t.$$set=v=>{e=Me(Me({},e),nt(v)),n(33,l=Te(e,o)),"id"in v&&n(35,E=v.id),"nodes"in v&&n(36,g=v.nodes),"edges"in v&&n(37,S=v.edges),"fitView"in v&&n(38,k=v.fitView),"fitViewOptions"in v&&n(39,C=v.fitViewOptions),"minZoom"in v&&n(40,P=v.minZoom),"maxZoom"in v&&n(41,A=v.maxZoom),"initialViewport"in v&&n(42,D=v.initialViewport),"viewport"in v&&u(n(0,N=v.viewport)),"nodeTypes"in v&&n(43,O=v.nodeTypes),"edgeTypes"in v&&n(44,W=v.edgeTypes),"selectionKey"in v&&n(1,R=v.selectionKey),"selectionMode"in v&&n(45,V=v.selectionMode),"panActivationKey"in v&&n(2,Z=v.panActivationKey),"multiSelectionKey"in v&&n(3,m=v.multiSelectionKey),"zoomActivationKey"in v&&n(4,I=v.zoomActivationKey),"nodesDraggable"in v&&n(46,y=v.nodesDraggable),"nodesConnectable"in v&&n(47,z=v.nodesConnectable),"nodeDragThreshold"in v&&n(48,H=v.nodeDragThreshold),"elementsSelectable"in v&&n(49,T=v.elementsSelectable),"snapGrid"in v&&n(50,K=v.snapGrid),"deleteKey"in v&&n(5,j=v.deleteKey),"connectionRadius"in v&&n(51,q=v.connectionRadius),"connectionLineType"in v&&n(52,Q=v.connectionLineType),"connectionMode"in v&&n(53,B=v.connectionMode),"connectionLineStyle"in v&&n(6,le=v.connectionLineStyle),"connectionLineContainerStyle"in v&&n(7,re=v.connectionLineContainerStyle),"onMoveStart"in v&&n(8,L=v.onMoveStart),"onMove"in v&&n(9,ae=v.onMove),"onMoveEnd"in v&&n(10,ce=v.onMoveEnd),"isValidConnection"in v&&n(54,me=v.isValidConnection),"translateExtent"in v&&n(55,be=v.translateExtent),"nodeExtent"in v&&n(56,Pe=v.nodeExtent),"onlyRenderVisibleElements"in v&&n(57,Xe=v.onlyRenderVisibleElements),"panOnScrollMode"in v&&n(11,G=v.panOnScrollMode),"preventScrolling"in v&&n(12,Ae=v.preventScrolling),"zoomOnScroll"in v&&n(13,Ne=v.zoomOnScroll),"zoomOnDoubleClick"in v&&n(14,vt=v.zoomOnDoubleClick),"zoomOnPinch"in v&&n(15,bt=v.zoomOnPinch),"panOnScroll"in v&&n(16,yt=v.panOnScroll),"panOnDrag"in v&&n(17,_t=v.panOnDrag),"selectionOnDrag"in v&&n(18,kt=v.selectionOnDrag),"autoPanOnConnect"in v&&n(58,ft=v.autoPanOnConnect),"autoPanOnNodeDrag"in v&&n(59,ct=v.autoPanOnNodeDrag),"onerror"in v&&n(60,dt=v.onerror),"ondelete"in v&&n(61,F=v.ondelete),"onedgecreate"in v&&n(62,ht=v.onedgecreate),"attributionPosition"in v&&n(19,We=v.attributionPosition),"proOptions"in v&&n(20,je=v.proOptions),"defaultEdgeOptions"in v&&n(21,$=v.defaultEdgeOptions),"width"in v&&n(63,st=v.width),"height"in v&&n(64,Ue=v.height),"colorMode"in v&&n(65,Ke=v.colorMode),"onconnect"in v&&n(66,Ct=v.onconnect),"onconnectstart"in v&&n(67,zt=v.onconnectstart),"onconnectend"in v&&n(68,Pt=v.onconnectend),"onbeforedelete"in v&&n(69,Mt=v.onbeforedelete),"oninit"in v&&n(70,gt=v.oninit),"nodeOrigin"in v&&n(71,wt=v.nodeOrigin),"paneClickDistance"in v&&n(22,$t=v.paneClickDistance),"nodeClickDistance"in v&&n(23,Zn=v.nodeClickDistance),"defaultMarkerColor"in v&&n(72,Sn=v.defaultMarkerColor),"style"in v&&n(24,Fn=v.style),"class"in v&&n(25,Gn=v.class),"$$scope"in v&&n(99,b=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&201326592&&Dt!==void 0&&Nt!==void 0&&(pe.width.set(Dt),pe.height.set(Nt)),t.$$.dirty[2]&6400&&!vn&&r&&(gt==null||gt(),n(73,vn=!0)),t.$$.dirty[1]&2097135632|t.$$.dirty[2]&1777&&ma(pe,{flowId:E,connectionLineType:Q,connectionRadius:q,selectionMode:V,snapGrid:K,defaultMarkerColor:Sn,nodesDraggable:y,nodesConnectable:z,elementsSelectable:T,onlyRenderVisibleElements:Xe,isValidConnection:me,autoPanOnConnect:ft,autoPanOnNodeDrag:ct,onerror:dt,ondelete:F,onedgecreate:ht,connectionMode:B,nodeDragThreshold:H,onconnect:Ct,onconnectstart:zt,onconnectend:Pt,onbeforedelete:Mt,nodeOrigin:wt}),t.$$.dirty[0]&4194304|t.$$.dirty[1]&16791040&&Vi(pe,{nodeTypes:O,edgeTypes:W,minZoom:P,maxZoom:A,translateExtent:be,paneClickDistance:$t}),t.$$.dirty[2]&8&&h(n(29,i=ya(Ke)))},[N,R,Z,m,I,j,le,re,L,ae,ce,G,Ae,Ne,vt,bt,yt,_t,kt,We,je,$,$t,Zn,Fn,Gn,Dt,Nt,en,i,f,Oo,jn,l,w,E,g,S,k,C,P,A,D,O,W,V,y,z,H,T,K,q,Q,B,me,be,Pe,Xe,ft,ct,dt,F,ht,st,Ue,Ke,Ct,zt,Pt,Mt,gt,wt,Sn,vn,r,c,Io,To,Ho,Vo,Ao,Lo,Bo,Yo,Xo,Wo,Ko,po,Ro,Zo,Fo,Go,jo,Uo,qo,Jo,Qo,xo,$o,b]}class za extends ue{constructor(e){super(),fe(this,e,Ca,va,ge,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function Pa(t){let e;const n=t[7].default,i=Re(n,t,t[6],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,l){i&&i.m(o,l),e=!0},p(o,[l]){i&&i.p&&(!e||l&64)&&Ze(i,n,o,o[6],e?Ge(n,o[6],l,null):Fe(o[6]),null)},i(o){e||(Y(i,o),e=!0)},o(o){p(i,o),e=!1},d(o){i&&i.d(o)}}}function Ma(t,e,n){let{$$slots:i={},$$scope:o}=e,{initialNodes:l=void 0}=e,{initialEdges:r=void 0}=e,{initialWidth:s=void 0}=e,{initialHeight:a=void 0}=e,{fitView:u=void 0}=e,{nodeOrigin:f=void 0}=e;const d=zo({nodes:l,edges:r,width:s,height:a,nodeOrigin:f,fitView:u});return Zt(En,{getStore:()=>d}),gn(()=>{d.reset()}),t.$$set=h=>{"initialNodes"in h&&n(0,l=h.initialNodes),"initialEdges"in h&&n(1,r=h.initialEdges),"initialWidth"in h&&n(2,s=h.initialWidth),"initialHeight"in h&&n(3,a=h.initialHeight),"fitView"in h&&n(4,u=h.fitView),"nodeOrigin"in h&&n(5,f=h.nodeOrigin),"$$scope"in h&&n(6,o=h.$$scope)},[l,r,s,a,u,f,o,i]}class Da extends ue{constructor(e){super(),fe(this,e,Ma,Pa,ge,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}const Na=t=>({}),Li=t=>({class:"button-svg"});function Oa(t){let e,n,i,o,l;const r=t[8].default,s=Re(r,t,t[7],Li);let a=[{type:"button"},{class:n=Oe(["svelte-flow__controls-button",t[0]])},t[6]],u={};for(let f=0;f<a.length;f+=1)u=Me(u,a[f]);return{c(){e=ke("button"),s&&s.c(),this.h()},l(f){e=we(f,"BUTTON",{type:!0,class:!0});var d=x(e);s&&s.l(d),d.forEach(M),this.h()},h(){Vt(e,u),ye(e,"--xy-controls-button-background-color-props",t[1]),ye(e,"--xy-controls-button-background-color-hover-props",t[2]),ye(e,"--xy-controls-button-color-props",t[3]),ye(e,"--xy-controls-button-color-hover-props",t[4]),ye(e,"--xy-controls-button-border-color-props",t[5])},m(f,d){U(f,e,d),s&&s.m(e,null),e.autofocus&&e.focus(),i=!0,o||(l=De(e,"click",t[9]),o=!0)},p(f,[d]){s&&s.p&&(!i||d&128)&&Ze(s,r,f,f[7],i?Ge(r,f[7],d,Na):Fe(f[7]),Li),Vt(e,u=mt(a,[{type:"button"},(!i||d&1&&n!==(n=Oe(["svelte-flow__controls-button",f[0]])))&&{class:n},d&64&&f[6]])),ye(e,"--xy-controls-button-background-color-props",f[1]),ye(e,"--xy-controls-button-background-color-hover-props",f[2]),ye(e,"--xy-controls-button-color-props",f[3]),ye(e,"--xy-controls-button-color-hover-props",f[4]),ye(e,"--xy-controls-button-border-color-props",f[5])},i(f){i||(Y(s,f),i=!0)},o(f){p(s,f),i=!1},d(f){f&&M(e),s&&s.d(f),o=!1,l()}}}function Ia(t,e,n){const i=["class"];let o=Te(e,i),{$$slots:l={},$$scope:r}=e,{class:s=void 0}=e,a,u,f,d,h;function c(b){ze.call(this,t,b)}return t.$$set=b=>{e=Me(Me({},e),nt(b)),n(6,o=Te(e,i)),"class"in b&&n(0,s=b.class),"$$scope"in b&&n(7,r=b.$$scope)},[s,a,u,f,d,h,o,r,l,c]}class Wt extends ue{constructor(e){super(),fe(this,e,Ia,Oa,ge,{class:0})}}function Ta(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,viewBox:!0});var o=x(e);n=Se(o,"path",{d:!0}),x(n).forEach(M),o.forEach(M),this.h()},h(){_(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 32 32")},m(i,o){U(i,e,o),se(e,n)},p:_e,i:_e,o:_e,d(i){i&&M(e)}}}class Ha extends ue{constructor(e){super(),fe(this,e,null,Ta,ge,{})}}function Va(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,viewBox:!0});var o=x(e);n=Se(o,"path",{d:!0}),x(n).forEach(M),o.forEach(M),this.h()},h(){_(n,"d","M0 0h32v4.2H0z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 32 5")},m(i,o){U(i,e,o),se(e,n)},p:_e,i:_e,o:_e,d(i){i&&M(e)}}}class Aa extends ue{constructor(e){super(),fe(this,e,null,Va,ge,{})}}function La(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,viewBox:!0});var o=x(e);n=Se(o,"path",{d:!0}),x(n).forEach(M),o.forEach(M),this.h()},h(){_(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 32 30")},m(i,o){U(i,e,o),se(e,n)},p:_e,i:_e,o:_e,d(i){i&&M(e)}}}class Ba extends ue{constructor(e){super(),fe(this,e,null,La,ge,{})}}function Ya(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,viewBox:!0});var o=x(e);n=Se(o,"path",{d:!0}),x(n).forEach(M),o.forEach(M),this.h()},h(){_(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 25 32")},m(i,o){U(i,e,o),se(e,n)},p:_e,i:_e,o:_e,d(i){i&&M(e)}}}class Xa extends ue{constructor(e){super(),fe(this,e,null,Ya,ge,{})}}function Wa(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,viewBox:!0});var o=x(e);n=Se(o,"path",{d:!0}),x(n).forEach(M),o.forEach(M),this.h()},h(){_(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 25 32")},m(i,o){U(i,e,o),se(e,n)},p:_e,i:_e,o:_e,d(i){i&&M(e)}}}class Ka extends ue{constructor(e){super(),fe(this,e,null,Wa,ge,{})}}const pa=t=>({}),Bi=t=>({}),Ra=t=>({}),Yi=t=>({});function Xi(t){let e,n,i,o;const l=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[9]},t[17]];let r={$$slots:{default:[Za]},$$scope:{ctx:t}};for(let u=0;u<l.length;u+=1)r=Me(r,l[u]);e=new Wt({props:r}),e.$on("click",t[18]);const s=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[10]},t[17]];let a={$$slots:{default:[Fa]},$$scope:{ctx:t}};for(let u=0;u<s.length;u+=1)a=Me(a,s[u]);return i=new Wt({props:a}),i.$on("click",t[19]),{c(){ee(e.$$.fragment),n=ve(),ee(i.$$.fragment)},l(u){ie(e.$$.fragment,u),n=Ce(u),ie(i.$$.fragment,u)},m(u,f){te(e,u,f),U(u,n,f),te(i,u,f),o=!0},p(u,f){const d=f[0]&131584?mt(l,[l[0],l[1],l[2],f[0]&512&&{disabled:u[9]},f[0]&131072&&Ft(u[17])]):{};f[1]&32&&(d.$$scope={dirty:f,ctx:u}),e.$set(d);const h=f[0]&132096?mt(s,[s[0],s[1],s[2],f[0]&1024&&{disabled:u[10]},f[0]&131072&&Ft(u[17])]):{};f[1]&32&&(h.$$scope={dirty:f,ctx:u}),i.$set(h)},i(u){o||(Y(e.$$.fragment,u),Y(i.$$.fragment,u),o=!0)},o(u){p(e.$$.fragment,u),p(i.$$.fragment,u),o=!1},d(u){u&&M(n),ne(e,u),ne(i,u)}}}function Za(t){let e,n;return e=new Ha({}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Fa(t){let e,n;return e=new Aa({}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Wi(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[17]];let o={$$slots:{default:[Ga]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Me(o,i[l]);return e=new Wt({props:o}),e.$on("click",t[20]),{c(){ee(e.$$.fragment)},l(l){ie(e.$$.fragment,l)},m(l,r){te(e,l,r),n=!0},p(l,r){const s=r[0]&131072?mt(i,[i[0],i[1],i[2],Ft(l[17])]):{};r[1]&32&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(Y(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){ne(e,l)}}}function Ga(t){let e,n;return e=new Ba({}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Ki(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[17]];let o={$$slots:{default:[qa]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Me(o,i[l]);return e=new Wt({props:o}),e.$on("click",t[21]),{c(){ee(e.$$.fragment)},l(l){ie(e.$$.fragment,l)},m(l,r){te(e,l,r),n=!0},p(l,r){const s=r[0]&131072?mt(i,[i[0],i[1],i[2],Ft(l[17])]):{};r[0]&256|r[1]&32&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(Y(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){ne(e,l)}}}function ja(t){let e,n;return e=new Xa({}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Ua(t){let e,n;return e=new Ka({}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function qa(t){let e,n,i,o;const l=[Ua,ja],r=[];function s(a,u){return a[8]?0:1}return e=s(t),n=r[e]=l[e](t),{c(){n.c(),i=Ie()},l(a){n.l(a),i=Ie()},m(a,u){r[e].m(a,u),U(a,i,u),o=!0},p(a,u){let f=e;e=s(a),e!==f&&(Be(),p(r[f],1,1,()=>{r[f]=null}),Ye(),n=r[e],n||(n=r[e]=l[e](a),n.c()),Y(n,1),n.m(i.parentNode,i))},i(a){o||(Y(n),o=!0)},o(a){p(n),o=!1},d(a){a&&M(i),r[e].d(a)}}}function Ja(t){let e,n,i,o,l,r;const s=t[35].before,a=Re(s,t,t[36],Yi);let u=t[1]&&Xi(t),f=t[2]&&Wi(t),d=t[3]&&Ki(t);const h=t[35].default,c=Re(h,t,t[36],null),b=t[35].after,w=Re(b,t,t[36],Bi);return{c(){a&&a.c(),e=ve(),u&&u.c(),n=ve(),f&&f.c(),i=ve(),d&&d.c(),o=ve(),c&&c.c(),l=ve(),w&&w.c()},l(E){a&&a.l(E),e=Ce(E),u&&u.l(E),n=Ce(E),f&&f.l(E),i=Ce(E),d&&d.l(E),o=Ce(E),c&&c.l(E),l=Ce(E),w&&w.l(E)},m(E,g){a&&a.m(E,g),U(E,e,g),u&&u.m(E,g),U(E,n,g),f&&f.m(E,g),U(E,i,g),d&&d.m(E,g),U(E,o,g),c&&c.m(E,g),U(E,l,g),w&&w.m(E,g),r=!0},p(E,g){a&&a.p&&(!r||g[1]&32)&&Ze(a,s,E,E[36],r?Ge(s,E[36],g,Ra):Fe(E[36]),Yi),E[1]?u?(u.p(E,g),g[0]&2&&Y(u,1)):(u=Xi(E),u.c(),Y(u,1),u.m(n.parentNode,n)):u&&(Be(),p(u,1,1,()=>{u=null}),Ye()),E[2]?f?(f.p(E,g),g[0]&4&&Y(f,1)):(f=Wi(E),f.c(),Y(f,1),f.m(i.parentNode,i)):f&&(Be(),p(f,1,1,()=>{f=null}),Ye()),E[3]?d?(d.p(E,g),g[0]&8&&Y(d,1)):(d=Ki(E),d.c(),Y(d,1),d.m(o.parentNode,o)):d&&(Be(),p(d,1,1,()=>{d=null}),Ye()),c&&c.p&&(!r||g[1]&32)&&Ze(c,h,E,E[36],r?Ge(h,E[36],g,null):Fe(E[36]),null),w&&w.p&&(!r||g[1]&32)&&Ze(w,b,E,E[36],r?Ge(b,E[36],g,pa):Fe(E[36]),Bi)},i(E){r||(Y(a,E),Y(u),Y(f),Y(d),Y(c,E),Y(w,E),r=!0)},o(E){p(a,E),p(u),p(f),p(d),p(c,E),p(w,E),r=!1},d(E){E&&(M(e),M(n),M(i),M(o),M(l)),a&&a.d(E),u&&u.d(E),f&&f.d(E),d&&d.d(E),c&&c.d(E),w&&w.d(E)}}}function Qa(t){let e,n;return e=new No({props:{class:Oe(["svelte-flow__controls",t[7],t[6]]),position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",style:t[5],$$slots:{default:[Ja]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o[0]&192&&(l.class=Oe(["svelte-flow__controls",i[7],i[6]])),o[0]&1&&(l.position=i[0]),o[0]&16&&(l["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&32&&(l.style=i[5]),o[0]&1806|o[1]&32&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function xa(t,e,n){let i,o,l,r,s,a,u,f,d,h,{$$slots:c={},$$scope:b}=e,{position:w="bottom-left"}=e,{showZoom:E=!0}=e,{showFitView:g=!0}=e,{showLock:S=!0}=e,{buttonBgColor:k=void 0}=e,{buttonBgColorHover:C=void 0}=e,{buttonColor:P=void 0}=e,{buttonColorHover:A=void 0}=e,{buttonBorderColor:D=void 0}=e,{ariaLabel:N=void 0}=e,{style:O=void 0}=e,{orientation:W="vertical"}=e,{fitViewOptions:R=void 0}=e,{class:V=""}=e;const{zoomIn:Z,zoomOut:m,fitView:I,viewport:y,minZoom:z,maxZoom:H,nodesDraggable:T,nodesConnectable:K,elementsSelectable:j}=He();J(t,y,L=>n(30,a=L)),J(t,z,L=>n(31,u=L)),J(t,H,L=>n(29,s=L)),J(t,T,L=>n(34,h=L)),J(t,K,L=>n(33,d=L)),J(t,j,L=>n(32,f=L));const q={bgColor:k,bgColorHover:C,color:P,colorHover:A,borderColor:D},Q=()=>{Z()},B=()=>{m()},le=()=>{I(R)},re=()=>{n(8,i=!i),T.set(i),K.set(i),j.set(i)};return t.$$set=L=>{"position"in L&&n(0,w=L.position),"showZoom"in L&&n(1,E=L.showZoom),"showFitView"in L&&n(2,g=L.showFitView),"showLock"in L&&n(3,S=L.showLock),"buttonBgColor"in L&&n(22,k=L.buttonBgColor),"buttonBgColorHover"in L&&n(23,C=L.buttonBgColorHover),"buttonColor"in L&&n(24,P=L.buttonColor),"buttonColorHover"in L&&n(25,A=L.buttonColorHover),"buttonBorderColor"in L&&n(26,D=L.buttonBorderColor),"ariaLabel"in L&&n(4,N=L.ariaLabel),"style"in L&&n(5,O=L.style),"orientation"in L&&n(27,W=L.orientation),"fitViewOptions"in L&&n(28,R=L.fitViewOptions),"class"in L&&n(6,V=L.class),"$$scope"in L&&n(36,b=L.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&14&&n(8,i=h||d||f),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(10,o=a.zoom<=u),t.$$.dirty[0]&1610612736&&n(9,l=a.zoom>=s),t.$$.dirty[0]&134217728&&n(7,r=W==="horizontal"?"horizontal":"vertical")},[w,E,g,S,N,O,V,r,i,l,o,y,z,H,T,K,j,q,Q,B,le,re,k,C,P,A,D,W,R,s,a,u,f,d,h,c,b]}class $a extends ue{constructor(e){super(),fe(this,e,xa,Qa,ge,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}var at;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(at||(at={}));function eu(t){let e,n;return{c(){e=Ee("circle"),this.h()},l(i){e=Se(i,"circle",{cx:!0,cy:!0,r:!0,class:!0}),x(e).forEach(M),this.h()},h(){_(e,"cx",t[0]),_(e,"cy",t[0]),_(e,"r",t[0]),_(e,"class",n=Oe(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){U(i,e,o)},p(i,[o]){o&1&&_(e,"cx",i[0]),o&1&&_(e,"cy",i[0]),o&1&&_(e,"r",i[0]),o&2&&n!==(n=Oe(["svelte-flow__background-pattern","dots",i[1]]))&&_(e,"class",n)},i:_e,o:_e,d(i){i&&M(e)}}}function tu(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=l=>{"radius"in l&&n(0,i=l.radius),"class"in l&&n(1,o=l.class)},[i,o]}class nu extends ue{constructor(e){super(),fe(this,e,tu,eu,ge,{radius:0,class:1})}}function iu(t){let e,n,i;return{c(){e=Ee("path"),this.h()},l(o){e=Se(o,"path",{"stroke-width":!0,d:!0,class:!0}),x(e).forEach(M),this.h()},h(){_(e,"stroke-width",t[0]),_(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),_(e,"class",i=Oe(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,l){U(o,e,l)},p(o,[l]){l&1&&_(e,"stroke-width",o[0]),l&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&_(e,"d",n),l&12&&i!==(i=Oe(["svelte-flow__background-pattern",o[2],o[3]]))&&_(e,"class",i)},i:_e,o:_e,d(o){o&&M(e)}}}function ou(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:l=void 0}=e,{class:r=""}=e;return t.$$set=s=>{"lineWidth"in s&&n(0,i=s.lineWidth),"dimensions"in s&&n(1,o=s.dimensions),"variant"in s&&n(2,l=s.variant),"class"in s&&n(3,r=s.class)},[i,o,l,r]}class lu extends ue{constructor(e){super(),fe(this,e,ou,iu,ge,{lineWidth:0,dimensions:1,variant:2,class:3})}}function su(t){let e,n;return e=new lu({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o&64&&(l.dimensions=i[6]),o&1&&(l.variant=i[0]),o&2&&(l.lineWidth=i[1]),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function ru(t){let e,n;return e=new nu({props:{radius:t[7]/2,class:t[4]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o&128&&(l.radius=i[7]/2),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function au(t){let e,n,i,o,l,r,s,a,u,f,d,h,c;const b=[ru,su],w=[];function E(g,S){return g[14]?0:1}return i=E(t),o=w[i]=b[i](t),{c(){e=Ee("svg"),n=Ee("pattern"),o.c(),f=Ee("rect"),this.h()},l(g){e=Se(g,"svg",{class:!0,"data-testid":!0});var S=x(e);n=Se(S,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var k=x(n);o.l(k),k.forEach(M),f=Se(S,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),x(f).forEach(M),S.forEach(M),this.h()},h(){_(n,"id",t[11]),_(n,"x",l=t[9].x%t[8][0]),_(n,"y",r=t[9].y%t[8][1]),_(n,"width",s=t[8][0]),_(n,"height",a=t[8][1]),_(n,"patternUnits","userSpaceOnUse"),_(n,"patternTransform",u=`translate(-${t[10][0]},-${t[10][1]})`),_(f,"x","0"),_(f,"y","0"),_(f,"width","100%"),_(f,"height","100%"),_(f,"fill",d=`url(#${t[11]})`),_(e,"class",h=qn(Oe(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),_(e,"data-testid","svelte-flow__background"),ye(e,"--xy-background-color-props",t[2]),ye(e,"--xy-background-pattern-color-props",t[3])},m(g,S){U(g,e,S),se(e,n),w[i].m(n,null),se(e,f),c=!0},p(g,[S]){o.p(g,S),(!c||S&2048)&&_(n,"id",g[11]),(!c||S&768&&l!==(l=g[9].x%g[8][0]))&&_(n,"x",l),(!c||S&768&&r!==(r=g[9].y%g[8][1]))&&_(n,"y",r),(!c||S&256&&s!==(s=g[8][0]))&&_(n,"width",s),(!c||S&256&&a!==(a=g[8][1]))&&_(n,"height",a),(!c||S&1024&&u!==(u=`translate(-${g[10][0]},-${g[10][1]})`))&&_(n,"patternTransform",u),(!c||S&2048&&d!==(d=`url(#${g[11]})`))&&_(f,"fill",d),(!c||S&32&&h!==(h=qn(Oe(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&_(e,"class",h),S&4&&ye(e,"--xy-background-color-props",g[2]),S&8&&ye(e,"--xy-background-pattern-color-props",g[3])},i(g){c||(Y(o),c=!0)},o(g){p(o),c=!1},d(g){g&&M(e),w[i].d()}}}const uu={[at.Dots]:1,[at.Lines]:1,[at.Cross]:6};function fu(t,e,n){let i,o,l,r,s,a,u,{id:f=void 0}=e,{variant:d=at.Dots}=e,{gap:h=20}=e,{size:c=1}=e,{lineWidth:b=1}=e,{bgColor:w=void 0}=e,{patternColor:E=void 0}=e,{patternClass:g=void 0}=e,{class:S=""}=e;const{viewport:k,flowId:C}=He();J(t,k,O=>n(9,a=O)),J(t,C,O=>n(18,u=O));const P=c||uu[d],A=d===at.Dots,D=d===at.Cross,N=Array.isArray(h)?h:[h,h];return t.$$set=O=>{"id"in O&&n(15,f=O.id),"variant"in O&&n(0,d=O.variant),"gap"in O&&n(16,h=O.gap),"size"in O&&n(17,c=O.size),"lineWidth"in O&&n(1,b=O.lineWidth),"bgColor"in O&&n(2,w=O.bgColor),"patternColor"in O&&n(3,E=O.patternColor),"patternClass"in O&&n(4,g=O.patternClass),"class"in O&&n(5,S=O.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${f||""}`),t.$$.dirty&512&&n(8,o=[N[0]*a.zoom||1,N[1]*a.zoom||1]),t.$$.dirty&512&&n(7,l=P*a.zoom),t.$$.dirty&384&&n(6,r=D?[l,l]:o),t.$$.dirty&192&&n(10,s=A?[l/2,l/2]:[r[0]/2,r[1]/2])},[d,b,w,E,g,S,r,l,o,a,s,i,k,C,A,f,h,c,u]}class cu extends ue{constructor(e){super(),fe(this,e,fu,au,ge,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const pi=t=>Il(t);function du(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:i,snapGrid:o,viewport:l,width:r,height:s,minZoom:a,maxZoom:u,panZoom:f,nodes:d,edges:h,domNode:c,nodeLookup:b,nodeOrigin:w,edgeLookup:E,connectionLookup:g}=He(),S=P=>{var W,R;const A=X(b),D=pi(P)?P:A.get(P.id),N=D.parentId?Ll(D.position,D.measured,D.parentId,A,X(w)):D.position,O={id:D.id,position:N,width:((W=D.measured)==null?void 0:W.width)??D.width,height:((R=D.measured)==null?void 0:R.height)??D.height,data:D.data};return Yt(O)},k=(P,A,D={replace:!1})=>{var W;const N=(W=X(b).get(P))==null?void 0:W.internals.userNode;if(!N)return;const O=typeof A=="function"?A(N):A;D.replace?d.update(R=>R.map(V=>V.id===P?pi(O)?O:{...V,...O}:V)):(Object.assign(N,O),d.update(R=>R))},C=P=>X(b).get(P);return{zoomIn:t,zoomOut:e,getInternalNode:C,getNode:P=>{var A;return(A=C(P))==null?void 0:A.internals.userNode},getNodes:P=>P===void 0?X(d):Ri(X(b),P),getEdge:P=>X(E).get(P),getEdges:P=>P===void 0?X(h):Ri(X(E),P),setZoom:(P,A)=>{const D=X(f);return D?D.scaleTo(P,{duration:A==null?void 0:A.duration}):Promise.resolve(!1)},getZoom:()=>X(l).zoom,setViewport:async(P,A)=>{const D=X(l),N=X(f);return N?(await N.setViewport({x:P.x??D.x,y:P.y??D.y,zoom:P.zoom??D.zoom},{duration:A==null?void 0:A.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>X(l),setCenter:async(P,A,D)=>{const N=typeof(D==null?void 0:D.zoom)<"u"?D.zoom:X(u),O=X(f);return O?(await O.setViewport({x:X(r)/2-P*N,y:X(s)/2-A*N,zoom:N},{duration:D==null?void 0:D.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(P,A)=>{const D=X(f);if(!D)return Promise.resolve(!1);const N=Rn(P,X(r),X(s),X(a),X(u),(A==null?void 0:A.padding)??.1);return await D.setViewport(N,{duration:A==null?void 0:A.duration}),Promise.resolve(!0)},getIntersectingNodes:(P,A=!0,D)=>{const N=li(P),O=N?P:S(P);return O?(D||X(d)).filter(W=>{const R=X(b).get(W.id);if(!R||!N&&W.id===P.id)return!1;const V=Yt(R),Z=jt(V,O);return A&&Z>0||Z>=O.width*O.height}):[]},isNodeIntersecting:(P,A,D=!0)=>{const O=li(P)?P:S(P);if(!O)return!1;const W=jt(O,A);return D&&W>0||W>=O.width*O.height},deleteElements:async({nodes:P=[],edges:A=[]})=>{const{nodes:D,edges:N}=await Qi({nodesToRemove:P,edgesToRemove:A,nodes:X(d),edges:X(h),onBeforeDelete:X(i)});return D&&d.update(O=>O.filter(W=>!D.some(({id:R})=>R===W.id))),N&&h.update(O=>O.filter(W=>!N.some(({id:R})=>R===W.id))),{deletedNodes:D,deletedEdges:N}},screenToFlowPosition:(P,A={snapToGrid:!0})=>{const D=X(c);if(!D)return P;const N=A.snapToGrid?X(o):!1,{x:O,y:W,zoom:R}=X(l),{x:V,y:Z}=D.getBoundingClientRect(),m={x:P.x-V,y:P.y-Z};return xt(m,[O,W,R],N!==null,N||[1,1])},flowToScreenPosition:P=>{const A=X(c);if(!A)return P;const{x:D,y:N,zoom:O}=X(l),{x:W,y:R}=A.getBoundingClientRect(),V=eo(P,[D,N,O]);return{x:V.x+W,y:V.y+R}},toObject:()=>({nodes:X(d).map(P=>({...P,position:{...P.position},data:{...P.data}})),edges:X(h).map(P=>({...P})),viewport:{...X(l)}}),updateNode:k,updateNodeData:(P,A,D)=>{var W;const N=(W=X(b).get(P))==null?void 0:W.internals.userNode;if(!N)return;const O=typeof A=="function"?A(N):A;N.data=D!=null&&D.replace?O:{...N.data,...O},d.update(R=>R)},getNodesBounds:P=>{const A=X(b),D=X(w);return Tl(P,{nodeLookup:A,nodeOrigin:D})},getHandleConnections:({type:P,id:A,nodeId:D})=>{var N;return Array.from(((N=X(g).get(`${D}-${P}-${A??null}`))==null?void 0:N.values())??[])},viewport:l}}function Ri(t,e){var i;const n=[];for(const o of e){const l=t.get(o);if(l){const r="internals"in l?(i=l.internals)==null?void 0:i.userNode:l;n.push(r)}}return n}function hu(){const{nodesInitialized:t}=He();return{subscribe:t.subscribe}}function gu(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=x(e);n=Se(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),x(n).forEach(M),o.forEach(M),this.h()},h(){_(n,"stroke-linecap","round"),_(n,"stroke-linejoin","round"),_(n,"d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width",t[1]),_(e,"stroke","currentColor"),_(e,"class",t[0])},m(i,o){U(i,e,o),se(e,n)},p(i,[o]){o&2&&_(e,"stroke-width",i[1]),o&1&&_(e,"class",i[0])},i:_e,o:_e,d(i){i&&M(e)}}}function mu(t,e,n){let{className:i="size-4"}=e,{strokeWidth:o="1.5"}=e;return t.$$set=l=>{"className"in l&&n(0,i=l.className),"strokeWidth"in l&&n(1,o=l.strokeWidth)},[i,o]}class bu extends ue{constructor(e){super(),fe(this,e,mu,gu,ge,{className:0,strokeWidth:1})}}function yu(t){var C,P,A,D,N,O,W,R,V,Z;let e,n,i,o,l,r,s=(((P=(C=t[0])==null?void 0:C.model)==null?void 0:P.name)??((D=(A=t[0])==null?void 0:A.message)==null?void 0:D.model)??"Assistant")+"",a,u,f,d,h,c,b,w,E;n=new Gi({props:{src:((R=(W=(O=(N=t[0])==null?void 0:N.model)==null?void 0:O.info)==null?void 0:W.meta)==null?void 0:R.profile_image_url)??"",className:"size-5 -translate-y-[1px]"}}),d=new fl({props:{className:"size-3 "+((Z=(V=t[0])==null?void 0:V.message)!=null&&Z.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" ",strokeWidth:"2.5"}});function g(m,I){var y,z;return(z=(y=m[0])==null?void 0:y.message)!=null&&z.error?wu:ku}let S=g(t),k=S(t);return{c(){e=ke("div"),ee(n.$$.fragment),i=ve(),o=ke("div"),l=ke("div"),r=ke("div"),a=$e(s),u=ve(),f=ke("button"),ee(d.$$.fragment),c=ve(),k.c(),this.h()},l(m){e=we(m,"DIV",{class:!0});var I=x(e);ie(n.$$.fragment,I),i=Ce(I),o=we(I,"DIV",{class:!0});var y=x(o);l=we(y,"DIV",{class:!0});var z=x(l);r=we(z,"DIV",{class:!0});var H=x(r);a=et(H,s),H.forEach(M),u=Ce(z),f=we(z,"BUTTON",{class:!0});var T=x(f);ie(d.$$.fragment,T),T.forEach(M),z.forEach(M),c=Ce(y),k.l(y),y.forEach(M),I.forEach(M),this.h()},h(){var m,I;_(r,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),_(f,"class",h=(I=(m=t[0])==null?void 0:m.message)!=null&&I.favorite?"":"invisible group-hover:visible"),_(l,"class","flex justify-between items-center"),_(o,"class","ml-2"),_(e,"class","flex w-full")},m(m,I){U(m,e,I),te(n,e,null),se(e,i),se(e,o),se(o,l),se(l,r),se(r,a),se(l,u),se(l,f),te(d,f,null),se(o,c),k.m(o,null),b=!0,w||(E=De(f,"click",t[1]),w=!0)},p(m,I){var H,T,K,j,q,Q,B,le,re,L,ae,ce;const y={};I&1&&(y.src=((j=(K=(T=(H=m[0])==null?void 0:H.model)==null?void 0:T.info)==null?void 0:K.meta)==null?void 0:j.profile_image_url)??""),n.$set(y),(!b||I&1)&&s!==(s=(((Q=(q=m[0])==null?void 0:q.model)==null?void 0:Q.name)??((le=(B=m[0])==null?void 0:B.message)==null?void 0:le.model)??"Assistant")+"")&&tt(a,s);const z={};I&1&&(z.className="size-3 "+((L=(re=m[0])==null?void 0:re.message)!=null&&L.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" "),d.$set(z),(!b||I&1&&h!==(h=(ce=(ae=m[0])==null?void 0:ae.message)!=null&&ce.favorite?"":"invisible group-hover:visible"))&&_(f,"class",h),S===(S=g(m))&&k?k.p(m,I):(k.d(1),k=S(m),k&&(k.c(),k.m(o,null)))},i(m){b||(Y(n.$$.fragment,m),Y(d.$$.fragment,m),b=!0)},o(m){p(n.$$.fragment,m),p(d.$$.fragment,m),b=!1},d(m){m&&M(e),ne(n),ne(d),k.d(),w=!1,E()}}}function _u(t){var b,w,E;let e,n,i,o,l,r,s=(((w=(b=t[0])==null?void 0:b.user)==null?void 0:w.name)??"User")+"",a,u,f;n=new Gi({props:{src:((E=t[0].user)==null?void 0:E.profile_image_url)??`${Jn}/user.png`,className:"size-5 -translate-y-[1px]"}});function d(g,S){var k,C;return(C=(k=g[0])==null?void 0:k.message)!=null&&C.error?Su:Eu}let h=d(t),c=h(t);return{c(){e=ke("div"),ee(n.$$.fragment),i=ve(),o=ke("div"),l=ke("div"),r=ke("div"),a=$e(s),u=ve(),c.c(),this.h()},l(g){e=we(g,"DIV",{class:!0});var S=x(e);ie(n.$$.fragment,S),i=Ce(S),o=we(S,"DIV",{class:!0});var k=x(o);l=we(k,"DIV",{class:!0});var C=x(l);r=we(C,"DIV",{class:!0});var P=x(r);a=et(P,s),P.forEach(M),C.forEach(M),u=Ce(k),c.l(k),k.forEach(M),S.forEach(M),this.h()},h(){_(r,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),_(l,"class","flex justify-between items-center"),_(o,"class","ml-2"),_(e,"class","flex w-full")},m(g,S){U(g,e,S),te(n,e,null),se(e,i),se(e,o),se(o,l),se(l,r),se(r,a),se(o,u),c.m(o,null),f=!0},p(g,S){var C,P,A;const k={};S&1&&(k.src=((C=g[0].user)==null?void 0:C.profile_image_url)??`${Jn}/user.png`),n.$set(k),(!f||S&1)&&s!==(s=(((A=(P=g[0])==null?void 0:P.user)==null?void 0:A.name)??"User")+"")&&tt(a,s),h===(h=d(g))&&c?c.p(g,S):(c.d(1),c=h(g),c&&(c.c(),c.m(o,null)))},i(g){f||(Y(n.$$.fragment,g),f=!0)},o(g){p(n.$$.fragment,g),f=!1},d(g){g&&M(e),ne(n),c.d()}}}function ku(t){let e,n=t[0].message.content+"",i;return{c(){e=ke("div"),i=$e(n),this.h()},l(o){e=we(o,"DIV",{class:!0});var l=x(e);i=et(l,n),l.forEach(M),this.h()},h(){_(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,l){U(o,e,l),se(e,i)},p(o,l){l&1&&n!==(n=o[0].message.content+"")&&tt(i,n)},d(o){o&&M(e)}}}function wu(t){let e,n=t[0].message.error.content+"",i;return{c(){e=ke("div"),i=$e(n),this.h()},l(o){e=we(o,"DIV",{class:!0});var l=x(e);i=et(l,n),l.forEach(M),this.h()},h(){_(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,l){U(o,e,l),se(e,i)},p(o,l){l&1&&n!==(n=o[0].message.error.content+"")&&tt(i,n)},d(o){o&&M(e)}}}function Eu(t){let e,n=t[0].message.content+"",i;return{c(){e=ke("div"),i=$e(n),this.h()},l(o){e=we(o,"DIV",{class:!0});var l=x(e);i=et(l,n),l.forEach(M),this.h()},h(){_(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,l){U(o,e,l),se(e,i)},p(o,l){l&1&&n!==(n=o[0].message.content+"")&&tt(i,n)},d(o){o&&M(e)}}}function Su(t){let e,n=t[0].message.error.content+"",i;return{c(){e=ke("div"),i=$e(n),this.h()},l(o){e=we(o,"DIV",{class:!0});var l=x(e);i=et(l,n),l.forEach(M),this.h()},h(){_(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,l){U(o,e,l),se(e,i)},p(o,l){l&1&&n!==(n=o[0].message.error.content+"")&&tt(i,n)},d(o){o&&M(e)}}}function vu(t){let e,n,i,o;const l=[_u,yu],r=[];function s(a,u){return a[0].message.role==="user"?0:1}return e=s(t),n=r[e]=l[e](t),{c(){n.c(),i=Ie()},l(a){n.l(a),i=Ie()},m(a,u){r[e].m(a,u),U(a,i,u),o=!0},p(a,u){let f=e;e=s(a),e===f?r[e].p(a,u):(Be(),p(r[f],1,1,()=>{r[f]=null}),Ye(),n=r[e],n?n.p(a,u):(n=r[e]=l[e](a),n.c()),Y(n,1),n.m(i.parentNode,i))},i(a){o||(Y(n),o=!0)},o(a){p(n),o=!1},d(a){a&&M(i),r[e].d(a)}}}function Cu(t){var a,u;let e,n,i,o,l,r,s;return n=new ul({props:{content:(u=(a=t[0])==null?void 0:a.message)!=null&&u.error?t[0].message.error.content:t[0].message.content,class:"w-full",allowHTML:!1,$$slots:{default:[vu]},$$scope:{ctx:t}}}),o=new Xt({props:{type:"target",position:he.Top,class:"w-2 rounded-full dark:bg-gray-900"}}),r=new Xt({props:{type:"source",position:he.Bottom,class:"w-2 rounded-full dark:bg-gray-900"}}),{c(){e=ke("div"),ee(n.$$.fragment),i=ve(),ee(o.$$.fragment),l=ve(),ee(r.$$.fragment),this.h()},l(f){e=we(f,"DIV",{class:!0});var d=x(e);ie(n.$$.fragment,d),i=Ce(d),ie(o.$$.fragment,d),l=Ce(d),ie(r.$$.fragment,d),d.forEach(M),this.h()},h(){_(e,"class","px-4 py-3 shadow-md rounded-xl dark:bg-black bg-white border dark:border-gray-900 w-60 h-20 group")},m(f,d){U(f,e,d),te(n,e,null),se(e,i),te(o,e,null),se(e,l),te(r,e,null),s=!0},p(f,[d]){var c,b;const h={};d&1&&(h.content=(b=(c=f[0])==null?void 0:c.message)!=null&&b.error?f[0].message.error.content:f[0].message.content),d&5&&(h.$$scope={dirty:d,ctx:f}),n.$set(h)},i(f){s||(Y(n.$$.fragment,f),Y(o.$$.fragment,f),Y(r.$$.fragment,f),s=!0)},o(f){p(n.$$.fragment,f),p(o.$$.fragment,f),p(r.$$.fragment,f),s=!1},d(f){f&&M(e),ne(n),ne(o),ne(r)}}}function zu(t,e,n){let{data:i}=e;const o=()=>{var l;n(0,i.message.favorite=!(((l=i==null?void 0:i.message)==null?void 0:l.favorite)??!1),i)};return t.$$set=l=>{"data"in l&&n(0,i=l.data)},[i,o]}class Pu extends ue{constructor(e){super(),fe(this,e,zu,Cu,ge,{data:0})}}function Mu(t){let e,n,i,o;return{c(){e=Ee("svg"),n=Ee("path"),i=Ee("path"),o=Ee("path"),this.h()},l(l){e=Se(l,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,"stroke-width":!0,fill:!0,stroke:!0,viewBox:!0});var r=x(e);n=Se(r,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),x(n).forEach(M),i=Se(r,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),x(i).forEach(M),o=Se(r,"path",{d:!0}),x(o).forEach(M),r.forEach(M),this.h()},h(){_(n,"d","M22 3L2 3"),_(n,"stroke-linecap","round"),_(n,"stroke-linejoin","round"),_(i,"d","M22 21L2 21"),_(i,"stroke-linecap","round"),_(i,"stroke-linejoin","round"),_(o,"d","M8 15V9C8 7.89543 8.89543 7 10 7H14C15.1046 7 16 7.89543 16 9V15C16 16.1046 15.1046 17 14 17H10C8.89543 17 8 16.1046 8 15Z"),_(e,"class",t[0]),_(e,"aria-hidden","true"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"stroke-width",t[1]),_(e,"fill","none"),_(e,"stroke","currentColor"),_(e,"viewBox","0 0 24 24")},m(l,r){U(l,e,r),se(e,n),se(e,i),se(e,o)},p(l,[r]){r&1&&_(e,"class",l[0]),r&2&&_(e,"stroke-width",l[1])},i:_e,o:_e,d(l){l&&M(e)}}}function Du(t,e,n){let{className:i="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return t.$$set=l=>{"className"in l&&n(0,i=l.className),"strokeWidth"in l&&n(1,o=l.strokeWidth)},[i,o]}class Nu extends ue{constructor(e){super(),fe(this,e,Du,Mu,ge,{className:0,strokeWidth:1})}}function Ou(t){let e,n,i,o;return{c(){e=Ee("svg"),n=Ee("path"),i=Ee("path"),o=Ee("path"),this.h()},l(l){e=Se(l,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,"stroke-width":!0,fill:!0,stroke:!0,viewBox:!0});var r=x(e);n=Se(r,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),x(n).forEach(M),i=Se(r,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),x(i).forEach(M),o=Se(r,"path",{d:!0}),x(o).forEach(M),r.forEach(M),this.h()},h(){_(n,"d","M3 22L3 2"),_(n,"stroke-linecap","round"),_(n,"stroke-linejoin","round"),_(i,"d","M21 22V2"),_(i,"stroke-linecap","round"),_(i,"stroke-linejoin","round"),_(o,"d","M15 16H9C7.89543 16 7 15.1046 7 14V10C7 8.89543 7.89543 8 9 8H15C16.1046 8 17 8.89543 17 10V14C17 15.1046 16.1046 16 15 16Z"),_(e,"class",t[0]),_(e,"aria-hidden","true"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"stroke-width",t[1]),_(e,"fill","none"),_(e,"stroke","currentColor"),_(e,"viewBox","0 0 24 24")},m(l,r){U(l,e,r),se(e,n),se(e,i),se(e,o)},p(l,[r]){r&1&&_(e,"class",l[0]),r&2&&_(e,"stroke-width",l[1])},i:_e,o:_e,d(l){l&&M(e)}}}function Iu(t,e,n){let{className:i="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return t.$$set=l=>{"className"in l&&n(0,i=l.className),"strokeWidth"in l&&n(1,o=l.strokeWidth)},[i,o]}class Tu extends ue{constructor(e){super(),fe(this,e,Iu,Ou,ge,{className:0,strokeWidth:1})}}function Hu(t){let e,n;return e=new Nu({props:{className:"size-4"}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p:_e,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Vu(t){let e,n;return e=new Tu({props:{className:"size-4"}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p:_e,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Au(t){let e,n,i,o;return e=new Wt({props:{title:"Vertical Layout",$$slots:{default:[Hu]},$$scope:{ctx:t}}}),e.$on("click",t[6]),i=new Wt({props:{title:"Horizontal Layout",$$slots:{default:[Vu]},$$scope:{ctx:t}}}),i.$on("click",t[7]),{c(){ee(e.$$.fragment),n=ve(),ee(i.$$.fragment)},l(l){ie(e.$$.fragment,l),n=Ce(l),ie(i.$$.fragment,l)},m(l,r){te(e,l,r),U(l,n,r),te(i,l,r),o=!0},p(l,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:l}),e.$set(s);const a={};r&1024&&(a.$$scope={dirty:r,ctx:l}),i.$set(a)},i(l){o||(Y(e.$$.fragment,l),Y(i.$$.fragment,l),o=!0)},o(l){p(e.$$.fragment,l),p(i.$$.fragment,l),o=!1},d(l){l&&M(n),ne(e,l),ne(i,l)}}}function Lu(t){let e,n,i,o;return e=new $a({props:{showLock:!1,$$slots:{default:[Au]},$$scope:{ctx:t}}}),i=new cu({props:{variant:at.Dots}}),{c(){ee(e.$$.fragment),n=ve(),ee(i.$$.fragment)},l(l){ie(e.$$.fragment,l),n=Ce(l),ie(i.$$.fragment,l)},m(l,r){te(e,l,r),U(l,n,r),te(i,l,r),o=!0},p(l,r){const s={};r&1032&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){o||(Y(e.$$.fragment,l),Y(i.$$.fragment,l),o=!0)},o(l){p(e.$$.fragment,l),p(i.$$.fragment,l),o=!1},d(l){l&&M(n),ne(e,l),ne(i,l)}}}function Bu(t){let e,n;return e=new za({props:{nodes:t[0],nodeTypes:t[1],edges:t[2],fitView:!0,minZoom:.001,colorMode:t[4].includes("dark")||t[4]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",nodesConnectable:!1,nodesDraggable:!1,oninit:t[8],$$slots:{default:[Lu]},$$scope:{ctx:t}}}),e.$on("nodeclick",t[9]),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.nodes=i[0]),o&2&&(l.nodeTypes=i[1]),o&4&&(l.edges=i[2]),o&16&&(l.colorMode=i[4].includes("dark")||i[4]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o&1032&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Yu(t,e,n){let i;J(t,sl,c=>n(4,i=c));const o=St();let{nodes:l}=e,{nodeTypes:r}=e,{edges:s}=e,{setLayoutDirection:a}=e;const u=()=>a("vertical"),f=()=>a("horizontal"),d=()=>{},h=c=>o("nodeclick",c.detail);return t.$$set=c=>{"nodes"in c&&n(0,l=c.nodes),"nodeTypes"in c&&n(1,r=c.nodeTypes),"edges"in c&&n(2,s=c.edges),"setLayoutDirection"in c&&n(3,a=c.setLayoutDirection)},[l,r,s,a,i,o,u,f,d,h]}class Xu extends ue{constructor(e){super(),fe(this,e,Yu,Bu,ge,{nodes:0,nodeTypes:1,edges:2,setLayoutDirection:3})}}function Zi(t){let e,n;return e=new Xu({props:{nodes:t[7],nodeTypes:t[9],edges:t[8],setLayoutDirection:t[10]}}),e.$on("nodeclick",t[15]),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p:_e,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Wu(t){let e,n,i,o,l,r,s,a=t[3].t("Chat Overview")+"",u,f,d,h,c,b,w,E;l=new bu({props:{className:"size-3.5"}}),h=new gl({props:{className:"size-3.5"}});let g=t[4].length>0&&Zi(t);return{c(){e=ke("div"),n=ke("div"),i=ke("div"),o=ke("button"),ee(l.$$.fragment),r=ve(),s=ke("div"),u=$e(a),f=ve(),d=ke("button"),ee(h.$$.fragment),c=ve(),g&&g.c(),this.h()},l(S){e=we(S,"DIV",{class:!0});var k=x(e);n=we(k,"DIV",{class:!0});var C=x(n);i=we(C,"DIV",{class:!0});var P=x(i);o=we(P,"BUTTON",{class:!0});var A=x(o);ie(l.$$.fragment,A),A.forEach(M),r=Ce(P),s=we(P,"DIV",{class:!0});var D=x(s);u=et(D,a),D.forEach(M),P.forEach(M),f=Ce(C),d=we(C,"BUTTON",{class:!0});var N=x(d);ie(h.$$.fragment,N),N.forEach(M),C.forEach(M),c=Ce(k),g&&g.l(k),k.forEach(M),this.h()},h(){_(o,"class","self-center p-0.5"),_(s,"class","text-lg font-medium self-center font-primary"),_(i,"class","flex items-center gap-2.5"),_(d,"class","self-center p-0.5"),_(n,"class","absolute z-50 w-full flex justify-between dark:text-gray-100 px-4 py-3"),_(e,"class","w-full h-full relative")},m(S,k){U(S,e,k),se(e,n),se(n,i),se(i,o),te(l,o,null),se(i,r),se(i,s),se(s,u),se(n,f),se(n,d),te(h,d,null),se(e,c),g&&g.m(e,null),b=!0,w||(E=[De(o,"click",t[13]),De(d,"click",t[14])],w=!0)},p(S,[k]){(!b||k&8)&&a!==(a=S[3].t("Chat Overview")+"")&&tt(u,a),S[4].length>0?g?(g.p(S,k),k&16&&Y(g,1)):(g=Zi(S),g.c(),Y(g,1),g.m(e,null)):g&&(Be(),p(g,1,1,()=>{g=null}),Ye())},i(S){b||(Y(l.$$.fragment,S),Y(h.$$.fragment,S),Y(g),b=!0)},o(S){p(l.$$.fragment,S),p(h.$$.fragment,S),p(g),b=!1},d(S){S&&M(e),ne(l),ne(h),g&&g.d(),w=!1,ut(E)}}}function Ku(t,e,n){let i,o,l,r;J(t,rl,V=>n(16,i=V)),J(t,al,V=>n(17,o=V)),St();const s=Rt("i18n");J(t,s,V=>n(3,l=V));const{width:a,height:u}=He(),{fitView:f,getViewport:d}=du(),h=hu();let{history:c}=e,{onClose:b}=e,{onNodeClick:w}=e,E=null;const g=oe([]);J(t,g,V=>n(4,r=V));const S=oe([]);let k="vertical";const C={custom:Pu},P=async()=>{E===null?await f({nodes:[{id:c.currentId}]}):await f({nodes:[{id:E}]}),n(2,E=null)},A=async V=>{const Z=[],m=[],I=V==="vertical"?150:300,y=V==="vertical"?250:150;let z=new Map,H={};Object.keys(c.messages).forEach(T=>{var q;const K=c.messages[T],j=K.parentId?(((q=z.get(K.parentId))==null?void 0:q.level)??-1)+1:0;H[j]||(H[j]=0),z.set(T,{id:K.id,level:j,position:H[j]++})}),Object.keys(c.messages).forEach(T=>{const K=z.get(T),j=V==="vertical"?K.position*y:K.level*I,q=V==="vertical"?K.level*I:K.position*y;Z.push({id:K.id,type:"custom",data:{user:o,message:c.messages[T],model:i.find(B=>B.id===c.messages[T].model)},position:{x:j,y:q}});const Q=c.messages[T].parentId;Q&&m.push({id:Q+"-"+K.id,source:Q,target:K.id,selectable:!1,class:" dark:fill-gray-300 fill-gray-300",type:"smoothstep",animated:c.currentId===T||D(T,c.currentId)})}),await S.set([...m]),await g.set([...Z])},D=(V,Z)=>{const m=c.messages[V];return m.childrenIds&&m.childrenIds.some(I=>I===Z||D(I,Z))},N=V=>{n(12,k=V),A(k)};Jt(()=>{A(k),h.subscribe(async V=>{V&&(await ll(),await f({nodes:[{id:c.currentId}]}))}),a.subscribe(V=>{V&&f({nodes:[{id:c.currentId}]})}),u.subscribe(V=>{V&&f({nodes:[{id:c.currentId}]})})}),gn(()=>{g.set([]),S.set([])});const O=()=>{Qn.set(!1)},W=()=>{b(),Qn.set(!1)},R=V=>{w(V.detail),n(2,E=V.detail.node.data.message.id),f({nodes:[{id:E}]})};return t.$$set=V=>{"history"in V&&n(11,c=V.history),"onClose"in V&&n(0,b=V.onClose),"onNodeClick"in V&&n(1,w=V.onNodeClick)},t.$$.update=()=>{t.$$.dirty&6144&&c&&A(k),t.$$.dirty&2048&&c&&c.currentId&&P()},[b,w,E,l,r,s,f,g,S,C,N,c,k,O,W,R]}class pu extends ue{constructor(e){super(),fe(this,e,Ku,Wu,ge,{history:11,onClose:0,onNodeClick:1})}}function Ru(t){let e,n;return e=new pu({props:{history:t[0],onClose:t[1],onNodeClick:t[2]}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,o){const l={};o&1&&(l.history=i[0]),o&2&&(l.onClose=i[1]),o&4&&(l.onNodeClick=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Zu(t){let e,n;return e=new Da({props:{$$slots:{default:[Ru]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,o){te(e,i,o),n=!0},p(i,[o]){const l={};o&23&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function Fu(t,e,n){St();let{history:i}=e,{onClose:o}=e,{onNodeClick:l}=e;return t.$$set=r=>{"history"in r&&n(0,i=r.history),"onClose"in r&&n(1,o=r.onClose),"onNodeClick"in r&&n(2,l=r.onNodeClick)},[i,o,l]}class sf extends ue{constructor(e){super(),fe(this,e,Fu,Zu,ge,{history:0,onClose:1,onNodeClick:2})}}export{sf as default};
//# sourceMappingURL=Cr-6eInT.js.map
