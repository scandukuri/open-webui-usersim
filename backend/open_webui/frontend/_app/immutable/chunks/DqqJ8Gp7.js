const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./h22AL3a0.js","./C1FmrZbK.js","./QjJsDpFa.js","./Cr-6eInT.js","./BsAB9Z30.js","./IHki7fMi.js","./BYfvXhfD.js","./Px_ajtSr.js","./X57m8tU6.js","./cMkWkffq.js","./BFmuJLeH.js","./4CqoFmPD.js","./aA1VTlmX.js","./fNyk_A45.js","./C-V_EQOO.js","./BjVHJN9o.js","./D0QH3NT1.js","./CubwYUHd.js","../assets/Overview.CWA0G-PE.css"])))=>i.map(i=>d[i]);
var Ra=Object.defineProperty;var Ha=(r,e,t)=>e in r?Ra(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var kl=(r,e,t)=>Ha(r,typeof e!="symbol"?e+"":e,t);import{at as Wa,au as Ga,av as cn,y as ce,r as $,u as ue,q as v,aw as Ja,S as st,i as ot,s as nt,C as F,D as L,E as j,F as R,N as yl,w as vl,V as we,W as ke,a as E,d,f as c,g as B,h as y,n as me,m as Oe,k as Ee,v as Ot,M as qe,e as D,c as M,l as W,p as G,a0 as Rt,t as $e,b as Ie,j as Ce,G as Ne,X as ul,H as Be,I as Le,K as je,L as ll,a2 as At,x as vn,z as wn,A as kn,B as yn,Q as Gt,a4 as Qt,U as il,_ as En,T as El,J as Ul,O as Dr,P as Mr,a1 as Fr,$ as un,a3 as ca,o as qa}from"./BsAB9Z30.js";import{g as Za}from"./D0QH3NT1.js";import"./IHki7fMi.js";import{t as Ue}from"./DQjSdZ1e.js";import{C as Ya,a as Ka,I as Xa,g as _r,b as br,c as ua,d as Qa,P as xa}from"./i3YK7P2g.js";import{g as mn}from"./BYfvXhfD.js";import{p as Lr}from"./D2VKnAEk.js";import{q as yr,j as pl,l as pn,a as Wt,u as wl,c as Pl,G as sl,t as bl,F as $n,E as tl,d as ln,m as In,T as Er,e as ei,X as ti,Y as Xt,H as Mt,g as gl,V as li,P as Ml,L as _l,J as Vl,s as $r,U as ni,k as ri,f as gn,N as si,K as jr,Z as Nl,D as ol,r as oi,_ as dn,W as ai,$ as ii}from"./Px_ajtSr.js";import{v as el,M as nl,K as fi,J as ci,n as ui,N as di,o as hi,b as jt,p as mi,a as pi,q as gi,r as _i,t as bi,u as vi,w as wi,x as ki,y as yi,m as Al,i as Vr,C as Ei,l as $i,g as Ii,z as _n,O as Ci,P as Si,d as Ti,I as vr,H as wr}from"./C06TgqeF.js";import{j as da,k as Di,u as Kl,f as Ir,l as Mi,e as al,a as Cr,m as Vi,n as Ni,o as Rr,p as Bi,q as Oi}from"./B26fW9V3.js";import{g as zi,e as Ai}from"./D2743oBi.js";import{p as Ui,c as Pi}from"./DsqCnbaP.js";import{i as Hr,g as Wr,j as Fi}from"./4SWYVpml.js";import{s as Li,t as ji,v as Ri,w as Hi,x as Wi,y as Gi,z as Ji}from"./DxN4CUV8.js";import{g as Cn,b as qi,d as Zi,h as Yi}from"./CxP_jo_w.js";import{P as ha,D as Ki,c as ma,u as pa,F as ga,b as Nr}from"./C-kfCiLr.js";import{a as Bl,f as zl}from"./CCuVEwBR.js";import bn from"./BFmuJLeH.js";import{e as ft,u as Br,o as _a,d as Xi}from"./BjVHJN9o.js";import{_ as Xl}from"./C1FmrZbK.js";import{g as Qi}from"./BtlLS4jq.js";import"./CgqN014N.js";import{b as Sn,c as Pt}from"./fl9Qo3pM.js";import{f as Fl}from"./g5t9vw8M.js";import{g as ba}from"./CX0EKAME.js";import{D as Tn}from"./ozVhkuYd.js";import{T as tt}from"./cMkWkffq.js";import{C as nn}from"./6bX91EV5.js";import{C as rn}from"./CvyCbeyv.js";import{d as Ql}from"./I1CDPYOB.js";import{S as dl}from"./CbQmQGdd.js";import{L as va}from"./LNJKunkS.js";import{a as xi}from"./Coq7iT8S.js";import{M as wa}from"./C_R67QgC.js";import{X as hl}from"./CubwYUHd.js";import{G as Or}from"./DDlVWxFG.js";import{V as ef,R as tf,D as lf}from"./CXCiFWhq.js";import{F as nf}from"./BQG6uwEp.js";import{C as Ll,I as rf,e as sf,S as of,F as af}from"./Do3D_Int.js";import{S as ka}from"./C8iviNoy.js";import{m as ff}from"./Boi0JlCe.js";import{S as sn}from"./C-OXavg4.js";import{K as cf,M as ya,S as uf}from"./BMN7thXx.js";import{V as df,a as hf}from"./B4e8wYAy.js";import{S as mf,F as pf,a as gf,u as Sr,g as Gr,d as _f}from"./8FeVl3bP.js";import{S as bf}from"./DKzF61AR.js";import{M as Ea,a as $a,b as Ia}from"./CWlaJreh.js";import{f as Ca,D as Sa}from"./5-chS5bE.js";import{T as vf}from"./Du5aQI1I.js";import{M as wf,A as kf,U as yf}from"./Ct4-mFWL.js";import{S as Ef}from"./CfstUa2o.js";import{B as zr}from"./QUo9eUSK.js";import{S as $f}from"./BfJ33jvc.js";import{E as Ta}from"./BNJXXAzR.js";import{A as If}from"./C6HpZrrV.js";import{g as Da,b as Cf,d as Sf,h as Tf}from"./DZNDgjp9.js";import{s as Df,t as Mf}from"./CsB0EUwg.js";import{C as Ma}from"./B3qUBvVu.js";import{E as Vf}from"./CPRxkh2D.js";import{C as Dn}from"./Cbzj8oLO.js";import{C as Va}from"./BjfKCu6r.js";import{E as Nf}from"./BJHkL7lq.js";import{E as Bf}from"./CWY_Z6OT.js";function Na(r,e){const t=e.token={};function l(n,s,o,a){if(e.token!==t)return;e.resolved=a;let i=e.ctx;o!==void 0&&(i=i.slice(),i[o]=a);const f=n&&(e.current=n)(i);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,m)=>{m!==s&&h&&(ce(),$(h,1,1,()=>{e.blocks[m]===h&&(e.blocks[m]=null)}),ue())}):e.block.d(1),f.c(),v(f,1),f.m(e.mount(),e.anchor),u=!0),e.block=f,e.blocks&&(e.blocks[s]=f),u&&Ja()}if(Wa(r)){const n=Ga();if(r.then(s=>{cn(n),l(e.then,1,e.value,s),cn(null)},s=>{if(cn(n),l(e.catch,2,e.error,s),cn(null),!e.hasCatch)throw s}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,r),!0;e.resolved=r}}function Ba(r,e,t){const l=e.slice(),{resolved:n}=r;r.current===r.then&&(l[r.value]=n),r.current===r.catch&&(l[r.error]=n),r.block.p(l,t)}function Of(r){let e,t;return e=new vf({props:{tags:r[0]}}),e.$on("delete",r[4]),e.$on("add",r[5]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,[n]){const s={};n&1&&(s.tags=l[0]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function zf(r,e,t){const l=yl();let{chatId:n=""}=e,s=[];const o=async()=>await da(localStorage.token,n).catch(async h=>[]),a=async h=>{await Di(localStorage.token,n,h).catch(async g=>(Ue.error(`${g}`),null))&&(t(0,s=await o()),await Kl(localStorage.token,n,{tags:s}),await yr.set(await Ir(localStorage.token)),l("add",{name:h}))},i=async h=>{await Mi(localStorage.token,n,h),t(0,s=await o()),await Kl(localStorage.token,n,{tags:s}),await yr.set(await Ir(localStorage.token)),l("delete",{name:h})};vl(async()=>{n&&t(0,s=await o())});const f=h=>{i(h.detail)},u=h=>{a(h.detail)};return r.$$set=h=>{"chatId"in h&&t(3,n=h.chatId)},[s,a,i,n,f,u]}class Af extends st{constructor(e){super(),ot(this,e,zf,Of,nt,{chatId:3})}}function Uf(r){let e,t,l,n,s,o,a;return i(),{feed:f,reset:i};function i(){e=!0,t="",l=0,n=-1,s=void 0,o=void 0,a=""}function f(h){t=t?t+h:h,e&&Pf(t)&&(t=t.slice(Oa.length)),e=!1;const m=t.length;let g=0,b=!1;for(;g<m;){b&&(t[g]===`
`&&++g,b=!1);let p=-1,_=n,w;for(let S=l;p<0&&S<m;++S)w=t[S],w===":"&&_<0?_=S-g:w==="\r"?(b=!0,p=S-g):w===`
`&&(p=S-g);if(p<0){l=m-g,n=_;break}else l=0,n=-1;u(t,g,_,p),g+=p+1}g===m?t="":g>0&&(t=t.slice(g))}function u(h,m,g,b){if(b===0){a.length>0&&(r({type:"event",id:s,event:o||void 0,data:a.slice(0,-1)}),a="",s=void 0),o=void 0;return}const p=g<0,_=h.slice(m,m+(p?b:g));let w=0;p?w=b:h[m+g+1]===" "?w=g+2:w=g+1;const S=m+w,k=b-w,I=h.slice(S,S+k).toString();if(_==="data")a+=I?"".concat(I,`
`):`
`;else if(_==="event")o=I;else if(_==="id"&&!I.includes("\0"))s=I;else if(_==="retry"){const T=parseInt(I,10);Number.isNaN(T)||r({type:"reconnect-interval",value:T})}}}const Oa=[239,187,191];function Pf(r){return Oa.every((e,t)=>r.charCodeAt(t)===e)}class Ff extends TransformStream{constructor(){let e;super({start(t){e=Uf(l=>{l.type==="event"&&t.enqueue(l)})},transform(t){e.feed(t)}})}}async function Lf(r,e){const t=r.pipeThrough(new TextDecoderStream).pipeThrough(new Ff).getReader();let l=jf(t);return e&&(l=Rf(l)),l}async function*jf(r){var e,t,l;for(;;){const{value:n,done:s}=await r.read();if(s){yield{done:!0,value:""};break}if(!n)continue;const o=n.data;if(o.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const a=JSON.parse(o);if(a.error){yield{done:!0,value:"",error:a.error};break}if(a.sources){yield{done:!1,value:"",sources:a.sources};continue}if(a.selected_model_id){yield{done:!1,value:"",selectedModelId:a.selected_model_id};continue}if(a.usage){yield{done:!1,value:"",usage:a.usage};continue}yield{done:!1,value:((l=(t=(e=a.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:l.content)??""}}catch{}}}async function*Rf(r){for await(const e of r){if(e.done){yield e;return}if(e.error){yield e;continue}if(e.sources){yield e;continue}if(e.selectedModelId){yield e;continue}if(e.usage){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const l=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,l)},(document==null?void 0:document.visibilityState)!=="hidden"&&await Hf(5),t=t.slice(l)}}}const Hf=r=>new Promise(e=>setTimeout(e,r));function Wf(r){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=ke(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(l,n){B(l,e,n),y(e,t)},p(l,[n]){n&2&&c(e,"stroke-width",l[1]),n&1&&c(e,"class",l[0])},i:me,o:me,d(l){l&&d(e)}}}function Gf(r,e,t){let{className:l="size-4"}=e,{strokeWidth:n="2"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class Jf extends st{constructor(e){super(),ot(this,e,Gf,Wf,nt,{className:0,strokeWidth:1})}}let xl="",en="";async function qf(){var t,l;const r=await fetch("/api/config");if(!r.ok)throw new Error("Failed to fetch Google Drive credentials");const e=await r.json();if(xl=(t=e.google_drive)==null?void 0:t.api_key,en=(l=e.google_drive)==null?void 0:l.client_id,!xl||!en)throw new Error("Google Drive API credentials not configured")}const Zf=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file"],Yf=()=>{if(!xl||!en)throw new Error("Google Drive API credentials not configured");if(xl===""||en==="")throw new Error("Please configure valid Google Drive API credentials")};let hn=null,Jr=!1;const Kf=()=>new Promise((r,e)=>{if(typeof gapi>"u"){const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.onload=()=>{gapi.load("picker",()=>{r(!0)})},t.onerror=e,document.body.appendChild(t)}else gapi.load("picker",()=>{r(!0)})}),Xf=()=>new Promise((r,e)=>{if(typeof google>"u"){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=r,t.onerror=e,document.body.appendChild(t)}else r(!0)}),Qf=async()=>hn||new Promise((r,e)=>{google.accounts.oauth2.initTokenClient({client_id:en,scope:Zf.join(" "),callback:l=>{l.access_token?(hn=l.access_token,r(hn)):e(new Error("Failed to get access token"))},error_callback:l=>{e(new Error(l.message||"OAuth error occurred"))}}).requestAccessToken()}),xf=async()=>{Jr||(await qf(),Yf(),await Promise.all([Kf(),Xf()]),Jr=!0)},ec=()=>new Promise(async(r,e)=>{try{await xf();const t=await Qf();if(!t)throw new Error("Unable to get OAuth token");new google.picker.PickerBuilder().enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(new google.picker.DocsView().setIncludeFolders(!1).setSelectFolderEnabled(!1).setMimeTypes("application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.google-apps.document,application/vnd.google-apps.spreadsheet,application/vnd.google-apps.presentation")).setOAuthToken(t).setDeveloperKey(xl).setCallback(async n=>{if(n[google.picker.Response.ACTION]===google.picker.Action.PICKED)try{const s=n[google.picker.Response.DOCUMENTS][0],o=s[google.picker.Document.ID],a=s[google.picker.Document.NAME],i=s[google.picker.Document.URL];if(!o||!a)throw new Error("Required file details missing");const f=s[google.picker.Document.MIME_TYPE];let u,h;f.includes("google-apps")?(f.includes("document")?h="text/plain":f.includes("spreadsheet")?h="text/csv":f.includes("presentation")?h="text/plain":h="application/pdf",u=`https://www.googleapis.com/drive/v3/files/${o}/export?mimeType=${encodeURIComponent(h)}`):u=`https://www.googleapis.com/drive/v3/files/${o}?alt=media`;const m=await fetch(u,{headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}});if(!m.ok){const p=await m.text();throw m.status,m.statusText,new Error(`Failed to download file (${m.status}): ${p}`)}const g=await m.blob(),b={id:o,name:a,url:u,blob:g,headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}};r(b)}catch(s){e(s)}else n[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&r(null)}).build().setVisible(!0)}catch(t){e(t)}}),Dl=class Dl{constructor(){kl(this,"clientIdPersonal","");kl(this,"clientIdBusiness","");kl(this,"sharepointUrl","");kl(this,"sharepointTenantId","");kl(this,"msalInstance",null);kl(this,"currentAuthorityType","personal")}static getInstance(){return Dl.instance||(Dl.instance=new Dl),Dl.instance}async initialize(e){e&&this.currentAuthorityType!==e&&(this.currentAuthorityType=e,this.msalInstance=null),await this.getCredentials()}async ensureInitialized(e){await this.initialize(e)}async getCredentials(){var l,n,s,o;const e=await fetch("/api/config",{headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch OneDrive credentials");const t=await e.json();if(this.clientIdPersonal=(l=t.onedrive)==null?void 0:l.client_id_personal,this.clientIdBusiness=(n=t.onedrive)==null?void 0:n.client_id_business,this.sharepointUrl=(s=t.onedrive)==null?void 0:s.sharepoint_url,this.sharepointTenantId=(o=t.onedrive)==null?void 0:o.sharepoint_tenant_id,!this.clientIdPersonal&&!this.clientIdBusiness)throw new Error("OneDrive personal or business client ID not configured")}async getMsalInstance(e){if(await this.ensureInitialized(e),!this.msalInstance){const t=this.currentAuthorityType==="organizations"?this.sharepointTenantId||"common":"consumers",l=this.currentAuthorityType==="organizations"?this.clientIdBusiness:this.clientIdPersonal;if(!l)throw new Error("OneDrive client ID not configured");const n={auth:{authority:`https://login.microsoftonline.com/${t}`,clientId:l}},{PublicClientApplication:s}=await Xl(async()=>{const{PublicClientApplication:o}=await import("./KB49uad6.js");return{PublicClientApplication:o}},[],import.meta.url);this.msalInstance=new s(n),this.msalInstance.initialize&&await this.msalInstance.initialize()}return this.msalInstance}getAuthorityType(){return this.currentAuthorityType}getSharepointUrl(){return this.sharepointUrl}getSharepointTenantId(){return this.sharepointTenantId}getBaseUrl(){if(this.currentAuthorityType==="organizations"){if(!this.sharepointUrl||this.sharepointUrl==="")throw new Error("Sharepoint URL not configured");let e=this.sharepointUrl.replace(/^https?:\/\//,"");return e=e.replace(/\/$/,""),`https://${e}`}else return"https://onedrive.live.com/picker"}};kl(Dl,"instance");let tn=Dl;async function Tr(r,e){const t=tn.getInstance();await t.ensureInitialized(e);const s={scopes:t.getAuthorityType()==="organizations"?[`${r||t.getBaseUrl()}/.default`]:["OneDrive.ReadWrite"]};let o="";try{o=(await(await t.getMsalInstance(e)).acquireTokenSilent(s)).accessToken}catch{const a=await t.getMsalInstance(e);try{const i=await a.loginPopup(s);a.setActiveAccount(i.account),i.idToken&&(o=(await a.acquireTokenSilent(s)).accessToken)}catch(i){throw new Error("Failed to login: "+(i instanceof Error?i.message:String(i)))}}if(!o)throw new Error("Failed to acquire access token");return o}function tc(){var l;const r=el(),e=tn.getInstance(),t={sdk:"8.0",entry:{oneDrive:{}},authentication:{},messaging:{origin:((l=window==null?void 0:window.location)==null?void 0:l.origin)||"",channelId:r},search:{enabled:!0},typesAndSources:{mode:"files",pivots:{oneDrive:!0,recent:!0,myOrganization:e.getAuthorityType()==="organizations"}}};return e.getAuthorityType()!=="organizations"&&(t.entry.oneDrive={files:{}}),t}async function lc(r,e){const t=await Tr(void 0,e);if(!t)throw new Error("Unable to retrieve OneDrive access token.");const l=`${r["@sharePoint.endpoint"]}/drives/${r.parentReference.driveId}/items/${r.id}`,n=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error(`Failed to fetch file information: ${n.status} ${n.statusText}`);const o=(await n.json())["@content.downloadUrl"];if(!o)throw new Error("Download URL not found in file data");const a=await fetch(o);if(!a.ok)throw new Error(`Failed to download file: ${a.status} ${a.statusText}`);return await a.blob()}async function nc(r){if(typeof window>"u")throw new Error("Not in browser environment");const e=tn.getInstance();return await e.initialize(r),new Promise((t,l)=>{let n=null,s=null;const o=tc(),a=e.getBaseUrl(),i=m=>{var b;if(m.source!==n)return;const g=m.data;if((g==null?void 0:g.type)==="initialize"&&(g==null?void 0:g.channelId)===o.messaging.channelId){if(s=(b=m.ports)==null?void 0:b[0],!s)return;s.addEventListener("message",f),s.start(),s.postMessage({type:"activate"})}},f=async m=>{const g=m.data;switch(g.type){case"notification":break;case"command":{s==null||s.postMessage({type:"acknowledge",id:g.id});const b=g.data;switch(b.command){case"authenticate":{try{const p=e.getAuthorityType()==="organizations"?b.resource:void 0,_=await Tr(p,r);if(_)s==null||s.postMessage({type:"result",id:g.id,data:{result:"token",token:_}});else throw new Error("Could not retrieve auth token")}catch{s==null||s.postMessage({type:"result",id:g.id,data:{result:"error",error:{code:"tokenError",message:"Failed to get token"}}})}break}case"close":{u(),t(null);break}case"pick":{s==null||s.postMessage({type:"result",id:g.id,data:{result:"success"}}),u(),t(b);break}default:{s==null||s.postMessage({result:"error",error:{code:"unsupportedCommand",message:b.command},isExpected:!0});break}}break}}};function u(){window.removeEventListener("message",i),s&&s.removeEventListener("message",f),n&&(n.close(),n=null)}(async()=>{try{const m=await Tr(void 0,r);if(!m)return l(new Error("Failed to acquire access token"));if(n=window.open("","OneDrivePicker","width=800,height=600"),!n)return l(new Error("Failed to open OneDrive picker window"));const g=new URLSearchParams({filePicker:JSON.stringify(o)});let b="";e.getAuthorityType()==="organizations"?b=a+`/_layouts/15/FilePicker.aspx?${g}`:b=a+`?${g}`;const p=n.document.createElement("form");p.setAttribute("action",b),p.setAttribute("method","POST");const _=n.document.createElement("input");_.setAttribute("type","hidden"),_.setAttribute("name","access_token"),_.setAttribute("value",m),p.appendChild(_),n.document.body.appendChild(p),p.submit(),window.addEventListener("message",i)}catch(m){n&&n.close(),l(m)}})()})}async function rc(r){const e=await nc(r);if(!e||!e.items||e.items.length===0)return null;const t=e.items[0];return{blob:await lc(t,r),name:t.name}}function sc(r){let e,t,l,n;return{c(){e=we("svg"),t=we("path"),l=we("path"),n=we("path"),this.h()},l(s){e=ke(s,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,"stroke-width":!0,stroke:!0,fill:!0,viewBox:!0});var o=E(e);t=ke(o,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),l=ke(o,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(l).forEach(d),n=ke(o,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(n).forEach(d),o.forEach(d),this.h()},h(){c(t,"d","M12 6L12 12L18 12"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M21.8883 10.5C21.1645 5.68874 17.013 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C16.1006 22 19.6248 19.5318 21.1679 16"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(n,"d","M17 16H21.4C21.7314 16 22 16.2686 22 16.6V21"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(e,"class",r[0]),c(e,"aria-hidden","true"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24")},m(s,o){B(s,e,o),y(e,t),y(e,l),y(e,n)},p(s,[o]){o&1&&c(e,"class",s[0]),o&2&&c(e,"stroke-width",s[1])},i:me,o:me,d(s){s&&d(e)}}}function oc(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class ac extends st{constructor(e){super(),ot(this,e,oc,sc,nt,{className:0,strokeWidth:1})}}function qr(r,e,t){const l=r.slice();return l[16]=e[t],l[18]=t,l}function ic(r){let e,t,l;return t=new dl({}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","py-4.5")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function fc(r){let e,t,l,n;const s=[uc,cc],o=[];function a(i,f){return i[2].length===0?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function cc(r){let e,t,l,n=ft(r[2]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Zr(qr(r,n,i));const o=i=>$(s[i],1,1,()=>{s[i]=null});let a=!r[5]&&Yr(r);return{c(){e=D("div");for(let i=0;i<s.length;i+=1)s[i].c();t=W(),a&&a.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=E(e);for(let u=0;u<s.length;u+=1)s[u].l(f);t=G(f),a&&a.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex flex-col gap-0.5")},m(i,f){B(i,e,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);y(e,t),a&&a.m(e,null),l=!0},p(i,f){if(f&13){n=ft(i[2]);let u;for(u=0;u<n.length;u+=1){const h=qr(i,n,u);s[u]?(s[u].p(h,f),v(s[u],1)):(s[u]=Zr(h),s[u].c(),v(s[u],1),s[u].m(e,t))}for(ce(),u=n.length;u<s.length;u+=1)o(u);ue()}i[5]?a&&(ce(),$(a,1,1,()=>{a=null}),ue()):a?(a.p(i,f),f&32&&v(a,1)):(a=Yr(i),a.c(),v(a,1),a.m(e,null))},i(i){if(!l){for(let f=0;f<n.length;f+=1)v(s[f]);v(a),l=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)$(s[f]);$(a),l=!1},d(i){i&&d(e),Rt(s,i),a&&a.d()}}}function uc(r){let e,t=r[6].t("No chats found")+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","text-center text-xs text-gray-500 py-3")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s&64&&t!==(t=n[6].t("No chats found")+"")&&Ce(l,t)},i:me,o:me,d(n){n&&d(e)}}}function dc(r){var n;let e,t=nl((n=r[16])==null?void 0:n.name)+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);l=Ie(o,t),o.forEach(d),this.h()},h(){c(e,"class","line-clamp-1 flex-1")},m(s,o){B(s,e,o),y(e,l)},p(s,o){var a;o&4&&t!==(t=nl((a=s[16])==null?void 0:a.name)+"")&&Ce(l,t)},d(s){s&&d(e)}}}function Zr(r){var m;let e,t,l,n,s,o,a,i;l=new tt({props:{content:r[16].description||nl((m=r[16])==null?void 0:m.name),placement:"top-start",$$slots:{default:[dc]},$$scope:{ctx:r}}});function f(){return r[9](r[16])}function u(){return r[10](r[18])}function h(){return r[11](r[18])}return{c(){e=D("button"),t=D("div"),F(l.$$.fragment),this.h()},l(g){e=M(g,"BUTTON",{class:!0,type:!0,"data-selected":!0});var b=E(e);t=M(b,"DIV",{class:!0});var p=E(t);L(l.$$.fragment,p),p.forEach(d),b.forEach(d),this.h()},h(){c(t,"class","text-black dark:text-gray-100 flex items-center gap-1.5"),c(e,"class",n="px-2.5 py-1 rounded-xl w-full text-left flex justify-between items-center text-sm "+(r[18]===r[3]?" bg-gray-50 dark:bg-gray-800 dark:text-gray-100 selected-command-option-button":"")),c(e,"type","button"),c(e,"data-selected",s=r[18]===r[3])},m(g,b){B(g,e,b),y(e,t),j(l,t,null),o=!0,a||(i=[Ne(e,"click",f),Ne(e,"mousemove",u),Ne(e,"mouseleave",h)],a=!0)},p(g,b){var _;r=g;const p={};b&4&&(p.content=r[16].description||nl((_=r[16])==null?void 0:_.name)),b&524292&&(p.$$scope={dirty:b,ctx:r}),l.$set(p),(!o||b&8&&n!==(n="px-2.5 py-1 rounded-xl w-full text-left flex justify-between items-center text-sm "+(r[18]===r[3]?" bg-gray-50 dark:bg-gray-800 dark:text-gray-100 selected-command-option-button":"")))&&c(e,"class",n),(!o||b&8&&s!==(s=r[18]===r[3]))&&c(e,"data-selected",s)},i(g){o||(v(l.$$.fragment,g),o=!0)},o(g){$(l.$$.fragment,g),o=!1},d(g){g&&d(e),R(l),a=!1,ul(i)}}}function Yr(r){let e,t;return e=new va({props:{$$slots:{default:[hc]},$$scope:{ctx:r}}}),e.$on("visible",r[12]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&524352&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function hc(r){let e,t,l,n,s=r[6].t("Loading...")+"",o,a;return t=new dl({props:{className:" size-4"}}),{c(){e=D("div"),F(t.$$.fragment),l=W(),n=D("div"),o=$e(s),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=E(e);L(t.$$.fragment,f),l=G(f),n=M(f,"DIV",{class:!0});var u=E(n);o=Ie(u,s),u.forEach(d),f.forEach(d),this.h()},h(){c(n,"class",""),c(e,"class","w-full flex justify-center py-4 text-xs animate-pulse items-center gap-2")},m(i,f){B(i,e,f),j(t,e,null),y(e,l),y(e,n),y(n,o),a=!0},p(i,f){(!a||f&64)&&s!==(s=i[6].t("Loading...")+"")&&Ce(o,s)},i(i){a||(v(t.$$.fragment,i),a=!0)},o(i){$(t.$$.fragment,i),a=!1},d(i){i&&d(e),R(t)}}}function mc(r){let e,t,l,n;const s=[fc,ic],o=[];function a(i,f){return i[1]?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,[f]){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function pc(r,e,t){let l,n;Ee(r,pl,k=>t(14,l=k));const s=Ot("i18n");Ee(r,s,k=>t(6,n=k));let{onSelect:o=k=>{}}=e,a=!1,i=[],f=0,u=1,h=!1,m=!1;const g=async()=>{m||(u+=1,await b())},b=async()=>{t(4,h=!0);let k=await al(localStorage.token,u,!0,!0).catch(()=>[]);return(k??[]).length===0?t(5,m=!0):t(5,m=!1),t(2,i=[...i,...k.filter(I=>(I==null?void 0:I.id)!==l).map(I=>({...I,type:"chat",name:I.title,description:Ql(I.updated_at*1e3).fromNow()}))]),t(4,h=!1),k};vl(async()=>{await b(),await qe(),t(1,a=!0)});const p=k=>{o(k)},_=k=>{t(3,f=k)},w=k=>{k===0&&t(3,f=-1)},S=k=>{h||g()};return r.$$set=k=>{"onSelect"in k&&t(0,o=k.onSelect)},[o,a,i,f,h,m,n,s,g,p,_,w,S]}class gc extends st{constructor(e){super(),ot(this,e,pc,mc,nt,{onSelect:0})}}function Kr(r,e,t){const l=r.slice();return l[15]=e[t],l[17]=t,l}function _c(r){let e,t,l;return t=new dl({}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","py-4.5")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function bc(r){let e,t,l,n;const s=[wc,vc],o=[];function a(i,f){return i[2].length===0?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function vc(r){let e,t,l,n=ft(r[2]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Xr(Kr(r,n,i));const o=i=>$(s[i],1,1,()=>{s[i]=null});let a=!r[5]&&Qr(r);return{c(){e=D("div");for(let i=0;i<s.length;i+=1)s[i].c();t=W(),a&&a.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=E(e);for(let u=0;u<s.length;u+=1)s[u].l(f);t=G(f),a&&a.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex flex-col gap-0.5")},m(i,f){B(i,e,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);y(e,t),a&&a.m(e,null),l=!0},p(i,f){if(f&77){n=ft(i[2]);let u;for(u=0;u<n.length;u+=1){const h=Kr(i,n,u);s[u]?(s[u].p(h,f),v(s[u],1)):(s[u]=Xr(h),s[u].c(),v(s[u],1),s[u].m(e,t))}for(ce(),u=n.length;u<s.length;u+=1)o(u);ue()}i[5]?a&&(ce(),$(a,1,1,()=>{a=null}),ue()):a?(a.p(i,f),f&32&&v(a,1)):(a=Qr(i),a.c(),v(a,1),a.m(e,null))},i(i){if(!l){for(let f=0;f<n.length;f+=1)v(s[f]);v(a),l=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)$(s[f]);$(a),l=!1},d(i){i&&d(e),Rt(s,i),a&&a.d()}}}function wc(r){let e,t=r[6].t("No notes found")+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","text-center text-xs text-gray-500 py-3")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s&64&&t!==(t=n[6].t("No notes found")+"")&&Ce(l,t)},i:me,o:me,d(n){n&&d(e)}}}function kc(r){let e,t;return e=new ha({props:{className:"size-4"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function yc(r){var n;let e,t=nl((n=r[15])==null?void 0:n.name)+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);l=Ie(o,t),o.forEach(d),this.h()},h(){c(e,"class","line-clamp-1 flex-1")},m(s,o){B(s,e,o),y(e,l)},p(s,o){var a;o&4&&t!==(t=nl((a=s[15])==null?void 0:a.name)+"")&&Ce(l,t)},d(s){s&&d(e)}}}function Xr(r){var b;let e,t,l,n,s,o,a,i,f,u;l=new tt({props:{content:r[6].t("Note"),placement:"top",$$slots:{default:[kc]},$$scope:{ctx:r}}}),s=new tt({props:{content:r[15].description||nl((b=r[15])==null?void 0:b.name),placement:"top-start",$$slots:{default:[yc]},$$scope:{ctx:r}}});function h(){return r[9](r[15])}function m(){return r[10](r[17])}function g(){return r[11](r[17])}return{c(){e=D("button"),t=D("div"),F(l.$$.fragment),n=W(),F(s.$$.fragment),this.h()},l(p){e=M(p,"BUTTON",{class:!0,type:!0,"data-selected":!0});var _=E(e);t=M(_,"DIV",{class:!0});var w=E(t);L(l.$$.fragment,w),n=G(w),L(s.$$.fragment,w),w.forEach(d),_.forEach(d),this.h()},h(){c(t,"class","text-black dark:text-gray-100 flex items-center gap-1.5"),c(e,"class",o="px-2.5 py-1 rounded-xl w-full text-left flex justify-between items-center text-sm "+(r[17]===r[3]?" bg-gray-50 dark:bg-gray-800 dark:text-gray-100 selected-command-option-button":"")),c(e,"type","button"),c(e,"data-selected",a=r[17]===r[3])},m(p,_){B(p,e,_),y(e,t),j(l,t,null),y(t,n),j(s,t,null),i=!0,f||(u=[Ne(e,"click",h),Ne(e,"mousemove",m),Ne(e,"mouseleave",g)],f=!0)},p(p,_){var k;r=p;const w={};_&64&&(w.content=r[6].t("Note")),_&262144&&(w.$$scope={dirty:_,ctx:r}),l.$set(w);const S={};_&4&&(S.content=r[15].description||nl((k=r[15])==null?void 0:k.name)),_&262148&&(S.$$scope={dirty:_,ctx:r}),s.$set(S),(!i||_&8&&o!==(o="px-2.5 py-1 rounded-xl w-full text-left flex justify-between items-center text-sm "+(r[17]===r[3]?" bg-gray-50 dark:bg-gray-800 dark:text-gray-100 selected-command-option-button":"")))&&c(e,"class",o),(!i||_&8&&a!==(a=r[17]===r[3]))&&c(e,"data-selected",a)},i(p){i||(v(l.$$.fragment,p),v(s.$$.fragment,p),i=!0)},o(p){$(l.$$.fragment,p),$(s.$$.fragment,p),i=!1},d(p){p&&d(e),R(l),R(s),f=!1,ul(u)}}}function Qr(r){let e,t;return e=new va({props:{$$slots:{default:[Ec]},$$scope:{ctx:r}}}),e.$on("visible",r[12]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&262208&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Ec(r){let e,t,l,n,s=r[6].t("Loading...")+"",o,a;return t=new dl({props:{className:" size-4"}}),{c(){e=D("div"),F(t.$$.fragment),l=W(),n=D("div"),o=$e(s),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=E(e);L(t.$$.fragment,f),l=G(f),n=M(f,"DIV",{class:!0});var u=E(n);o=Ie(u,s),u.forEach(d),f.forEach(d),this.h()},h(){c(n,"class",""),c(e,"class","w-full flex justify-center py-4 text-xs animate-pulse items-center gap-2")},m(i,f){B(i,e,f),j(t,e,null),y(e,l),y(e,n),y(n,o),a=!0},p(i,f){(!a||f&64)&&s!==(s=i[6].t("Loading...")+"")&&Ce(o,s)},i(i){a||(v(t.$$.fragment,i),a=!0)},o(i){$(t.$$.fragment,i),a=!1},d(i){i&&d(e),R(t)}}}function $c(r){let e,t,l,n;const s=[bc,_c],o=[];function a(i,f){return i[1]?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,[f]){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function Ic(r,e,t){let l;const n=Ot("i18n");Ee(r,n,S=>t(6,l=S));let{onSelect:s=S=>{}}=e,o=!1,a=[],i=0,f=1,u=!1,h=!1;const m=async()=>{h||(f+=1,await g())},g=async()=>{t(4,u=!0);let S=await xi(localStorage.token,f).catch(()=>[]);return(S??[]).length===0?t(5,h=!0):t(5,h=!1),t(2,a=[...a,...S.map(k=>({...k,type:"note",name:k.title,description:Ql(k.updated_at/1e6).fromNow()}))]),t(4,u=!1),S};vl(async()=>{await g(),await qe(),t(1,o=!0)});const b=S=>{s(S)},p=S=>{t(3,i=S)},_=S=>{S===0&&t(3,i=-1)},w=S=>{u||m()};return r.$$set=S=>{"onSelect"in S&&t(0,s=S.onSelect)},[s,o,a,i,u,h,l,n,m,b,p,_,w]}class Cc extends st{constructor(e){super(),ot(this,e,Ic,$c,nt,{onSelect:0})}}function xr(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function Sc(r){let e,t,l;return t=new dl({}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","py-4.5")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Tc(r){let e,t,l=ft(r[2]),n=[];for(let o=0;o<l.length;o+=1)n[o]=es(xr(r,l,o));const s=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){e=D("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(d),this.h()},h(){c(e,"class","flex flex-col gap-0.5")},m(o,a){B(o,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(o,a){if(a&29){l=ft(o[2]);let i;for(i=0;i<l.length;i+=1){const f=xr(o,l,i);n[i]?(n[i].p(f,a),v(n[i],1)):(n[i]=es(f),n[i].c(),v(n[i],1),n[i].m(e,null))}for(ce(),i=l.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)v(n[a]);t=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)$(n[a]);t=!1},d(o){o&&d(e),Rt(n,o)}}}function Dc(r){let e,t;return e=new Ki({props:{className:"size-4"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Mc(r){let e,t;return e=new ma({props:{className:"size-4"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Vc(r){let e,t,l,n;const s=[Mc,Dc],o=[];function a(i,f){var u;return((u=i[10])==null?void 0:u.type)==="collection"?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e!==u&&(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t||(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function Nc(r){var n;let e,t=nl((n=r[10])==null?void 0:n.name)+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);l=Ie(o,t),o.forEach(d),this.h()},h(){c(e,"class","line-clamp-1 flex-1")},m(s,o){B(s,e,o),y(e,l)},p(s,o){var a;o&4&&t!==(t=nl((a=s[10])==null?void 0:a.name)+"")&&Ce(l,t)},d(s){s&&d(e)}}}function es(r){var p,_,w,S;let e,t,l,n,s,o,a,i,f,u,h;l=new tt({props:{content:(p=r[10])!=null&&p.legacy?r[4].t("Legacy"):((_=r[10])==null?void 0:_.type)==="file"?r[4].t("File"):((w=r[10])==null?void 0:w.type)==="collection"?r[4].t("Collection"):"",placement:"top",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),s=new tt({props:{content:r[10].description||nl((S=r[10])==null?void 0:S.name),placement:"top-start",$$slots:{default:[Nc]},$$scope:{ctx:r}}});function m(){return r[6](r[10])}function g(){return r[7](r[12])}function b(){return r[8](r[12])}return{c(){e=D("button"),t=D("div"),F(l.$$.fragment),n=W(),F(s.$$.fragment),o=W(),this.h()},l(k){e=M(k,"BUTTON",{class:!0,type:!0,"data-selected":!0});var I=E(e);t=M(I,"DIV",{class:!0});var T=E(t);L(l.$$.fragment,T),n=G(T),L(s.$$.fragment,T),T.forEach(d),o=G(I),I.forEach(d),this.h()},h(){c(t,"class","text-black dark:text-gray-100 flex items-center gap-1"),c(e,"class",a="px-2.5 py-1 rounded-xl w-full text-left flex justify-between items-center text-sm "+(r[12]===r[3]?" bg-gray-50 dark:bg-gray-800 dark:text-gray-100 selected-command-option-button":"")),c(e,"type","button"),c(e,"data-selected",i=r[12]===r[3])},m(k,I){B(k,e,I),y(e,t),j(l,t,null),y(t,n),j(s,t,null),y(e,o),f=!0,u||(h=[Ne(e,"click",m),Ne(e,"mousemove",g),Ne(e,"mouseleave",b)],u=!0)},p(k,I){var N,U,O,A;r=k;const T={};I&20&&(T.content=(N=r[10])!=null&&N.legacy?r[4].t("Legacy"):((U=r[10])==null?void 0:U.type)==="file"?r[4].t("File"):((O=r[10])==null?void 0:O.type)==="collection"?r[4].t("Collection"):""),I&8196&&(T.$$scope={dirty:I,ctx:r}),l.$set(T);const C={};I&4&&(C.content=r[10].description||nl((A=r[10])==null?void 0:A.name)),I&8196&&(C.$$scope={dirty:I,ctx:r}),s.$set(C),(!f||I&8&&a!==(a="px-2.5 py-1 rounded-xl w-full text-left flex justify-between items-center text-sm "+(r[12]===r[3]?" bg-gray-50 dark:bg-gray-800 dark:text-gray-100 selected-command-option-button":"")))&&c(e,"class",a),(!f||I&8&&i!==(i=r[12]===r[3]))&&c(e,"data-selected",i)},i(k){f||(v(l.$$.fragment,k),v(s.$$.fragment,k),f=!0)},o(k){$(l.$$.fragment,k),$(s.$$.fragment,k),f=!1},d(k){k&&d(e),R(l),R(s),u=!1,ul(h)}}}function Bc(r){let e,t,l,n;const s=[Tc,Sc],o=[];function a(i,f){return i[1]?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,[f]){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function Oc(r,e,t){let l,n;Ee(r,pn,g=>t(9,l=g));const s=Ot("i18n");Ee(r,s,g=>t(4,n=g));let{onSelect:o=g=>{}}=e,a=!1,i=[],f=0;vl(async()=>{l===null&&await pn.set(await ba(localStorage.token));let g=l.filter(w=>{var S;return(S=w==null?void 0:w.meta)==null?void 0:S.document}).map(w=>({...w,type:"file"})),b=g.length>0?[{name:"All Documents",legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",title:n.t("All Documents"),collection_names:g.map(w=>w.id)},...g.reduce((w,S)=>{var k;return[...new Set([...w,...(((k=S==null?void 0:S.meta)==null?void 0:k.tags)??[]).map(I=>I.name)])]},[]).map(w=>({name:w,legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",collection_names:g.filter(S=>{var k;return(((k=S==null?void 0:S.meta)==null?void 0:k.tags)??[]).map(I=>I.name).includes(w)}).map(S=>S.id)}))]:[],p=l.filter(w=>{var S;return!((S=w==null?void 0:w.meta)!=null&&S.document)}).map(w=>({...w,type:"collection"})),_=l.length>0?[...l.reduce((w,S)=>[...new Set([...w,...((S==null?void 0:S.files)??[]).map(k=>({...k,collection:{name:S.name,description:S.description}}))])],[]).map(w=>{var S,k,I;return{...w,name:(S=w==null?void 0:w.meta)==null?void 0:S.name,description:`${(k=w==null?void 0:w.collection)==null?void 0:k.name} - ${(I=w==null?void 0:w.collection)==null?void 0:I.description}`,knowledge:!0,type:"file"}})]:[];t(2,i=[...p,..._,...b,...g].map(w=>{var S,k;return{...w,...w!=null&&w.legacy||(S=w==null?void 0:w.meta)!=null&&S.legacy||(k=w==null?void 0:w.meta)!=null&&k.document?{legacy:!0}:{}}})),await qe(),t(1,a=!0)});const u=g=>{o(g)},h=g=>{t(3,f=g)},m=g=>{g===0&&t(3,f=-1)};return r.$$set=g=>{"onSelect"in g&&t(0,o=g.onSelect)},[o,a,i,f,n,s,u,h,m]}class zc extends st{constructor(e){super(),ot(this,e,Oc,Bc,nt,{onSelect:0})}}function Ac(r){let e,t,l,n=r[2].t("Attach Webpage")+"",s,o,a,i,f,u,h,m,g,b,p=r[2].t("Webpage URL")+"",_,w,S,k,I,T,C,N,U=r[2].t("Add")+"",O,A,P,J;return i=new hl({props:{className:"size-5"}}),{c(){e=D("div"),t=D("div"),l=D("h1"),s=$e(n),o=W(),a=D("button"),F(i.$$.fragment),u=W(),h=D("div"),m=D("form"),g=D("div"),b=D("label"),_=$e(p),S=W(),k=D("input"),T=W(),C=D("div"),N=D("button"),O=$e(U),this.h()},l(Z){e=M(Z,"DIV",{class:!0});var X=E(e);t=M(X,"DIV",{class:!0});var Q=E(t);l=M(Q,"H1",{class:!0});var re=E(l);s=Ie(re,n),re.forEach(d),o=G(Q),a=M(Q,"BUTTON",{class:!0,"aria-label":!0});var _e=E(a);L(i.$$.fragment,_e),_e.forEach(d),Q.forEach(d),u=G(X),h=M(X,"DIV",{class:!0});var De=E(h);m=M(De,"FORM",{});var x=E(m);g=M(x,"DIV",{class:!0});var be=E(g);b=M(be,"LABEL",{for:!0,class:!0});var Me=E(b);_=Ie(Me,p),Me.forEach(d),be.forEach(d),S=G(x),k=M(x,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0,autocomplete:!0}),T=G(x),C=M(x,"DIV",{class:!0});var oe=E(C);N=M(oe,"BUTTON",{class:!0,type:!0});var Je=E(N);O=Ie(Je,U),Je.forEach(d),oe.forEach(d),x.forEach(d),De.forEach(d),X.forEach(d),this.h()},h(){var Z,X;c(l,"class","text-lg font-medium self-center font-primary"),c(a,"class","self-center"),c(a,"aria-label",f=r[2].t("Close modal")),c(t,"class","flex justify-between items-center dark:text-gray-100 px-5 pt-4 pb-1.5"),c(b,"for","webpage-url"),c(b,"class",w=`text-xs ${((Z=r[3])==null?void 0:Z.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-500"}`),c(g,"class","flex justify-between mb-0.5"),c(k,"id","webpage-url"),c(k,"class",I=`w-full flex-1 text-sm bg-transparent ${((X=r[3])==null?void 0:X.highContrastMode)??!1?"placeholder:text-gray-700 dark:placeholder:text-gray-100":"outline-hidden placeholder:text-gray-300 dark:placeholder:text-gray-700"}`),c(k,"type","text"),c(k,"placeholder","https://example.com"),c(k,"autocomplete","off"),k.required=!0,c(N,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-800 text-white dark:bg-white dark:text-black dark:hover:bg-gray-200 transition rounded-full"),c(N,"type","submit"),c(C,"class","flex justify-end gap-2 pt-3 bg-gray-50 dark:bg-gray-900/50"),c(h,"class","px-5 pb-4"),c(e,"class","flex flex-col h-full")},m(Z,X){B(Z,e,X),y(e,t),y(t,l),y(l,s),y(t,o),y(t,a),j(i,a,null),y(e,u),y(e,h),y(h,m),y(m,g),y(g,b),y(b,_),y(m,S),y(m,k),ll(k,r[1]),y(m,T),y(m,C),y(C,N),y(N,O),A=!0,P||(J=[Ne(a,"click",r[7]),Ne(k,"input",r[8]),Ne(m,"submit",r[9])],P=!0)},p(Z,X){var Q,re;(!A||X&4)&&n!==(n=Z[2].t("Attach Webpage")+"")&&Ce(s,n),(!A||X&4&&f!==(f=Z[2].t("Close modal")))&&c(a,"aria-label",f),(!A||X&4)&&p!==(p=Z[2].t("Webpage URL")+"")&&Ce(_,p),(!A||X&8&&w!==(w=`text-xs ${((Q=Z[3])==null?void 0:Q.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-500"}`))&&c(b,"class",w),(!A||X&8&&I!==(I=`w-full flex-1 text-sm bg-transparent ${((re=Z[3])==null?void 0:re.highContrastMode)??!1?"placeholder:text-gray-700 dark:placeholder:text-gray-100":"outline-hidden placeholder:text-gray-300 dark:placeholder:text-gray-700"}`))&&c(k,"class",I),X&2&&k.value!==Z[1]&&ll(k,Z[1]),(!A||X&4)&&U!==(U=Z[2].t("Add")+"")&&Ce(O,U)},i(Z){A||(v(i.$$.fragment,Z),A=!0)},o(Z){$(i.$$.fragment,Z),A=!1},d(Z){Z&&d(e),R(i),P=!1,ul(J)}}}function Uc(r){let e,t,l;function n(o){r[10](o)}let s={size:"sm",$$slots:{default:[Ac]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.show=r[0]),e=new wa({props:s}),Be.push(()=>Le(e,"show",n)),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,[a]){const i={};a&2063&&(i.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,i.show=o[0],je(()=>t=!1)),e.$set(i)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function Pc(r,e,t){let l,n;Ee(r,Wt,b=>t(3,n=b));const s=Ot("i18n");Ee(r,s,b=>t(2,l=b));let{show:o=!1}=e,{onSubmit:a}=e,i="";const f=()=>{fi(i)?(a({type:ci(i)?"youtube":"web",data:i}),t(0,o=!1),t(1,i="")):Ue.error(l.t("Please enter a valid URL."))},u=()=>{t(0,o=!1)};function h(){i=this.value,t(1,i)}const m=b=>{b.preventDefault(),f()};function g(b){o=b,t(0,o)}return r.$$set=b=>{"show"in b&&t(0,o=b.show),"onSubmit"in b&&t(6,a=b.onSubmit)},[o,i,l,n,s,f,a,u,h,m,g]}class Fc extends st{constructor(e){super(),ot(this,e,Pc,Uc,nt,{show:0,onSubmit:6})}}function Lc(r){let e;const t=r[23].default,l=vn(t,r,r[42],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s[1]&2048)&&wn(l,t,n,n[42],e?yn(t,n[42],s,null):kn(n[42]),null)},i(n){e||(v(l,n),e=!0)},o(n){$(l,n),e=!1},d(n){l&&l.d(n)}}}function jc(r){let e,t;return e=new tt({props:{content:r[13].t("More"),$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&8192&&(s.content=l[13].t("More")),n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Rc(r){var w,S,k,I;let e,t,l,n,s,o,a=r[13].t("Microsoft OneDrive")+"",i,f,u,h,m,g,b;l=new rn({});let p=((S=(w=r[14])==null?void 0:w.features)==null?void 0:S.enable_onedrive_personal)&&ts(r),_=((I=(k=r[14])==null?void 0:k.features)==null?void 0:I.enable_onedrive_business)&&ls(r);return{c(){e=D("div"),t=D("button"),F(l.$$.fragment),n=W(),s=D("div"),o=D("div"),i=$e(a),f=W(),p&&p.c(),u=W(),_&&_.c(),this.h()},l(T){e=M(T,"DIV",{});var C=E(e);t=M(C,"BUTTON",{class:!0});var N=E(t);L(l.$$.fragment,N),n=G(N),s=M(N,"DIV",{class:!0});var U=E(s);o=M(U,"DIV",{});var O=E(o);i=Ie(O,a),O.forEach(d),U.forEach(d),N.forEach(d),f=G(C),p&&p.l(C),u=G(C),_&&_.l(C),C.forEach(d),this.h()},h(){c(s,"class","flex items-center w-full justify-between"),c(t,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(T,C){B(T,e,C),y(e,t),j(l,t,null),y(t,n),y(t,s),y(s,o),y(o,i),y(e,f),p&&p.m(e,null),y(e,u),_&&_.m(e,null),m=!0,g||(b=Ne(t,"click",r[37]),g=!0)},p(T,C){var N,U,O,A;(!m||C[0]&8192)&&a!==(a=T[13].t("Microsoft OneDrive")+"")&&Ce(i,a),(U=(N=T[14])==null?void 0:N.features)!=null&&U.enable_onedrive_personal?p?(p.p(T,C),C[0]&16384&&v(p,1)):(p=ts(T),p.c(),v(p,1),p.m(e,u)):p&&(ce(),$(p,1,1,()=>{p=null}),ue()),(A=(O=T[14])==null?void 0:O.features)!=null&&A.enable_onedrive_business?_?(_.p(T,C),C[0]&16384&&v(_,1)):(_=ls(T),_.c(),v(_,1),_.m(e,null)):_&&(ce(),$(_,1,1,()=>{_=null}),ue())},i(T){m||(v(l.$$.fragment,T),v(p),v(_),T&&(h||Gt(()=>{h=Qt(e,Bl,{x:20,duration:150}),h.start()})),m=!0)},o(T){$(l.$$.fragment,T),$(p),$(_),m=!1},d(T){T&&d(e),R(l),p&&p.d(),_&&_.d(),g=!1,b()}}}function Hc(r){let e,t,l,n,s,o,a=r[13].t("Chats")+"",i,f,u,h,m,g,b;return l=new rn({}),u=new gc({props:{onSelect:r[19]}}),{c(){e=D("div"),t=D("button"),F(l.$$.fragment),n=W(),s=D("div"),o=D("div"),i=$e(a),f=W(),F(u.$$.fragment),this.h()},l(p){e=M(p,"DIV",{});var _=E(e);t=M(_,"BUTTON",{class:!0});var w=E(t);L(l.$$.fragment,w),n=G(w),s=M(w,"DIV",{class:!0});var S=E(s);o=M(S,"DIV",{});var k=E(o);i=Ie(k,a),k.forEach(d),S.forEach(d),w.forEach(d),f=G(_),L(u.$$.fragment,_),_.forEach(d),this.h()},h(){c(s,"class","flex items-center w-full justify-between"),c(t,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(p,_){B(p,e,_),y(e,t),j(l,t,null),y(t,n),y(t,s),y(s,o),y(o,i),y(e,f),j(u,e,null),m=!0,g||(b=Ne(t,"click",r[36]),g=!0)},p(p,_){(!m||_[0]&8192)&&a!==(a=p[13].t("Chats")+"")&&Ce(i,a)},i(p){m||(v(l.$$.fragment,p),v(u.$$.fragment,p),p&&(h||Gt(()=>{h=Qt(e,Bl,{x:20,duration:150}),h.start()})),m=!0)},o(p){$(l.$$.fragment,p),$(u.$$.fragment,p),m=!1},d(p){p&&d(e),R(l),R(u),g=!1,b()}}}function Wc(r){let e,t,l,n,s,o,a=r[13].t("Notes")+"",i,f,u,h,m,g,b;return l=new rn({}),u=new Cc({props:{onSelect:r[19]}}),{c(){e=D("div"),t=D("button"),F(l.$$.fragment),n=W(),s=D("div"),o=D("div"),i=$e(a),f=W(),F(u.$$.fragment),this.h()},l(p){e=M(p,"DIV",{});var _=E(e);t=M(_,"BUTTON",{class:!0});var w=E(t);L(l.$$.fragment,w),n=G(w),s=M(w,"DIV",{class:!0});var S=E(s);o=M(S,"DIV",{});var k=E(o);i=Ie(k,a),k.forEach(d),S.forEach(d),w.forEach(d),f=G(_),L(u.$$.fragment,_),_.forEach(d),this.h()},h(){c(s,"class","flex items-center w-full justify-between"),c(t,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(p,_){B(p,e,_),y(e,t),j(l,t,null),y(t,n),y(t,s),y(s,o),y(o,i),y(e,f),j(u,e,null),m=!0,g||(b=Ne(t,"click",r[35]),g=!0)},p(p,_){(!m||_[0]&8192)&&a!==(a=p[13].t("Notes")+"")&&Ce(i,a)},i(p){m||(v(l.$$.fragment,p),v(u.$$.fragment,p),p&&(h||Gt(()=>{h=Qt(e,Bl,{x:20,duration:150}),h.start()})),m=!0)},o(p){$(l.$$.fragment,p),$(u.$$.fragment,p),m=!1},d(p){p&&d(e),R(l),R(u),g=!1,b()}}}function Gc(r){let e,t,l,n,s,o,a=r[13].t("Knowledge")+"",i,f,u,h,m,g,b;return l=new rn({}),u=new zc({props:{onSelect:r[19]}}),{c(){e=D("div"),t=D("button"),F(l.$$.fragment),n=W(),s=D("div"),o=D("div"),i=$e(a),f=W(),F(u.$$.fragment),this.h()},l(p){e=M(p,"DIV",{});var _=E(e);t=M(_,"BUTTON",{class:!0});var w=E(t);L(l.$$.fragment,w),n=G(w),s=M(w,"DIV",{class:!0});var S=E(s);o=M(S,"DIV",{});var k=E(o);i=Ie(k,a),k.forEach(d),S.forEach(d),w.forEach(d),f=G(_),L(u.$$.fragment,_),_.forEach(d),this.h()},h(){c(s,"class","flex items-center w-full justify-between"),c(t,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(p,_){B(p,e,_),y(e,t),j(l,t,null),y(t,n),y(t,s),y(s,o),y(o,i),y(e,f),j(u,e,null),m=!0,g||(b=Ne(t,"click",r[34]),g=!0)},p(p,_){(!m||_[0]&8192)&&a!==(a=p[13].t("Knowledge")+"")&&Ce(i,a)},i(p){m||(v(l.$$.fragment,p),v(u.$$.fragment,p),p&&(h||Gt(()=>{h=Qt(e,Bl,{x:20,duration:150}),h.start()})),m=!0)},o(p){$(l.$$.fragment,p),$(u.$$.fragment,p),m=!1},d(p){p&&d(e),R(l),R(u),g=!1,b()}}}function Jc(r){var w,S;let e,t,l,n,s,o,a,i,f,u,h,m;t=new tt({props:{content:r[1].length!==r[0].length?r[13].t("Model(s) do not support file upload"):r[11]?"":r[13].t("You do not have permission to upload files."),className:"w-full",$$slots:{default:[Kc]},$$scope:{ctx:r}}}),n=new tt({props:{content:r[1].length!==r[0].length?r[13].t("Model(s) do not support file upload"):r[11]?"":r[13].t("You do not have permission to upload files."),className:"w-full",$$slots:{default:[Qc]},$$scope:{ctx:r}}}),o=new tt({props:{content:r[1].length!==r[0].length?r[13].t("Model(s) do not support file upload"):r[11]?"":r[13].t("You do not have permission to upload files."),className:"w-full",$$slots:{default:[eu]},$$scope:{ctx:r}}});let g=(((S=(w=r[14])==null?void 0:w.features)==null?void 0:S.enable_notes)??!1)&&ns(r),b=(r[12]??[]).length>0&&rs(r),p=(r[15]??[]).length>0&&ss(r),_=r[11]&&os(r);return{c(){e=D("div"),F(t.$$.fragment),l=W(),F(n.$$.fragment),s=W(),F(o.$$.fragment),a=W(),g&&g.c(),i=W(),b&&b.c(),f=W(),p&&p.c(),u=W(),_&&_.c()},l(k){e=M(k,"DIV",{});var I=E(e);L(t.$$.fragment,I),l=G(I),L(n.$$.fragment,I),s=G(I),L(o.$$.fragment,I),a=G(I),g&&g.l(I),i=G(I),b&&b.l(I),f=G(I),p&&p.l(I),u=G(I),_&&_.l(I),I.forEach(d)},m(k,I){B(k,e,I),j(t,e,null),y(e,l),j(n,e,null),y(e,s),j(o,e,null),y(e,a),g&&g.m(e,null),y(e,i),b&&b.m(e,null),y(e,f),p&&p.m(e,null),y(e,u),_&&_.m(e,null),m=!0},p(k,I){var U,O;const T={};I[0]&10243&&(T.content=k[1].length!==k[0].length?k[13].t("Model(s) do not support file upload"):k[11]?"":k[13].t("You do not have permission to upload files.")),I[0]&10248|I[1]&2048&&(T.$$scope={dirty:I,ctx:k}),t.$set(T);const C={};I[0]&10243&&(C.content=k[1].length!==k[0].length?k[13].t("Model(s) do not support file upload"):k[11]?"":k[13].t("You do not have permission to upload files.")),I[0]&10244|I[1]&2048&&(C.$$scope={dirty:I,ctx:k}),n.$set(C);const N={};I[0]&10243&&(N.content=k[1].length!==k[0].length?k[13].t("Model(s) do not support file upload"):k[11]?"":k[13].t("You do not have permission to upload files.")),I[0]&11264|I[1]&2048&&(N.$$scope={dirty:I,ctx:k}),o.$set(N),((O=(U=k[14])==null?void 0:U.features)==null?void 0:O.enable_notes)??!1?g?(g.p(k,I),I[0]&16384&&v(g,1)):(g=ns(k),g.c(),v(g,1),g.m(e,i)):g&&(ce(),$(g,1,1,()=>{g=null}),ue()),(k[12]??[]).length>0?b?(b.p(k,I),I[0]&4096&&v(b,1)):(b=rs(k),b.c(),v(b,1),b.m(e,f)):b&&(ce(),$(b,1,1,()=>{b=null}),ue()),(k[15]??[]).length>0?p?(p.p(k,I),I[0]&32768&&v(p,1)):(p=ss(k),p.c(),v(p,1),p.m(e,u)):p&&(ce(),$(p,1,1,()=>{p=null}),ue()),k[11]?_?(_.p(k,I),I[0]&2048&&v(_,1)):(_=os(k),_.c(),v(_,1),_.m(e,null)):_&&(ce(),$(_,1,1,()=>{_=null}),ue())},i(k){m||(v(t.$$.fragment,k),v(n.$$.fragment,k),v(o.$$.fragment,k),v(g),v(b),v(p),v(_),k&&(h||Gt(()=>{h=Qt(e,Bl,{x:-20,duration:150}),h.start()})),m=!0)},o(k){$(t.$$.fragment,k),$(n.$$.fragment,k),$(o.$$.fragment,k),$(g),$(b),$(p),$(_),m=!1},d(k){k&&d(e),R(t),R(n),R(o),g&&g.d(),b&&b.d(),p&&p.d(),_&&_.d()}}}function ts(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl text-left",$$slots:{default:[qc]},$$scope:{ctx:r}}}),e.$on("click",r[38]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&8192|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function qc(r){let e,t,l=r[13].t("Microsoft OneDrive (personal)")+"",n;return{c(){e=D("div"),t=D("div"),n=$e(l),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);t=M(o,"DIV",{class:!0});var a=E(t);n=Ie(a,l),a.forEach(d),o.forEach(d),this.h()},h(){c(t,"class","line-clamp-1"),c(e,"class","flex flex-col")},m(s,o){B(s,e,o),y(e,t),y(t,n)},p(s,o){o[0]&8192&&l!==(l=s[13].t("Microsoft OneDrive (personal)")+"")&&Ce(n,l)},d(s){s&&d(e)}}}function ls(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl text-left",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),e.$on("click",r[39]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&8192|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Zc(r){let e,t,l=r[13].t("Microsoft OneDrive (work/school)")+"",n,s,o,a=r[13].t("Includes SharePoint")+"",i;return{c(){e=D("div"),t=D("div"),n=$e(l),s=W(),o=D("div"),i=$e(a),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=E(e);t=M(u,"DIV",{class:!0});var h=E(t);n=Ie(h,l),h.forEach(d),s=G(u),o=M(u,"DIV",{class:!0});var m=E(o);i=Ie(m,a),m.forEach(d),u.forEach(d),this.h()},h(){c(t,"class","line-clamp-1"),c(o,"class","text-xs text-gray-500"),c(e,"class","flex flex-col")},m(f,u){B(f,e,u),y(e,t),y(t,n),y(e,s),y(e,o),y(o,i)},p(f,u){u[0]&8192&&l!==(l=f[13].t("Microsoft OneDrive (work/school)")+"")&&Ce(n,l),u[0]&8192&&a!==(a=f[13].t("Includes SharePoint")+"")&&Ce(i,a)},d(f){f&&d(e)}}}function Yc(r){let e,t,l,n=r[13].t("Upload Files")+"",s,o;return e=new Ya({}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","line-clamp-1")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&8192)&&n!==(n=a[13].t("Upload Files")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function Kc(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(r[11]?"":"opacity-50"),$$slots:{default:[Yc]},$$scope:{ctx:r}}}),e.$on("click",r[26]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&2048&&(s.class="flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(l[11]?"":"opacity-50")),n[0]&8192|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Xc(r){let e,t,l,n=r[13].t("Capture")+"",s,o;return e=new Ka({}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","line-clamp-1")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&8192)&&n!==(n=a[13].t("Capture")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function Qc(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50  rounded-xl "+(r[11]?"":"opacity-50"),$$slots:{default:[Xc]},$$scope:{ctx:r}}}),e.$on("click",r[27]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&2048&&(s.class="flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50  rounded-xl "+(l[11]?"":"opacity-50")),n[0]&8192|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function xc(r){let e,t,l,n=r[13].t("Attach Webpage")+"",s,o;return e=new Or({}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","line-clamp-1")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&8192)&&n!==(n=a[13].t("Attach Webpage")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function eu(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[xc]},$$scope:{ctx:r}}}),e.$on("click",r[28]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&8192|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function ns(r){let e,t;return e=new tt({props:{content:r[1].length!==r[0].length?r[13].t("Model(s) do not support file upload"):r[11]?"":r[13].t("You do not have permission to upload files."),className:"w-full",$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&10243&&(s.content=l[1].length!==l[0].length?l[13].t("Model(s) do not support file upload"):l[11]?"":l[13].t("You do not have permission to upload files.")),n[0]&10752|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function tu(r){let e,t,l,n,s,o=r[13].t("Attach Notes")+"",a,i,f,u,h,m,g,b;return t=new ha({}),u=new nn({}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("div"),s=D("div"),a=$e(o),i=W(),f=D("div"),F(u.$$.fragment),this.h()},l(p){e=M(p,"BUTTON",{class:!0});var _=E(e);L(t.$$.fragment,_),l=G(_),n=M(_,"DIV",{class:!0});var w=E(n);s=M(w,"DIV",{class:!0});var S=E(s);a=Ie(S,o),S.forEach(d),i=G(w),f=M(w,"DIV",{class:!0});var k=E(f);L(u.$$.fragment,k),k.forEach(d),w.forEach(d),_.forEach(d),this.h()},h(){c(s,"class","line-clamp-1"),c(f,"class","text-gray-500"),c(n,"class","flex items-center w-full justify-between"),c(e,"class",h="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(r[11]?"":"opacity-50"))},m(p,_){B(p,e,_),j(t,e,null),y(e,l),y(e,n),y(n,s),y(s,a),y(n,i),y(n,f),j(u,f,null),m=!0,g||(b=Ne(e,"click",r[29]),g=!0)},p(p,_){(!m||_[0]&8192)&&o!==(o=p[13].t("Attach Notes")+"")&&Ce(a,o),(!m||_[0]&2048&&h!==(h="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(p[11]?"":"opacity-50")))&&c(e,"class",h)},i(p){m||(v(t.$$.fragment,p),v(u.$$.fragment,p),m=!0)},o(p){$(t.$$.fragment,p),$(u.$$.fragment,p),m=!1},d(p){p&&d(e),R(t),R(u),g=!1,b()}}}function rs(r){let e,t;return e=new tt({props:{content:r[1].length!==r[0].length?r[13].t("Model(s) do not support file upload"):r[11]?"":r[13].t("You do not have permission to upload files."),className:"w-full",$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&10243&&(s.content=l[1].length!==l[0].length?l[13].t("Model(s) do not support file upload"):l[11]?"":l[13].t("You do not have permission to upload files.")),n[0]&10752|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function lu(r){let e,t,l,n,s,o=r[13].t("Attach Knowledge")+"",a,i,f,u,h,m,g,b;return t=new ma({}),u=new nn({}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("div"),s=D("div"),a=$e(o),i=W(),f=D("div"),F(u.$$.fragment),this.h()},l(p){e=M(p,"BUTTON",{class:!0});var _=E(e);L(t.$$.fragment,_),l=G(_),n=M(_,"DIV",{class:!0});var w=E(n);s=M(w,"DIV",{class:!0});var S=E(s);a=Ie(S,o),S.forEach(d),i=G(w),f=M(w,"DIV",{class:!0});var k=E(f);L(u.$$.fragment,k),k.forEach(d),w.forEach(d),_.forEach(d),this.h()},h(){c(s,"class","line-clamp-1"),c(f,"class","text-gray-500"),c(n,"class","flex items-center w-full justify-between"),c(e,"class",h="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(r[11]?"":"opacity-50"))},m(p,_){B(p,e,_),j(t,e,null),y(e,l),y(e,n),y(n,s),y(s,a),y(n,i),y(n,f),j(u,f,null),m=!0,g||(b=Ne(e,"click",r[30]),g=!0)},p(p,_){(!m||_[0]&8192)&&o!==(o=p[13].t("Attach Knowledge")+"")&&Ce(a,o),(!m||_[0]&2048&&h!==(h="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(p[11]?"":"opacity-50")))&&c(e,"class",h)},i(p){m||(v(t.$$.fragment,p),v(u.$$.fragment,p),m=!0)},o(p){$(t.$$.fragment,p),$(u.$$.fragment,p),m=!1},d(p){p&&d(e),R(t),R(u),g=!1,b()}}}function ss(r){let e,t;return e=new tt({props:{content:r[1].length!==r[0].length?r[13].t("Model(s) do not support file upload"):r[11]?"":r[13].t("You do not have permission to upload files."),className:"w-full",$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&10243&&(s.content=l[1].length!==l[0].length?l[13].t("Model(s) do not support file upload"):l[11]?"":l[13].t("You do not have permission to upload files.")),n[0]&10752|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function nu(r){let e,t,l,n,s,o=r[13].t("Reference Chats")+"",a,i,f,u,h,m,g,b;return t=new ac({}),u=new nn({}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("div"),s=D("div"),a=$e(o),i=W(),f=D("div"),F(u.$$.fragment),this.h()},l(p){e=M(p,"BUTTON",{class:!0});var _=E(e);L(t.$$.fragment,_),l=G(_),n=M(_,"DIV",{class:!0});var w=E(n);s=M(w,"DIV",{class:!0});var S=E(s);a=Ie(S,o),S.forEach(d),i=G(w),f=M(w,"DIV",{class:!0});var k=E(f);L(u.$$.fragment,k),k.forEach(d),w.forEach(d),_.forEach(d),this.h()},h(){c(s,"class","line-clamp-1"),c(f,"class","text-gray-500"),c(n,"class","flex items-center w-full justify-between"),c(e,"class",h="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(r[11]?"":"opacity-50"))},m(p,_){B(p,e,_),j(t,e,null),y(e,l),y(e,n),y(n,s),y(s,a),y(n,i),y(n,f),j(u,f,null),m=!0,g||(b=Ne(e,"click",r[31]),g=!0)},p(p,_){(!m||_[0]&8192)&&o!==(o=p[13].t("Reference Chats")+"")&&Ce(a,o),(!m||_[0]&2048&&h!==(h="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(p[11]?"":"opacity-50")))&&c(e,"class",h)},i(p){m||(v(t.$$.fragment,p),v(u.$$.fragment,p),m=!0)},o(p){$(t.$$.fragment,p),$(u.$$.fragment,p),m=!1},d(p){p&&d(e),R(t),R(u),g=!1,b()}}}function os(r){var o,a,i,f,u,h,m,g;let e,t,l,n=((a=(o=r[14])==null?void 0:o.features)==null?void 0:a.enable_google_drive_integration)&&as(r),s=((f=(i=r[14])==null?void 0:i.features)==null?void 0:f.enable_onedrive_integration)&&(((h=(u=r[14])==null?void 0:u.features)==null?void 0:h.enable_onedrive_personal)||((g=(m=r[14])==null?void 0:m.features)==null?void 0:g.enable_onedrive_business))&&is(r);return{c(){n&&n.c(),e=W(),s&&s.c(),t=Oe()},l(b){n&&n.l(b),e=G(b),s&&s.l(b),t=Oe()},m(b,p){n&&n.m(b,p),B(b,e,p),s&&s.m(b,p),B(b,t,p),l=!0},p(b,p){var _,w,S,k,I,T,C,N;(w=(_=b[14])==null?void 0:_.features)!=null&&w.enable_google_drive_integration?n?(n.p(b,p),p[0]&16384&&v(n,1)):(n=as(b),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(ce(),$(n,1,1,()=>{n=null}),ue()),(k=(S=b[14])==null?void 0:S.features)!=null&&k.enable_onedrive_integration&&((T=(I=b[14])==null?void 0:I.features)!=null&&T.enable_onedrive_personal||(N=(C=b[14])==null?void 0:C.features)!=null&&N.enable_onedrive_business)?s?(s.p(b,p),p[0]&16384&&v(s,1)):(s=is(b),s.c(),v(s,1),s.m(t.parentNode,t)):s&&(ce(),$(s,1,1,()=>{s=null}),ue())},i(b){l||(v(n),v(s),l=!0)},o(b){$(n),$(s),l=!1},d(b){b&&(d(e),d(t)),n&&n.d(b),s&&s.d(b)}}}function as(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl",$$slots:{default:[ru]},$$scope:{ctx:r}}}),e.$on("click",r[32]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&8192|n[1]&2048&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function ru(r){let e,t,l,n,s,o,a,i,f,u=r[13].t("Google Drive")+"",h;return{c(){e=we("svg"),t=we("path"),l=we("path"),n=we("path"),s=we("path"),o=we("path"),a=we("path"),i=W(),f=D("div"),h=$e(u),this.h()},l(m){e=ke(m,"svg",{xmlns:!0,viewBox:!0,class:!0});var g=E(e);t=ke(g,"path",{d:!0,fill:!0}),E(t).forEach(d),l=ke(g,"path",{d:!0,fill:!0}),E(l).forEach(d),n=ke(g,"path",{d:!0,fill:!0}),E(n).forEach(d),s=ke(g,"path",{d:!0,fill:!0}),E(s).forEach(d),o=ke(g,"path",{d:!0,fill:!0}),E(o).forEach(d),a=ke(g,"path",{d:!0,fill:!0}),E(a).forEach(d),g.forEach(d),i=G(m),f=M(m,"DIV",{class:!0});var b=E(f);h=Ie(b,u),b.forEach(d),this.h()},h(){c(t,"d","m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z"),c(t,"fill","#0066da"),c(l,"d","m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z"),c(l,"fill","#00ac47"),c(n,"d","m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z"),c(n,"fill","#ea4335"),c(s,"d","m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z"),c(s,"fill","#00832d"),c(o,"d","m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"),c(o,"fill","#2684fc"),c(a,"d","m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z"),c(a,"fill","#ffba00"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 87.3 78"),c(e,"class","w-4"),c(f,"class","line-clamp-1")},m(m,g){B(m,e,g),y(e,t),y(e,l),y(e,n),y(e,s),y(e,o),y(e,a),B(m,i,g),B(m,f,g),y(f,h)},p(m,g){g[0]&8192&&u!==(u=m[13].t("Google Drive")+"")&&Ce(h,u)},d(m){m&&(d(e),d(i),d(f))}}}function is(r){let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_,w,S,k,I,T,C,N,U,O,A=r[13].t("Microsoft OneDrive")+"",P,J,Z,X,Q,re,_e,De;return X=new nn({}),{c(){e=D("button"),t=we("svg"),l=we("mask"),n=we("path"),s=we("g"),o=we("path"),a=we("path"),i=we("path"),f=we("path"),u=we("defs"),h=we("linearGradient"),m=we("stop"),g=we("stop"),b=we("linearGradient"),p=we("stop"),_=we("stop"),w=we("linearGradient"),S=we("stop"),k=we("stop"),I=we("linearGradient"),T=we("stop"),C=we("stop"),N=W(),U=D("div"),O=D("div"),P=$e(A),J=W(),Z=D("div"),F(X.$$.fragment),this.h()},l(x){e=M(x,"BUTTON",{class:!0});var be=E(e);t=ke(be,"svg",{xmlns:!0,viewBox:!0,class:!0,fill:!0});var Me=E(t);l=ke(Me,"mask",{id:!0,style:!0,maskUnits:!0,x:!0,y:!0,width:!0,height:!0});var oe=E(l);n=ke(oe,"path",{d:!0,fill:!0}),E(n).forEach(d),oe.forEach(d),s=ke(Me,"g",{mask:!0});var Je=E(s);o=ke(Je,"path",{d:!0,fill:!0}),E(o).forEach(d),a=ke(Je,"path",{d:!0,fill:!0}),E(a).forEach(d),i=ke(Je,"path",{d:!0,fill:!0}),E(i).forEach(d),f=ke(Je,"path",{d:!0,fill:!0}),E(f).forEach(d),Je.forEach(d),u=ke(Me,"defs",{});var le=E(u);h=ke(le,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var ee=E(h);m=ke(ee,"stop",{"stop-color":!0}),E(m).forEach(d),g=ke(ee,"stop",{offset:!0,"stop-color":!0}),E(g).forEach(d),ee.forEach(d),b=ke(le,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var Se=E(b);p=ke(Se,"stop",{"stop-color":!0}),E(p).forEach(d),_=ke(Se,"stop",{offset:!0,"stop-color":!0}),E(_).forEach(d),Se.forEach(d),w=ke(le,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var ne=E(w);S=ke(ne,"stop",{"stop-color":!0}),E(S).forEach(d),k=ke(ne,"stop",{offset:!0,"stop-color":!0}),E(k).forEach(d),ne.forEach(d),I=ke(le,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var q=E(I);T=ke(q,"stop",{"stop-color":!0}),E(T).forEach(d),C=ke(q,"stop",{offset:!0,"stop-color":!0}),E(C).forEach(d),q.forEach(d),le.forEach(d),Me.forEach(d),N=G(be),U=M(be,"DIV",{class:!0});var Re=E(U);O=M(Re,"DIV",{class:!0});var ve=E(O);P=Ie(ve,A),ve.forEach(d),J=G(Re),Z=M(Re,"DIV",{class:!0});var se=E(Z);L(X.$$.fragment,se),se.forEach(d),Re.forEach(d),be.forEach(d),this.h()},h(){c(n,"d","M7.82979 26C3.50549 26 0 22.5675 0 18.3333C0 14.1921 3.35322 10.8179 7.54613 10.6716C9.27535 7.87166 12.4144 6 16 6C20.6308 6 24.5169 9.12183 25.5829 13.3335C29.1316 13.3603 32 16.1855 32 19.6667C32 23.0527 29 26 25.8723 25.9914L7.82979 26Z"),c(n,"fill","#C4C4C4"),c(l,"id","mask0_87_7796"),At(l,"mask-type","alpha"),c(l,"maskUnits","userSpaceOnUse"),c(l,"x","0"),c(l,"y","6"),c(l,"width","32"),c(l,"height","20"),c(o,"d","M7.83017 26.0001C5.37824 26.0001 3.18957 24.8966 1.75391 23.1691L18.0429 16.3335L30.7089 23.4647C29.5926 24.9211 27.9066 26.0001 26.0004 25.9915C23.1254 26.0001 12.0629 26.0001 7.83017 26.0001Z"),c(o,"fill","url(#paint0_linear_87_7796)"),c(a,"d","M25.5785 13.3149L18.043 16.3334L30.709 23.4647C31.5199 22.4065 32.0004 21.0916 32.0004 19.6669C32.0004 16.1857 29.1321 13.3605 25.5833 13.3337C25.5817 13.3274 25.5801 13.3212 25.5785 13.3149Z"),c(a,"fill","url(#paint1_linear_87_7796)"),c(i,"d","M7.06445 10.7028L18.0423 16.3333L25.5779 13.3148C24.5051 9.11261 20.6237 6 15.9997 6C12.4141 6 9.27508 7.87166 7.54586 10.6716C7.3841 10.6773 7.22358 10.6877 7.06445 10.7028Z"),c(i,"fill","url(#paint2_linear_87_7796)"),c(f,"d","M1.7535 23.1687L18.0425 16.3331L7.06471 10.7026C3.09947 11.0792 0 14.3517 0 18.3331C0 20.1665 0.657197 21.8495 1.7535 23.1687Z"),c(f,"fill","url(#paint3_linear_87_7796)"),c(s,"mask","url(#mask0_87_7796)"),c(m,"stop-color","#2086B8"),c(g,"offset","1"),c(g,"stop-color","#46D3F6"),c(h,"id","paint0_linear_87_7796"),c(h,"x1","4.42591"),c(h,"y1","24.6668"),c(h,"x2","27.2309"),c(h,"y2","23.2764"),c(h,"gradientUnits","userSpaceOnUse"),c(p,"stop-color","#1694DB"),c(_,"offset","1"),c(_,"stop-color","#62C3FE"),c(b,"id","paint1_linear_87_7796"),c(b,"x1","23.8302"),c(b,"y1","19.6668"),c(b,"x2","30.2108"),c(b,"y2","15.2082"),c(b,"gradientUnits","userSpaceOnUse"),c(S,"stop-color","#0D3D78"),c(k,"offset","1"),c(k,"stop-color","#063B83"),c(w,"id","paint2_linear_87_7796"),c(w,"x1","8.51037"),c(w,"y1","7.33333"),c(w,"x2","23.3335"),c(w,"y2","15.9348"),c(w,"gradientUnits","userSpaceOnUse"),c(T,"stop-color","#16589B"),c(C,"offset","1"),c(C,"stop-color","#1464B7"),c(I,"id","paint3_linear_87_7796"),c(I,"x1","-0.340429"),c(I,"y1","19.9998"),c(I,"x2","14.5634"),c(I,"y2","14.4649"),c(I,"gradientUnits","userSpaceOnUse"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"viewBox","0 0 32 32"),c(t,"class","size-4"),c(t,"fill","none"),c(O,"class","line-clamp-1"),c(Z,"class","text-gray-500"),c(U,"class","flex items-center w-full justify-between"),c(e,"class",Q="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(r[11]?"":"opacity-50"))},m(x,be){B(x,e,be),y(e,t),y(t,l),y(l,n),y(t,s),y(s,o),y(s,a),y(s,i),y(s,f),y(t,u),y(u,h),y(h,m),y(h,g),y(u,b),y(b,p),y(b,_),y(u,w),y(w,S),y(w,k),y(u,I),y(I,T),y(I,C),y(e,N),y(e,U),y(U,O),y(O,P),y(U,J),y(U,Z),j(X,Z,null),re=!0,_e||(De=Ne(e,"click",r[33]),_e=!0)},p(x,be){(!re||be[0]&8192)&&A!==(A=x[13].t("Microsoft OneDrive")+"")&&Ce(P,A),(!re||be[0]&2048&&Q!==(Q="flex gap-2 w-full items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-xl "+(x[11]?"":"opacity-50")))&&c(e,"class",Q)},i(x){re||(v(X.$$.fragment,x),re=!0)},o(x){$(X.$$.fragment,x),re=!1},d(x){x&&d(e),R(X),_e=!1,De()}}}function su(r){let e,t,l,n;const s=[Jc,Gc,Wc,Hc,Rc],o=[];function a(i,f){return i[9]===""?0:i[9]==="knowledge"?1:i[9]==="notes"?2:i[9]==="chats"?3:i[9]==="microsoft_onedrive"?4:-1}return~(e=a(r))&&(t=o[e]=s[e](r)),{c(){t&&t.c(),l=Oe()},l(i){t&&t.l(i),l=Oe()},m(i,f){~e&&o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?~e&&o[e].p(i,f):(t&&(ce(),$(o[u],1,1,()=>{o[u]=null}),ue()),~e?(t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l)):t=null)},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),~e&&o[e].d(i)}}}function ou(r){let e,t,l;return t=new Sn({props:{class:"w-full max-w-70 rounded-2xl px-1 py-1  border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg max-h-72 overflow-y-auto overflow-x-hidden scrollbar-thin transition",sideOffset:4,alignOffset:-6,side:"bottom",align:"start",transition:Fl,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{slot:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"slot","content")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[0]&65087|s[1]&2048&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function au(r){let e,t,l,n,s,o,a,i,f,u;function h(p){r[25](p)}let m={onSubmit:r[24]};r[10]!==void 0&&(m.show=r[10]),e=new Fc({props:m}),Be.push(()=>Le(e,"show",h));function g(p){r[40](p)}let b={$$slots:{content:[ou],default:[jc]},$$scope:{ctx:r}};return r[8]!==void 0&&(b.show=r[8]),o=new Tn({props:b}),Be.push(()=>Le(o,"show",g)),o.$on("change",r[41]),{c(){F(e.$$.fragment),l=W(),n=D("input"),s=W(),F(o.$$.fragment),this.h()},l(p){L(e.$$.fragment,p),l=G(p),n=M(p,"INPUT",{id:!0,type:!0,accept:!0,capture:!0,style:!0}),s=G(p),L(o.$$.fragment,p),this.h()},h(){c(n,"id","camera-input"),c(n,"type","file"),c(n,"accept","image/*"),c(n,"capture","environment"),At(n,"display","none")},m(p,_){j(e,p,_),B(p,l,_),B(p,n,_),B(p,s,_),j(o,p,_),i=!0,f||(u=Ne(n,"change",r[18]),f=!0)},p(p,_){const w={};_[0]&64&&(w.onSubmit=p[24]),!t&&_[0]&1024&&(t=!0,w.show=p[10],je(()=>t=!1)),e.$set(w);const S={};_[0]&65087|_[1]&2048&&(S.$$scope={dirty:_,ctx:p}),!a&&_[0]&256&&(a=!0,S.show=p[8],je(()=>a=!1)),o.$set(S)},i(p){i||(v(e.$$.fragment,p),v(o.$$.fragment,p),i=!0)},o(p){$(e.$$.fragment,p),$(o.$$.fragment,p),i=!1},d(p){p&&(d(l),d(n),d(s)),R(e,p),R(o,p),f=!1,u()}}}function iu(r,e,t){let l,n,s,o,a;Ee(r,pn,se=>t(12,l=se)),Ee(r,wl,se=>t(22,n=se)),Ee(r,Pl,se=>t(14,o=se)),Ee(r,sl,se=>t(15,a=se));let{$$slots:i={},$$scope:f}=e;const u=Ot("i18n");Ee(r,u,se=>t(13,s=se));let{files:h=[]}=e,{selectedModels:m=[]}=e,{fileUploadCapableModels:g=[]}=e,{screenCaptureHandler:b}=e,{uploadFilesHandler:p}=e,{inputFilesHandler:_}=e,{uploadGoogleDriveHandler:w}=e,{uploadOneDriveHandler:S}=e,{onUpload:k}=e,{onClose:I}=e,T=!1,C="",N=!1,U=!0;const O=()=>{const se=navigator.userAgent||navigator.vendor||window.opera;return/android|iphone|ipad|ipod|windows phone/i.test(se)},A=se=>{var We;const H=Array.from((We=se.target)==null?void 0:We.files);H&&H.length>0&&_(H)},P=async()=>{l===null&&await pn.set(await ba(localStorage.token))},J=se=>{h.find(H=>H.id===se.id)||(t(20,h=[...h,{...se,status:"processed"}]),t(8,T=!1))},Z=se=>{k(se)};function X(se){N=se,t(10,N)}const Q=()=>{U&&p()},re=()=>{if(U)if(!O())b();else{const se=document.getElementById("camera-input");se&&se.click()}},_e=()=>{U&&t(10,N=!0)},De=()=>{t(9,C="notes")},x=()=>{t(9,C="knowledge")},be=()=>{t(9,C="chats")},Me=()=>{w()},oe=()=>{t(9,C="microsoft_onedrive")},Je=()=>{t(9,C="")},le=()=>{t(9,C="")},ee=()=>{t(9,C="")},Se=()=>{t(9,C="")},ne=()=>{S("personal")},q=()=>{S("organizations")};function Re(se){T=se,t(8,T)}const ve=se=>{se.detail===!1&&I()};return r.$$set=se=>{"files"in se&&t(20,h=se.files),"selectedModels"in se&&t(0,m=se.selectedModels),"fileUploadCapableModels"in se&&t(1,g=se.fileUploadCapableModels),"screenCaptureHandler"in se&&t(2,b=se.screenCaptureHandler),"uploadFilesHandler"in se&&t(3,p=se.uploadFilesHandler),"inputFilesHandler"in se&&t(21,_=se.inputFilesHandler),"uploadGoogleDriveHandler"in se&&t(4,w=se.uploadGoogleDriveHandler),"uploadOneDriveHandler"in se&&t(5,S=se.uploadOneDriveHandler),"onUpload"in se&&t(6,k=se.onUpload),"onClose"in se&&t(7,I=se.onClose),"$$scope"in se&&t(42,f=se.$$scope)},r.$$.update=()=>{var se,H;r.$$.dirty[0]&4194307&&t(11,U=g.length===m.length&&((n==null?void 0:n.role)==="admin"||((H=(se=n==null?void 0:n.permissions)==null?void 0:se.chat)==null?void 0:H.file_upload))),r.$$.dirty[0]&256&&T&&P()},[m,g,b,p,w,S,k,I,T,C,N,U,l,s,o,a,u,O,A,J,h,_,n,i,Z,X,Q,re,_e,De,x,be,Me,oe,Je,le,ee,Se,ne,q,Re,ve,f]}class fu extends st{constructor(e){super(),ot(this,e,iu,au,nt,{files:20,selectedModels:0,fileUploadCapableModels:1,screenCaptureHandler:2,uploadFilesHandler:3,inputFilesHandler:21,uploadGoogleDriveHandler:4,uploadOneDriveHandler:5,onUpload:6,onClose:7},null,[-1,-1])}}function fs(r,e,t){const l=r.slice();return l[9]=e[t],l}function cs(r,e,t){const l=r.slice();return l[12]=e[t],l}function us(r,e,t){const l=r.slice();return l[15]=e[t],l}function ds(r){let e,t,l,n,s=r[3].length>0&&hs(r),o=ft(r[1]),a=[];for(let f=0;f<o.length;f+=1)a[f]=ps(us(r,o,f));const i=f=>$(a[f],1,1,()=>{a[f]=null});return{c(){s&&s.c(),e=W(),t=D("div"),l=D("div");for(let f=0;f<a.length;f+=1)a[f].c();this.h()},l(f){s&&s.l(f),e=G(f),t=M(f,"DIV",{class:!0});var u=E(t);l=M(u,"DIV",{class:!0});var h=E(l);for(let m=0;m<a.length;m+=1)a[m].l(h);h.forEach(d),u.forEach(d),this.h()},h(){c(l,"class","text-sm dark:text-gray-300 mb-1"),c(t,"class","px-5 pb-3 w-full flex flex-col justify-center")},m(f,u){s&&s.m(f,u),B(f,e,u),B(f,t,u),y(t,l);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(l,null);n=!0},p(f,u){if(f[3].length>0?s?s.p(f,u):(s=hs(f),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),u&2){o=ft(f[1]);let h;for(h=0;h<o.length;h+=1){const m=us(f,o,h);a[h]?(a[h].p(m,u),v(a[h],1)):(a[h]=ps(m),a[h].c(),v(a[h],1),a[h].m(l,null))}for(ce(),h=o.length;h<a.length;h+=1)i(h);ue()}},i(f){if(!n){for(let u=0;u<o.length;u+=1)v(a[u]);n=!0}},o(f){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)$(a[u]);n=!1},d(f){f&&(d(e),d(t)),s&&s.d(f),Rt(a,f)}}}function hs(r){let e,t,l=r[2].t("Tools")+"",n;return{c(){e=D("div"),t=D("div"),n=$e(l),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);t=M(o,"DIV",{class:!0});var a=E(t);n=Ie(a,l),a.forEach(d),o.forEach(d),this.h()},h(){c(t,"class","text-base font-medium self-center"),c(e,"class","flex justify-between dark:text-gray-300 px-5 pb-1")},m(s,o){B(s,e,o),y(e,t),y(t,n)},p(s,o){o&4&&l!==(l=s[2].t("Tools")+"")&&Ce(n,l)},d(s){s&&d(e)}}}function ms(r){var n,s;let e,t=((s=(n=r[15])==null?void 0:n.meta)==null?void 0:s.description)+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);l=Ie(a,t),a.forEach(d),this.h()},h(){c(e,"class","text-xs text-gray-500")},m(o,a){B(o,e,a),y(e,l)},p(o,a){var i,f;a&2&&t!==(t=((f=(i=o[15])==null?void 0:i.meta)==null?void 0:f.description)+"")&&Ce(l,t)},d(o){o&&d(e)}}}function cu(r){var i,f,u;let e,t,l=((i=r[15])==null?void 0:i.name)+"",n,s,o,a=((u=(f=r[15])==null?void 0:f.meta)==null?void 0:u.description)&&ms(r);return{c(){e=D("div"),t=D("div"),n=$e(l),s=W(),a&&a.c(),o=W(),this.h()},l(h){e=M(h,"DIV",{class:!0});var m=E(e);t=M(m,"DIV",{class:!0});var g=E(t);n=Ie(g,l),g.forEach(d),s=G(m),a&&a.l(m),m.forEach(d),o=G(h),this.h()},h(){c(t,"class","text-sm font-medium dark:text-gray-100 text-gray-800 truncate"),c(e,"class","truncate")},m(h,m){B(h,e,m),y(e,t),y(t,n),y(e,s),a&&a.m(e,null),B(h,o,m)},p(h,m){var g,b,p;m&2&&l!==(l=((g=h[15])==null?void 0:g.name)+"")&&Ce(n,l),(p=(b=h[15])==null?void 0:b.meta)!=null&&p.description?a?a.p(h,m):(a=ms(h),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(h){h&&(d(e),d(o)),a&&a.d()}}}function ps(r){let e,t;return e=new Ll({props:{buttonClassName:"w-full mb-0.5",$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&262146&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function gs(r){let e,t,l=r[2].t("Tool Servers")+"",n,s,o,a,i=r[2].t("Open WebUI can use tools provided by any OpenAPI server.")+"",f,u,h,m,g=r[2].t("Learn more about OpenAPI tool servers.")+"",b,p,_,w,S=ft(r[3]),k=[];for(let T=0;T<S.length;T+=1)k[T]=bs(fs(r,S,T));const I=T=>$(k[T],1,1,()=>{k[T]=null});return{c(){e=D("div"),t=D("div"),n=$e(l),s=W(),o=D("div"),a=D("div"),f=$e(i),u=W(),h=D("br"),m=D("a"),b=$e(g),p=W(),_=D("div");for(let T=0;T<k.length;T+=1)k[T].c();this.h()},l(T){e=M(T,"DIV",{class:!0});var C=E(e);t=M(C,"DIV",{class:!0});var N=E(t);n=Ie(N,l),N.forEach(d),C.forEach(d),s=G(T),o=M(T,"DIV",{class:!0});var U=E(o);a=M(U,"DIV",{class:!0});var O=E(a);f=Ie(O,i),u=G(O),h=M(O,"BR",{}),m=M(O,"A",{class:!0,href:!0,target:!0});var A=E(m);b=Ie(A,g),A.forEach(d),O.forEach(d),p=G(U),_=M(U,"DIV",{class:!0});var P=E(_);for(let J=0;J<k.length;J+=1)k[J].l(P);P.forEach(d),U.forEach(d),this.h()},h(){c(t,"class","text-base font-medium self-center"),c(e,"class","flex justify-between dark:text-gray-300 px-5 pb-0.5"),c(m,"class","underline"),c(m,"href","https://github.com/open-webui/openapi-servers"),c(m,"target","_blank"),c(a,"class","text-xs text-gray-600 dark:text-gray-300 mb-2"),c(_,"class","text-sm dark:text-gray-300 mb-1"),c(o,"class","px-5 pb-5 w-full flex flex-col justify-center")},m(T,C){B(T,e,C),y(e,t),y(t,n),B(T,s,C),B(T,o,C),y(o,a),y(a,f),y(a,u),y(a,h),y(a,m),y(m,b),y(o,p),y(o,_);for(let N=0;N<k.length;N+=1)k[N]&&k[N].m(_,null);w=!0},p(T,C){if((!w||C&4)&&l!==(l=T[2].t("Tool Servers")+"")&&Ce(n,l),(!w||C&4)&&i!==(i=T[2].t("Open WebUI can use tools provided by any OpenAPI server.")+"")&&Ce(f,i),(!w||C&4)&&g!==(g=T[2].t("Learn more about OpenAPI tool servers.")+"")&&Ce(b,g),C&8){S=ft(T[3]);let N;for(N=0;N<S.length;N+=1){const U=fs(T,S,N);k[N]?(k[N].p(U,C),v(k[N],1)):(k[N]=bs(U),k[N].c(),v(k[N],1),k[N].m(_,null))}for(ce(),N=S.length;N<k.length;N+=1)I(N);ue()}},i(T){if(!w){for(let C=0;C<S.length;C+=1)v(k[C]);w=!0}},o(T){k=k.filter(Boolean);for(let C=0;C<k.length;C+=1)$(k[C]);w=!1},d(T){T&&(d(e),d(s),d(o)),Rt(k,T)}}}function uu(r){var w,S,k,I,T,C,N,U,O,A;let e,t,l=((k=(S=(w=r[9])==null?void 0:w.openapi)==null?void 0:S.info)==null?void 0:k.title)+"",n,s,o=((C=(T=(I=r[9])==null?void 0:I.openapi)==null?void 0:T.info)==null?void 0:C.version)+"",a,i,f,u=((O=(U=(N=r[9])==null?void 0:N.openapi)==null?void 0:U.info)==null?void 0:O.description)+"",h,m,g,b=((A=r[9])==null?void 0:A.url)+"",p,_;return{c(){e=D("div"),t=D("div"),n=$e(l),s=$e(" - v"),a=$e(o),i=W(),f=D("div"),h=$e(u),m=W(),g=D("div"),p=$e(b),_=W(),this.h()},l(P){e=M(P,"DIV",{});var J=E(e);t=M(J,"DIV",{class:!0});var Z=E(t);n=Ie(Z,l),s=Ie(Z," - v"),a=Ie(Z,o),Z.forEach(d),i=G(J),f=M(J,"DIV",{class:!0});var X=E(f);h=Ie(X,u),X.forEach(d),m=G(J),g=M(J,"DIV",{class:!0});var Q=E(g);p=Ie(Q,b),Q.forEach(d),J.forEach(d),_=G(P),this.h()},h(){c(t,"class","text-sm font-medium dark:text-gray-100 text-gray-800"),c(f,"class","text-xs text-gray-500"),c(g,"class","text-xs text-gray-500")},m(P,J){B(P,e,J),y(e,t),y(t,n),y(t,s),y(t,a),y(e,i),y(e,f),y(f,h),y(e,m),y(e,g),y(g,p),B(P,_,J)},p(P,J){var Z,X,Q,re,_e,De,x,be,Me,oe;J&8&&l!==(l=((Q=(X=(Z=P[9])==null?void 0:Z.openapi)==null?void 0:X.info)==null?void 0:Q.title)+"")&&Ce(n,l),J&8&&o!==(o=((De=(_e=(re=P[9])==null?void 0:re.openapi)==null?void 0:_e.info)==null?void 0:De.version)+"")&&Ce(a,o),J&8&&u!==(u=((Me=(be=(x=P[9])==null?void 0:x.openapi)==null?void 0:be.info)==null?void 0:Me.description)+"")&&Ce(h,u),J&8&&b!==(b=((oe=P[9])==null?void 0:oe.url)+"")&&Ce(p,b)},d(P){P&&(d(e),d(_))}}}function _s(r){var f,u;let e,t,l=((f=r[12])==null?void 0:f.name)+"",n,s,o,a=((u=r[12])==null?void 0:u.description)+"",i;return{c(){e=D("div"),t=D("div"),n=$e(l),s=W(),o=D("div"),i=$e(a),this.h()},l(h){e=M(h,"DIV",{class:!0});var m=E(e);t=M(m,"DIV",{class:!0});var g=E(t);n=Ie(g,l),g.forEach(d),s=G(m),o=M(m,"DIV",{});var b=E(o);i=Ie(b,a),b.forEach(d),m.forEach(d),this.h()},h(){c(t,"class","font-medium text-gray-800 dark:text-gray-100"),c(e,"class","my-1")},m(h,m){B(h,e,m),y(e,t),y(t,n),y(e,s),y(e,o),y(o,i)},p(h,m){var g,b;m&8&&l!==(l=((g=h[12])==null?void 0:g.name)+"")&&Ce(n,l),m&8&&a!==(a=((b=h[12])==null?void 0:b.description)+"")&&Ce(i,a)},d(h){h&&d(e)}}}function du(r){var s;let e,t,l=ft(((s=r[9])==null?void 0:s.specs)??[]),n=[];for(let o=0;o<l.length;o+=1)n[o]=_s(cs(r,l,o));return{c(){e=D("div");for(let o=0;o<n.length;o+=1)n[o].c();t=W(),this.h()},l(o){e=M(o,"DIV",{slot:!0});var a=E(e);for(let i=0;i<n.length;i+=1)n[i].l(a);t=G(a),a.forEach(d),this.h()},h(){c(e,"slot","content")},m(o,a){B(o,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);y(e,t)},p(o,a){var i;if(a&8){l=ft(((i=o[9])==null?void 0:i.specs)??[]);let f;for(f=0;f<l.length;f+=1){const u=cs(o,l,f);n[f]?n[f].p(u,a):(n[f]=_s(u),n[f].c(),n[f].m(e,t))}for(;f<n.length;f+=1)n[f].d(1);n.length=l.length}},d(o){o&&d(e),Rt(n,o)}}}function bs(r){let e,t;return e=new Ll({props:{buttonClassName:"w-full",chevron:!0,$$slots:{content:[du],default:[uu]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&262152&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function hu(r){let e,t,l,n=r[2].t("Available Tools")+"",s,o,a,i,f,u,h,m,g;i=new hl({props:{className:"size-5"}});let b=r[1].length>0&&ds(r),p=r[3].length>0&&gs(r);return{c(){e=D("div"),t=D("div"),l=D("div"),s=$e(n),o=W(),a=D("button"),F(i.$$.fragment),f=W(),b&&b.c(),u=W(),p&&p.c(),this.h()},l(_){e=M(_,"DIV",{});var w=E(e);t=M(w,"DIV",{class:!0});var S=E(t);l=M(S,"DIV",{class:!0});var k=E(l);s=Ie(k,n),k.forEach(d),o=G(S),a=M(S,"BUTTON",{class:!0});var I=E(a);L(i.$$.fragment,I),I.forEach(d),S.forEach(d),f=G(w),b&&b.l(w),u=G(w),p&&p.l(w),w.forEach(d),this.h()},h(){c(l,"class","text-lg font-medium self-center"),c(a,"class","self-center"),c(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(_,w){B(_,e,w),y(e,t),y(t,l),y(l,s),y(t,o),y(t,a),j(i,a,null),y(e,f),b&&b.m(e,null),y(e,u),p&&p.m(e,null),h=!0,m||(g=Ne(a,"click",r[7]),m=!0)},p(_,w){(!h||w&4)&&n!==(n=_[2].t("Available Tools")+"")&&Ce(s,n),_[1].length>0?b?(b.p(_,w),w&2&&v(b,1)):(b=ds(_),b.c(),v(b,1),b.m(e,u)):b&&(ce(),$(b,1,1,()=>{b=null}),ue()),_[3].length>0?p?(p.p(_,w),w&8&&v(p,1)):(p=gs(_),p.c(),v(p,1),p.m(e,null)):p&&(ce(),$(p,1,1,()=>{p=null}),ue())},i(_){h||(v(i.$$.fragment,_),v(b),v(p),h=!0)},o(_){$(i.$$.fragment,_),$(b),$(p),h=!1},d(_){_&&d(e),R(i),b&&b.d(),p&&p.d(),m=!1,g()}}}function mu(r){let e,t,l;function n(o){r[8](o)}let s={size:"md",$$slots:{default:[hu]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.show=r[0]),e=new wa({props:s}),Be.push(()=>Le(e,"show",n)),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,[a]){const i={};a&262159&&(i.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,i.show=o[0],je(()=>t=!1)),e.$set(i)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function pu(r,e,t){let l,n,s;Ee(r,bl,m=>t(6,l=m)),Ee(r,$n,m=>t(3,s=m));let{show:o=!1}=e,{selectedToolIds:a=[]}=e,i=[];const f=Ot("i18n");Ee(r,f,m=>t(2,n=m));const u=()=>{t(0,o=!1)};function h(m){o=m,t(0,o)}return r.$$set=m=>{"show"in m&&t(0,o=m.show),"selectedToolIds"in m&&t(5,a=m.selectedToolIds)},r.$$.update=()=>{r.$$.dirty&96&&t(1,i=(l??[]).filter(m=>a.includes(m.id)))},[o,i,n,s,f,a,l,u,h]}class gu extends st{constructor(e){super(),ot(this,e,pu,mu,nt,{show:0,selectedToolIds:5})}}function _u(r){let e,t,l,n,s;return{c(){e=we("svg"),t=we("path"),l=we("path"),n=we("path"),s=we("path"),this.h()},l(o){e=ke(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0,"aria-hidden":!0});var a=E(e);t=ke(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),l=ke(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(l).forEach(d),n=ke(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(n).forEach(d),s=ke(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(s).forEach(d),a.forEach(d),this.h()},h(){c(t,"d","M21 7.6V20.4C21 20.7314 20.7314 21 20.4 21H7.6C7.26863 21 7 20.7314 7 20.4V7.6C7 7.26863 7.26863 7 7.6 7H20.4C20.7314 7 21 7.26863 21 7.6Z"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M18 4H4.6C4.26863 4 4 4.26863 4 4.6V18"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(n,"d","M7 16.8L12.4444 15L21 18"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(s,"d","M16.5 13C15.6716 13 15 12.3284 15 11.5C15 10.6716 15.6716 10 16.5 10C17.3284 10 18 10.6716 18 11.5C18 12.3284 17.3284 13 16.5 13Z"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0]),c(e,"aria-hidden","true")},m(o,a){B(o,e,a),y(e,t),y(e,l),y(e,n),y(e,s)},p(o,[a]){a&2&&c(e,"stroke-width",o[1]),a&1&&c(e,"class",o[0])},i:me,o:me,d(o){o&&d(e)}}}function bu(r,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class za extends st{constructor(e){super(),ot(this,e,bu,_u,nt,{className:0,strokeWidth:1})}}function vu(r){let e,t,l;return{c(){e=we("svg"),t=we("path"),l=we("path"),this.h()},l(n){e=ke(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var s=E(e);t=ke(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),l=ke(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(l).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M4.867 19.125h.008v.008h-.008v-.008Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"aria-hidden","true"),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(n,s){B(n,e,s),y(e,t),y(e,l)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:me,o:me,d(n){n&&d(e)}}}function wu(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class Ar extends st{constructor(e){super(),ot(this,e,wu,vu,nt,{className:0,strokeWidth:1})}}function ku(r){let e,t,l,n,s,o;return{c(){e=we("svg"),t=we("path"),l=we("path"),n=we("path"),s=we("path"),o=we("path"),this.h()},l(a){e=ke(a,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var i=E(e);t=ke(i,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),l=ke(i,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(l).forEach(d),n=ke(i,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(n).forEach(d),s=ke(i,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(s).forEach(d),o=ke(i,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(o).forEach(d),i.forEach(d),this.h()},h(){c(t,"d","M12 4L12 20"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M8 9L8 15"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(n,"d","M20 10L20 14"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(s,"d","M4 10L4 14"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(o,"d","M16 7L16 17"),c(o,"stroke-linecap","round"),c(o,"stroke-linejoin","round"),c(e,"aria-hidden","true"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","currentColor"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(a,i){B(a,e,i),y(e,t),y(e,l),y(e,n),y(e,s),y(e,o)},p(a,[i]){i&2&&c(e,"stroke-width",a[1]),i&1&&c(e,"class",a[0])},i:me,o:me,d(a){a&&d(e)}}}function yu(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class Eu extends st{constructor(e){super(),ot(this,e,yu,ku,nt,{className:0,strokeWidth:1})}}function $u(r){let e,t,l,n;return{c(){e=we("svg"),t=we("path"),l=we("path"),n=we("path"),this.h()},l(s){e=ke(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0,"aria-hidden":!0});var o=E(e);t=ke(o,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),l=ke(o,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(l).forEach(d),n=ke(o,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(n).forEach(d),o.forEach(d),this.h()},h(){c(t,"d","M13 16H18"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M6 8L10 12L6 16"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(n,"d","M2 18V6C2 4.89543 2.89543 4 4 4H20C21.1046 4 22 4.89543 22 6V18C22 19.1046 21.1046 20 20 20H4C2.89543 20 2 19.1046 2 18Z"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0]),c(e,"aria-hidden","true")},m(s,o){B(s,e,o),y(e,t),y(e,l),y(e,n)},p(s,[o]){o&2&&c(e,"stroke-width",s[1]),o&1&&c(e,"class",s[0])},i:me,o:me,d(s){s&&d(e)}}}function Iu(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class Aa extends st{constructor(e){super(),ot(this,e,Iu,$u,nt,{className:0,strokeWidth:1})}}function Cu(r){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,class:!0,"aria-hidden":!0,"stroke-width":!0,fill:!0,stroke:!0,viewBox:!0});var n=E(e);t=ke(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class",r[0]),c(e,"aria-hidden","true"),c(e,"stroke-width",r[1]),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(l,n){B(l,e,n),y(e,t)},p(l,[n]){n&1&&c(e,"class",l[0]),n&2&&c(e,"stroke-width",l[1])},i:me,o:me,d(l){l&&d(e)}}}function Su(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class Mn extends st{constructor(e){super(),ot(this,e,Su,Cu,nt,{className:0,strokeWidth:1})}}function vs(r,e,t){const l=r.slice();return l[45]=e[t],l}function ws(r,e,t){const l=r.slice();return l[42]=e[t],l[44]=t,l}function Tu(r){let e;const t=r[20].default,l=vn(t,r,r[37],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s[1]&64)&&wn(l,t,n,n[37],e?yn(t,n[37],s,null):kn(n[37]),null)},i(n){e||(v(l,n),e=!0)},o(n){$(l,n),e=!1},d(n){l&&l.d(n)}}}function Du(r){let e,t;return e=new tt({props:{content:r[15].t("Integrations"),placement:"top",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&32768&&(s.content=l[15].t("Integrations")),n[1]&64&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Mu(r){let e,t,l,n,s,o,a=r[15].t("Tools")+"",i,f,u,h=Object.keys(r[14]).length+"",m,g,b,p,_,w;l=new rn({});let S=ft(Object.keys(r[14])),k=[];for(let T=0;T<S.length;T+=1)k[T]=Es(vs(r,S,T));const I=T=>$(k[T],1,1,()=>{k[T]=null});return{c(){e=D("div"),t=D("button"),F(l.$$.fragment),n=W(),s=D("div"),o=D("div"),i=$e(a),f=W(),u=D("span"),m=$e(h),g=W();for(let T=0;T<k.length;T+=1)k[T].c();this.h()},l(T){e=M(T,"DIV",{});var C=E(e);t=M(C,"BUTTON",{class:!0});var N=E(t);L(l.$$.fragment,N),n=G(N),s=M(N,"DIV",{class:!0});var U=E(s);o=M(U,"DIV",{});var O=E(o);i=Ie(O,a),f=G(O),u=M(O,"SPAN",{class:!0});var A=E(u);m=Ie(A,h),A.forEach(d),O.forEach(d),U.forEach(d),N.forEach(d),g=G(C);for(let P=0;P<k.length;P+=1)k[P].l(C);C.forEach(d),this.h()},h(){c(u,"class","ml-0.5 text-gray-500"),c(s,"class","flex items-center w-full justify-between"),c(t,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(T,C){B(T,e,C),y(e,t),j(l,t,null),y(t,n),y(t,s),y(s,o),y(o,i),y(o,f),y(o,u),y(u,m),y(e,g);for(let N=0;N<k.length;N+=1)k[N]&&k[N].m(e,null);p=!0,_||(w=Ne(t,"click",r[32]),_=!0)},p(T,C){if((!p||C[0]&32768)&&a!==(a=T[15].t("Tools")+"")&&Ce(i,a),(!p||C[0]&16384)&&h!==(h=Object.keys(T[14]).length+"")&&Ce(m,h),C[0]&49665){S=ft(Object.keys(T[14]));let N;for(N=0;N<S.length;N+=1){const U=vs(T,S,N);k[N]?(k[N].p(U,C),v(k[N],1)):(k[N]=Es(U),k[N].c(),v(k[N],1),k[N].m(e,null))}for(ce(),N=S.length;N<k.length;N+=1)I(N);ue()}},i(T){if(!p){v(l.$$.fragment,T);for(let C=0;C<S.length;C+=1)v(k[C]);T&&(b||Gt(()=>{b=Qt(e,Bl,{x:20,duration:150}),b.start()})),p=!0}},o(T){$(l.$$.fragment,T),k=k.filter(Boolean);for(let C=0;C<k.length;C+=1)$(k[C]);p=!1},d(T){T&&d(e),R(l),Rt(k,T),_=!1,w()}}}function Vu(r){let e,t,l,n,s,o,a,i,f;const u=[Au,zu],h=[];function m(w,S){return w[14]?0:1}t=m(r),l=h[t]=u[t](r);let g=r[5]&&r[5].length>0&&Is(r),b=r[6]&&Ts(r),p=r[7]&&Ds(r),_=r[8]&&Ms(r);return{c(){e=D("div"),l.c(),n=W(),g&&g.c(),s=W(),b&&b.c(),o=W(),p&&p.c(),a=W(),_&&_.c()},l(w){e=M(w,"DIV",{});var S=E(e);l.l(S),n=G(S),g&&g.l(S),s=G(S),b&&b.l(S),o=G(S),p&&p.l(S),a=G(S),_&&_.l(S),S.forEach(d)},m(w,S){B(w,e,S),h[t].m(e,null),y(e,n),g&&g.m(e,null),y(e,s),b&&b.m(e,null),y(e,o),p&&p.m(e,null),y(e,a),_&&_.m(e,null),f=!0},p(w,S){let k=t;t=m(w),t===k?h[t].p(w,S):(ce(),$(h[k],1,1,()=>{h[k]=null}),ue(),l=h[t],l?l.p(w,S):(l=h[t]=u[t](w),l.c()),v(l,1),l.m(e,n)),w[5]&&w[5].length>0?g?(g.p(w,S),S[0]&32&&v(g,1)):(g=Is(w),g.c(),v(g,1),g.m(e,s)):g&&(ce(),$(g,1,1,()=>{g=null}),ue()),w[6]?b?(b.p(w,S),S[0]&64&&v(b,1)):(b=Ts(w),b.c(),v(b,1),b.m(e,o)):b&&(ce(),$(b,1,1,()=>{b=null}),ue()),w[7]?p?(p.p(w,S),S[0]&128&&v(p,1)):(p=Ds(w),p.c(),v(p,1),p.m(e,a)):p&&(ce(),$(p,1,1,()=>{p=null}),ue()),w[8]?_?(_.p(w,S),S[0]&256&&v(_,1)):(_=Ms(w),_.c(),v(_,1),_.m(e,null)):_&&(ce(),$(_,1,1,()=>{_=null}),ue())},i(w){f||(v(l),v(g),v(b),v(p),v(_),w&&(i||Gt(()=>{i=Qt(e,Bl,{x:-20,duration:150}),i.start()})),f=!0)},o(w){$(l),$(g),$(b),$(p),$(_),f=!1},d(w){w&&d(e),h[t].d(),g&&g.d(),b&&b.d(),p&&p.d(),_&&_.d()}}}function ks(r){let e;return{c(){e=D("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","absolute inset-0 opacity-50 rounded-xl cursor-pointer z-10")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function Nu(r){let e,t,l;return t=new Ar({}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","shrink-0")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Bu(r){let e,t=r[14][r[45]].name+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","truncate")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s[0]&16384&&t!==(t=n[14][n[45]].name+"")&&Ce(l,t)},d(n){n&&d(e)}}}function ys(r){let e,t,l;return t=new tt({props:{content:r[15].t("Valves"),$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","shrink-0")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[0]&32768&&(o.content=n[15].t("Valves")),s[0]&16896|s[1]&64&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Ou(r){let e,t,l,n,s;t=new Mn({});function o(...a){return r[33](r[45],...a)}return{c(){e=D("button"),F(t.$$.fragment),this.h()},l(a){e=M(a,"BUTTON",{class:!0,type:!0});var i=E(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","self-center w-fit text-sm text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition rounded-full"),c(e,"type","button")},m(a,i){B(a,e,i),j(t,e,null),l=!0,n||(s=Ne(e,"click",o),n=!0)},p(a,i){r=a},i(a){l||(v(t.$$.fragment,a),l=!0)},o(a){$(t.$$.fragment,a),l=!1},d(a){a&&d(e),R(t),n=!1,s()}}}function Es(r){var k,I,T,C;let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_=!(((k=r[14][r[45]])==null?void 0:k.authenticated)??!0)&&ks();s=new tt({props:{content:((I=r[14][r[45]])==null?void 0:I.name)??"",placement:"top",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),a=new tt({props:{content:((T=r[14][r[45]])==null?void 0:T.description)??"",placement:"top-start",$$slots:{default:[Bu]},$$scope:{ctx:r}}});let w=((C=r[14][r[45]])==null?void 0:C.has_user_valves)&&ys(r);h=new sn({props:{state:r[14][r[45]].enabled}});function S(...N){return r[34](r[45],...N)}return{c(){e=D("button"),_&&_.c(),t=W(),l=D("div"),n=D("div"),F(s.$$.fragment),o=W(),F(a.$$.fragment),i=W(),w&&w.c(),f=W(),u=D("div"),F(h.$$.fragment),m=W(),this.h()},l(N){e=M(N,"BUTTON",{class:!0});var U=E(e);_&&_.l(U),t=G(U),l=M(U,"DIV",{class:!0});var O=E(l);n=M(O,"DIV",{class:!0});var A=E(n);L(s.$$.fragment,A),o=G(A),L(a.$$.fragment,A),A.forEach(d),O.forEach(d),i=G(U),w&&w.l(U),f=G(U),u=M(U,"DIV",{class:!0});var P=E(u);L(h.$$.fragment,P),P.forEach(d),m=G(U),U.forEach(d),this.h()},h(){c(n,"class","flex flex-1 gap-2 items-center"),c(l,"class","flex-1 truncate"),c(u,"class","shrink-0"),c(e,"class","relative flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(N,U){B(N,e,U),_&&_.m(e,null),y(e,t),y(e,l),y(l,n),j(s,n,null),y(n,o),j(a,n,null),y(e,i),w&&w.m(e,null),y(e,f),y(e,u),j(h,u,null),y(e,m),g=!0,b||(p=Ne(e,"click",S),b=!0)},p(N,U){var J,Z,X,Q;r=N,((J=r[14][r[45]])==null?void 0:J.authenticated)??!0?_&&(_.d(1),_=null):_||(_=ks(),_.c(),_.m(e,t));const O={};U[0]&16384&&(O.content=((Z=r[14][r[45]])==null?void 0:Z.name)??""),U[1]&64&&(O.$$scope={dirty:U,ctx:r}),s.$set(O);const A={};U[0]&16384&&(A.content=((X=r[14][r[45]])==null?void 0:X.description)??""),U[0]&16384|U[1]&64&&(A.$$scope={dirty:U,ctx:r}),a.$set(A),(Q=r[14][r[45]])!=null&&Q.has_user_valves?w?(w.p(r,U),U[0]&16384&&v(w,1)):(w=ys(r),w.c(),v(w,1),w.m(e,f)):w&&(ce(),$(w,1,1,()=>{w=null}),ue());const P={};U[0]&16384&&(P.state=r[14][r[45]].enabled),h.$set(P)},i(N){g||(v(s.$$.fragment,N),v(a.$$.fragment,N),v(w),v(h.$$.fragment,N),g=!0)},o(N){$(s.$$.fragment,N),$(a.$$.fragment,N),$(w),$(h.$$.fragment,N),g=!1},d(N){N&&d(e),_&&_.d(),R(s),R(a),w&&w.d(),R(h),b=!1,p()}}}function zu(r){let e,t,l;return t=new dl({}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","py-4")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Au(r){let e=Object.keys(r[14]).length>0,t,l,n=e&&$s(r);return{c(){n&&n.c(),t=Oe()},l(s){n&&n.l(s),t=Oe()},m(s,o){n&&n.m(s,o),B(s,t,o),l=!0},p(s,o){o[0]&16384&&(e=Object.keys(s[14]).length>0),e?n?(n.p(s,o),o[0]&16384&&v(n,1)):(n=$s(s),n.c(),v(n,1),n.m(t.parentNode,t)):n&&(ce(),$(n,1,1,()=>{n=null}),ue())},i(s){l||(v(n),l=!0)},o(s){$(n),l=!1},d(s){s&&d(t),n&&n.d(s)}}}function $s(r){let e,t,l,n,s,o=r[15].t("Tools")+"",a,i,f,u=Object.keys(r[14]).length+"",h,m,g,b,p,_,w;return t=new Ar({}),b=new nn({}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("div"),s=D("div"),a=$e(o),i=W(),f=D("span"),h=$e(u),m=W(),g=D("div"),F(b.$$.fragment),this.h()},l(S){e=M(S,"BUTTON",{class:!0});var k=E(e);L(t.$$.fragment,k),l=G(k),n=M(k,"DIV",{class:!0});var I=E(n);s=M(I,"DIV",{class:!0});var T=E(s);a=Ie(T,o),i=G(T),f=M(T,"SPAN",{class:!0});var C=E(f);h=Ie(C,u),C.forEach(d),T.forEach(d),m=G(I),g=M(I,"DIV",{class:!0});var N=E(g);L(b.$$.fragment,N),N.forEach(d),I.forEach(d),k.forEach(d),this.h()},h(){c(f,"class","ml-0.5 text-gray-500"),c(s,"class","line-clamp-1"),c(g,"class","text-gray-500"),c(n,"class","flex items-center w-full justify-between"),c(e,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(S,k){B(S,e,k),j(t,e,null),y(e,l),y(e,n),y(n,s),y(s,a),y(s,i),y(s,f),y(f,h),y(n,m),y(n,g),j(b,g,null),p=!0,_||(w=Ne(e,"click",r[21]),_=!0)},p(S,k){(!p||k[0]&32768)&&o!==(o=S[15].t("Tools")+"")&&Ce(a,o),(!p||k[0]&16384)&&u!==(u=Object.keys(S[14]).length+"")&&Ce(h,u)},i(S){p||(v(t.$$.fragment,S),v(b.$$.fragment,S),p=!0)},o(S){$(t.$$.fragment,S),$(b.$$.fragment,S),p=!1},d(S){S&&d(e),R(t),R(b),_=!1,w()}}}function Is(r){let e=[],t=new Map,l,n,s=ft(r[5].sort(r[22]));const o=a=>a[42].id;for(let a=0;a<s.length;a+=1){let i=ws(r,s,a),f=o(i);t.set(f,e[a]=Ss(f,i))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Oe()},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);l=Oe()},m(a,i){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,i);B(a,l,i),n=!0},p(a,i){i[0]&33314&&(s=ft(a[5].sort(a[22])),ce(),e=Br(e,i,o,1,a,s,t,l.parentNode,_a,Ss,l,ws),ue())},i(a){if(!n){for(let i=0;i<s.length;i+=1)v(e[i]);n=!0}},o(a){for(let i=0;i<e.length;i+=1)$(e[i]);n=!1},d(a){a&&d(l);for(let i=0;i<e.length;i+=1)e[i].d(a)}}}function Uu(r){let e,t;return e=new ka({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Pu(r){let e,t,l,n,s;return{c(){e=D("div"),t=D("img"),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);t=M(a,"IMG",{src:!0,class:!0,style:!0,alt:!0}),a.forEach(d),this.h()},h(){il(t.src,l=r[42].icon)||c(t,"src",l),c(t,"class",n="size-3.5 "+(r[42].icon.includes("svg")?"dark:invert-[80%]":"")),At(t,"fill","currentColor"),c(t,"alt",s=r[42].name),c(e,"class","size-4 items-center flex justify-center")},m(o,a){B(o,e,a),y(e,t)},p(o,a){a[0]&32&&!il(t.src,l=o[42].icon)&&c(t,"src",l),a[0]&32&&n!==(n="size-3.5 "+(o[42].icon.includes("svg")?"dark:invert-[80%]":""))&&c(t,"class",n),a[0]&32&&s!==(s=o[42].name)&&c(t,"alt",s)},i:me,o:me,d(o){o&&d(e)}}}function Cs(r){let e,t,l;return t=new tt({props:{content:r[15].t("Valves"),$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","shrink-0")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[0]&32768&&(o.content=n[15].t("Valves")),s[0]&544|s[1]&64&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Fu(r){let e,t,l,n,s;t=new Mn({});function o(...a){return r[23](r[42],...a)}return{c(){e=D("button"),F(t.$$.fragment),this.h()},l(a){e=M(a,"BUTTON",{class:!0,type:!0});var i=E(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","self-center w-fit text-sm text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition rounded-full"),c(e,"type","button")},m(a,i){B(a,e,i),j(t,e,null),l=!0,n||(s=Ne(e,"click",o),n=!0)},p(a,i){r=a},i(a){l||(v(t.$$.fragment,a),l=!0)},o(a){$(t.$$.fragment,a),l=!1},d(a){a&&d(e),R(t),n=!1,s()}}}function Lu(r){var U,O;let e,t,l,n,s,o,a,i,f=((U=r[42])==null?void 0:U.name)+"",u,h,m,g,b,p,_,w,S;const k=[Pu,Uu],I=[];function T(A,P){var J;return(J=A[42])!=null&&J.icon?0:1}s=T(r),o=I[s]=k[s](r);let C=((O=r[42])==null?void 0:O.has_user_valves)&&Cs(r);b=new sn({props:{state:r[1].includes(r[42].id)}}),b.$on("change",r[24]);function N(){return r[25](r[42])}return{c(){e=D("button"),t=D("div"),l=D("div"),n=D("div"),o.c(),a=W(),i=D("div"),u=$e(f),h=W(),C&&C.c(),m=W(),g=D("div"),F(b.$$.fragment),p=W(),this.h()},l(A){e=M(A,"BUTTON",{class:!0});var P=E(e);t=M(P,"DIV",{class:!0});var J=E(t);l=M(J,"DIV",{class:!0});var Z=E(l);n=M(Z,"DIV",{class:!0});var X=E(n);o.l(X),X.forEach(d),a=G(Z),i=M(Z,"DIV",{class:!0});var Q=E(i);u=Ie(Q,f),Q.forEach(d),Z.forEach(d),J.forEach(d),h=G(P),C&&C.l(P),m=G(P),g=M(P,"DIV",{class:!0});var re=E(g);L(b.$$.fragment,re),re.forEach(d),P.forEach(d),p=G(A),this.h()},h(){c(n,"class","shrink-0"),c(i,"class","truncate"),c(l,"class","flex flex-1 gap-2 items-center"),c(t,"class","flex-1 truncate"),c(g,"class","shrink-0"),c(e,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(A,P){B(A,e,P),y(e,t),y(t,l),y(l,n),I[s].m(n,null),y(l,a),y(l,i),y(i,u),y(e,h),C&&C.m(e,null),y(e,m),y(e,g),j(b,g,null),B(A,p,P),_=!0,w||(S=Ne(e,"click",N),w=!0)},p(A,P){var X,Q;r=A;let J=s;s=T(r),s===J?I[s].p(r,P):(ce(),$(I[J],1,1,()=>{I[J]=null}),ue(),o=I[s],o?o.p(r,P):(o=I[s]=k[s](r),o.c()),v(o,1),o.m(n,null)),(!_||P[0]&32)&&f!==(f=((X=r[42])==null?void 0:X.name)+"")&&Ce(u,f),(Q=r[42])!=null&&Q.has_user_valves?C?(C.p(r,P),P[0]&32&&v(C,1)):(C=Cs(r),C.c(),v(C,1),C.m(e,m)):C&&(ce(),$(C,1,1,()=>{C=null}),ue());const Z={};P[0]&34&&(Z.state=r[1].includes(r[42].id)),b.$set(Z)},i(A){_||(v(o),v(C),v(b.$$.fragment,A),_=!0)},o(A){$(o),$(C),$(b.$$.fragment,A),_=!1},d(A){A&&(d(e),d(p)),I[s].d(),C&&C.d(),R(b),w=!1,S()}}}function Ss(r,e){var s;let t,l,n;return l=new tt({props:{content:(s=e[42])==null?void 0:s.description,placement:"top-start",$$slots:{default:[Lu]},$$scope:{ctx:e}}}),{key:r,first:null,c(){t=Oe(),F(l.$$.fragment),this.h()},l(o){t=Oe(),L(l.$$.fragment,o),this.h()},h(){this.first=t},m(o,a){B(o,t,a),j(l,o,a),n=!0},p(o,a){var f;e=o;const i={};a[0]&32&&(i.content=(f=e[42])==null?void 0:f.description),a[0]&33314|a[1]&64&&(i.$$scope={dirty:a,ctx:e}),l.$set(i)},i(o){n||(v(l.$$.fragment,o),n=!0)},o(o){$(l.$$.fragment,o),n=!1},d(o){o&&d(t),R(l,o)}}}function Ts(r){let e,t;return e=new tt({props:{content:r[15].t("Search the internet"),placement:"top-start",$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&32768&&(s.content=l[15].t("Search the internet")),n[0]&32772|n[1]&64&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function ju(r){let e,t,l,n,s,o,a,i=r[15].t("Web Search")+"",f,u,h,m,g,b,p;return s=new Or({}),m=new sn({props:{state:r[2]}}),m.$on("change",r[26]),{c(){e=D("button"),t=D("div"),l=D("div"),n=D("div"),F(s.$$.fragment),o=W(),a=D("div"),f=$e(i),u=W(),h=D("div"),F(m.$$.fragment),this.h()},l(_){e=M(_,"BUTTON",{class:!0});var w=E(e);t=M(w,"DIV",{class:!0});var S=E(t);l=M(S,"DIV",{class:!0});var k=E(l);n=M(k,"DIV",{class:!0});var I=E(n);L(s.$$.fragment,I),I.forEach(d),o=G(k),a=M(k,"DIV",{class:!0});var T=E(a);f=Ie(T,i),T.forEach(d),k.forEach(d),S.forEach(d),u=G(w),h=M(w,"DIV",{class:!0});var C=E(h);L(m.$$.fragment,C),C.forEach(d),w.forEach(d),this.h()},h(){c(n,"class","shrink-0"),c(a,"class","truncate"),c(l,"class","flex flex-1 gap-2 items-center"),c(t,"class","flex-1 truncate"),c(h,"class","shrink-0"),c(e,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(_,w){B(_,e,w),y(e,t),y(t,l),y(l,n),j(s,n,null),y(l,o),y(l,a),y(a,f),y(e,u),y(e,h),j(m,h,null),g=!0,b||(p=Ne(e,"click",r[27]),b=!0)},p(_,w){(!g||w[0]&32768)&&i!==(i=_[15].t("Web Search")+"")&&Ce(f,i);const S={};w[0]&4&&(S.state=_[2]),m.$set(S)},i(_){g||(v(s.$$.fragment,_),v(m.$$.fragment,_),g=!0)},o(_){$(s.$$.fragment,_),$(m.$$.fragment,_),g=!1},d(_){_&&d(e),R(s),R(m),b=!1,p()}}}function Ds(r){let e,t;return e=new tt({props:{content:r[15].t("Generate an image"),placement:"top-start",$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&32768&&(s.content=l[15].t("Generate an image")),n[0]&32776|n[1]&64&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Ru(r){let e,t,l,n,s,o,a,i=r[15].t("Image")+"",f,u,h,m,g,b,p;return s=new za({props:{className:"size-4",strokeWidth:"1.5"}}),m=new sn({props:{state:r[3]}}),m.$on("change",r[28]),{c(){e=D("button"),t=D("div"),l=D("div"),n=D("div"),F(s.$$.fragment),o=W(),a=D("div"),f=$e(i),u=W(),h=D("div"),F(m.$$.fragment),this.h()},l(_){e=M(_,"BUTTON",{class:!0});var w=E(e);t=M(w,"DIV",{class:!0});var S=E(t);l=M(S,"DIV",{class:!0});var k=E(l);n=M(k,"DIV",{class:!0});var I=E(n);L(s.$$.fragment,I),I.forEach(d),o=G(k),a=M(k,"DIV",{class:!0});var T=E(a);f=Ie(T,i),T.forEach(d),k.forEach(d),S.forEach(d),u=G(w),h=M(w,"DIV",{class:!0});var C=E(h);L(m.$$.fragment,C),C.forEach(d),w.forEach(d),this.h()},h(){c(n,"class","shrink-0"),c(a,"class","truncate"),c(l,"class","flex flex-1 gap-2 items-center"),c(t,"class","flex-1 truncate"),c(h,"class","shrink-0"),c(e,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50")},m(_,w){B(_,e,w),y(e,t),y(t,l),y(l,n),j(s,n,null),y(l,o),y(l,a),y(a,f),y(e,u),y(e,h),j(m,h,null),g=!0,b||(p=Ne(e,"click",r[29]),b=!0)},p(_,w){(!g||w[0]&32768)&&i!==(i=_[15].t("Image")+"")&&Ce(f,i);const S={};w[0]&8&&(S.state=_[3]),m.$set(S)},i(_){g||(v(s.$$.fragment,_),v(m.$$.fragment,_),g=!0)},o(_){$(s.$$.fragment,_),$(m.$$.fragment,_),g=!1},d(_){_&&d(e),R(s),R(m),b=!1,p()}}}function Ms(r){let e,t;return e=new tt({props:{content:r[15].t("Execute code for analysis"),placement:"top-start",$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&32768&&(s.content=l[15].t("Execute code for analysis")),n[0]&32784|n[1]&64&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Hu(r){let e,t,l,n,s,o,a,i=r[15].t("Code Interpreter")+"",f,u,h,m,g,b,p,_;return s=new Aa({props:{className:"size-3.5",strokeWidth:"1.75"}}),m=new sn({props:{state:r[4]}}),m.$on("change",r[30]),{c(){e=D("button"),t=D("div"),l=D("div"),n=D("div"),F(s.$$.fragment),o=W(),a=D("div"),f=$e(i),u=W(),h=D("div"),F(m.$$.fragment),this.h()},l(w){e=M(w,"BUTTON",{class:!0,"aria-pressed":!0,"aria-label":!0});var S=E(e);t=M(S,"DIV",{class:!0});var k=E(t);l=M(k,"DIV",{class:!0});var I=E(l);n=M(I,"DIV",{class:!0});var T=E(n);L(s.$$.fragment,T),T.forEach(d),o=G(I),a=M(I,"DIV",{class:!0});var C=E(a);f=Ie(C,i),C.forEach(d),I.forEach(d),k.forEach(d),u=G(S),h=M(S,"DIV",{class:!0});var N=E(h);L(m.$$.fragment,N),N.forEach(d),S.forEach(d),this.h()},h(){c(n,"class","shrink-0"),c(a,"class","truncate"),c(l,"class","flex flex-1 gap-2 items-center"),c(t,"class","flex-1 truncate"),c(h,"class","shrink-0"),c(e,"class","flex w-full justify-between gap-2 items-center px-3 py-1.5 text-sm cursor-pointer rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50"),c(e,"aria-pressed",r[4]),c(e,"aria-label",g=r[4]?r[15].t("Disable Code Interpreter"):r[15].t("Enable Code Interpreter"))},m(w,S){B(w,e,S),y(e,t),y(t,l),y(l,n),j(s,n,null),y(l,o),y(l,a),y(a,f),y(e,u),y(e,h),j(m,h,null),b=!0,p||(_=Ne(e,"click",r[31]),p=!0)},p(w,S){(!b||S[0]&32768)&&i!==(i=w[15].t("Code Interpreter")+"")&&Ce(f,i);const k={};S[0]&16&&(k.state=w[4]),m.$set(k),(!b||S[0]&16)&&c(e,"aria-pressed",w[4]),(!b||S[0]&32784&&g!==(g=w[4]?w[15].t("Disable Code Interpreter"):w[15].t("Enable Code Interpreter")))&&c(e,"aria-label",g)},i(w){b||(v(s.$$.fragment,w),v(m.$$.fragment,w),b=!0)},o(w){$(s.$$.fragment,w),$(m.$$.fragment,w),b=!1},d(w){w&&d(e),R(s),R(m),p=!1,_()}}}function Wu(r){let e,t,l,n;const s=[Vu,Mu],o=[];function a(i,f){return i[13]===""?0:i[13]==="tools"&&i[14]?1:-1}return~(e=a(r))&&(t=o[e]=s[e](r)),{c(){t&&t.c(),l=Oe()},l(i){t&&t.l(i),l=Oe()},m(i,f){~e&&o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?~e&&o[e].p(i,f):(t&&(ce(),$(o[u],1,1,()=>{o[u]=null}),ue()),~e?(t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l)):t=null)},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),~e&&o[e].d(i)}}}function Gu(r){let e,t,l;return t=new Sn({props:{class:"w-full max-w-70 rounded-2xl px-1 py-1  border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg max-h-72 overflow-y-auto overflow-x-hidden scrollbar-thin",sideOffset:4,alignOffset:-6,side:"bottom",align:"start",transition:Fl,$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{slot:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"slot","content")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[0]&58367|s[1]&64&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Ju(r){let e,t,l;function n(o){r[35](o)}let s={closeOnOutsideClick:r[11],$$slots:{content:[Gu],default:[Du]},$$scope:{ctx:r}};return r[12]!==void 0&&(s.show=r[12]),e=new Tn({props:s}),Be.push(()=>Le(e,"show",n)),e.$on("change",r[36]),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,a){const i={};a[0]&2048&&(i.closeOnOutsideClick=o[11]),a[0]&58367|a[1]&64&&(i.$$scope={dirty:a,ctx:o}),!t&&a[0]&4096&&(t=!0,i.show=o[12],je(()=>t=!1)),e.$set(i)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function qu(r,e,t){let l,n,s,o;Ee(r,$n,q=>t(39,l=q)),Ee(r,bl,q=>t(40,n=q)),Ee(r,wl,q=>t(19,s=q));let{$$slots:a={},$$scope:i}=e;const f=Ot("i18n");Ee(r,f,q=>t(15,o=q));let{selectedToolIds:u=[]}=e,{selectedModels:h=[]}=e,{fileUploadCapableModels:m=[]}=e,{toggleFilters:g=[]}=e,{selectedFilterIds:b=[]}=e,{showWebSearchButton:p=!1}=e,{webSearchEnabled:_=!1}=e,{showImageGenerationButton:w=!1}=e,{imageGenerationEnabled:S=!1}=e,{showCodeInterpreterButton:k=!1}=e,{codeInterpreterEnabled:I=!1}=e,{onShowValves:T}=e,{onClose:C}=e,{closeOnOutsideClick:N=!0}=e,U=!1,O="",A=null;const P=async()=>{var q;if(n===null&&await bl.set(await Cn(localStorage.token)),n&&t(14,A=n.reduce((Re,ve,se,H)=>(Re[ve.id]={name:ve.name,description:ve.meta.description,enabled:u.includes(ve.id),...ve},Re),{})),l)for(const Re in l){const ve=l[Re];ve.info&&t(14,A[`direct_server:${Re}`]={name:((q=ve==null?void 0:ve.info)==null?void 0:q.title)??ve.url,description:ve.info.description??"",enabled:u.includes(`direct_server:${Re}`)},A)}t(0,u=u.filter(Re=>Object.keys(A).includes(Re)))},J=()=>{t(13,O="tools")},Z=(q,Re)=>q.name.localeCompare(Re.name,void 0,{sensitivity:"base"}),X=(q,Re)=>{Re.stopPropagation(),Re.preventDefault(),T({type:"function",id:q.id})},Q=async q=>{q.detail,await qe()},re=q=>{b.includes(q.id)?t(1,b=b.filter(Re=>Re!==q.id)):t(1,b=[...b,q.id])},_e=async q=>{q.detail,await qe()},De=()=>{t(2,_=!_)},x=async q=>{q.detail,await qe()},be=()=>{t(3,S=!S)},Me=async q=>{q.detail,await qe()},oe=()=>{t(4,I=!I)},Je=()=>{t(13,O="")},le=(q,Re)=>{Re.stopPropagation(),Re.preventDefault(),T({type:"tool",id:q})},ee=async(q,Re)=>{var ve;if(((ve=A[q])==null?void 0:ve.authenticated)??!0){t(14,A[q].enabled=!A[q].enabled,A);const se=A[q].enabled;await qe(),se?t(0,u=[...u,q]):t(0,u=u.filter(H=>H!==q))}else{Re.preventDefault();let se=q.split(":"),H=(se==null?void 0:se.at(-1))??q;const We=ff(H,"mcp");window.open(We,"_self","noopener")}};function Se(q){U=q,t(12,U)}const ne=q=>{q.detail===!1&&C()};return r.$$set=q=>{"selectedToolIds"in q&&t(0,u=q.selectedToolIds),"selectedModels"in q&&t(17,h=q.selectedModels),"fileUploadCapableModels"in q&&t(18,m=q.fileUploadCapableModels),"toggleFilters"in q&&t(5,g=q.toggleFilters),"selectedFilterIds"in q&&t(1,b=q.selectedFilterIds),"showWebSearchButton"in q&&t(6,p=q.showWebSearchButton),"webSearchEnabled"in q&&t(2,_=q.webSearchEnabled),"showImageGenerationButton"in q&&t(7,w=q.showImageGenerationButton),"imageGenerationEnabled"in q&&t(3,S=q.imageGenerationEnabled),"showCodeInterpreterButton"in q&&t(8,k=q.showCodeInterpreterButton),"codeInterpreterEnabled"in q&&t(4,I=q.codeInterpreterEnabled),"onShowValves"in q&&t(9,T=q.onShowValves),"onClose"in q&&t(10,C=q.onClose),"closeOnOutsideClick"in q&&t(11,N=q.closeOnOutsideClick),"$$scope"in q&&t(37,i=q.$$scope)},r.$$.update=()=>{var q,Re;r.$$.dirty[0]&4096&&U&&P(),r.$$.dirty[0]&917504&&m.length===h.length&&((s==null?void 0:s.role)==="admin"||((Re=(q=s==null?void 0:s.permissions)==null?void 0:q.chat)==null||Re.file_upload))},[u,b,_,S,I,g,p,w,k,T,C,N,U,O,A,o,f,h,m,s,a,J,Z,X,Q,re,_e,De,x,be,Me,oe,Je,le,ee,Se,ne,i]}class Zu extends st{constructor(e){super(),ot(this,e,qu,Ju,nt,{selectedToolIds:0,selectedModels:17,fileUploadCapableModels:18,toggleFilters:5,selectedFilterIds:1,showWebSearchButton:6,webSearchEnabled:2,showImageGenerationButton:7,imageGenerationEnabled:3,showCodeInterpreterButton:8,codeInterpreterEnabled:4,onShowValves:9,onClose:10,closeOnOutsideClick:11},null,[-1,-1])}}function Yu(r){let e,t,l,n,s;return{c(){e=we("svg"),t=we("path"),l=we("path"),n=we("path"),s=we("path"),this.h()},l(o){e=ke(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=E(e);t=ke(a,"path",{d:!0}),E(t).forEach(d),l=ke(a,"path",{d:!0}),E(l).forEach(d),n=ke(a,"path",{d:!0}),E(n).forEach(d),s=ke(a,"path",{d:!0}),E(s).forEach(d),a.forEach(d),this.h()},h(){c(t,"d","M5.21173 15.1113L2.52473 12.4243C2.29041 12.1899 2.29041 11.8101 2.52473 11.5757L5.21173 8.88873C5.44605 8.65442 5.82595 8.65442 6.06026 8.88873L8.74727 11.5757C8.98158 11.8101 8.98158 12.1899 8.74727 12.4243L6.06026 15.1113C5.82595 15.3456 5.44605 15.3456 5.21173 15.1113Z"),c(l,"d","M11.5757 21.475L8.88874 18.788C8.65443 18.5537 8.65443 18.1738 8.88874 17.9395L11.5757 15.2525C11.8101 15.0182 12.19 15.0182 12.4243 15.2525L15.1113 17.9395C15.3456 18.1738 15.3456 18.5537 15.1113 18.788L12.4243 21.475C12.19 21.7094 11.8101 21.7094 11.5757 21.475Z"),c(n,"d","M11.5757 8.7475L8.88874 6.06049C8.65443 5.82618 8.65443 5.44628 8.88874 5.21197L11.5757 2.52496C11.8101 2.29065 12.19 2.29065 12.4243 2.52496L15.1113 5.21197C15.3456 5.44628 15.3456 5.82618 15.1113 6.06049L12.4243 8.7475C12.19 8.98181 11.8101 8.98181 11.5757 8.7475Z"),c(s,"d","M17.9396 15.1113L15.2526 12.4243C15.0183 12.1899 15.0183 11.8101 15.2526 11.5757L17.9396 8.88873C18.174 8.65442 18.5539 8.65442 18.7882 8.88873L21.4752 11.5757C21.7095 11.8101 21.7095 12.1899 21.4752 12.4243L18.7882 15.1113C18.5539 15.3456 18.174 15.3456 17.9396 15.1113Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(o,a){B(o,e,a),y(e,t),y(e,l),y(e,n),y(e,s)},p(o,[a]){a&2&&c(e,"stroke-width",o[1]),a&1&&c(e,"class",o[0])},i:me,o:me,d(o){o&&d(e)}}}function Ku(r,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class Xu extends st{constructor(e){super(),ot(this,e,Ku,Yu,nt,{className:0,strokeWidth:1})}}function Qu(r){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=ke(n,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){c(t,"d","M6 12H12M18 12H12M12 12V6M12 12V18"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(l,n){B(l,e,n),y(e,t)},p(l,[n]){n&2&&c(e,"stroke-width",l[1]),n&1&&c(e,"class",l[0])},i:me,o:me,d(l){l&&d(e)}}}function xu(r,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class ed extends st{constructor(e){super(),ot(this,e,xu,Qu,nt,{className:0,strokeWidth:1})}}function Vs(r,e,t){const l=r.slice();l[133]=e[t];const n=l[41].find(function(...o){return r[110](l[133],...o)});return l[134]=n,l}function Ns(r,e,t){const l=r.slice();return l[137]=e[t],l[139]=t,l}function Bs(r){var C;let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_,w,S=r[8]===!1&&((C=r[13])==null?void 0:C.currentId)&&Os(r);const k=[ld,td],I=[];function T(N,U){return N[31]?0:1}return m=T(r),g=I[m]=k[m](r),{c(){e=D("div"),t=D("div"),l=D("div"),n=D("div"),S&&S.c(),o=W(),a=D("div"),i=D("div"),f=D("div"),u=D("input"),h=W(),g.c(),this.h()},l(N){e=M(N,"DIV",{class:!0});var U=E(e);t=M(U,"DIV",{class:!0});var O=E(t);l=M(O,"DIV",{class:!0});var A=E(l);n=M(A,"DIV",{class:!0});var P=E(n);S&&S.l(P),P.forEach(d),A.forEach(d),O.forEach(d),o=G(U),a=M(U,"DIV",{class:!0});var J=E(a);i=M(J,"DIV",{class:!0});var Z=E(i);f=M(Z,"DIV",{class:!0});var X=E(f);u=M(X,"INPUT",{type:!0}),h=G(X),g.l(X),X.forEach(d),Z.forEach(d),J.forEach(d),U.forEach(d),this.h()},h(){var N,U;c(n,"class","relative"),c(l,"class",s="flex flex-col px-3 "+(((N=r[46])==null?void 0:N.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"),c(t,"class","mx-auto inset-x-0 bg-transparent flex justify-center"),c(u,"type","file"),u.hidden=!0,u.multiple=!0,c(f,"class",""),c(i,"class",b=(((U=r[46])==null?void 0:U.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"),c(a,"class","bg-transparent"),c(e,"class","w-full font-primary")},m(N,U){B(N,e,U),y(e,t),y(t,l),y(l,n),S&&S.m(n,null),y(e,o),y(e,a),y(a,i),y(i,f),y(f,u),r[75](u),y(f,h),I[m].m(f,null),p=!0,_||(w=[Ne(u,"change",r[76]),Ne(u,"change",r[77])],_=!0)},p(N,U){var A,P,J;N[8]===!1&&((A=N[13])!=null&&A.currentId)?S?S.p(N,U):(S=Os(N),S.c(),S.m(n,null)):S&&(S.d(1),S=null),(!p||U[1]&32768&&s!==(s="flex flex-col px-3 "+(((P=N[46])==null?void 0:P.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"))&&c(l,"class",s);let O=m;m=T(N),m===O?I[m].p(N,U):(ce(),$(I[O],1,1,()=>{I[O]=null}),ue(),g=I[m],g?g.p(N,U):(g=I[m]=k[m](N),g.c()),v(g,1),g.m(f,null)),(!p||U[1]&32768&&b!==(b=(((J=N[46])==null?void 0:J.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"))&&c(i,"class",b)},i(N){p||(v(g),p=!0)},o(N){$(g),p=!1},d(N){N&&d(e),S&&S.d(),r[75](null),I[m].d(),_=!1,ul(w)}}}function Os(r){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',n,s;return{c(){e=D("div"),t=D("button"),t.innerHTML=l,this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);t=M(a,"BUTTON",{class:!0,"data-svelte-h":!0}),El(t)!=="svelte-h8r9o0"&&(t.innerHTML=l),a.forEach(d),this.h()},h(){c(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),c(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(o,a){B(o,e,a),y(e,t),n||(s=Ne(t,"click",r[74]),n=!0)},p:me,d(o){o&&d(e),n=!1,s()}}}function td(r){var ie,Te,$t,Bt,yt,Vt,St;let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_,w=r[21].length===1&&((ie=r[20].find(r[68]))==null?void 0:ie.has_user_valves),S,k,I,T,C,N,U,O,A,P,J,Z,X,Q,re,_e,De,x=r[0]!==void 0&&zs(r),be=r[2].length>0&&As(r),Me=r[28]&&Fs(r);function oe(fe){r[99](fe)}let Je={selectedModels:r[0]?[r[0].id]:r[12],fileUploadCapableModels:r[40],screenCaptureHandler:r[57],inputFilesHandler:r[59],uploadFilesHandler:r[94],uploadGoogleDriveHandler:r[95],uploadOneDriveHandler:r[96],onUpload:r[97],onClose:r[98],$$slots:{default:[od]},$$scope:{ctx:r}};r[2]!==void 0&&(Je.files=r[2]),h=new fu({props:Je}),Be.push(()=>Le(h,"files",oe));let le=(r[43]||r[44]||r[45]||r[42]||r[41]&&r[41].length>0)&&Rs(r),ee=w&&Hs(r),Se=(r[3]??[]).length>0&&Ws(r),ne=ft(r[4]),q=[];for(let fe=0;fe<ne.length;fe+=1)q[fe]=Js(Vs(r,ne,fe));const Re=fe=>$(q[fe],1,1,()=>{q[fe]=null});let ve=r[6]&&qs(r),se=r[5]&&Zs(r),H=r[7]&&Ys(r),We=(!((Te=r[13])!=null&&Te.currentId)||(($t=r[13].messages[r[13].currentId])==null?void 0:$t.done)==!0)&&(((Bt=r[19])==null?void 0:Bt.role)==="admin"||(((St=(Vt=(yt=r[19])==null?void 0:yt.permissions)==null?void 0:Vt.chat)==null?void 0:St.stt)??!0))&&Ks(r);const ut=[vd,bd,_d],et=[];function K(fe,Ge){var at,It,zt,he,Pe;return fe[14]&&fe[14].length>0||fe[13].currentId&&((at=fe[13].messages[fe[13].currentId])==null?void 0:at.done)!=!0||fe[11]?0:fe[1]===""&&fe[2].length===0&&(((It=fe[19])==null?void 0:It.role)==="admin"||(((Pe=(he=(zt=fe[19])==null?void 0:zt.permissions)==null?void 0:he.chat)==null?void 0:Pe.call)??!0))?1:2}P=K(r),J=et[P]=ut[P](r);function mt(fe,Ge){var at,It;return(It=(at=fe[18])==null?void 0:at.license_metadata)!=null&&It.input_footer?$d:Ed}let pt=mt(r),ht=pt(r);return{c(){e=D("form"),t=D("div"),x&&x.c(),l=W(),be&&be.c(),n=W(),s=D("div"),o=D("div"),Me&&Me.c(),i=W(),f=D("div"),u=D("div"),F(h.$$.fragment),g=W(),b=D("div"),p=W(),le&&le.c(),_=W(),ee&&ee.c(),S=W(),k=D("div"),Se&&Se.c(),I=W();for(let fe=0;fe<q.length;fe+=1)q[fe].c();T=W(),ve&&ve.c(),C=W(),se&&se.c(),N=W(),H&&H.c(),U=W(),O=D("div"),We&&We.c(),A=W(),J.c(),Q=W(),ht.c(),this.h()},l(fe){e=M(fe,"FORM",{class:!0});var Ge=E(e);t=M(Ge,"DIV",{id:!0,class:!0,dir:!0});var at=E(t);x&&x.l(at),l=G(at),be&&be.l(at),n=G(at),s=M(at,"DIV",{class:!0});var It=E(s);o=M(It,"DIV",{class:!0,id:!0});var zt=E(o);Me&&Me.l(zt),zt.forEach(d),It.forEach(d),i=G(at),f=M(at,"DIV",{class:!0,dir:!0});var he=E(f);u=M(he,"DIV",{class:!0});var Pe=E(u);L(h.$$.fragment,Pe),g=G(Pe),b=M(Pe,"DIV",{class:!0}),E(b).forEach(d),p=G(Pe),le&&le.l(Pe),_=G(Pe),ee&&ee.l(Pe),S=G(Pe),k=M(Pe,"DIV",{class:!0});var Ae=E(k);Se&&Se.l(Ae),I=G(Ae);for(let gt=0;gt<q.length;gt+=1)q[gt].l(Ae);T=G(Ae),ve&&ve.l(Ae),C=G(Ae),se&&se.l(Ae),N=G(Ae),H&&H.l(Ae),Ae.forEach(d),Pe.forEach(d),U=G(he),O=M(he,"DIV",{class:!0});var Ke=E(O);We&&We.l(Ke),A=G(Ke),J.l(Ke),Ke.forEach(d),he.forEach(d),at.forEach(d),Q=G(Ge),ht.l(Ge),Ge.forEach(d),this.h()},h(){var fe;c(o,"class",a="scrollbar-hidden rtl:text-right ltr:text-left bg-transparent dark:text-gray-100 outline-hidden w-full pb-1 px-1 resize-none h-fit max-h-96 overflow-auto "+(r[2].length===0?r[0]!==void 0?"pt-1.5":"pt-2.5":"")),c(o,"id","chat-input-container"),c(s,"class","px-2.5"),c(b,"class","flex self-center w-[1px] h-4 mx-1 bg-gray-200/50 dark:bg-gray-800/50"),c(k,"class","ml-1 flex gap-1.5"),c(u,"class","ml-1 self-end flex items-center flex-1 max-w-[80%]"),c(O,"class","self-end flex space-x-1 mr-1 shrink-0"),c(f,"class","flex justify-between mt-0.5 mb-2.5 mx-0.5 max-w-full"),c(f,"dir","ltr"),c(t,"id","message-input-container"),c(t,"class",Z="flex-1 flex flex-col relative w-full shadow-lg rounded-3xl border "+(r[48]?"border-dashed border-gray-100 dark:border-gray-800 hover:border-gray-200 focus-within:border-gray-200 hover:dark:border-gray-700 focus-within:dark:border-gray-700":" border-gray-100 dark:border-gray-850 hover:border-gray-200 focus-within:border-gray-100 hover:dark:border-gray-800 focus-within:dark:border-gray-800")+" transition px-1 bg-white/5 dark:bg-gray-500/5 backdrop-blur-sm dark:text-gray-100"),c(t,"dir",X=((fe=r[46])==null?void 0:fe.chatDirection)??"auto"),c(e,"class","w-full flex flex-col gap-1.5")},m(fe,Ge){B(fe,e,Ge),y(e,t),x&&x.m(t,null),y(t,l),be&&be.m(t,null),y(t,n),y(t,s),y(s,o),Me&&Me.m(o,null),y(t,i),y(t,f),y(f,u),j(h,u,null),y(u,g),y(u,b),y(u,p),le&&le.m(u,null),y(u,_),ee&&ee.m(u,null),y(u,S),y(u,k),Se&&Se.m(k,null),y(k,I);for(let at=0;at<q.length;at+=1)q[at]&&q[at].m(k,null);y(k,T),ve&&ve.m(k,null),y(k,C),se&&se.m(k,null),y(k,N),H&&H.m(k,null),y(f,U),y(f,O),We&&We.m(O,null),y(O,A),et[P].m(O,null),y(e,Q),ht.m(e,null),re=!0,_e||(De=Ne(e,"submit",Ul(r[117])),_e=!0)},p(fe,Ge){var zt,he,Pe,Ae,Ke,gt,_t,Tt;fe[0]!==void 0?x?(x.p(fe,Ge),Ge[0]&1&&v(x,1)):(x=zs(fe),x.c(),v(x,1),x.m(t,l)):x&&(ce(),$(x,1,1,()=>{x=null}),ue()),fe[2].length>0?be?(be.p(fe,Ge),Ge[0]&4&&v(be,1)):(be=As(fe),be.c(),v(be,1),be.m(t,n)):be&&(ce(),$(be,1,1,()=>{be=null}),ue()),fe[28]?Me?(Me.p(fe,Ge),Ge[0]&268435456&&v(Me,1)):(Me=Fs(fe),Me.c(),v(Me,1),Me.m(o,null)):Me&&(ce(),$(Me,1,1,()=>{Me=null}),ue()),(!re||Ge[0]&5&&a!==(a="scrollbar-hidden rtl:text-right ltr:text-left bg-transparent dark:text-gray-100 outline-hidden w-full pb-1 px-1 resize-none h-fit max-h-96 overflow-auto "+(fe[2].length===0?fe[0]!==void 0?"pt-1.5":"pt-2.5":"")))&&c(o,"class",a);const at={};if(Ge[0]&4097&&(at.selectedModels=fe[0]?[fe[0].id]:fe[12]),Ge[1]&512&&(at.fileUploadCapableModels=fe[40]),Ge[1]&16&&(at.uploadFilesHandler=fe[94]),Ge[1]&65536&&(at.uploadGoogleDriveHandler=fe[95]),Ge[4]&65536&&(at.$$scope={dirty:Ge,ctx:fe}),!m&&Ge[0]&4&&(m=!0,at.files=fe[2],je(()=>m=!1)),h.$set(at),fe[43]||fe[44]||fe[45]||fe[42]||fe[41]&&fe[41].length>0?le?(le.p(fe,Ge),Ge[1]&31744&&v(le,1)):(le=Rs(fe),le.c(),v(le,1),le.m(u,_)):le&&(ce(),$(le,1,1,()=>{le=null}),ue()),Ge[0]&3145728&&(w=fe[21].length===1&&((zt=fe[20].find(fe[68]))==null?void 0:zt.has_user_valves)),w?ee?(ee.p(fe,Ge),Ge[0]&3145728&&v(ee,1)):(ee=Hs(fe),ee.c(),v(ee,1),ee.m(u,S)):ee&&(ce(),$(ee,1,1,()=>{ee=null}),ue()),(fe[3]??[]).length>0?Se?(Se.p(fe,Ge),Ge[0]&8&&v(Se,1)):(Se=Ws(fe),Se.c(),v(Se,1),Se.m(k,I)):Se&&(ce(),$(Se,1,1,()=>{Se=null}),ue()),Ge[0]&16|Ge[1]&1024){ne=ft(fe[4]);let ct;for(ct=0;ct<ne.length;ct+=1){const Ut=Vs(fe,ne,ct);q[ct]?(q[ct].p(Ut,Ge),v(q[ct],1)):(q[ct]=Js(Ut),q[ct].c(),v(q[ct],1),q[ct].m(k,T))}for(ce(),ct=ne.length;ct<q.length;ct+=1)Re(ct);ue()}fe[6]?ve?(ve.p(fe,Ge),Ge[0]&64&&v(ve,1)):(ve=qs(fe),ve.c(),v(ve,1),ve.m(k,C)):ve&&(ce(),$(ve,1,1,()=>{ve=null}),ue()),fe[5]?se?(se.p(fe,Ge),Ge[0]&32&&v(se,1)):(se=Zs(fe),se.c(),v(se,1),se.m(k,N)):se&&(ce(),$(se,1,1,()=>{se=null}),ue()),fe[7]?H?(H.p(fe,Ge),Ge[0]&128&&v(H,1)):(H=Ys(fe),H.c(),v(H,1),H.m(k,null)):H&&(ce(),$(H,1,1,()=>{H=null}),ue()),(!((he=fe[13])!=null&&he.currentId)||((Pe=fe[13].messages[fe[13].currentId])==null?void 0:Pe.done)==!0)&&(((Ae=fe[19])==null?void 0:Ae.role)==="admin"||(((_t=(gt=(Ke=fe[19])==null?void 0:Ke.permissions)==null?void 0:gt.chat)==null?void 0:_t.stt)??!0))?We?(We.p(fe,Ge),Ge[0]&532480&&v(We,1)):(We=Ks(fe),We.c(),v(We,1),We.m(O,A)):We&&(ce(),$(We,1,1,()=>{We=null}),ue());let It=P;P=K(fe),P===It?et[P].p(fe,Ge):(ce(),$(et[It],1,1,()=>{et[It]=null}),ue(),J=et[P],J?J.p(fe,Ge):(J=et[P]=ut[P](fe),J.c()),v(J,1),J.m(O,null)),(!re||Ge[1]&131072&&Z!==(Z="flex-1 flex flex-col relative w-full shadow-lg rounded-3xl border "+(fe[48]?"border-dashed border-gray-100 dark:border-gray-800 hover:border-gray-200 focus-within:border-gray-200 hover:dark:border-gray-700 focus-within:dark:border-gray-700":" border-gray-100 dark:border-gray-850 hover:border-gray-200 focus-within:border-gray-100 hover:dark:border-gray-800 focus-within:dark:border-gray-800")+" transition px-1 bg-white/5 dark:bg-gray-500/5 backdrop-blur-sm dark:text-gray-100"))&&c(t,"class",Z),(!re||Ge[1]&32768&&X!==(X=((Tt=fe[46])==null?void 0:Tt.chatDirection)??"auto"))&&c(t,"dir",X),pt===(pt=mt(fe))&&ht?ht.p(fe,Ge):(ht.d(1),ht=pt(fe),ht&&(ht.c(),ht.m(e,null)))},i(fe){if(!re){v(x),v(be),v(Me),v(h.$$.fragment,fe),v(le),v(ee),v(Se);for(let Ge=0;Ge<ne.length;Ge+=1)v(q[Ge]);v(ve),v(se),v(H),v(We),v(J),re=!0}},o(fe){$(x),$(be),$(Me),$(h.$$.fragment,fe),$(le),$(ee),$(Se),q=q.filter(Boolean);for(let Ge=0;Ge<q.length;Ge+=1)$(q[Ge]);$(ve),$(se),$(H),$(We),$(J),re=!1},d(fe){fe&&d(e),x&&x.d(),be&&be.d(),Me&&Me.d(),R(h),le&&le.d(),ee&&ee.d(),Se&&Se.d(),Rt(q,fe),ve&&ve.d(),se&&se.d(),H&&H.d(),We&&We.d(),et[P].d(),ht.d(),_e=!1,De()}}}function ld(r){let e,t,l;function n(o){r[80](o)}let s={onCancel:r[78],onConfirm:r[79]};return r[31]!==void 0&&(s.recording=r[31]),e=new ef({props:s}),Be.push(()=>Le(e,"recording",n)),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,a){const i={};a[1]&1&&(i.onCancel=o[78]),a[0]&2|a[1]&32769&&(i.onConfirm=o[79]),!t&&a[1]&1&&(t=!0,i.recording=o[31],je(()=>t=!1)),e.$set(i)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function zs(r){let e,t,l,n,s,o,a,i,f=r[0].name+"",u,h,m,g,b,p,_,w;return b=new hl({}),{c(){e=D("div"),t=D("div"),l=D("div"),n=D("img"),o=W(),a=D("div"),i=D("span"),u=$e(f),h=W(),m=D("div"),g=D("button"),F(b.$$.fragment),this.h()},l(S){e=M(S,"DIV",{class:!0});var k=E(e);t=M(k,"DIV",{class:!0});var I=E(t);l=M(I,"DIV",{class:!0});var T=E(l);n=M(T,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),o=G(T),a=M(T,"DIV",{class:!0});var C=E(a);i=M(C,"SPAN",{class:!0});var N=E(i);u=Ie(N,f),N.forEach(d),C.forEach(d),T.forEach(d),h=G(I),m=M(I,"DIV",{});var U=E(m);g=M(U,"BUTTON",{class:!0});var O=E(g);L(b.$$.fragment,O),O.forEach(d),U.forEach(d),I.forEach(d),k.forEach(d),this.h()},h(){var S,k,I;c(n,"crossorigin","anonymous"),c(n,"alt","model profile"),c(n,"class","size-3.5 max-w-[28px] object-cover rounded-full"),il(n.src,s=((I=(k=(S=r[20].find(r[81]))==null?void 0:S.info)==null?void 0:k.meta)==null?void 0:I.profile_image_url)??(r[47].language==="dg-DG"?`${gl}/doge.png`:`${gl}/static/favicon.png`))||c(n,"src",s),c(i,"class",""),c(a,"class","translate-y-[0.5px]"),c(l,"class","pl-[1px] flex items-center gap-2 text-sm dark:text-gray-500"),c(g,"class","flex items-center dark:text-gray-500"),c(t,"class","flex items-center justify-between w-full"),c(e,"class","px-3 pt-3 text-left w-full flex flex-col z-10")},m(S,k){B(S,e,k),y(e,t),y(t,l),y(l,n),y(l,o),y(l,a),y(a,i),y(i,u),y(t,h),y(t,m),y(m,g),j(b,g,null),p=!0,_||(w=Ne(g,"click",r[82]),_=!0)},p(S,k){var I,T,C;(!p||k[0]&1048577|k[1]&65536&&!il(n.src,s=((C=(T=(I=S[20].find(S[81]))==null?void 0:I.info)==null?void 0:T.meta)==null?void 0:C.profile_image_url)??(S[47].language==="dg-DG"?`${gl}/doge.png`:`${gl}/static/favicon.png`)))&&c(n,"src",s),(!p||k[0]&1)&&f!==(f=S[0].name+"")&&Ce(u,f)},i(S){p||(v(b.$$.fragment,S),p=!0)},o(S){$(b.$$.fragment,S),p=!1},d(S){S&&d(e),R(b),_=!1,w()}}}function As(r){let e,t,l=ft(r[2]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Ps(Ns(r,l,o));const s=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){e=D("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(d),this.h()},h(){c(e,"class","mx-2 mt-2.5 pb-1.5 flex items-center flex-wrap gap-2")},m(o,a){B(o,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(o,a){if(a[0]&4101|a[1]&98560){l=ft(o[2]);let i;for(i=0;i<l.length;i+=1){const f=Ns(o,l,i);n[i]?(n[i].p(f,a),v(n[i],1)):(n[i]=Ps(f),n[i].c(),v(n[i],1),n[i].m(e,null))}for(ce(),i=l.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)v(n[a]);t=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)$(n[a]);t=!1},d(o){o&&d(e),Rt(n,o)}}}function nd(r){var s,o;let e,t;function l(){return r[85](r[139])}function n(){return r[86](r[137])}return e=new ga({props:{item:r[137],name:r[137].name,type:r[137].type,size:(s=r[137])==null?void 0:s.size,loading:r[137].status==="uploading",dismissible:!0,edit:!0,small:!0,modal:["file","collection"].includes((o=r[137])==null?void 0:o.type)}}),e.$on("dismiss",l),e.$on("click",n),{c(){F(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,i){j(e,a,i),t=!0},p(a,i){var u,h;r=a;const f={};i[0]&4&&(f.item=r[137]),i[0]&4&&(f.name=r[137].name),i[0]&4&&(f.type=r[137].type),i[0]&4&&(f.size=(u=r[137])==null?void 0:u.size),i[0]&4&&(f.loading=r[137].status==="uploading"),i[0]&4&&(f.modal=["file","collection"].includes((h=r[137])==null?void 0:h.type)),e.$set(f)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){R(e,a)}}}function rd(r){let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p;l=new rf({props:{src:r[137].url,alt:"",imageClassName:" size-10 rounded-xl object-cover"}});let _=(r[0]?r[39].length===0:r[12].length!==r[39].length)&&Us(r);function w(){return r[84](r[139])}return{c(){e=D("div"),t=D("div"),F(l.$$.fragment),n=W(),_&&_.c(),s=W(),o=D("div"),a=D("button"),i=we("svg"),f=we("path"),m=W(),this.h()},l(S){e=M(S,"DIV",{class:!0});var k=E(e);t=M(k,"DIV",{class:!0});var I=E(t);L(l.$$.fragment,I),n=G(I),_&&_.l(I),I.forEach(d),s=G(k),o=M(k,"DIV",{class:!0});var T=E(o);a=M(T,"BUTTON",{class:!0,type:!0,"aria-label":!0});var C=E(a);i=ke(C,"svg",{xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0,class:!0});var N=E(i);f=ke(N,"path",{d:!0}),E(f).forEach(d),N.forEach(d),C.forEach(d),T.forEach(d),m=G(k),k.forEach(d),this.h()},h(){var S;c(t,"class","relative flex items-center"),c(f,"d","M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"),c(i,"xmlns","http://www.w3.org/2000/svg"),c(i,"viewBox","0 0 20 20"),c(i,"fill","currentColor"),c(i,"aria-hidden","true"),c(i,"class","size-4"),c(a,"class",u="bg-white text-black border border-white rounded-full "+(((S=r[46])==null?void 0:S.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden group-hover:visible invisible transition")),c(a,"type","button"),c(a,"aria-label",h=r[47].t("Remove file")),c(o,"class","absolute -top-1 -right-1"),c(e,"class","relative group")},m(S,k){B(S,e,k),y(e,t),j(l,t,null),y(t,n),_&&_.m(t,null),y(e,s),y(e,o),y(o,a),y(a,i),y(i,f),y(e,m),g=!0,b||(p=Ne(a,"click",w),b=!0)},p(S,k){var T;r=S;const I={};k[0]&4&&(I.src=r[137].url),l.$set(I),(r[0]?r[39].length===0:r[12].length!==r[39].length)?_?(_.p(r,k),k[0]&4097|k[1]&256&&v(_,1)):(_=Us(r),_.c(),v(_,1),_.m(t,null)):_&&(ce(),$(_,1,1,()=>{_=null}),ue()),(!g||k[1]&32768&&u!==(u="bg-white text-black border border-white rounded-full "+(((T=r[46])==null?void 0:T.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden group-hover:visible invisible transition")))&&c(a,"class",u),(!g||k[1]&65536&&h!==(h=r[47].t("Remove file")))&&c(a,"aria-label",h)},i(S){g||(v(l.$$.fragment,S),v(_),g=!0)},o(S){$(l.$$.fragment,S),$(_),g=!1},d(S){S&&d(e),R(l),_&&_.d(),b=!1,p()}}}function Us(r){let e,t;return e=new tt({props:{className:" absolute top-1 left-1",content:r[47].t("{{ models }}",{models:[...r[0]?[r[0]]:r[12]].filter(r[83]).join(", ")}),$$slots:{default:[sd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&4097|n[1]&65792&&(s.content=l[47].t("{{ models }}",{models:[...l[0]?[l[0]]:l[12]].filter(l[83]).join(", ")})),n[4]&65536&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function sd(r){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0,class:!0});var n=E(e);t=ke(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){c(t,"fill-rule","evenodd"),c(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),c(t,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"aria-hidden","true"),c(e,"class","size-4 fill-yellow-300")},m(l,n){B(l,e,n),y(e,t)},p:me,d(l){l&&d(e)}}}function Ps(r){let e,t,l,n;const s=[rd,nd],o=[];function a(i,f){return i[137].type==="image"?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function Fs(r){var s;let e=((s=r[46])==null?void 0:s.richTextInput)??!0,t,l,n=js(r);return{c(){n.c(),t=Oe()},l(o){n.l(o),t=Oe()},m(o,a){n.m(o,a),B(o,t,a),l=!0},p(o,a){var i;a[1]&32768&&nt(e,e=((i=o[46])==null?void 0:i.richTextInput)??!0)?(ce(),$(n,1,1,me),ue(),n=js(o),n.c(),v(n,1),n.m(t.parentNode,t)):n.p(o,a)},i(o){l||(v(n),l=!0)},o(o){$(n),l=!1},d(o){o&&d(t),n.d(o)}}}function Ls(r){var n,s,o,a,i,f,u,h;let e,t,l={id:"chat-input",onChange:r[87],json:!0,richText:((n=r[46])==null?void 0:n.richTextInput)??!0,messageInput:!0,showFormattingToolbar:((s=r[46])==null?void 0:s.showFormattingToolbar)??!1,floatingMenuPlacement:"top-start",insertPromptAsRichText:((o=r[46])==null?void 0:o.insertPromptAsRichText)??!1,shiftEnter:!(((a=r[46])==null?void 0:a.ctrlEnterToSend)??!1)&&!r[49]&&!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),placeholder:r[15]?r[15]:r[47].t("Send a Message"),largeTextAsFile:(((i=r[46])==null?void 0:i.largeTextAsFile)??!1)&&!r[38],autocomplete:((u=(f=r[18])==null?void 0:f.features)==null?void 0:u.enable_autocomplete_generation)&&(((h=r[46])==null?void 0:h.promptAutocomplete)??!1),generateAutoCompletion:r[88],suggestions:r[28],oncompositionstart:r[89],oncompositionend:r[90]};return e=new tf({props:l}),r[91](e),e.$on("keydown",r[92]),e.$on("paste",r[93]),{c(){F(e.$$.fragment)},l(m){L(e.$$.fragment,m)},m(m,g){j(e,m,g),t=!0},p(m,g){var p,_,w,S,k,I,T,C;const b={};g[0]&131074&&(b.onChange=m[87]),g[1]&32768&&(b.richText=((p=m[46])==null?void 0:p.richTextInput)??!0),g[1]&32768&&(b.showFormattingToolbar=((_=m[46])==null?void 0:_.showFormattingToolbar)??!1),g[1]&32768&&(b.insertPromptAsRichText=((w=m[46])==null?void 0:w.insertPromptAsRichText)??!1),g[1]&294912&&(b.shiftEnter=!(((S=m[46])==null?void 0:S.ctrlEnterToSend)??!1)&&!m[49]&&!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)),g[0]&32768|g[1]&65536&&(b.placeholder=m[15]?m[15]:m[47].t("Send a Message")),g[1]&32896&&(b.largeTextAsFile=(((k=m[46])==null?void 0:k.largeTextAsFile)??!1)&&!m[38]),g[0]&262144|g[1]&32768&&(b.autocomplete=((T=(I=m[18])==null?void 0:I.features)==null?void 0:T.enable_autocomplete_generation)&&(((C=m[46])==null?void 0:C.promptAutocomplete)??!1)),g[0]&2105344|g[1]&65536&&(b.generateAutoCompletion=m[88]),g[0]&268435456&&(b.suggestions=m[28]),g[1]&2&&(b.oncompositionstart=m[89]),g[1]&6&&(b.oncompositionend=m[90]),e.$set(b)},i(m){t||(v(e.$$.fragment,m),t=!0)},o(m){$(e.$$.fragment,m),t=!1},d(m){r[91](null),R(e,m)}}}function js(r){var s;let e=((s=r[46])==null?void 0:s.showFormattingToolbar)??!1,t,l,n=Ls(r);return{c(){n.c(),t=Oe()},l(o){n.l(o),t=Oe()},m(o,a){n.m(o,a),B(o,t,a),l=!0},p(o,a){var i;a[1]&32768&&nt(e,e=((i=o[46])==null?void 0:i.showFormattingToolbar)??!1)?(ce(),$(n,1,1,me),ue(),n=Ls(o),n.c(),v(n,1),n.m(t.parentNode,t)):n.p(o,a)},i(o){l||(v(n),l=!0)},o(o){$(n),l=!1},d(o){o&&d(t),n.d(o)}}}function od(r){let e,t,l;return t=new ed({props:{className:"size-5.5"}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{id:!0,class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"id","input-menu-button"),c(e,"class","bg-transparent hover:bg-gray-100 text-gray-700 dark:text-white dark:hover:bg-gray-800 rounded-full size-8 flex justify-center items-center outline-hidden focus:outline-hidden")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Rs(r){let e,t,l,n,s,o,a;function i(b){r[102](b)}function f(b){r[103](b)}function u(b){r[104](b)}function h(b){r[105](b)}function m(b){r[106](b)}let g={selectedModels:r[0]?[r[0].id]:r[12],toggleFilters:r[41],showWebSearchButton:r[43],showImageGenerationButton:r[44],showCodeInterpreterButton:r[45],closeOnOutsideClick:r[27],onShowValves:r[100],onClose:r[101],$$slots:{default:[ad]},$$scope:{ctx:r}};return r[3]!==void 0&&(g.selectedToolIds=r[3]),r[4]!==void 0&&(g.selectedFilterIds=r[4]),r[6]!==void 0&&(g.webSearchEnabled=r[6]),r[5]!==void 0&&(g.imageGenerationEnabled=r[5]),r[7]!==void 0&&(g.codeInterpreterEnabled=r[7]),e=new Zu({props:g}),Be.push(()=>Le(e,"selectedToolIds",i)),Be.push(()=>Le(e,"selectedFilterIds",f)),Be.push(()=>Le(e,"webSearchEnabled",u)),Be.push(()=>Le(e,"imageGenerationEnabled",h)),Be.push(()=>Le(e,"codeInterpreterEnabled",m)),{c(){F(e.$$.fragment)},l(b){L(e.$$.fragment,b)},m(b,p){j(e,b,p),a=!0},p(b,p){const _={};p[0]&4097&&(_.selectedModels=b[0]?[b[0].id]:b[12]),p[1]&1024&&(_.toggleFilters=b[41]),p[1]&4096&&(_.showWebSearchButton=b[43]),p[1]&8192&&(_.showImageGenerationButton=b[44]),p[1]&16384&&(_.showCodeInterpreterButton=b[45]),p[0]&134217728&&(_.closeOnOutsideClick=b[27]),p[0]&234946560&&(_.onShowValves=b[100]),p[4]&65536&&(_.$$scope={dirty:p,ctx:b}),!t&&p[0]&8&&(t=!0,_.selectedToolIds=b[3],je(()=>t=!1)),!l&&p[0]&16&&(l=!0,_.selectedFilterIds=b[4],je(()=>l=!1)),!n&&p[0]&64&&(n=!0,_.webSearchEnabled=b[6],je(()=>n=!1)),!s&&p[0]&32&&(s=!0,_.imageGenerationEnabled=b[5],je(()=>s=!1)),!o&&p[0]&128&&(o=!0,_.codeInterpreterEnabled=b[7],je(()=>o=!1)),e.$set(_)},i(b){a||(v(e.$$.fragment,b),a=!0)},o(b){$(e.$$.fragment,b),a=!1},d(b){R(e,b)}}}function ad(r){let e,t,l;return t=new Xu({props:{className:"size-4.5",strokeWidth:"1.5"}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{id:!0,class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"id","integration-menu-button"),c(e,"class","bg-transparent hover:bg-gray-100 text-gray-700 dark:text-white dark:hover:bg-gray-800 rounded-full size-8 flex justify-center items-center outline-hidden focus:outline-hidden")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Hs(r){let e,t,l;return t=new tt({props:{content:r[47].t("Valves"),placement:"top",$$slots:{default:[id]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","ml-1 flex gap-1.5")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[1]&65536&&(o.content=n[47].t("Valves")),s[0]&102825984|s[4]&65536&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function id(r){let e,t,l,n,s;return t=new Mn({props:{className:"size-4",strokeWidth:"1.5"}}),{c(){e=D("button"),F(t.$$.fragment),this.h()},l(o){e=M(o,"BUTTON",{id:!0,class:!0});var a=E(e);L(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"id","model-valves-button"),c(e,"class","bg-transparent hover:bg-gray-100 text-gray-700 dark:text-white dark:hover:bg-gray-800 rounded-full size-8 flex justify-center items-center outline-hidden focus:outline-hidden")},m(o,a){B(o,e,a),j(t,e,null),l=!0,n||(s=Ne(e,"click",r[107]),n=!0)},p:me,i(o){l||(v(t.$$.fragment,o),l=!0)},o(o){$(t.$$.fragment,o),l=!1},d(o){o&&d(e),R(t),n=!1,s()}}}function Ws(r){let e,t;return e=new tt({props:{content:r[47].t("{{COUNT}} Available Tools",{COUNT:r[3].length}),$$slots:{default:[fd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&8|n[1]&65536&&(s.content=l[47].t("{{COUNT}} Available Tools",{COUNT:l[3].length})),n[0]&536870920|n[4]&65536&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function fd(r){let e,t,l,n,s=r[3].length+"",o,a,i,f;return t=new Ar({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("span"),o=$e(s),this.h()},l(u){e=M(u,"BUTTON",{class:!0,"aria-label":!0,type:!0});var h=E(e);L(t.$$.fragment,h),l=G(h),n=M(h,"SPAN",{class:!0});var m=E(n);o=Ie(m,s),m.forEach(d),h.forEach(d),this.h()},h(){c(n,"class","text-sm"),c(e,"class","translate-y-[0.5px] px-1 flex gap-1 items-center text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 rounded-lg self-center transition"),c(e,"aria-label","Available Tools"),c(e,"type","button")},m(u,h){B(u,e,h),j(t,e,null),y(e,l),y(e,n),y(n,o),a=!0,i||(f=Ne(e,"click",r[108]),i=!0)},p(u,h){(!a||h[0]&8)&&s!==(s=u[3].length+"")&&Ce(o,s)},i(u){a||(v(t.$$.fragment,u),a=!0)},o(u){$(t.$$.fragment,u),a=!1},d(u){u&&d(e),R(t),i=!1,f()}}}function Gs(r){var l;let e,t;return e=new tt({props:{content:(l=r[134])==null?void 0:l.name,placement:"top",$$slots:{default:[dd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){var a;const o={};s[0]&16|s[1]&1024&&(o.content=(a=n[134])==null?void 0:a.name),s[0]&16|s[1]&1024|s[4]&65536&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function cd(r){let e,t;return e=new ka({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function ud(r){let e,t,l,n,s;return{c(){e=D("div"),t=D("img"),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);t=M(a,"IMG",{src:!0,class:!0,style:!0,alt:!0}),a.forEach(d),this.h()},h(){il(t.src,l=r[134].icon)||c(t,"src",l),c(t,"class",n="size-3.5 "+(r[134].icon.includes("svg")?"dark:invert-[80%]":"")),At(t,"fill","currentColor"),c(t,"alt",s=r[134].name),c(e,"class","size-4 items-center flex justify-center")},m(o,a){B(o,e,a),y(e,t)},p(o,a){a[0]&16|a[1]&1024&&!il(t.src,l=o[134].icon)&&c(t,"src",l),a[0]&16|a[1]&1024&&n!==(n="size-3.5 "+(o[134].icon.includes("svg")?"dark:invert-[80%]":""))&&c(t,"class",n),a[0]&16|a[1]&1024&&s!==(s=o[134].name)&&c(t,"alt",s)},i:me,o:me,d(o){o&&d(e)}}}function dd(r){let e,t,l,n,s,o,a,i,f,u;const h=[ud,cd],m=[];function g(p,_){var w;return(w=p[134])!=null&&w.icon?0:1}t=g(r),l=m[t]=h[t](r),o=new hl({props:{className:"size-4",strokeWidth:"1.75"}});function b(){return r[109](r[133])}return{c(){e=D("button"),l.c(),n=W(),s=D("div"),F(o.$$.fragment),this.h()},l(p){e=M(p,"BUTTON",{type:!0,class:!0});var _=E(e);l.l(_),n=G(_),s=M(_,"DIV",{class:!0});var w=E(s);L(o.$$.fragment,w),w.forEach(d),_.forEach(d),this.h()},h(){c(s,"class","hidden group-hover:block"),c(e,"type","button"),c(e,"class",a="group p-[7px] flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(r[4].includes(r[133])?"text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-600/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 ")+" capitalize")},m(p,_){B(p,e,_),m[t].m(e,null),y(e,n),y(e,s),j(o,s,null),i=!0,f||(u=Ne(e,"click",Ul(b)),f=!0)},p(p,_){r=p;let w=t;t=g(r),t===w?m[t].p(r,_):(ce(),$(m[w],1,1,()=>{m[w]=null}),ue(),l=m[t],l?l.p(r,_):(l=m[t]=h[t](r),l.c()),v(l,1),l.m(e,n)),(!i||_[0]&16&&a!==(a="group p-[7px] flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(r[4].includes(r[133])?"text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-600/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 ")+" capitalize"))&&c(e,"class",a)},i(p){i||(v(l),v(o.$$.fragment,p),i=!0)},o(p){$(l),$(o.$$.fragment,p),i=!1},d(p){p&&d(e),m[t].d(),R(o),f=!1,u()}}}function Js(r){let e,t,l=r[134]&&Gs(r);return{c(){l&&l.c(),e=Oe()},l(n){l&&l.l(n),e=Oe()},m(n,s){l&&l.m(n,s),B(n,e,s),t=!0},p(n,s){n[134]?l?(l.p(n,s),s[0]&16|s[1]&1024&&v(l,1)):(l=Gs(n),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ce(),$(l,1,1,()=>{l=null}),ue())},i(n){t||(v(l),t=!0)},o(n){$(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function qs(r){let e,t;return e=new tt({props:{content:r[47].t("Web Search"),placement:"top",$$slots:{default:[hd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[1]&65536&&(s.content=l[47].t("Web Search")),n[0]&64|n[1]&32768|n[4]&65536&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function hd(r){let e,t,l,n,s,o,a,i,f;return t=new Or({props:{className:"size-4",strokeWidth:"1.75"}}),s=new hl({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("div"),F(s.$$.fragment),this.h()},l(u){e=M(u,"BUTTON",{type:!0,class:!0});var h=E(e);L(t.$$.fragment,h),l=G(h),n=M(h,"DIV",{class:!0});var m=E(n);L(s.$$.fragment,m),m.forEach(d),h.forEach(d),this.h()},h(){var u;c(n,"class","hidden group-hover:block"),c(e,"type","button"),c(e,"class",o="group p-[7px] flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(r[6]||(((u=r[46])==null?void 0:u.webSearch)??!1)==="always"?" text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-600/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 "))},m(u,h){B(u,e,h),j(t,e,null),y(e,l),y(e,n),j(s,n,null),a=!0,i||(f=Ne(e,"click",Ul(r[111])),i=!0)},p(u,h){var m;(!a||h[0]&64|h[1]&32768&&o!==(o="group p-[7px] flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(u[6]||(((m=u[46])==null?void 0:m.webSearch)??!1)==="always"?" text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-600/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 ")))&&c(e,"class",o)},i(u){a||(v(t.$$.fragment,u),v(s.$$.fragment,u),a=!0)},o(u){$(t.$$.fragment,u),$(s.$$.fragment,u),a=!1},d(u){u&&d(e),R(t),R(s),i=!1,f()}}}function Zs(r){let e,t;return e=new tt({props:{content:r[47].t("Image"),placement:"top",$$slots:{default:[md]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[1]&65536&&(s.content=l[47].t("Image")),n[0]&32|n[4]&65536&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function md(r){let e,t,l,n,s,o,a,i,f;return t=new za({props:{className:"size-4",strokeWidth:"1.75"}}),s=new hl({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("div"),F(s.$$.fragment),this.h()},l(u){e=M(u,"BUTTON",{type:!0,class:!0});var h=E(e);L(t.$$.fragment,h),l=G(h),n=M(h,"DIV",{class:!0});var m=E(n);L(s.$$.fragment,m),m.forEach(d),h.forEach(d),this.h()},h(){c(n,"class","hidden group-hover:block"),c(e,"type","button"),c(e,"class",o="group p-[7px] flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(r[5]?" text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-700/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 "))},m(u,h){B(u,e,h),j(t,e,null),y(e,l),y(e,n),j(s,n,null),a=!0,i||(f=Ne(e,"click",Ul(r[112])),i=!0)},p(u,h){(!a||h[0]&32&&o!==(o="group p-[7px] flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(u[5]?" text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-700/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 ")))&&c(e,"class",o)},i(u){a||(v(t.$$.fragment,u),v(s.$$.fragment,u),a=!0)},o(u){$(t.$$.fragment,u),$(s.$$.fragment,u),a=!1},d(u){u&&d(e),R(t),R(s),i=!1,f()}}}function Ys(r){let e,t;return e=new tt({props:{content:r[47].t("Code Interpreter"),placement:"top",$$slots:{default:[pd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[1]&65536&&(s.content=l[47].t("Code Interpreter")),n[0]&128|n[1]&98304|n[4]&65536&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function pd(r){let e,t,l,n,s,o,a,i,f,u;return t=new Aa({props:{className:"size-3.5",strokeWidth:"2"}}),s=new hl({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){e=D("button"),F(t.$$.fragment),l=W(),n=D("div"),F(s.$$.fragment),this.h()},l(h){e=M(h,"BUTTON",{"aria-label":!0,"aria-pressed":!0,type:!0,class:!0});var m=E(e);L(t.$$.fragment,m),l=G(m),n=M(m,"DIV",{class:!0});var g=E(n);L(s.$$.fragment,g),g.forEach(d),m.forEach(d),this.h()},h(){var h;c(n,"class","hidden group-hover:block"),c(e,"aria-label",o=r[7]?r[47].t("Disable Code Interpreter"):r[47].t("Enable Code Interpreter")),c(e,"aria-pressed",r[7]),c(e,"type","button"),c(e,"class",a="group p-[7px] flex gap-1.5 items-center text-sm transition-colors duration-300 max-w-full overflow-hidden "+(r[7]?" text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-700/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 ")+" "+(((h=r[46])==null?void 0:h.highContrastMode)??!1?"m-1":"focus:outline-hidden rounded-full"))},m(h,m){B(h,e,m),j(t,e,null),y(e,l),y(e,n),j(s,n,null),i=!0,f||(u=Ne(e,"click",Ul(r[113])),f=!0)},p(h,m){var g;(!i||m[0]&128|m[1]&65536&&o!==(o=h[7]?h[47].t("Disable Code Interpreter"):h[47].t("Enable Code Interpreter")))&&c(e,"aria-label",o),(!i||m[0]&128)&&c(e,"aria-pressed",h[7]),(!i||m[0]&128|m[1]&32768&&a!==(a="group p-[7px] flex gap-1.5 items-center text-sm transition-colors duration-300 max-w-full overflow-hidden "+(h[7]?" text-sky-500 dark:text-sky-300 bg-sky-50 hover:bg-sky-100 dark:bg-sky-400/10 dark:hover:bg-sky-700/10 border border-sky-200/40 dark:border-sky-500/20":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 ")+" "+(((g=h[46])==null?void 0:g.highContrastMode)??!1?"m-1":"focus:outline-hidden rounded-full")))&&c(e,"class",a)},i(h){i||(v(t.$$.fragment,h),v(s.$$.fragment,h),i=!0)},o(h){$(t.$$.fragment,h),$(s.$$.fragment,h),i=!1},d(h){h&&d(e),R(t),R(s),f=!1,u()}}}function Ks(r){let e,t;return e=new tt({props:{content:r[47].t("Dictate"),$$slots:{default:[gd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[1]&65536&&(s.content=l[47].t("Dictate")),n[1]&65537|n[4]&65536&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function gd(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 translate-y-[0.5px]"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"></path><path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"></path></svg>',l,n;return{c(){e=D("button"),e.innerHTML=t,this.h()},l(s){e=M(s,"BUTTON",{id:!0,class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),El(e)!=="svelte-4nqm9k"&&(e.innerHTML=t),this.h()},h(){c(e,"id","voice-input-button"),c(e,"class","text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 transition rounded-full p-1.5 mr-0.5 self-center"),c(e,"type","button"),c(e,"aria-label","Voice Input")},m(s,o){B(s,e,o),l||(n=Ne(e,"click",r[114]),l=!0)},p:me,d(s){s&&d(e),l=!1,n()}}}function _d(r){let e,t,l;return t=new tt({props:{content:r[47].t("Send message"),$$slots:{default:[wd]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","flex items-center")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[1]&65536&&(o.content=n[47].t("Send message")),s[0]&6|s[4]&65536&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function bd(r){let e,t,l;return t=new tt({props:{content:r[47].t("Voice mode"),$$slots:{default:[kd]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","flex items-center")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[1]&65536&&(o.content=n[47].t("Voice mode")),s[0]&266240|s[1]&622592|s[4]&65536&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function vd(r){let e,t,l;return t=new tt({props:{content:r[47].t("Stop"),$$slots:{default:[yd]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","flex items-center")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[1]&65536&&(o.content=n[47].t("Stop")),s[0]&1024|s[4]&65536&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function wd(r){let e,t,l,n,s;return{c(){e=D("button"),t=we("svg"),l=we("path"),this.h()},l(o){e=M(o,"BUTTON",{id:!0,class:!0,type:!0});var a=E(e);t=ke(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=E(t);l=ke(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(l).forEach(d),i.forEach(d),a.forEach(d),this.h()},h(){c(l,"fill-rule","evenodd"),c(l,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),c(l,"clip-rule","evenodd"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"viewBox","0 0 16 16"),c(t,"fill","currentColor"),c(t,"class","size-5"),c(e,"id","send-message-button"),c(e,"class",n=(r[1]===""&&r[2].length===0?"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ")+" transition rounded-full p-1.5 self-center"),c(e,"type","submit"),e.disabled=s=r[1]===""&&r[2].length===0},m(o,a){B(o,e,a),y(e,t),y(t,l)},p(o,a){a[0]&6&&n!==(n=(o[1]===""&&o[2].length===0?"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ")+" transition rounded-full p-1.5 self-center")&&c(e,"class",n),a[0]&6&&s!==(s=o[1]===""&&o[2].length===0)&&(e.disabled=s)},d(o){o&&d(e)}}}function kd(r){let e,t,l,n,s,o;return t=new Eu({props:{className:"size-5",strokeWidth:"2.5"}}),{c(){e=D("button"),F(t.$$.fragment),this.h()},l(a){e=M(a,"BUTTON",{class:!0,type:!0,"aria-label":!0});var i=E(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full p-1.5 self-center"),c(e,"type","button"),c(e,"aria-label",l=r[47].t("Voice mode"))},m(a,i){B(a,e,i),j(t,e,null),n=!0,s||(o=Ne(e,"click",r[116]),s=!0)},p(a,i){(!n||i[1]&65536&&l!==(l=a[47].t("Voice mode")))&&c(e,"aria-label",l)},i(a){n||(v(t.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),n=!1},d(a){a&&d(e),R(t),s=!1,o()}}}function yd(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',l,n;return{c(){e=D("button"),e.innerHTML=t,this.h()},l(s){e=M(s,"BUTTON",{class:!0,"data-svelte-h":!0}),El(e)!=="svelte-nqxd5x"&&(e.innerHTML=t),this.h()},h(){c(e,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(s,o){B(s,e,o),l||(n=Ne(e,"click",r[115]),l=!0)},p:me,d(s){s&&d(e),l=!1,n()}}}function Ed(r){let e;return{c(){e=D("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","mb-1")},m(t,l){B(t,e,l)},p:me,d(t){t&&d(e)}}}function $d(r){var n,s;let e,t,l=bn.sanitize(Al((s=(n=r[18])==null?void 0:n.license_metadata)==null?void 0:s.input_footer))+"";return{c(){e=D("div"),t=new Dr(!1),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);t=Mr(a,!1),a.forEach(d),this.h()},h(){t.a=null,c(e,"class","text-xs text-gray-500 text-center line-clamp-1 marked")},m(o,a){B(o,e,a),t.m(l,e)},p(o,a){var i,f;a[0]&262144&&l!==(l=bn.sanitize(Al((f=(i=o[18])==null?void 0:i.license_metadata)==null?void 0:f.input_footer))+"")&&t.p(l)},d(o){o&&d(e)}}}function Id(r){let e,t,l,n,s,o,a,i,f,u,h,m,g;e=new nf({props:{show:r[37]}});function b(T){r[69](T)}let p={selectedToolIds:r[3]};r[29]!==void 0&&(p.show=r[29]),l=new gu({props:p}),Be.push(()=>Le(l,"show",b));function _(T){r[70](T)}let w={variables:r[24],onSave:r[23]};r[22]!==void 0&&(w.show=r[22]),o=new Xa({props:w}),Be.push(()=>Le(o,"show",_));function S(T){r[71](T)}let k={userValves:!0,type:r[25],id:r[26]??null};r[16]!==void 0&&(k.show=r[16]),f=new df({props:k}),Be.push(()=>Le(f,"show",S)),f.$on("save",r[72]),f.$on("close",r[73]);let I=r[30]&&Bs(r);return{c(){F(e.$$.fragment),t=W(),F(l.$$.fragment),s=W(),F(o.$$.fragment),i=W(),F(f.$$.fragment),h=W(),I&&I.c(),m=Oe()},l(T){L(e.$$.fragment,T),t=G(T),L(l.$$.fragment,T),s=G(T),L(o.$$.fragment,T),i=G(T),L(f.$$.fragment,T),h=G(T),I&&I.l(T),m=Oe()},m(T,C){j(e,T,C),B(T,t,C),j(l,T,C),B(T,s,C),j(o,T,C),B(T,i,C),j(f,T,C),B(T,h,C),I&&I.m(T,C),B(T,m,C),g=!0},p(T,C){const N={};C[1]&64&&(N.show=T[37]),e.$set(N);const U={};C[0]&8&&(U.selectedToolIds=T[3]),!n&&C[0]&536870912&&(n=!0,U.show=T[29],je(()=>n=!1)),l.$set(U);const O={};C[0]&16777216&&(O.variables=T[24]),C[0]&8388608&&(O.onSave=T[23]),!a&&C[0]&4194304&&(a=!0,O.show=T[22],je(()=>a=!1)),o.$set(O);const A={};C[0]&33554432&&(A.type=T[25]),C[0]&67108864&&(A.id=T[26]??null),!u&&C[0]&65536&&(u=!0,A.show=T[16],je(()=>u=!1)),f.$set(A),T[30]?I?(I.p(T,C),C[0]&1073741824&&v(I,1)):(I=Bs(T),I.c(),v(I,1),I.m(m.parentNode,m)):I&&(ce(),$(I,1,1,()=>{I=null}),ue())},i(T){g||(v(e.$$.fragment,T),v(l.$$.fragment,T),v(o.$$.fragment,T),v(f.$$.fragment,T),v(I),g=!0)},o(T){$(e.$$.fragment,T),$(l.$$.fragment,T),$(o.$$.fragment,T),$(f.$$.fragment,T),$(I),g=!1},d(T){T&&(d(t),d(s),d(i),d(h),d(m)),R(e,T),R(l,T),R(o,T),R(f,T),I&&I.d(T)}}}function Cd(r,e,t){let l,n,s,o,a,i,f,u,h,m;Ee(r,Pl,z=>t(18,l=z)),Ee(r,Wt,z=>t(46,n=z)),Ee(r,tl,z=>t(48,o=z)),Ee(r,wl,z=>t(19,a=z)),Ee(r,$n,z=>t(66,i=z)),Ee(r,bl,z=>t(67,f=z)),Ee(r,ln,z=>t(20,u=z)),Ee(r,In,z=>t(49,h=z)),Ee(r,Er,z=>t(50,m=z));const g=yl(),b=Ot("i18n");Ee(r,b,z=>t(47,s=z));let{onChange:p=()=>{}}=e,{createMessagePair:_}=e,{stopResponse:w}=e,{autoScroll:S=!1}=e,{generating:k=!1}=e,{atSelectedModel:I=void 0}=e,{selectedModels:T}=e,C=[],{history:N}=e,{taskIds:U=null}=e,{prompt:O=""}=e,{files:A=[]}=e,{selectedToolIds:P=[]}=e,{selectedFilterIds:J=[]}=e,{imageGenerationEnabled:Z=!1}=e,{webSearchEnabled:X=!1}=e,{codeInterpreterEnabled:Q=!1}=e,re=!1,_e=z=>{},De={},x={},be=!1,Me="tool",oe=null,Je=!0;const le=async z=>(t(24,De=mi(z)),Object.keys(De).length===0?z:(t(22,re=!0),await new Promise(pe=>{t(23,_e=ye=>{x={...x,...ye},Se(x),t(22,re=!1),pe(z)})}))),ee=async z=>{if(z.includes("{{CLIPBOARD}}")){const ye=await navigator.clipboard.readText().catch(Et=>(Ue.error(s.t("Failed to read clipboard contents")),"{{CLIPBOARD}}")),He=await navigator.clipboard.read();let Xe=null;for(const Et of He)for(const Jt of Et.types)if(Jt.startsWith("image/")){const qt=await Et.getType(Jt);Xe=URL.createObjectURL(qt)}Xe&&t(2,A=[...A,{type:"image",url:Xe}]),z=z.replaceAll("{{CLIPBOARD}}",ye)}if(z.includes("{{USER_LOCATION}}")){let ye;try{ye=await pi()}catch{Ue.error(s.t("Location access not allowed")),ye="LOCATION_UNKNOWN"}z=z.replaceAll("{{USER_LOCATION}}",String(ye))}const pe=await Qi(localStorage.token);if(z.includes("{{USER_NAME}}")){const ye=(pe==null?void 0:pe.name)||"User";z=z.replaceAll("{{USER_NAME}}",ye)}if(z.includes("{{USER_BIO}}")){const ye=(pe==null?void 0:pe.bio)||"";ye&&(z=z.replaceAll("{{USER_BIO}}",ye))}if(z.includes("{{USER_GENDER}}")){const ye=(pe==null?void 0:pe.gender)||"";ye&&(z=z.replaceAll("{{USER_GENDER}}",ye))}if(z.includes("{{USER_BIRTH_DATE}}")){const ye=(pe==null?void 0:pe.date_of_birth)||"";ye&&(z=z.replaceAll("{{USER_BIRTH_DATE}}",ye))}if(z.includes("{{USER_AGE}}")){const ye=(pe==null?void 0:pe.date_of_birth)||"";if(ye){const He=gi(ye);z=z.replaceAll("{{USER_AGE}}",He)}}if(z.includes("{{USER_LANGUAGE}}")){const ye=localStorage.getItem("locale")||"en-US";z=z.replaceAll("{{USER_LANGUAGE}}",ye)}if(z.includes("{{CURRENT_DATE}}")){const ye=_i();z=z.replaceAll("{{CURRENT_DATE}}",ye)}if(z.includes("{{CURRENT_TIME}}")){const ye=bi();z=z.replaceAll("{{CURRENT_TIME}}",ye)}if(z.includes("{{CURRENT_DATETIME}}")){const ye=vi();z=z.replaceAll("{{CURRENT_DATETIME}}",ye)}if(z.includes("{{CURRENT_TIMEZONE}}")){const ye=wi();z=z.replaceAll("{{CURRENT_TIMEZONE}}",ye)}if(z.includes("{{CURRENT_WEEKDAY}}")){const ye=ki();z=z.replaceAll("{{CURRENT_WEEKDAY}}",ye)}return z},Se=z=>{document.getElementById("chat-input")&&(Te.replaceVariables(z),Te.focus())},ne=async(z,pe)=>{document.getElementById("chat-input")&&(z!==""&&(z=await ee(z||"")),Te==null||Te.setText(z),Te==null||Te.focus(),z!==""&&(z=await le(z)),await qe(),pe&&await pe(z))},q=()=>{const z=document.getElementById("chat-input");let pe="";return z&&(pe=Te==null?void 0:Te.getWordAtDocPos()),pe},Re=z=>{document.getElementById("chat-input")&&(Te==null||Te.replaceCommandWithText(z))},ve=async z=>{const pe=document.getElementById("chat-input");if(!pe)return;z=await ee(z),se?Re(z):Te==null||Te.insertContent(z),await qe(),z=await le(z),await qe();const ye=document.getElementById("chat-input-container");ye&&(ye.scrollTop=ye.scrollHeight),await qe(),pe&&(pe.focus(),pe.dispatchEvent(new Event("input")),ui(O).length>0?await qe():pe.scrollTop=pe.scrollHeight)};let se="",{showCommands:H=!1}=e,We=null,ut=!1,et=!1,K=!1,mt=!1,pt=-2e8;const ht=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function ie(z){return mt?!0:ht&&Math.abs(z.timeStamp-pt)<500?(t(33,pt=-2e8),!0):!1}let Te,$t,Bt,yt=!1,Vt=!1,{placeholder:St=""}=e,fe=[],Ge=[],at=[],It=[],zt=[],he=[],Pe=!1,Ae=!1,Ke=!1,gt=!1;const _t=()=>{const z=document.getElementById("messages-container");z.scrollTo({top:z.scrollHeight,behavior:"smooth"})},Tt=async()=>{try{const z=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"never"},audio:!1}),pe=document.createElement("video");pe.srcObject=z,await pe.play();const ye=document.createElement("canvas");ye.width=pe.videoWidth,ye.height=pe.videoHeight,ye.getContext("2d").drawImage(pe,0,0,ye.width,ye.height),z.getTracks().forEach(Et=>Et.stop()),window.focus();const Xe=ye.toDataURL("image/png");t(2,A=[...A,{type:"image",url:Xe}]),pe.srcObject=null}catch(z){}},ct=async(z,pe=!1)=>{var Xe,Et,Jt,qt,cl,Ct,wt,vt;if((a==null?void 0:a.role)!=="admin"&&!(((Et=(Xe=a==null?void 0:a.permissions)==null?void 0:Xe.chat)==null?void 0:Et.file_upload)??!0))return Ue.error(s.t("You do not have permission to upload files.")),null;if(Ge.length!==T.length)return Ue.error(s.t("Model(s) do not support file upload")),null;const ye=el(),He={type:"file",file:"",id:null,url:"",name:z.name,collection_name:"",status:"uploading",size:z.size,error:"",itemId:ye,...pe?{context:"full"}:{}};if(He.size==0)return Ue.error(s.t("You cannot upload an empty file.")),null;if(t(2,A=[...A,He]),o){const rt=await di(z).catch(xe=>(Ue.error(s.t("Failed to extract content from the file: {{error}}",{error:xe})),null));if(rt===null)return Ue.error(s.t("Failed to extract content from the file.")),t(2,A=A.filter(xe=>(xe==null?void 0:xe.itemId)!==ye)),null;z.name,z.size,He.status="uploaded",He.type="text",He.content=rt,He.id=el(),t(2,A)}else try{let rt=null;(z.type.startsWith("audio/")||z.type.startsWith("video/"))&&((qt=(Jt=n==null?void 0:n.audio)==null?void 0:Jt.stt)!=null&&qt.language)&&(rt={language:(Ct=(cl=n==null?void 0:n.audio)==null?void 0:cl.stt)==null?void 0:Ct.language});const xe=await pa(localStorage.token,z,rt);xe?(xe.id,He.name,(wt=xe==null?void 0:xe.meta)==null||wt.collection_name,xe.error&&(console.warn("File upload warning:",xe.error),Ue.warning(xe.error)),He.status="uploaded",He.file=xe,He.id=xe.id,He.collection_name=((vt=xe==null?void 0:xe.meta)==null?void 0:vt.collection_name)||(xe==null?void 0:xe.collection_name),He.url=`${ei}/files/${xe.id}`,t(2,A)):t(2,A=A.filter(V=>(V==null?void 0:V.itemId)!==ye))}catch(rt){Ue.error(`${rt}`),t(2,A=A.filter(xe=>(xe==null?void 0:xe.itemId)!==ye))}},Ut=async z=>{var pe,ye,He;if((((pe=l==null?void 0:l.file)==null?void 0:pe.max_count)??null)!==null&&A.length+z.length>((ye=l==null?void 0:l.file)==null?void 0:ye.max_count)){Ue.error(s.t("You can only chat with a maximum of {{maxCount}} file(s) at a time.",{maxCount:(He=l==null?void 0:l.file)==null?void 0:He.max_count}));return}z.forEach(async Xe=>{var Et,Jt,qt,cl;if(Xe.name,Xe.type,Xe.size,Xe.name.split(".").at(-1),(((Et=l==null?void 0:l.file)==null?void 0:Et.max_size)??null)!==null&&Xe.size>(((Jt=l==null?void 0:l.file)==null?void 0:Jt.max_size)??0)*1024*1024){Xe.size,(((qt=l==null?void 0:l.file)==null?void 0:qt.max_size)??0)*1024*1024,Ue.error(s.t("File size should not exceed {{maxSize}} MB.",{maxSize:(cl=l==null?void 0:l.file)==null?void 0:cl.max_size}));return}if(Xe.type.startsWith("image/")){if(fe.length===0){Ue.error(s.t("Selected model(s) do not support image inputs"));return}const Ct=async(vt,rt={},xe={})=>{var ae,Ve,Fe,Qe,it,Ze;const V=(rt==null?void 0:rt.imageCompression)??!1,Y=((Ve=(ae=xe==null?void 0:xe.file)==null?void 0:ae.image_compression)==null?void 0:Ve.width)??null,te=((Qe=(Fe=xe==null?void 0:xe.file)==null?void 0:Fe.image_compression)==null?void 0:Qe.height)??null;if(!V&&!Y&&!te)return vt;let ge=null,de=null;return V&&(ge=((it=rt==null?void 0:rt.imageCompressionSize)==null?void 0:it.width)??null,de=((Ze=rt==null?void 0:rt.imageCompressionSize)==null?void 0:Ze.height)??null),Y&&(ge===null||ge>Y)&&(ge=Y),te&&(de===null||de>te)&&(de=te),ge||de?await yi(vt,ge,de):vt};let wt=new FileReader;wt.onload=async vt=>{let rt=vt.target.result;rt=await Ct(rt,n,l),t(2,A=[...A,{type:"image",url:`${rt}`}])},wt.readAsDataURL(Xe.type==="image/heic"?await hi(Xe):Xe)}else ct(Xe)})},bt=z=>{var pe,ye;z.preventDefault(),(ye=(pe=z.dataTransfer)==null?void 0:pe.types)!=null&&ye.includes("Files")?t(37,yt=!0):t(37,yt=!1)},rl=()=>{t(37,yt=!1)},xt=async z=>{var pe,ye;if(z.preventDefault(),(pe=z.dataTransfer)!=null&&pe.files){const He=Array.from((ye=z.dataTransfer)==null?void 0:ye.files);He&&He.length>0&&Ut(He)}t(37,yt=!1)},fl=z=>{z.key==="Shift"&&t(38,Vt=!0),z.key==="Escape"&&t(37,yt=!1)},$l=z=>{z.key==="Shift"&&t(38,Vt=!1)},Il=()=>{},Ht=()=>{t(38,Vt=!1)};vl(async()=>{t(28,We=[{char:"@",render:_r(br,{i18n:b,onSelect:pe=>{var Xe;const{type:ye,data:He}=pe;ye==="model"&&t(0,I=He),(Xe=document.getElementById("chat-input"))==null||Xe.focus()},insertTextHandler:ve,onUpload:pe=>{const{type:ye,data:He}=pe;if(ye==="file"){if(A.find(Xe=>Xe.id===He.id))return;t(2,A=[...A,{...He,status:"processed"}])}else g("upload",pe)}})},{char:"/",render:_r(br,{i18n:b,onSelect:pe=>{var Xe;const{type:ye,data:He}=pe;ye==="model"&&t(0,I=He),(Xe=document.getElementById("chat-input"))==null||Xe.focus()},insertTextHandler:ve,onUpload:pe=>{const{type:ye,data:He}=pe;if(ye==="file"){if(A.find(Xe=>Xe.id===He.id))return;t(2,A=[...A,{...He,status:"processed"}])}else g("upload",pe)}})},{char:"#",render:_r(br,{i18n:b,onSelect:pe=>{var Xe;const{type:ye,data:He}=pe;ye==="model"&&t(0,I=He),(Xe=document.getElementById("chat-input"))==null||Xe.focus()},insertTextHandler:ve,onUpload:pe=>{const{type:ye,data:He}=pe;if(ye==="file"){if(A.find(Xe=>Xe.id===He.id))return;t(2,A=[...A,{...He,status:"processed"}])}else g("upload",pe)}})}]),t(30,et=!0),window.setTimeout(()=>{const pe=document.getElementById("chat-input");pe==null||pe.focus()},0),window.addEventListener("keydown",fl),window.addEventListener("keyup",$l),window.addEventListener("focus",Il),window.addEventListener("blur",Ht),await qe();const z=document.getElementById("chat-container");z==null||z.addEventListener("dragover",bt),z==null||z.addEventListener("drop",xt),z==null||z.addEventListener("dragleave",rl),await bl.set(await Cn(localStorage.token))}),En(()=>{window.removeEventListener("keydown",fl),window.removeEventListener("keyup",$l),window.removeEventListener("focus",Il),window.removeEventListener("blur",Ht);const z=document.getElementById("chat-container");z&&(z==null||z.removeEventListener("dragover",bt),z==null||z.removeEventListener("drop",xt),z==null||z.removeEventListener("dragleave",rl))});const Ft=z=>z.id===C[0];function jl(z){ut=z,t(29,ut)}function Ol(z){re=z,t(22,re)}function Vn(z){be=z,t(16,be)}const on=async()=>{await qe()},an=()=>{t(27,Je=!0)},Nn=()=>{t(8,S=!0),_t()};function Bn(z){Be[z?"unshift":"push"](()=>{$t=z,t(35,$t)})}function On(){Bt=this.files,t(36,Bt)}const zn=async()=>{if(Bt&&Bt.length>0){const z=Array.from(Bt);Ut(z)}else Ue.error(s.t("File not found."));t(35,$t.value="",$t)},An=async()=>{var z;t(31,K=!1),await qe(),(z=document.getElementById("chat-input"))==null||z.focus()},Rl=async z=>{var He;const{text:pe,filename:ye}=z;t(31,K=!1),await qe(),ve(pe),await qe(),(He=document.getElementById("chat-input"))==null||He.focus(),((n==null?void 0:n.speechAutoSend)??!1)&&g("submit",O)};function Cl(z){K=z,t(31,K)}const Sl=z=>z.id===I.id,Hl=()=>{t(0,I=void 0)},Wl=z=>!fe.includes(z),Un=z=>{A.splice(z,1),t(2,A)},Pn=async z=>{A.splice(z,1),t(2,A)},Fn=z=>{},Ln=z=>{t(1,O=z.md),t(17,se=q())},jn=async z=>{(C.length===0||!C.at(0))&&Ue.error(s.t("Please select a model first."));const pe=await Li(localStorage.token,C.at(0),z,N!=null&&N.currentId?jt(N,N.currentId):null).catch(ye=>null);return pe},Rn=()=>t(32,mt=!0),Hn=z=>{t(33,pt=z.timeStamp),t(32,mt=!1)};function Wn(z){Be[z?"unshift":"push"](()=>{Te=z,t(34,Te)})}const Gn=async z=>{z=z.detail.event;const pe=z.ctrlKey||z.metaKey,ye=document.getElementById("suggestions-container");if(z.key==="Escape"&&w(),pe&&z.key==="Enter"&&z.shiftKey&&(z.preventDefault(),_(O)),O===""&&pe&&z.key.toLowerCase()==="r"){z.preventDefault();const He=[...document.getElementsByClassName("regenerate-response-button")].at(-1);He==null||He.click()}if(O===""&&z.key=="ArrowUp"){z.preventDefault();const He=[...document.getElementsByClassName("user-message")].at(-1);if(He){He.scrollIntoView({block:"center"});const Xe=[...document.getElementsByClassName("edit-user-message-button")].at(-1);Xe==null||Xe.click()}}if(!ye&&(!h||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))){if(ie(z))return;((n==null?void 0:n.ctrlEnterToSend)??!1?(z.key==="Enter"||z.keyCode===13)&&pe:(z.key==="Enter"||z.keyCode===13)&&!z.shiftKey)&&(z.preventDefault(),(O!==""||A.length>0)&&g("submit",O))}z.key==="Escape"&&(t(0,I=void 0),t(3,P=[]),t(4,J=[]),t(6,X=!1),t(5,Z=!1),t(7,Q=!1))},Jn=async z=>{z=z.detail.event;const pe=z.clipboardData||window.clipboardData;if(pe&&pe.items){for(const ye of pe.items)if(ye.type.indexOf("image")!==-1){const He=ye.getAsFile(),Xe=new FileReader;Xe.onload=function(Et){t(2,A=[...A,{type:"image",url:`${Et.target.result}`}])},Xe.readAsDataURL(He)}else if((ye==null?void 0:ye.kind)==="file"){const He=ye.getAsFile();He&&(await Ut([He]),z.preventDefault())}else if(ye.type==="text/plain"&&((n==null?void 0:n.largeTextAsFile)??!1)&&!Vt){const He=pe.getData("text/plain");if(He.length>ti){z.preventDefault();const Xe=new Blob([He],{type:"text/plain"}),Et=new File([Xe],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await ct(Et,!0)}}}},qn=()=>{$t.click()},Zn=async()=>{try{const z=await ec();if(z){const pe=new File([z.blob],z.name,{type:z.blob.type});await ct(pe)}}catch(z){Ue.error(s.t("Error accessing Google Drive: {{error}}",{error:z.message}))}},Yn=async z=>{try{const pe=await rc(z);if(pe){const ye=new File([pe.blob],pe.name,{type:pe.blob.type||"application/octet-stream"});await ct(ye)}}catch(pe){}},Kn=async z=>{g("upload",z)},Xn=async()=>{await qe();const z=document.getElementById("chat-input");z==null||z.focus()};function Qn(z){A=z,t(2,A)}const xn=z=>{const{type:pe,id:ye}=z;t(25,Me=pe),t(26,oe=ye),t(16,be=!0),t(27,Je=!1)},er=async()=>{await qe();const z=document.getElementById("chat-input");z==null||z.focus()};function tr(z){P=z,t(3,P)}function lr(z){J=z,t(4,J)}function nr(z){X=z,t(6,X)}function rr(z){Z=z,t(5,Z)}function sr(z){Q=z,t(7,Q)}const or=()=>{var z;t(25,Me="function"),t(26,oe=(z=C[0])==null?void 0:z.split(".")[0]),t(16,be=!0)},ar=()=>{t(29,ut=!ut)},ir=z=>{t(4,J=J.filter(pe=>pe!==z))},fr=(z,pe)=>pe.id===z,cr=()=>t(6,X=!X),ur=()=>t(5,Z=!Z),dr=()=>t(7,Q=!Q),hr=async()=>{try{let z=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(pe){return Ue.error(s.t("Permission denied when accessing microphone: {{error}}",{error:pe})),null});z&&(t(31,K=!0),z.getTracks().forEach(ye=>ye.stop())),z=null}catch{Ue.error(s.t("Permission denied when accessing microphone"))}},mr=()=>{w()},pr=async()=>{var z,pe,ye,He,Xe;if(T.length>1){Ue.error(s.t("Select only one model to call"));return}if(l.audio.stt.engine==="web"){Ue.error(s.t("Call feature is not supported when using Web STT engine"));return}try{let Et=await navigator.mediaDevices.getUserMedia({audio:!0});Et&&Et.getTracks().forEach(qt=>qt.stop()),Et=null,((pe=(z=n.audio)==null?void 0:z.tts)==null?void 0:pe.engine)==="browser-kokoro"&&(m||(await Er.set(new cf({dtype:((Xe=(He=(ye=n.audio)==null?void 0:ye.tts)==null?void 0:He.engineConfig)==null?void 0:Xe.dtype)??"fp32"})),await m.init())),Xt.set(!0),Mt.set(!0)}catch{Ue.error(s.t("Permission denied when accessing media devices"))}},gr=()=>{g("submit",O)};return r.$$set=z=>{"onChange"in z&&t(61,p=z.onChange),"createMessagePair"in z&&t(9,_=z.createMessagePair),"stopResponse"in z&&t(10,w=z.stopResponse),"autoScroll"in z&&t(8,S=z.autoScroll),"generating"in z&&t(11,k=z.generating),"atSelectedModel"in z&&t(0,I=z.atSelectedModel),"selectedModels"in z&&t(12,T=z.selectedModels),"history"in z&&t(13,N=z.history),"taskIds"in z&&t(14,U=z.taskIds),"prompt"in z&&t(1,O=z.prompt),"files"in z&&t(2,A=z.files),"selectedToolIds"in z&&t(3,P=z.selectedToolIds),"selectedFilterIds"in z&&t(4,J=z.selectedFilterIds),"imageGenerationEnabled"in z&&t(5,Z=z.imageGenerationEnabled),"webSearchEnabled"in z&&t(6,X=z.webSearchEnabled),"codeInterpreterEnabled"in z&&t(7,Q=z.codeInterpreterEnabled),"showCommands"in z&&t(60,H=z.showCommands),"placeholder"in z&&t(15,St=z.placeholder)},r.$$.update=()=>{var z,pe,ye,He,Xe,Et,Jt,qt,cl;r.$$.dirty[0]&4097&&t(21,C=I!==void 0?[I.id]:T),r.$$.dirty[0]&65536&&(be||t(27,Je=!0)),r.$$.dirty[0]&254|r.$$.dirty[1]&1073741824&&p({prompt:O,files:A.filter(Ct=>Ct.type!=="image").map(Ct=>({...Ct,user:void 0,access_control:void 0})),selectedToolIds:P,selectedFilterIds:J,imageGenerationEnabled:Z,webSearchEnabled:X,codeInterpreterEnabled:Q}),r.$$.dirty[0]&131072&&t(60,H=["/","#","@"].includes(se==null?void 0:se.charAt(0))||(se==null?void 0:se.slice(0,2))==="\\#"),r.$$.dirty[0]&1052673&&t(39,fe=(I!=null&&I.id?[I.id]:T).filter(Ct=>{var wt,vt,rt,xe;return((xe=(rt=(vt=(wt=u.find(V=>V.id===Ct))==null?void 0:wt.info)==null?void 0:vt.meta)==null?void 0:rt.capabilities)==null?void 0:xe.vision)??!0})),r.$$.dirty[0]&1052673&&t(40,Ge=(I!=null&&I.id?[I.id]:T).filter(Ct=>{var wt,vt,rt,xe;return((xe=(rt=(vt=(wt=u.find(V=>V.id===Ct))==null?void 0:wt.info)==null?void 0:vt.meta)==null?void 0:rt.capabilities)==null?void 0:xe.file_upload)??!0})),r.$$.dirty[0]&1052673&&t(63,at=(I!=null&&I.id?[I.id]:T).filter(Ct=>{var wt,vt,rt,xe;return((xe=(rt=(vt=(wt=u.find(V=>V.id===Ct))==null?void 0:wt.info)==null?void 0:vt.meta)==null?void 0:rt.capabilities)==null?void 0:xe.web_search)??!0})),r.$$.dirty[0]&1052673&&t(64,It=(I!=null&&I.id?[I.id]:T).filter(Ct=>{var wt,vt,rt,xe;return((xe=(rt=(vt=(wt=u.find(V=>V.id===Ct))==null?void 0:wt.info)==null?void 0:vt.meta)==null?void 0:rt.capabilities)==null?void 0:xe.image_generation)??!0})),r.$$.dirty[0]&1052673&&t(65,zt=(I!=null&&I.id?[I.id]:T).filter(Ct=>{var wt,vt,rt,xe;return((xe=(rt=(vt=(wt=u.find(V=>V.id===Ct))==null?void 0:wt.info)==null?void 0:vt.meta)==null?void 0:rt.capabilities)==null?void 0:xe.code_interpreter)??!0})),r.$$.dirty[0]&1052673&&t(41,he=(I!=null&&I.id?[I.id]:T).map(Ct=>{var wt;return((wt=u.find(vt=>vt.id===Ct)||{})==null?void 0:wt.filters)??[]}).reduce((Ct,wt)=>Ct.filter(vt=>wt.some(rt=>rt.id===vt.id)))),r.$$.dirty[2]&48&&t(42,Pe=(f??[]).length>0||(i??[]).length>0),r.$$.dirty[0]&790529|r.$$.dirty[2]&2&&t(43,Ae=(I!=null&&I.id?[I.id]:T).length===at.length&&((z=l==null?void 0:l.features)==null?void 0:z.enable_web_search)&&(a.role==="admin"||((ye=(pe=a==null?void 0:a.permissions)==null?void 0:pe.features)==null?void 0:ye.web_search))),r.$$.dirty[0]&790529|r.$$.dirty[2]&4&&t(44,Ke=(I!=null&&I.id?[I.id]:T).length===It.length&&((He=l==null?void 0:l.features)==null?void 0:He.enable_image_generation)&&(a.role==="admin"||((Et=(Xe=a==null?void 0:a.permissions)==null?void 0:Xe.features)==null?void 0:Et.image_generation))),r.$$.dirty[0]&790529|r.$$.dirty[2]&8&&t(45,gt=(I!=null&&I.id?[I.id]:T).length===zt.length&&((Jt=l==null?void 0:l.features)==null?void 0:Jt.enable_code_interpreter)&&(a.role==="admin"||((cl=(qt=a==null?void 0:a.permissions)==null?void 0:qt.features)==null?void 0:cl.code_interpreter)))},[I,O,A,P,J,Z,X,Q,S,_,w,k,T,N,U,St,be,se,l,a,u,C,re,_e,De,Me,oe,Je,We,ut,et,K,mt,pt,Te,$t,Bt,yt,Vt,fe,Ge,he,Pe,Ae,Ke,gt,n,s,o,h,m,g,b,q,ve,ie,_t,Tt,ct,Ut,H,p,ne,at,It,zt,i,f,Ft,jl,Ol,Vn,on,an,Nn,Bn,On,zn,An,Rl,Cl,Sl,Hl,Wl,Un,Pn,Fn,Ln,jn,Rn,Hn,Wn,Gn,Jn,qn,Zn,Yn,Kn,Xn,Qn,xn,er,tr,lr,nr,rr,sr,or,ar,ir,fr,cr,ur,dr,hr,mr,pr,gr]}class Ua extends st{constructor(e){super(),ot(this,e,Cd,Id,nt,{onChange:61,createMessagePair:9,stopResponse:10,autoScroll:8,generating:11,atSelectedModel:0,selectedModels:12,history:13,taskIds:14,prompt:1,files:2,selectedToolIds:3,selectedFilterIds:4,imageGenerationEnabled:5,webSearchEnabled:6,codeInterpreterEnabled:7,setText:62,showCommands:60,placeholder:15},null,[-1,-1,-1,-1,-1])}get setText(){return this.$$.ctx[62]}}function Xs(r,e,t){const l=r.slice();return l[13]=e[t],l[14]=e,l[15]=t,l}function Qs(r){let e,t,l,n;const s=[Td,Sd],o=[];function a(i,f){return i[15]===0?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,f){t.p(i,f)},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function Sd(r){let e,t,l;return t=new tt({props:{content:r[5].t("Remove Model"),$$slots:{default:[Dd]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s&32&&(o.content=n[5].t("Remove Model")),s&65539&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Td(r){let e,t,l;return t=new tt({props:{content:r[5].t("Add Model"),$$slots:{default:[Md]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s&32&&(o.content=n[5].t("Add Model")),s&65539&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function Dd(r){let e,t,l,n,s;function o(){return r[12](r[15])}return{c(){e=D("button"),t=we("svg"),l=we("path"),this.h()},l(a){e=M(a,"BUTTON",{"aria-label":!0});var i=E(e);t=ke(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var f=E(t);l=ke(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(l).forEach(d),f.forEach(d),i.forEach(d),this.h()},h(){c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M19.5 12h-15"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"fill","none"),c(t,"viewBox","0 0 24 24"),c(t,"stroke-width","2"),c(t,"stroke","currentColor"),c(t,"class","size-3"),e.disabled=r[1],c(e,"aria-label","Remove Model")},m(a,i){B(a,e,i),y(e,t),y(t,l),n||(s=Ne(e,"click",o),n=!0)},p(a,i){r=a,i&2&&(e.disabled=r[1])},d(a){a&&d(e),n=!1,s()}}}function Md(r){let e,t,l,n,s;return{c(){e=D("button"),t=we("svg"),l=we("path"),this.h()},l(o){e=M(o,"BUTTON",{class:!0,"aria-label":!0});var a=E(e);t=ke(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var i=E(t);l=ke(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(l).forEach(d),i.forEach(d),a.forEach(d),this.h()},h(){c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M12 6v12m6-6H6"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"fill","none"),c(t,"viewBox","0 0 24 24"),c(t,"stroke-width","2"),c(t,"stroke","currentColor"),c(t,"class","size-3.5"),c(e,"class",""),e.disabled=r[1],c(e,"aria-label","Add Model")},m(o,a){B(o,e,a),y(e,t),y(t,l),n||(s=Ne(e,"click",r[11]),n=!0)},p(o,a){a&2&&(e.disabled=o[1])},d(o){o&&d(e),n=!1,s()}}}function xs(r){var g,b,p,_;let e,t,l,n,s,o,a,i,f;function u(w){r[10](w,r[13],r[14],r[15])}let h={id:`${r[15]}`,placeholder:r[5].t("Select a model"),items:r[3].map(to),pinModelHandler:r[9]};r[13]!==void 0&&(h.value=r[13]),n=new bf({props:h}),Be.push(()=>Le(n,"value",u));let m=(((g=r[6])==null?void 0:g.role)==="admin"||(((_=(p=(b=r[6])==null?void 0:b.permissions)==null?void 0:p.chat)==null?void 0:_.multiple_models)??!0))&&Qs(r);return{c(){e=D("div"),t=D("div"),l=D("div"),F(n.$$.fragment),a=W(),m&&m.c(),i=W(),this.h()},l(w){e=M(w,"DIV",{class:!0});var S=E(e);t=M(S,"DIV",{class:!0});var k=E(t);l=M(k,"DIV",{class:!0});var I=E(l);L(n.$$.fragment,I),I.forEach(d),k.forEach(d),a=G(S),m&&m.l(S),i=G(S),S.forEach(d),this.h()},h(){var w;c(l,"class",o="max-w-full "+(((w=r[4])==null?void 0:w.highContrastMode)??!1?"m-1":"mr-1")),c(t,"class","overflow-hidden w-full"),c(e,"class","flex w-full max-w-fit")},m(w,S){B(w,e,S),y(e,t),y(t,l),j(n,l,null),y(e,a),m&&m.m(e,null),y(e,i),f=!0},p(w,S){var I,T,C,N,U;r=w;const k={};S&32&&(k.placeholder=r[5].t("Select a model")),S&8&&(k.items=r[3].map(to)),!s&&S&1&&(s=!0,k.value=r[13],je(()=>s=!1)),n.$set(k),(!f||S&16&&o!==(o="max-w-full "+(((I=r[4])==null?void 0:I.highContrastMode)??!1?"m-1":"mr-1")))&&c(l,"class",o),((T=r[6])==null?void 0:T.role)==="admin"||(((U=(N=(C=r[6])==null?void 0:C.permissions)==null?void 0:N.chat)==null?void 0:U.multiple_models)??!0)?m?(m.p(r,S),S&64&&v(m,1)):(m=Qs(r),m.c(),v(m,1),m.m(e,i)):m&&(ce(),$(m,1,1,()=>{m=null}),ue())},i(w){f||(v(n.$$.fragment,w),v(m),f=!0)},o(w){$(n.$$.fragment,w),$(m),f=!1},d(w){w&&d(e),R(n),m&&m.d()}}}function eo(r){let e,t,l=r[5].t("Set as default")+"",n,s,o;return{c(){e=D("div"),t=D("button"),n=$e(l),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=E(e);t=M(i,"BUTTON",{});var f=E(t);n=Ie(f,l),f.forEach(d),i.forEach(d),this.h()},h(){c(e,"class","relative text-left mt-[1px] ml-1 text-[0.7rem] text-gray-600 dark:text-gray-400 font-primary")},m(a,i){B(a,e,i),y(e,t),y(t,n),s||(o=Ne(t,"click",r[8]),s=!0)},p(a,i){i&32&&l!==(l=a[5].t("Set as default")+"")&&Ce(n,l)},d(a){a&&d(e),s=!1,o()}}}function Vd(r){let e,t,l,n,s=ft(r[0]),o=[];for(let f=0;f<s.length;f+=1)o[f]=xs(Xs(r,s,f));const a=f=>$(o[f],1,1,()=>{o[f]=null});let i=r[2]&&eo(r);return{c(){e=D("div");for(let f=0;f<o.length;f+=1)o[f].c();t=W(),i&&i.c(),l=Oe(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=E(e);for(let h=0;h<o.length;h+=1)o[h].l(u);u.forEach(d),t=G(f),i&&i.l(f),l=Oe(),this.h()},h(){c(e,"class","flex flex-col w-full items-start")},m(f,u){B(f,e,u);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);B(f,t,u),i&&i.m(f,u),B(f,l,u),n=!0},p(f,[u]){if(u&635){s=ft(f[0]);let h;for(h=0;h<s.length;h+=1){const m=Xs(f,s,h);o[h]?(o[h].p(m,u),v(o[h],1)):(o[h]=xs(m),o[h].c(),v(o[h],1),o[h].m(e,null))}for(ce(),h=s.length;h<o.length;h+=1)a(h);ue()}f[2]?i?i.p(f,u):(i=eo(f),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i(f){if(!n){for(let u=0;u<s.length;u+=1)v(o[u]);n=!0}},o(f){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)$(o[u]);n=!1},d(f){f&&(d(e),d(t),d(l)),Rt(o,f),i&&i.d(f)}}}const to=r=>({value:r.id,label:r.name,model:r});function Nd(r,e,t){let l,n,s,o;Ee(r,ln,_=>t(3,l=_)),Ee(r,Wt,_=>t(4,n=_)),Ee(r,wl,_=>t(6,o=_));const a=Ot("i18n");Ee(r,a,_=>t(5,s=_));let{selectedModels:i=[""]}=e,{disabled:f=!1}=e,{showSetDefault:u=!0}=e;const h=async()=>{if(i.filter(w=>w==="").length){Ue.error(s.t("Choose a model before saving..."));return}Wt.set({...n,models:i}),await Hr(localStorage.token,{ui:n}),Ue.success(s.t("Default model updated"))},m=async _=>{let w=(n==null?void 0:n.pinnedModels)??[];w.includes(_)?w=w.filter(S=>S!==_):w=[...new Set([...w,_])],Wt.set({...n,pinnedModels:w}),await Hr(localStorage.token,{ui:n})};function g(_,w,S,k){S[k]=_,t(0,i),t(3,l)}const b=()=>{t(0,i=[...i,""])},p=_=>{i.splice(_,1),t(0,i),t(3,l)};return r.$$set=_=>{"selectedModels"in _&&t(0,i=_.selectedModels),"disabled"in _&&t(1,f=_.disabled),"showSetDefault"in _&&t(2,u=_.showSetDefault)},r.$$.update=()=>{if(r.$$.dirty&9&&i.length>0&&l.length>0){const _=i.map(w=>l.map(S=>S.id).includes(w)?w:"");JSON.stringify(_)!==JSON.stringify(i)&&t(0,i=_)}},[i,f,u,l,n,s,o,a,h,m,g,b,p]}class Bd extends st{constructor(e){super(),ot(this,e,Nd,Vd,nt,{selectedModels:0,disabled:1,showSetDefault:2})}}function Od(r){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,viewBox:!0,stroke:!0,fill:!0,class:!0,"stroke-width":!0});var n=E(e);t=ke(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 24 24"),c(e,"stroke","currentColor"),c(e,"fill","currentColor"),c(e,"class",r[0]),c(e,"stroke-width",r[1])},m(l,n){B(l,e,n),y(e,t)},p(l,[n]){n&1&&c(e,"class",l[0]),n&2&&c(e,"stroke-width",l[1])},i:me,o:me,d(l){l&&d(e)}}}function zd(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class Ad extends st{constructor(e){super(),ot(this,e,zd,Od,nt,{className:0,strokeWidth:1})}}function lo(r,e,t){const l=r.slice();return l[32]=e[t],l}function no(r){var s;let e,t,l,n;return l=new ya({props:{className:"h-full flex pt-4 pb-8 w-full",chatId:`chat-preview-${((s=r[3])==null?void 0:s.id)??""}`,user:r[7],readOnly:!0,history:r[3].chat.history,messages:r[3].chat.messages,autoScroll:!0,sendMessage:nh,continueResponse:rh,regenerateResponse:sh,messagesCount:null,editCodeBlock:!1}}),{c(){e=D("div"),t=D("div"),F(l.$$.fragment),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);t=M(a,"DIV",{id:!0});var i=E(t);L(l.$$.fragment,i),i.forEach(d),a.forEach(d),this.h()},h(){c(t,"id","full-messages-container"),c(e,"class","hidden w-full h-full flex-col")},m(o,a){B(o,e,a),y(e,t),j(l,t,null),n=!0},p(o,a){var f;const i={};a[0]&8&&(i.chatId=`chat-preview-${((f=o[3])==null?void 0:f.id)??""}`),a[0]&128&&(i.user=o[7]),a[0]&8&&(i.history=o[3].chat.history),a[0]&8&&(i.messages=o[3].chat.messages),l.$set(i)},i(o){n||(v(l.$$.fragment,o),n=!0)},o(o){$(l.$$.fragment,o),n=!1},d(o){o&&d(e),R(l)}}}function Ud(r){let e;const t=r[17].default,l=vn(t,r,r[29],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s[0]&536870912)&&wn(l,t,n,n[29],e?yn(t,n[29],s,null):kn(n[29]),null)},i(n){e||(v(l,n),e=!0)},o(n){$(l,n),e=!1},d(n){l&&l.d(n)}}}function ro(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",id:"chat-controls-button",$$slots:{default:[Pd]},$$scope:{ctx:r}}}),e.$on("click",r[18]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&536871424&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Pd(r){let e,t,l,n=r[9].t("Controls")+"",s,o;return e=new Ad({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Controls")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function Fd(r){let e,t,l,n=r[9].t("Overview")+"",s,o;return e=new wf({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Overview")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function Ld(r){let e,t,l,n=r[9].t("Artifacts")+"",s,o;return e=new Jf({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Artifacts")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function so(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",id:"chat-share-button",$$slots:{default:[jd]},$$scope:{ctx:r}}}),e.$on("click",r[21]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&536871424&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function jd(r){let e,t,l,n=r[9].t("Share")+"",s,o;return e=new Ef({props:{strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Share")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function Rd(r){let e,t,l,n=r[9].t("Download")+"",s,o;return e=new Sa({props:{strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Download")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function oo(r){let e,t;return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",$$slots:{default:[Hd]},$$scope:{ctx:r}}}),e.$on("click",r[22]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&536871424&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Hd(r){let e,t=r[9].t("Export chat (.json)")+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","flex items-center line-clamp-1")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s[0]&512&&t!==(t=n[9].t("Export chat (.json)")+"")&&Ce(l,t)},d(n){n&&d(e)}}}function Wd(r){let e,t=r[9].t("Plain text (.txt)")+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","flex items-center line-clamp-1")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s[0]&512&&t!==(t=n[9].t("Plain text (.txt)")+"")&&Ce(l,t)},d(n){n&&d(e)}}}function Gd(r){let e,t=r[9].t("PDF document (.pdf)")+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","flex items-center line-clamp-1")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s[0]&512&&t!==(t=n[9].t("PDF document (.pdf)")+"")&&Ce(l,t)},d(n){n&&d(e)}}}function Jd(r){var a,i,f;let e,t,l,n,s,o=(((a=r[7])==null?void 0:a.role)==="admin"||(((f=(i=r[7].permissions)==null?void 0:i.chat)==null?void 0:f.export)??!0))&&oo(r);return t=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",$$slots:{default:[Wd]},$$scope:{ctx:r}}}),t.$on("click",r[23]),n=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",$$slots:{default:[Gd]},$$scope:{ctx:r}}}),n.$on("click",r[24]),{c(){o&&o.c(),e=W(),F(t.$$.fragment),l=W(),F(n.$$.fragment)},l(u){o&&o.l(u),e=G(u),L(t.$$.fragment,u),l=G(u),L(n.$$.fragment,u)},m(u,h){o&&o.m(u,h),B(u,e,h),j(t,u,h),B(u,l,h),j(n,u,h),s=!0},p(u,h){var b,p,_;((b=u[7])==null?void 0:b.role)==="admin"||(((_=(p=u[7].permissions)==null?void 0:p.chat)==null?void 0:_.export)??!0)?o?(o.p(u,h),h[0]&128&&v(o,1)):(o=oo(u),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(ce(),$(o,1,1,()=>{o=null}),ue());const m={};h[0]&536871424&&(m.$$scope={dirty:h,ctx:u}),t.$set(m);const g={};h[0]&536871424&&(g.$$scope={dirty:h,ctx:u}),n.$set(g)},i(u){s||(v(o),v(t.$$.fragment,u),v(n.$$.fragment,u),s=!0)},o(u){$(o),$(t.$$.fragment,u),$(n.$$.fragment,u),s=!1},d(u){u&&(d(e),d(l)),o&&o.d(u),R(t,u),R(n,u)}}}function qd(r){let e,t,l,n;return e=new $a({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",$$slots:{default:[Rd]},$$scope:{ctx:r}}}),l=new Ia({props:{class:"w-full rounded-2xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white border border-gray-100  dark:border-gray-800 shadow-lg max-h-52 overflow-y-auto scrollbar-hidden",transition:Fl,sideOffset:8,$$slots:{default:[Jd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment),t=W(),F(l.$$.fragment)},l(s){L(e.$$.fragment,s),t=G(s),L(l.$$.fragment,s)},m(s,o){j(e,s,o),B(s,t,o),j(l,s,o),n=!0},p(s,o){const a={};o[0]&536871424&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const i={};o[0]&536871552&&(i.$$scope={dirty:o,ctx:s}),l.$set(i)},i(s){n||(v(e.$$.fragment,s),v(l.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),$(l.$$.fragment,s),n=!1},d(s){s&&d(t),R(e,s),R(l,s)}}}function Zd(r){let e,t,l,n=r[9].t("Copy")+"",s,o;return e=new sf({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Copy")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function ao(r){let e,t,l,n,s,o,a,i,f,u,h;return l=new Ea({props:{$$slots:{default:[Qd]},$$scope:{ctx:r}}}),s=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[xd]},$$scope:{ctx:r}}}),s.$on("click",r[27]),u=new Af({props:{chatId:r[3].id}}),{c(){e=D("hr"),t=W(),F(l.$$.fragment),n=W(),F(s.$$.fragment),o=W(),a=D("hr"),i=W(),f=D("div"),F(u.$$.fragment),this.h()},l(m){e=M(m,"HR",{class:!0}),t=G(m),L(l.$$.fragment,m),n=G(m),L(s.$$.fragment,m),o=G(m),a=M(m,"HR",{class:!0}),i=G(m),f=M(m,"DIV",{class:!0});var g=E(f);L(u.$$.fragment,g),g.forEach(d),this.h()},h(){c(e,"class","border-gray-50 dark:border-gray-800 my-1"),c(a,"class","border-gray-50 dark:border-gray-800 my-1"),c(f,"class","flex p-1")},m(m,g){B(m,e,g),B(m,t,g),j(l,m,g),B(m,n,g),j(s,m,g),B(m,o,g),B(m,a,g),B(m,i,g),B(m,f,g),j(u,f,null),h=!0},p(m,g){const b={};g[0]&536872458&&(b.$$scope={dirty:g,ctx:m}),l.$set(b);const p={};g[0]&536871424&&(p.$$scope={dirty:g,ctx:m}),s.$set(p);const _={};g[0]&8&&(_.chatId=m[3].id),u.$set(_)},i(m){h||(v(l.$$.fragment,m),v(s.$$.fragment,m),v(u.$$.fragment,m),h=!0)},o(m){$(l.$$.fragment,m),$(s.$$.fragment,m),$(u.$$.fragment,m),h=!1},d(m){m&&(d(e),d(t),d(n),d(o),d(a),d(i),d(f)),R(l,m),R(s,m),R(u)}}}function Yd(r){let e,t,l,n=r[9].t("Move")+"",s,o;return e=new Nr({props:{strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Move")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function Kd(r){var i;let e,t,l,n=(((i=r[32])==null?void 0:i.name)??"Folder")+"",s,o,a;return e=new Nr({props:{strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),o=W(),this.h()},l(f){L(e.$$.fragment,f),t=G(f),l=M(f,"DIV",{class:!0});var u=E(l);s=Ie(u,n),u.forEach(d),o=G(f),this.h()},h(){c(l,"class","flex items-center")},m(f,u){j(e,f,u),B(f,t,u),B(f,l,u),y(l,s),B(f,o,u),a=!0},p(f,u){var h;(!a||u[0]&1024)&&n!==(n=(((h=f[32])==null?void 0:h.name)??"Folder")+"")&&Ce(s,n)},i(f){a||(v(e.$$.fragment,f),a=!0)},o(f){$(e.$$.fragment,f),a=!1},d(f){f&&(d(t),d(l),d(o)),R(e,f)}}}function io(r){let e,t;function l(){return r[26](r[32])}return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Kd]},$$scope:{ctx:r}}}),e.$on("click",l),{c(){F(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){r=n;const o={};s[0]&536871936&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Xd(r){let e,t,l=ft(r[10].sort(fo)),n=[];for(let o=0;o<l.length;o+=1)n[o]=io(lo(r,l,o));const s=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Oe()},l(o){for(let a=0;a<n.length;a+=1)n[a].l(o);e=Oe()},m(o,a){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,a);B(o,e,a),t=!0},p(o,a){if(a[0]&1034){l=ft(o[10].sort(fo));let i;for(i=0;i<l.length;i+=1){const f=lo(o,l,i);n[i]?(n[i].p(f,a),v(n[i],1)):(n[i]=io(f),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(ce(),i=l.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)v(n[a]);t=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)$(n[a]);t=!1},d(o){o&&d(e),Rt(n,o)}}}function Qd(r){let e,t,l,n;return e=new $a({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",$$slots:{default:[Yd]},$$scope:{ctx:r}}}),l=new Ia({props:{class:"w-full rounded-2xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white border border-gray-100  dark:border-gray-800 shadow-lg max-h-52 overflow-y-auto scrollbar-hidden",transition:Fl,sideOffset:8,$$slots:{default:[Xd]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment),t=W(),F(l.$$.fragment)},l(s){L(e.$$.fragment,s),t=G(s),L(l.$$.fragment,s)},m(s,o){j(e,s,o),B(s,t,o),j(l,s,o),n=!0},p(s,o){const a={};o[0]&536871424&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const i={};o[0]&536871946&&(i.$$scope={dirty:o,ctx:s}),l.$set(i)},i(s){n||(v(e.$$.fragment,s),v(l.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),$(l.$$.fragment,s),n=!1},d(s){s&&d(t),R(e,s),R(l,s)}}}function xd(r){let e,t,l,n=r[9].t("Archive")+"",s,o;return e=new kf({props:{className:"size-4",strokeWidth:"1.5"}}),{c(){F(e.$$.fragment),t=W(),l=D("div"),s=$e(n),this.h()},l(a){L(e.$$.fragment,a),t=G(a),l=M(a,"DIV",{class:!0});var i=E(l);s=Ie(i,n),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),y(l,s),o=!0},p(a,i){(!o||i[0]&512)&&n!==(n=a[9].t("Archive")+"")&&Ce(s,n)},i(a){o||(v(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){a&&(d(t),d(l)),R(e,a)}}}function eh(r){var S,k,I,T;let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p=r[8]&&ro(r);t=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",id:"chat-overview-button",$$slots:{default:[Fd]},$$scope:{ctx:r}}}),t.$on("click",r[19]),n=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",id:"chat-overview-button",$$slots:{default:[Ld]},$$scope:{ctx:r}}}),n.$on("click",r[20]);let _=!r[6]&&(((S=r[7])==null?void 0:S.role)==="admin"||(((I=(k=r[7].permissions)==null?void 0:k.chat)==null?void 0:I.share)??!0))&&so(r);f=new Ea({props:{$$slots:{default:[qd]},$$scope:{ctx:r}}}),h=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",id:"chat-copy-button",$$slots:{default:[Zd]},$$scope:{ctx:r}}}),h.$on("click",r[25]);let w=!r[6]&&((T=r[3])==null?void 0:T.id)&&ao(r);return{c(){p&&p.c(),e=W(),F(t.$$.fragment),l=W(),F(n.$$.fragment),s=W(),o=D("hr"),a=W(),_&&_.c(),i=W(),F(f.$$.fragment),u=W(),F(h.$$.fragment),m=W(),w&&w.c(),g=Oe(),this.h()},l(C){p&&p.l(C),e=G(C),L(t.$$.fragment,C),l=G(C),L(n.$$.fragment,C),s=G(C),o=M(C,"HR",{class:!0}),a=G(C),_&&_.l(C),i=G(C),L(f.$$.fragment,C),u=G(C),L(h.$$.fragment,C),m=G(C),w&&w.l(C),g=Oe(),this.h()},h(){c(o,"class","border-gray-50 dark:border-gray-800 my-1")},m(C,N){p&&p.m(C,N),B(C,e,N),j(t,C,N),B(C,l,N),j(n,C,N),B(C,s,N),B(C,o,N),B(C,a,N),_&&_.m(C,N),B(C,i,N),j(f,C,N),B(C,u,N),j(h,C,N),B(C,m,N),w&&w.m(C,N),B(C,g,N),b=!0},p(C,N){var J,Z,X,Q;C[8]?p?(p.p(C,N),N[0]&256&&v(p,1)):(p=ro(C),p.c(),v(p,1),p.m(e.parentNode,e)):p&&(ce(),$(p,1,1,()=>{p=null}),ue());const U={};N[0]&536871424&&(U.$$scope={dirty:N,ctx:C}),t.$set(U);const O={};N[0]&536871424&&(O.$$scope={dirty:N,ctx:C}),n.$set(O),!C[6]&&(((J=C[7])==null?void 0:J.role)==="admin"||(((X=(Z=C[7].permissions)==null?void 0:Z.chat)==null?void 0:X.share)??!0))?_?(_.p(C,N),N[0]&192&&v(_,1)):(_=so(C),_.c(),v(_,1),_.m(i.parentNode,i)):_&&(ce(),$(_,1,1,()=>{_=null}),ue());const A={};N[0]&536871552&&(A.$$scope={dirty:N,ctx:C}),f.$set(A);const P={};N[0]&536871424&&(P.$$scope={dirty:N,ctx:C}),h.$set(P),!C[6]&&((Q=C[3])!=null&&Q.id)?w?(w.p(C,N),N[0]&72&&v(w,1)):(w=ao(C),w.c(),v(w,1),w.m(g.parentNode,g)):w&&(ce(),$(w,1,1,()=>{w=null}),ue())},i(C){b||(v(p),v(t.$$.fragment,C),v(n.$$.fragment,C),v(_),v(f.$$.fragment,C),v(h.$$.fragment,C),v(w),b=!0)},o(C){$(p),$(t.$$.fragment,C),$(n.$$.fragment,C),$(_),$(f.$$.fragment,C),$(h.$$.fragment,C),$(w),b=!1},d(C){C&&(d(e),d(l),d(s),d(o),d(a),d(i),d(u),d(m),d(g)),p&&p.d(C),R(t,C),R(n,C),_&&_.d(C),R(f,C),R(h,C),w&&w.d(C)}}}function th(r){let e,t,l;return t=new Sn({props:{class:"w-full max-w-[200px] rounded-2xl px-1 py-1  border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg transition",sideOffset:8,side:"bottom",align:"end",transition:Fl,$$slots:{default:[eh]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{slot:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"slot","content")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[0]&536872911&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function lh(r){let e,t,l,n=r[5]&&no(r);return t=new Tn({props:{$$slots:{content:[th],default:[Ud]},$$scope:{ctx:r}}}),t.$on("change",r[28]),{c(){n&&n.c(),e=W(),F(t.$$.fragment)},l(s){n&&n.l(s),e=G(s),L(t.$$.fragment,s)},m(s,o){n&&n.m(s,o),B(s,e,o),j(t,s,o),l=!0},p(s,o){s[5]?n?(n.p(s,o),o[0]&32&&v(n,1)):(n=no(s),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(ce(),$(n,1,1,()=>{n=null}),ue());const a={};o[0]&536872911&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){l||(v(n),v(t.$$.fragment,s),l=!0)},o(s){$(n),$(t.$$.fragment,s),l=!1},d(s){s&&d(e),n&&n.d(s),R(t,s)}}}const nh=()=>{},rh=()=>{},sh=()=>{},fo=(r,e)=>e.updated_at-r.updated_at;function oh(r,e,t){let l,n,s,o,a,i;Ee(r,tl,x=>t(6,l=x)),Ee(r,Wt,x=>t(30,n=x)),Ee(r,wl,x=>t(7,s=x)),Ee(r,In,x=>t(8,o=x)),Ee(r,li,x=>t(10,i=x));let{$$slots:f={},$$scope:u}=e;const{saveAs:h}=Ca,m=Ot("i18n");Ee(r,m,x=>t(9,a=x));let{shareEnabled:g=!1}=e,{shareHandler:b}=e,{moveChatHandler:p}=e,{archiveChatHandler:_}=e,{chat:w}=e,{onClose:S=()=>{}}=e,k=!1;const I=async()=>{const x=w.chat.history;return jt(x,x.currentId).reduce((oe,Je,le,ee)=>`${oe}### ${Je.role.toUpperCase()}
${Je.content}

`,"").trim()},T=async()=>{const x=await I();let be=new Blob([x],{type:"text/plain"});h(be,`chat-${w.chat.title}.txt`)},C=async()=>{const[{default:x},{default:be}]=await Promise.all([Xl(()=>import("./h22AL3a0.js"),__vite__mapDeps([0,1,2]),import.meta.url),Xl(()=>import("./BNVeY_Dn.js"),[],import.meta.url)]);if((n==null?void 0:n.stylizedPdfExport)??!0){t(5,k=!0),await qe();const Me=document.getElementById("full-messages-container");if(Me)try{const oe=document.documentElement.classList.contains("dark"),Je=800,le=Me.cloneNode(!0);le.classList.add("text-black"),le.classList.add("dark:text-white"),le.style.width=`${Je}px`,le.style.position="absolute",le.style.left="-9999px",le.style.height="auto",document.body.appendChild(le),await new Promise(ut=>setTimeout(ut,100));const ee=await be(le,{backgroundColor:oe?"#000":"#fff",useCORS:!0,scale:2,width:Je});document.body.removeChild(le);const Se=new x("p","mm","a4"),ne=210,q=297,Re=ee.width/Je,ve=ee.width/ne,se=Math.floor(ve*q);let H=0,We=0;for(;H<ee.height;){const ut=Math.min(se,ee.height-H),et=document.createElement("canvas");et.width=ee.width,et.height=ut,et.getContext("2d").drawImage(ee,0,H,ee.width,ut,0,0,ee.width,ut);const mt=et.toDataURL("image/jpeg",.7),pt=ut*ne/ee.width;We>0&&Se.addPage(),oe&&(Se.setFillColor(0,0,0),Se.rect(0,0,ne,q,"F")),Se.addImage(mt,"JPEG",0,0,ne,pt),H+=ut,We++}Se.save(`chat-${w.chat.title}.pdf`),t(5,k=!1)}catch(oe){}}else{const Me=await I(),oe=new x,Je=15,le=20,ee=15,Se=20,ne=oe.internal.pageSize.getWidth(),q=oe.internal.pageSize.getHeight(),Re=ne-Je-ee,ve=8;oe.setFontSize(ve);const se=ve*1,H=Me.split(`
`);let We=le;for(let ut of H){const et=oe.splitTextToSize(ut,Re);for(let K of et)We+se>q-Se&&(oe.addPage(),We=le),oe.text(K,Je,We),We+=se*.5;We+=se*.1}oe.save(`chat-${w.chat.title}.pdf`)}},N=async()=>{if(w.id){let x=null;((w==null?void 0:w.id)??"").startsWith("local")||l?x=w:x=await Cr(localStorage.token,w.id);let be=new Blob([JSON.stringify([x])],{type:"application/json"});h(be,`chat-export-${Date.now()}.json`)}},U=async()=>{await Mt.set(!0),await Ml.set(!1),await _l.set(!1),await Vl.set(!1)},O=async()=>{await Mt.set(!0),await Ml.set(!0),await _l.set(!1),await Vl.set(!1)},A=async()=>{await Mt.set(!0),await _l.set(!0),await Ml.set(!1),await Vl.set(!1)},P=()=>{b()},J=()=>{N()},Z=()=>{T()},X=()=>{C()},Q=async()=>{await Vr(await I()).catch(be=>{})&&Ue.success(a.t("Copied to clipboard"))},re=x=>{p(w==null?void 0:w.id,x==null?void 0:x.id)},_e=()=>{_()},De=x=>{x.detail===!1&&S()};return r.$$set=x=>{"shareEnabled"in x&&t(16,g=x.shareEnabled),"shareHandler"in x&&t(0,b=x.shareHandler),"moveChatHandler"in x&&t(1,p=x.moveChatHandler),"archiveChatHandler"in x&&t(2,_=x.archiveChatHandler),"chat"in x&&t(3,w=x.chat),"onClose"in x&&t(4,S=x.onClose),"$$scope"in x&&t(29,u=x.$$scope)},[b,p,_,w,S,k,l,s,o,a,i,m,I,T,C,N,g,f,U,O,A,P,J,Z,X,Q,re,_e,De,u]}class ah extends st{constructor(e){super(),ot(this,e,oh,lh,nt,{shareEnabled:16,shareHandler:0,moveChatHandler:1,archiveChatHandler:2,chat:3,onClose:4},null,[-1,-1])}}function ih(r){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=ke(n,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){c(t,"d","M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.8214 2.48697 15.5291 3.33782 17L2.5 21.5L7 20.6622C8.47087 21.513 10.1786 22 12 22Z"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"stroke-dasharray","2.5 3.5"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(l,n){B(l,e,n),y(e,t)},p(l,[n]){n&2&&c(e,"stroke-width",l[1]),n&1&&c(e,"class",l[0])},i:me,o:me,d(l){l&&d(e)}}}function fh(r,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class ch extends st{constructor(e){super(),ot(this,e,fh,ih,nt,{className:0,strokeWidth:1})}}function uh(r){let e,t,l;return{c(){e=we("svg"),t=we("path"),l=we("path"),this.h()},l(n){e=ke(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=E(e);t=ke(s,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),l=ke(s,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0}),E(l).forEach(d),s.forEach(d),this.h()},h(){c(t,"d","M8 12L11 15L16 10"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.8214 2.48697 15.5291 3.33782 17L2.5 21.5L7 20.6622C8.47087 21.513 10.1786 22 12 22Z"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"stroke-dasharray","2.5 3.5"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(n,s){B(n,e,s),y(e,t),y(e,l)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:me,o:me,d(n){n&&d(e)}}}function dh(r,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class hh extends st{constructor(e){super(),ot(this,e,dh,uh,nt,{className:0,strokeWidth:1})}}function mh(r){let e,t,l;return{c(){e=we("svg"),t=we("path"),l=we("path"),this.h()},l(n){e=ke(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=E(e);t=ke(s,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),l=ke(s,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(l).forEach(d),s.forEach(d),this.h()},h(){c(t,"d","M9 12H12M15 12H12M12 12V9M12 12V15"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.8214 2.48697 15.5291 3.33782 17L2.5 21.5L7 20.6622C8.47087 21.513 10.1786 22 12 22Z"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(n,s){B(n,e,s),y(e,t),y(e,l)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:me,o:me,d(n){n&&d(e)}}}function ph(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class gh extends st{constructor(e){super(),ot(this,e,ph,mh,nt,{className:0,strokeWidth:1})}}function _h(r){let e,t,l;return{c(){e=we("svg"),t=we("path"),l=we("path"),this.h()},l(n){e=ke(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=E(e);t=ke(s,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(d),l=ke(s,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(l).forEach(d),s.forEach(d),this.h()},h(){c(t,"d","M8 12L11 15L16 10"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.8214 2.48697 15.5291 3.33782 17L2.5 21.5L7 20.6622C8.47087 21.513 10.1786 22 12 22Z"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(n,s){B(n,e,s),y(e,t),y(e,l)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:me,o:me,d(n){n&&d(e)}}}function bh(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class vh extends st{constructor(e){super(),ot(this,e,bh,_h,nt,{className:0,strokeWidth:1})}}function co(r,e,t){const l=r.slice();return l[35]=e[t],l}function uo(r){let e,t,l;return t=new tt({props:{content:r[13]?r[14].t("Close Sidebar"):r[14].t("Open Sidebar"),$$slots:{default:[wh]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","-translate-x-0.5 mr-1 mt-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s[0]&24576&&(o.content=n[13]?n[14].t("Close Sidebar"):n[14].t("Open Sidebar")),s[0]&8192|s[1]&128&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function wh(r){let e,t,l,n,s,o;return l=new $f({}),{c(){e=D("button"),t=D("div"),F(l.$$.fragment),this.h()},l(a){e=M(a,"BUTTON",{class:!0});var i=E(e);t=M(i,"DIV",{class:!0});var f=E(t);L(l.$$.fragment,f),f.forEach(d),i.forEach(d),this.h()},h(){c(t,"class","self-center p-1.5"),c(e,"class","cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition")},m(a,i){B(a,e,i),y(e,t),j(l,t,null),n=!0,s||(o=Ne(e,"click",r[24]),s=!0)},p:me,i(a){n||(v(l.$$.fragment,a),n=!0)},o(a){$(l.$$.fragment,a),n=!1},d(a){a&&d(e),R(l),s=!1,o()}}}function ho(r){let e,t,l;function n(o){r[25](o)}let s={showSetDefault:!r[2]};return r[0]!==void 0&&(s.selectedModels=r[0]),e=new Bd({props:s}),Be.push(()=>Le(e,"selectedModels",n)),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,a){const i={};a[0]&4&&(i.showSetDefault=!o[2]),!t&&a[0]&1&&(t=!0,i.selectedModels=o[0],je(()=>t=!1)),e.$set(i)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function mo(r){let e,t,l,n;const s=[yh,kh],o=[];function a(i,f){var u;return(u=i[3])!=null&&u.id?i[17]?1:-1:0}return~(e=a(r))&&(t=o[e]=s[e](r)),{c(){t&&t.c(),l=Oe()},l(i){t&&t.l(i),l=Oe()},m(i,f){~e&&o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?~e&&o[e].p(i,f):(t&&(ce(),$(o[u],1,1,()=>{o[u]=null}),ue()),~e?(t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l)):t=null)},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),~e&&o[e].d(i)}}}function kh(r){let e,t;return e=new tt({props:{content:r[14].t("Save Chat"),$$slots:{default:[Eh]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&16384&&(s.content=l[14].t("Save Chat")),n[0]&64|n[1]&128&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function yh(r){let e,t;return e=new tt({props:{content:r[14].t("Temporary Chat"),$$slots:{default:[Ch]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&16384&&(s.content=l[14].t("Temporary Chat")),n[0]&196608|n[1]&128&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Eh(r){let e,t,l,n,s,o;return l=new vh({props:{className:" size-4.5",strokeWidth:"1.5"}}),{c(){e=D("button"),t=D("div"),F(l.$$.fragment),this.h()},l(a){e=M(a,"BUTTON",{class:!0,id:!0});var i=E(e);t=M(i,"DIV",{class:!0});var f=E(t);L(l.$$.fragment,f),f.forEach(d),i.forEach(d),this.h()},h(){c(t,"class","m-auto self-center"),c(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),c(e,"id","save-temporary-chat-button")},m(a,i){B(a,e,i),y(e,t),j(l,t,null),n=!0,s||(o=Ne(e,"click",r[27]),s=!0)},p:me,i(a){n||(v(l.$$.fragment,a),n=!0)},o(a){$(l.$$.fragment,a),n=!1},d(a){a&&d(e),R(l),s=!1,o()}}}function $h(r){let e,t;return e=new ch({props:{className:" size-4.5",strokeWidth:"1.5"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Ih(r){let e,t;return e=new hh({props:{className:" size-4.5",strokeWidth:"1.5"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Ch(r){let e,t,l,n,s,o,a;const i=[Ih,$h],f=[];function u(h,m){return h[17]?0:1}return l=u(r),n=f[l]=i[l](r),{c(){e=D("button"),t=D("div"),n.c(),this.h()},l(h){e=M(h,"BUTTON",{class:!0,id:!0});var m=E(e);t=M(m,"DIV",{class:!0});var g=E(t);n.l(g),g.forEach(d),m.forEach(d),this.h()},h(){c(t,"class","m-auto self-center"),c(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),c(e,"id","temporary-chat-button")},m(h,m){B(h,e,m),y(e,t),f[l].m(t,null),s=!0,o||(a=Ne(e,"click",r[26]),o=!0)},p(h,m){let g=l;l=u(h),l!==g&&(ce(),$(f[g],1,1,()=>{f[g]=null}),ue(),n=f[l],n||(n=f[l]=i[l](h),n.c()),v(n,1),n.m(t,null))},i(h){s||(v(n),s=!0)},o(h){$(n),s=!1},d(h){h&&d(e),f[l].d(),o=!1,a()}}}function po(r){let e,t;return e=new tt({props:{content:r[14].t("New Chat"),$$slots:{default:[Sh]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&16384&&(s.content=l[14].t("New Chat")),n[0]&8194|n[1]&128&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Sh(r){let e,t,l,n,s,o,a;return l=new gh({props:{className:" size-4.5",strokeWidth:"1.5"}}),{c(){e=D("button"),t=D("div"),F(l.$$.fragment),this.h()},l(i){e=M(i,"BUTTON",{class:!0,"aria-label":!0});var f=E(e);t=M(f,"DIV",{class:!0});var u=E(t);L(l.$$.fragment,u),u.forEach(d),f.forEach(d),this.h()},h(){c(t,"class","m-auto self-center"),c(e,"class",n="flex "+(r[13]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"),c(e,"aria-label","New Chat")},m(i,f){B(i,e,f),y(e,t),j(l,t,null),s=!0,o||(a=Ne(e,"click",r[28]),o=!0)},p(i,f){(!s||f[0]&8192&&n!==(n="flex "+(i[13]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"))&&c(e,"class",n)},i(i){s||(v(l.$$.fragment,i),s=!0)},o(i){$(l.$$.fragment,i),s=!1},d(i){i&&d(e),R(l),o=!1,a()}}}function go(r){let e,t;return e=new ah({props:{chat:r[3],shareEnabled:r[2],shareHandler:r[29],archiveChatHandler:r[30],moveChatHandler:r[8],$$slots:{default:[Th]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&8&&(s.chat=l[3]),n[0]&4&&(s.shareEnabled=l[2]),n[0]&1024&&(s.shareHandler=l[29]),n[0]&136&&(s.archiveChatHandler=l[30]),n[0]&256&&(s.moveChatHandler=l[8]),n[1]&128&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Th(r){let e,t,l,n;return l=new Ta({props:{className:" size-5",strokeWidth:"1.5"}}),{c(){e=D("button"),t=D("div"),F(l.$$.fragment),this.h()},l(s){e=M(s,"BUTTON",{class:!0,id:!0});var o=E(e);t=M(o,"DIV",{class:!0});var a=E(t);L(l.$$.fragment,a),a.forEach(d),o.forEach(d),this.h()},h(){c(t,"class","m-auto self-center"),c(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),c(e,"id","chat-context-menu-button")},m(s,o){B(s,e,o),y(e,t),j(l,t,null),n=!0},p:me,i(s){n||(v(l.$$.fragment,s),n=!0)},o(s){$(l.$$.fragment,s),n=!1},d(s){s&&d(e),R(l)}}}function _o(r){let e,t;return e=new tt({props:{content:r[14].t("Controls"),$$slots:{default:[Dh]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&16384&&(s.content=l[14].t("Controls")),n[0]&262144|n[1]&128&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Dh(r){let e,t,l,n,s,o;return l=new Mn({props:{className:" size-5",strokeWidth:"1"}}),{c(){e=D("button"),t=D("div"),F(l.$$.fragment),this.h()},l(a){e=M(a,"BUTTON",{class:!0,"aria-label":!0});var i=E(e);t=M(i,"DIV",{class:!0});var f=E(t);L(l.$$.fragment,f),f.forEach(d),i.forEach(d),this.h()},h(){c(t,"class","m-auto self-center"),c(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),c(e,"aria-label","Controls")},m(a,i){B(a,e,i),y(e,t),j(l,t,null),n=!0,s||(o=Ne(e,"click",r[31]),s=!0)},p:me,i(a){n||(v(l.$$.fragment,a),n=!0)},o(a){$(l.$$.fragment,a),n=!1},d(a){a&&d(e),R(l),s=!1,o()}}}function bo(r){var l;let e,t;return e=new yf({props:{className:"max-w-[240px]",role:(l=r[15])==null?void 0:l.role,help:!0,$$slots:{default:[Mh]},$$scope:{ctx:r}}}),e.$on("show",r[32]),{c(){F(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){var a;const o={};s[0]&32768&&(o.role=(a=n[15])==null?void 0:a.role),s[0]&49152|s[1]&128&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Mh(r){let e,t,l,n=r[14].t("User menu")+"",s,o,a,i;return{c(){e=D("div"),t=D("div"),l=D("span"),s=$e(n),o=W(),a=D("img"),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=E(e);t=M(u,"DIV",{class:!0});var h=E(t);l=M(h,"SPAN",{class:!0});var m=E(l);s=Ie(m,n),m.forEach(d),o=G(h),a=M(h,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),h.forEach(d),u.forEach(d),this.h()},h(){var f;c(l,"class","sr-only"),il(a.src,i=(f=r[15])==null?void 0:f.profile_image_url)||c(a,"src",i),c(a,"class","size-6 object-cover rounded-full"),c(a,"alt",""),c(a,"draggable","false"),c(t,"class","self-center"),c(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition")},m(f,u){B(f,e,u),y(e,t),y(t,l),y(l,s),y(t,o),y(t,a)},p(f,u){var h;u[0]&16384&&n!==(n=f[14].t("User menu")+"")&&Ce(s,n),u[0]&32768&&!il(a.src,i=(h=f[15])==null?void 0:h.profile_image_url)&&c(a,"src",i)},d(f){f&&d(e)}}}function vo(r){let e,t,l=r[14].t("Temporary Chat")+"",n;return{c(){e=D("div"),t=D("div"),n=$e(l),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);t=M(o,"DIV",{class:!0});var a=E(t);n=Ie(a,l),a.forEach(d),o.forEach(d),this.h()},h(){c(t,"class","text-xs text-gray-500"),c(e,"class","w-full z-30 text-center")},m(s,o){B(s,e,o),y(e,t),y(t,n)},p(s,o){o[0]&16384&&l!==(l=s[14].t("Temporary Chat")+"")&&Ce(n,l)},d(s){s&&d(e)}}}function wo(r){var m,g,b,p,_,w,S;let e,t,l,n,s=[],o=new Map,a,i=(((g=(m=r[20])==null?void 0:m.license_metadata)==null?void 0:g.type)??null)==="trial"&&ko(r),f=(((p=(b=r[20])==null?void 0:b.license_metadata)==null?void 0:p.seats)??null)!==null&&((_=r[20])==null?void 0:_.user_count)>((S=(w=r[20])==null?void 0:w.license_metadata)==null?void 0:S.seats)&&yo(r),u=ft(r[19].filter(r[33]));const h=k=>k[35].id;for(let k=0;k<u.length;k+=1){let I=co(r,u,k),T=h(I);o.set(T,s[k]=Eo(T,I))}return{c(){e=D("div"),t=D("div"),i&&i.c(),l=W(),f&&f.c(),n=W();for(let k=0;k<s.length;k+=1)s[k].c();this.h()},l(k){e=M(k,"DIV",{class:!0});var I=E(e);t=M(I,"DIV",{class:!0});var T=E(t);i&&i.l(T),l=G(T),f&&f.l(T),n=G(T);for(let C=0;C<s.length;C+=1)s[C].l(T);T.forEach(d),I.forEach(d),this.h()},h(){c(t,"class","flex flex-col gap-1 w-full"),c(e,"class","w-full z-30")},m(k,I){B(k,e,I),y(e,t),i&&i.m(t,null),y(t,l),f&&f.m(t,null),y(t,n);for(let T=0;T<s.length;T+=1)s[T]&&s[T].m(t,null);a=!0},p(k,I){var T,C,N,U,O,A,P;(((C=(T=k[20])==null?void 0:T.license_metadata)==null?void 0:C.type)??null)==="trial"?i?(i.p(k,I),I[0]&1048576&&v(i,1)):(i=ko(k),i.c(),v(i,1),i.m(t,l)):i&&(ce(),$(i,1,1,()=>{i=null}),ue()),(((U=(N=k[20])==null?void 0:N.license_metadata)==null?void 0:U.seats)??null)!==null&&((O=k[20])==null?void 0:O.user_count)>((P=(A=k[20])==null?void 0:A.license_metadata)==null?void 0:P.seats)?f?(f.p(k,I),I[0]&1048576&&v(f,1)):(f=yo(k),f.c(),v(f,1),f.m(t,n)):f&&(ce(),$(f,1,1,()=>{f=null}),ue()),I[0]&524800&&(u=ft(k[19].filter(k[33])),ce(),s=Br(s,I,h,1,k,u,o,t,_a,Eo,null,co),ue())},i(k){if(!a){v(i),v(f);for(let I=0;I<u.length;I+=1)v(s[I]);a=!0}},o(k){$(i),$(f);for(let I=0;I<s.length;I+=1)$(s[I]);a=!1},d(k){k&&d(e),i&&i.d(),f&&f.d();for(let I=0;I<s.length;I+=1)s[I].d()}}}function ko(r){let e,t;return e=new zr({props:{banner:{type:"info",title:"Trial License",content:r[14].t("You are currently using a trial license. Please contact support to upgrade your license.")}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&16384&&(s.banner={type:"info",title:"Trial License",content:l[14].t("You are currently using a trial license. Please contact support to upgrade your license.")}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function yo(r){let e,t;return e=new zr({props:{banner:{type:"error",title:"License Error",content:r[14].t("Exceeded the number of seats in your license. Please contact support to increase the number of seats.")}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&16384&&(s.banner={type:"error",title:"License Error",content:l[14].t("Exceeded the number of seats in your license. Please contact support to increase the number of seats.")}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Eo(r,e){let t,l,n;function s(...o){return e[34](e[35],...o)}return l=new zr({props:{banner:e[35]}}),l.$on("dismiss",s),{key:r,first:null,c(){t=Oe(),F(l.$$.fragment),this.h()},l(o){t=Oe(),L(l.$$.fragment,o),this.h()},h(){this.first=t},m(o,a){B(o,t,a),j(l,o,a),n=!0},p(o,a){e=o;const i={};a[0]&524800&&(i.banner=e[35]),l.$set(i)},i(o){n||(v(l.$$.fragment,o),n=!0)},o(o){$(l.$$.fragment,o),n=!1},d(o){o&&d(t),R(l,o)}}}function Vh(r){var Je,le,ee,Se,ne,q,Re,ve,se,H,We,ut,et,K,mt,pt,ht;let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_,w,S,k,I,T,C=r[17]&&(r[11]??"").startsWith("local:"),N,U,O,A,P;function J(ie){r[22](ie)}let Z={chatId:r[11]};r[10]!==void 0&&(Z.show=r[10]),e=new mf({props:Z}),Be.push(()=>Le(e,"show",J));let X=r[12]&&!r[13]&&uo(r),Q=r[5]&&ho(r),re=(((Je=r[15])==null?void 0:Je.role)==="user"?(((Se=(ee=(le=r[15])==null?void 0:le.permissions)==null?void 0:ee.chat)==null?void 0:Se.temporary)??!0)&&!(((Re=(q=(ne=r[15])==null?void 0:ne.permissions)==null?void 0:q.chat)==null?void 0:Re.temporary_enforced)??!1):!0)&&mo(r),_e=r[12]&&!r[17]&&r[3]&&r[3].id&&po(r),De=r[2]&&r[3]&&(r[3].id||r[17])&&go(r),x=(((ve=r[15])==null?void 0:ve.role)==="admin"||(((H=(se=r[15])==null?void 0:se.permissions.chat)==null?void 0:H.controls)??!0))&&_o(r),be=r[15]!==void 0&&r[15]!==null&&bo(r),Me=C&&vo(r),oe=!r[4].currentId&&!r[11]&&(r[19].length>0||(((ut=(We=r[20])==null?void 0:We.license_metadata)==null?void 0:ut.type)??null)==="trial"||(((K=(et=r[20])==null?void 0:et.license_metadata)==null?void 0:K.seats)??null)!==null&&((mt=r[20])==null?void 0:mt.user_count)>((ht=(pt=r[20])==null?void 0:pt.license_metadata)==null?void 0:ht.seats))&&wo(r);return{c(){F(e.$$.fragment),l=W(),n=D("button"),s=W(),o=D("nav"),a=D("div"),i=D("div"),f=W(),u=D("div"),h=D("div"),X&&X.c(),m=W(),g=D("div"),Q&&Q.c(),p=W(),_=D("div"),re&&re.c(),w=W(),_e&&_e.c(),S=W(),De&&De.c(),k=W(),x&&x.c(),I=W(),be&&be.c(),T=W(),Me&&Me.c(),N=W(),U=D("div"),oe&&oe.c(),this.h()},l(ie){L(e.$$.fragment,ie),l=G(ie),n=M(ie,"BUTTON",{id:!0,class:!0,"aria-label":!0}),E(n).forEach(d),s=G(ie),o=M(ie,"NAV",{class:!0});var Te=E(o);a=M(Te,"DIV",{class:!0});var $t=E(a);i=M($t,"DIV",{class:!0}),E(i).forEach(d),f=G($t),u=M($t,"DIV",{class:!0});var Bt=E(u);h=M(Bt,"DIV",{class:!0});var yt=E(h);X&&X.l(yt),m=G(yt),g=M(yt,"DIV",{class:!0});var Vt=E(g);Q&&Q.l(Vt),Vt.forEach(d),p=G(yt),_=M(yt,"DIV",{class:!0});var St=E(_);re&&re.l(St),w=G(St),_e&&_e.l(St),S=G(St),De&&De.l(St),k=G(St),x&&x.l(St),I=G(St),be&&be.l(St),St.forEach(d),yt.forEach(d),Bt.forEach(d),$t.forEach(d),T=G(Te),Me&&Me.l(Te),N=G(Te),U=M(Te,"DIV",{class:!0});var fe=E(U);oe&&oe.l(fe),fe.forEach(d),Te.forEach(d),this.h()},h(){c(n,"id","new-chat-button"),c(n,"class","hidden"),c(n,"aria-label","New Chat"),c(i,"class","bg-linear-to-b via-40% to-97% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1]"),c(g,"class",b="flex-1 overflow-hidden max-w-full py-0.5 "+(r[13]?"ml-1":"")),c(_,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),c(h,"class","flex items-center w-full max-w-full"),c(u,"class","flex max-w-full w-full mx-auto px-1.5 md:px-2 pt-0.5 bg-transparent"),c(a,"class","flex items-center w-full pl-1.5 pr-1"),c(U,"class","absolute top-[100%] left-0 right-0 h-fit"),c(o,"class","sticky top-0 z-30 w-full py-1 -mb-8 flex flex-col items-center drag-region")},m(ie,Te){j(e,ie,Te),B(ie,l,Te),B(ie,n,Te),B(ie,s,Te),B(ie,o,Te),y(o,a),y(a,i),y(a,f),y(a,u),y(u,h),X&&X.m(h,null),y(h,m),y(h,g),Q&&Q.m(g,null),y(h,p),y(h,_),re&&re.m(_,null),y(_,w),_e&&_e.m(_,null),y(_,S),De&&De.m(_,null),y(_,k),x&&x.m(_,null),y(_,I),be&&be.m(_,null),y(o,T),Me&&Me.m(o,null),y(o,N),y(o,U),oe&&oe.m(U,null),O=!0,A||(P=Ne(n,"click",r[23]),A=!0)},p(ie,Te){var Bt,yt,Vt,St,fe,Ge,at,It,zt,he,Pe,Ae,Ke,gt,_t,Tt,ct;const $t={};Te[0]&2048&&($t.chatId=ie[11]),!t&&Te[0]&1024&&(t=!0,$t.show=ie[10],je(()=>t=!1)),e.$set($t),ie[12]&&!ie[13]?X?(X.p(ie,Te),Te[0]&12288&&v(X,1)):(X=uo(ie),X.c(),v(X,1),X.m(h,m)):X&&(ce(),$(X,1,1,()=>{X=null}),ue()),ie[5]?Q?(Q.p(ie,Te),Te[0]&32&&v(Q,1)):(Q=ho(ie),Q.c(),v(Q,1),Q.m(g,null)):Q&&(ce(),$(Q,1,1,()=>{Q=null}),ue()),(!O||Te[0]&8192&&b!==(b="flex-1 overflow-hidden max-w-full py-0.5 "+(ie[13]?"ml-1":"")))&&c(g,"class",b),((Bt=ie[15])==null?void 0:Bt.role)!=="user"||(((St=(Vt=(yt=ie[15])==null?void 0:yt.permissions)==null?void 0:Vt.chat)==null?void 0:St.temporary)??!0)&&!(((at=(Ge=(fe=ie[15])==null?void 0:fe.permissions)==null?void 0:Ge.chat)==null?void 0:at.temporary_enforced)??!1)?re?(re.p(ie,Te),Te[0]&32768&&v(re,1)):(re=mo(ie),re.c(),v(re,1),re.m(_,w)):re&&(ce(),$(re,1,1,()=>{re=null}),ue()),ie[12]&&!ie[17]&&ie[3]&&ie[3].id?_e?(_e.p(ie,Te),Te[0]&135176&&v(_e,1)):(_e=po(ie),_e.c(),v(_e,1),_e.m(_,S)):_e&&(ce(),$(_e,1,1,()=>{_e=null}),ue()),ie[2]&&ie[3]&&(ie[3].id||ie[17])?De?(De.p(ie,Te),Te[0]&131084&&v(De,1)):(De=go(ie),De.c(),v(De,1),De.m(_,k)):De&&(ce(),$(De,1,1,()=>{De=null}),ue()),((It=ie[15])==null?void 0:It.role)==="admin"||(((he=(zt=ie[15])==null?void 0:zt.permissions.chat)==null?void 0:he.controls)??!0)?x?(x.p(ie,Te),Te[0]&32768&&v(x,1)):(x=_o(ie),x.c(),v(x,1),x.m(_,I)):x&&(ce(),$(x,1,1,()=>{x=null}),ue()),ie[15]!==void 0&&ie[15]!==null?be?(be.p(ie,Te),Te[0]&32768&&v(be,1)):(be=bo(ie),be.c(),v(be,1),be.m(_,null)):be&&(ce(),$(be,1,1,()=>{be=null}),ue()),Te[0]&133120&&(C=ie[17]&&(ie[11]??"").startsWith("local:")),C?Me?Me.p(ie,Te):(Me=vo(ie),Me.c(),Me.m(o,N)):Me&&(Me.d(1),Me=null),!ie[4].currentId&&!ie[11]&&(ie[19].length>0||(((Ae=(Pe=ie[20])==null?void 0:Pe.license_metadata)==null?void 0:Ae.type)??null)==="trial"||(((gt=(Ke=ie[20])==null?void 0:Ke.license_metadata)==null?void 0:gt.seats)??null)!==null&&((_t=ie[20])==null?void 0:_t.user_count)>((ct=(Tt=ie[20])==null?void 0:Tt.license_metadata)==null?void 0:ct.seats))?oe?(oe.p(ie,Te),Te[0]&1574928&&v(oe,1)):(oe=wo(ie),oe.c(),v(oe,1),oe.m(U,null)):oe&&(ce(),$(oe,1,1,()=>{oe=null}),ue())},i(ie){O||(v(e.$$.fragment,ie),v(X),v(Q),v(re),v(_e),v(De),v(x),v(be),v(oe),O=!0)},o(ie){$(e.$$.fragment,ie),$(X),$(Q),$(re),$(_e),$(De),$(x),$(be),$(oe),O=!1},d(ie){ie&&(d(l),d(n),d(s),d(o)),R(e,ie),X&&X.d(),Q&&Q.d(),re&&re.d(),_e&&_e.d(),De&&De.d(),x&&x.d(),be&&be.d(),Me&&Me.d(),oe&&oe.d(),A=!1,P()}}}function Nh(r,e,t){let l,n,s,o,a,i,f,u,h,m;Ee(r,pl,oe=>t(11,l=oe)),Ee(r,In,oe=>t(12,n=oe)),Ee(r,$r,oe=>t(13,s=oe)),Ee(r,wl,oe=>t(15,a=oe)),Ee(r,Wt,oe=>t(16,i=oe)),Ee(r,tl,oe=>t(17,f=oe)),Ee(r,Mt,oe=>t(18,u=oe)),Ee(r,ni,oe=>t(19,h=oe)),Ee(r,Pl,oe=>t(20,m=oe));const g=Ot("i18n");Ee(r,g,oe=>t(14,o=oe));let{initNewChat:b}=e,{shareEnabled:p=!1}=e,{chat:_}=e,{history:w}=e,{selectedModels:S}=e,{showModelSelector:k=!0}=e,{onSaveTempChat:I}=e,{archiveChatHandler:T}=e,{moveChatHandler:C}=e,N=[],U=!1;function O(oe){U=oe,t(10,U)}const A=()=>{b()},P=()=>{$r.set(!s)};function J(oe){S=oe,t(0,S)}const Z=async()=>{((i==null?void 0:i.temporaryChatByDefault)??!1)&&f?await tl.set(null):await tl.set(!f),await mn("/"),f?window.history.replaceState(null,"","?temporary-chat=true"):window.history.replaceState(null,"",location.pathname)},X=async()=>{I()},Q=()=>{b()},re=()=>{t(10,U=!U)},_e=()=>{T(_.id)},De=async()=>{await Mt.set(!u)},x=oe=>{oe.detail==="archived-chat"&&ri.set(!0)},be=oe=>![...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]"),...N].includes(oe.id),Me=(oe,Je)=>{const le=Je.detail;oe.dismissible?localStorage.setItem("dismissedBannerIds",JSON.stringify([le,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(ee=>h.find(Se=>Se.id===ee)))):t(9,N=[...N,le])};return r.$$set=oe=>{"initNewChat"in oe&&t(1,b=oe.initNewChat),"shareEnabled"in oe&&t(2,p=oe.shareEnabled),"chat"in oe&&t(3,_=oe.chat),"history"in oe&&t(4,w=oe.history),"selectedModels"in oe&&t(0,S=oe.selectedModels),"showModelSelector"in oe&&t(5,k=oe.showModelSelector),"onSaveTempChat"in oe&&t(6,I=oe.onSaveTempChat),"archiveChatHandler"in oe&&t(7,T=oe.archiveChatHandler),"moveChatHandler"in oe&&t(8,C=oe.moveChatHandler)},[S,b,p,_,w,k,I,T,C,N,U,l,n,s,o,a,i,f,u,h,m,g,O,A,P,J,Z,X,Q,re,_e,De,x,be,Me]}class Bh extends st{constructor(e){super(),ot(this,e,Nh,Vh,nt,{initNewChat:1,shareEnabled:2,chat:3,history:4,selectedModels:0,showModelSelector:5,onSaveTempChat:6,archiveChatHandler:7,moveChatHandler:8},null,[-1,-1])}}function $o(r,e,t){const l=r.slice();return l[25]=e[t],l[27]=t,l}function Io(r,e,t){const l=r.slice();return l[22]=e[t],l[24]=t,l}function Oh(r){let e,t;return e=new dl({props:{className:"size-4"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function zh(r){let e,t,l,n,s,o,a,i=r[8].t("Tools")+"",f,u,h=r[8].t("Functions")+"",m,g,b,p,_,w,S,k,I;function T(O,A){if(O[1]==="tools")return Uh;if(O[1]==="functions")return Ah}let C=T(r),N=C&&C(r),U=r[2]&&To(r);return{c(){e=D("form"),t=D("div"),l=D("div"),n=D("div"),s=D("div"),o=D("select"),a=D("option"),f=$e(i),u=D("option"),m=$e(h),b=W(),p=D("div"),_=D("select"),N&&N.c(),w=W(),U&&U.c(),this.h()},l(O){e=M(O,"FORM",{class:!0});var A=E(e);t=M(A,"DIV",{class:!0});var P=E(t);l=M(P,"DIV",{class:!0});var J=E(l);n=M(J,"DIV",{class:!0});var Z=E(n);s=M(Z,"DIV",{class:!0});var X=E(s);o=M(X,"SELECT",{class:!0,placeholder:!0});var Q=E(o);a=M(Q,"OPTION",{class:!0});var re=E(a);f=Ie(re,i),re.forEach(d),u=M(Q,"OPTION",{class:!0});var _e=E(u);m=Ie(_e,h),_e.forEach(d),Q.forEach(d),X.forEach(d),b=G(Z),p=M(Z,"DIV",{class:!0});var De=E(p);_=M(De,"SELECT",{class:!0});var x=E(_);N&&N.l(x),x.forEach(d),De.forEach(d),Z.forEach(d),J.forEach(d),w=G(P),U&&U.l(P),P.forEach(d),A.forEach(d),this.h()},h(){a.__value="tools",ll(a,a.__value),c(a,"class","bg-gray-100 dark:bg-gray-800"),u.__value="functions",ll(u,u.__value),c(u,"class","bg-gray-100 dark:bg-gray-800"),c(o,"class","w-full rounded-sm text-xs py-2 px-1 bg-transparent outline-hidden"),c(o,"placeholder",g=r[8].t("Select")),r[1]===void 0&&Gt(()=>r[13].call(o)),c(s,"class","flex-1"),c(_,"class","w-full rounded-sm py-2 px-1 text-xs bg-transparent outline-hidden"),r[2]===void 0&&Gt(()=>r[14].call(_)),c(p,"class","flex-1"),c(n,"class","flex gap-2"),c(l,"class","space-y-1"),c(t,"class","flex flex-col"),c(e,"class","flex flex-col h-full justify-between space-y-3 text-sm")},m(O,A){B(O,e,A),y(e,t),y(t,l),y(l,n),y(n,s),y(s,o),y(o,a),y(a,f),y(o,u),y(u,m),un(o,r[1],!0),y(n,b),y(n,p),y(p,_),N&&N.m(_,null),un(_,r[2],!0),y(t,w),U&&U.m(t,null),S=!0,k||(I=[Ne(o,"change",r[13]),Ne(_,"change",r[14]),Ne(_,"change",r[15]),Ne(e,"submit",Ul(r[18]))],k=!0)},p(O,A){(!S||A&256)&&i!==(i=O[8].t("Tools")+"")&&Ce(f,i),(!S||A&256)&&h!==(h=O[8].t("Functions")+"")&&Ce(m,h),(!S||A&256&&g!==(g=O[8].t("Select")))&&c(o,"placeholder",g),A&2&&un(o,O[1]),C===(C=T(O))&&N?N.p(O,A):(N&&N.d(1),N=C&&C(O),N&&(N.c(),N.m(_,null))),A&196&&un(_,O[2]),O[2]?U?(U.p(O,A),A&4&&v(U,1)):(U=To(O),U.c(),v(U,1),U.m(t,null)):U&&(ce(),$(U,1,1,()=>{U=null}),ue())},i(O){S||(v(U),S=!0)},o(O){$(U),S=!1},d(O){O&&d(e),N&&N.d(),U&&U.d(),k=!1,ul(I)}}}function Ah(r){let e,t=r[8].t("Select a function")+"",l,n,s=ft(r[7]),o=[];for(let a=0;a<s.length;a+=1)o[a]=Co($o(r,s,a));return{c(){e=D("option"),l=$e(t);for(let a=0;a<o.length;a+=1)o[a].c();n=Oe(),this.h()},l(a){e=M(a,"OPTION",{class:!0});var i=E(e);l=Ie(i,t),i.forEach(d);for(let f=0;f<o.length;f+=1)o[f].l(a);n=Oe(),this.h()},h(){e.__value="",ll(e,e.__value),e.selected=!0,e.disabled=!0,c(e,"class","bg-gray-100 dark:bg-gray-800")},m(a,i){B(a,e,i),y(e,l);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(a,i);B(a,n,i)},p(a,i){if(i&256&&t!==(t=a[8].t("Select a function")+"")&&Ce(l,t),i&128){s=ft(a[7]);let f;for(f=0;f<s.length;f+=1){const u=$o(a,s,f);o[f]?o[f].p(u,i):(o[f]=Co(u),o[f].c(),o[f].m(n.parentNode,n))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(a){a&&(d(e),d(n)),Rt(o,a)}}}function Uh(r){let e,t=r[8].t("Select a tool")+"",l,n,s=ft(r[6].filter(Do)),o=[];for(let a=0;a<s.length;a+=1)o[a]=So(Io(r,s,a));return{c(){e=D("option"),l=$e(t);for(let a=0;a<o.length;a+=1)o[a].c();n=Oe(),this.h()},l(a){e=M(a,"OPTION",{class:!0});var i=E(e);l=Ie(i,t),i.forEach(d);for(let f=0;f<o.length;f+=1)o[f].l(a);n=Oe(),this.h()},h(){e.__value="",ll(e,e.__value),e.selected=!0,e.disabled=!0,c(e,"class","bg-gray-100 dark:bg-gray-800")},m(a,i){B(a,e,i),y(e,l);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(a,i);B(a,n,i)},p(a,i){if(i&256&&t!==(t=a[8].t("Select a tool")+"")&&Ce(l,t),i&64){s=ft(a[6].filter(Do));let f;for(f=0;f<s.length;f+=1){const u=Io(a,s,f);o[f]?o[f].p(u,i):(o[f]=So(u),o[f].c(),o[f].m(n.parentNode,n))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(a){a&&(d(e),d(n)),Rt(o,a)}}}function Co(r){let e,t=r[25].name+"",l,n;return{c(){e=D("option"),l=$e(t),this.h()},l(s){e=M(s,"OPTION",{class:!0});var o=E(e);l=Ie(o,t),o.forEach(d),this.h()},h(){e.__value=n=r[25].id,ll(e,e.__value),c(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,o){B(s,e,o),y(e,l)},p(s,o){o&128&&t!==(t=s[25].name+"")&&Ce(l,t),o&128&&n!==(n=s[25].id)&&(e.__value=n,ll(e,e.__value))},d(s){s&&d(e)}}}function So(r){let e,t=r[22].name+"",l,n;return{c(){e=D("option"),l=$e(t),this.h()},l(s){e=M(s,"OPTION",{class:!0});var o=E(e);l=Ie(o,t),o.forEach(d),this.h()},h(){e.__value=n=r[22].id,ll(e,e.__value),c(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,o){B(s,e,o),y(e,l)},p(s,o){o&64&&t!==(t=s[22].name+"")&&Ce(l,t),o&64&&n!==(n=s[22].id)&&(e.__value=n,ll(e,e.__value))},d(s){s&&d(e)}}}function To(r){let e,t,l,n,s,o;const a=[Fh,Ph],i=[];function f(u,h){return u[3]?1:0}return n=f(r),s=i[n]=a[n](r),{c(){e=D("hr"),t=W(),l=D("div"),s.c(),this.h()},l(u){e=M(u,"HR",{class:!0}),t=G(u),l=M(u,"DIV",{class:!0});var h=E(l);s.l(h),h.forEach(d),this.h()},h(){c(e,"class","border-gray-50 dark:border-gray-800 my-1 w-full"),c(l,"class","my-2 text-xs")},m(u,h){B(u,e,h),B(u,t,h),B(u,l,h),i[n].m(l,null),o=!0},p(u,h){let m=n;n=f(u),n===m?i[n].p(u,h):(ce(),$(i[m],1,1,()=>{i[m]=null}),ue(),s=i[n],s?s.p(u,h):(s=i[n]=a[n](u),s.c()),v(s,1),s.m(l,null))},i(u){o||(v(s),o=!0)},o(u){$(s),o=!1},d(u){u&&(d(e),d(t),d(l)),i[n].d()}}}function Ph(r){let e,t;return e=new dl({props:{className:"size-5"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Fh(r){let e,t,l;function n(o){r[16](o)}let s={valvesSpec:r[4]};return r[5]!==void 0&&(s.valves=r[5]),e=new hf({props:s}),Be.push(()=>Le(e,"valves",n)),e.$on("change",r[17]),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,a){const i={};a&16&&(i.valvesSpec=o[4]),!t&&a&32&&(t=!0,i.valves=o[5],je(()=>t=!1)),e.$set(i)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function Lh(r){let e,t,l,n;const s=[zh,Oh],o=[];function a(i,f){return i[0]&&!i[3]?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,[f]){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}const Do=r=>{var e;return!((e=r==null?void 0:r.id)!=null&&e.startsWith("server:"))};function jh(r,e,t){let l,n,s;Ee(r,bl,O=>t(6,l=O)),Ee(r,gn,O=>t(7,n=O));const o=yl(),a=Ot("i18n");Ee(r,a,O=>t(8,s=O));let{show:i=!1}=e,f="tools",u="",h=!1,m=null,g={},b;const p=async()=>{b&&clearTimeout(b),b=setTimeout(()=>{w()},500)},_=async()=>{var O;if(t(3,h=!0),f==="tools"?(t(5,g=await qi(localStorage.token,u)),t(4,m=await Zi(localStorage.token,u))):f==="functions"&&(t(5,g=await Cf(localStorage.token,u)),t(4,m=await Sf(localStorage.token,u))),m)for(const A in m.properties)((O=m.properties[A])==null?void 0:O.type)==="array"&&t(5,g[A]=(g[A]??[]).join(","),g);t(3,h=!1)},w=async()=>{var O;if(m){for(const A in m.properties)((O=m.properties[A])==null?void 0:O.type)==="array"&&t(5,g[A]=(g[A]??"").split(",").map(P=>P.trim()),g);if(f==="tools"){const A=await Yi(localStorage.token,u,g).catch(P=>(Ue.error(`${P}`),null));A&&(Ue.success(s.t("Valves updated")),t(5,g=A))}else if(f==="functions"){const A=await Tf(localStorage.token,u,g).catch(P=>(Ue.error(`${P}`),null));A&&(Ue.success(s.t("Valves updated")),t(5,g=A))}}},S=async()=>{t(3,h=!0),n===null&&gn.set(await Da(localStorage.token)),l===null&&bl.set(await Cn(localStorage.token)),t(3,h=!1)};function k(){f=Fr(this),t(1,f)}function I(){u=Fr(this),t(2,u),t(1,f)}const T=async()=>{await qe()};function C(O){g=O,t(5,g)}const N=()=>{p()},U=()=>{w(),o("save")};return r.$$set=O=>{"show"in O&&t(0,i=O.show)},r.$$.update=()=>{r.$$.dirty&2&&f&&t(2,u=""),r.$$.dirty&4&&u&&_(),r.$$.dirty&1&&i&&S()},[i,f,u,h,m,g,l,n,s,o,a,p,w,k,I,T,C,N,U]}class Rh extends st{constructor(e){super(),ot(this,e,jh,Lh,nt,{show:0})}}function Mo(r,e,t){const l=r.slice();return l[16]=e[t],l[18]=t,l}function Vo(r){var u,h,m,g,b,p,_,w,S;let e,t,l,n,s,o=r[0].length>0&&No(r),a=(((u=r[4])==null?void 0:u.role)==="admin"||(((m=(h=r[4])==null?void 0:h.permissions.chat)==null?void 0:m.valves)??!0))&&Oo(r),i=(((g=r[4])==null?void 0:g.role)==="admin"||(((p=(b=r[4])==null?void 0:b.permissions.chat)==null?void 0:p.system_prompt)??!0))&&zo(r),f=(((_=r[4])==null?void 0:_.role)==="admin"||(((S=(w=r[4])==null?void 0:w.permissions.chat)==null?void 0:S.params)??!0))&&Ao(r);return{c(){e=D("div"),o&&o.c(),t=W(),a&&a.c(),l=W(),i&&i.c(),n=W(),f&&f.c(),this.h()},l(k){e=M(k,"DIV",{class:!0});var I=E(e);o&&o.l(I),t=G(I),a&&a.l(I),l=G(I),i&&i.l(I),n=G(I),f&&f.l(I),I.forEach(d),this.h()},h(){c(e,"class","dark:text-gray-200 text-sm font-primary py-0.5 px-0.5")},m(k,I){B(k,e,I),o&&o.m(e,null),y(e,t),a&&a.m(e,null),y(e,l),i&&i.m(e,null),y(e,n),f&&f.m(e,null),s=!0},p(k,I){var T,C,N,U,O,A,P,J,Z;k[0].length>0?o?(o.p(k,I),I&1&&v(o,1)):(o=No(k),o.c(),v(o,1),o.m(e,t)):o&&(ce(),$(o,1,1,()=>{o=null}),ue()),((T=k[4])==null?void 0:T.role)==="admin"||(((N=(C=k[4])==null?void 0:C.permissions.chat)==null?void 0:N.valves)??!0)?a?(a.p(k,I),I&16&&v(a,1)):(a=Oo(k),a.c(),v(a,1),a.m(e,l)):a&&(ce(),$(a,1,1,()=>{a=null}),ue()),((U=k[4])==null?void 0:U.role)==="admin"||(((A=(O=k[4])==null?void 0:O.permissions.chat)==null?void 0:A.system_prompt)??!0)?i?(i.p(k,I),I&16&&v(i,1)):(i=zo(k),i.c(),v(i,1),i.m(e,n)):i&&(ce(),$(i,1,1,()=>{i=null}),ue()),((P=k[4])==null?void 0:P.role)==="admin"||(((Z=(J=k[4])==null?void 0:J.permissions.chat)==null?void 0:Z.params)??!0)?f?(f.p(k,I),I&16&&v(f,1)):(f=Ao(k),f.c(),v(f,1),f.m(e,null)):f&&(ce(),$(f,1,1,()=>{f=null}),ue())},i(k){s||(v(o),v(a),v(i),v(f),s=!0)},o(k){$(o),$(a),$(i),$(f),s=!1},d(k){k&&d(e),o&&o.d(),a&&a.d(),i&&i.d(),f&&f.d()}}}function No(r){let e,t,l,n;return e=new Ll({props:{title:r[3].t("Files"),open:!0,buttonClassName:"w-full",$$slots:{content:[Hh]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment),t=W(),l=D("hr"),this.h()},l(s){L(e.$$.fragment,s),t=G(s),l=M(s,"HR",{class:!0}),this.h()},h(){c(l,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(s,o){j(e,s,o),B(s,t,o),B(s,l,o),n=!0},p(s,o){const a={};o&8&&(a.title=s[3].t("Files")),o&524289&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){s&&(d(t),d(l)),R(e,s)}}}function Bo(r){var s,o;let e,t;function l(){return r[10](r[18])}function n(){return r[11](r[16])}return e=new ga({props:{className:"w-full",item:r[16],edit:!0,url:(s=r[16])!=null&&s.url?r[16].url:null,name:r[16].name,type:r[16].type,size:(o=r[16])==null?void 0:o.size,dismissible:!0,small:!0}}),e.$on("dismiss",l),e.$on("click",n),{c(){F(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,i){j(e,a,i),t=!0},p(a,i){var u,h;r=a;const f={};i&1&&(f.item=r[16]),i&1&&(f.url=(u=r[16])!=null&&u.url?r[16].url:null),i&1&&(f.name=r[16].name),i&1&&(f.type=r[16].type),i&1&&(f.size=(h=r[16])==null?void 0:h.size),e.$set(f)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){R(e,a)}}}function Hh(r){let e,t,l=ft(r[0]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Bo(Mo(r,l,o));const s=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){e=D("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0,slot:!0});var a=E(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(d),this.h()},h(){c(e,"class","flex flex-col gap-1 mt-1.5"),c(e,"slot","content")},m(o,a){B(o,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(o,a){if(a&1){l=ft(o[0]);let i;for(i=0;i<l.length;i+=1){const f=Mo(o,l,i);n[i]?(n[i].p(f,a),v(n[i],1)):(n[i]=Bo(f),n[i].c(),v(n[i],1),n[i].m(e,null))}for(ce(),i=l.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)v(n[a]);t=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)$(n[a]);t=!1},d(o){o&&d(e),Rt(n,o)}}}function Oo(r){let e,t,l,n,s;function o(i){r[12](i)}let a={title:r[3].t("Valves"),buttonClassName:"w-full",$$slots:{content:[Wh]},$$scope:{ctx:r}};return r[2]!==void 0&&(a.open=r[2]),e=new Ll({props:a}),Be.push(()=>Le(e,"open",o)),{c(){F(e.$$.fragment),l=W(),n=D("hr"),this.h()},l(i){L(e.$$.fragment,i),l=G(i),n=M(i,"HR",{class:!0}),this.h()},h(){c(n,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(i,f){j(e,i,f),B(i,l,f),B(i,n,f),s=!0},p(i,f){const u={};f&8&&(u.title=i[3].t("Valves")),f&524292&&(u.$$scope={dirty:f,ctx:i}),!t&&f&4&&(t=!0,u.open=i[2],je(()=>t=!1)),e.$set(u)},i(i){s||(v(e.$$.fragment,i),s=!0)},o(i){$(e.$$.fragment,i),s=!1},d(i){i&&(d(l),d(n)),R(e,i)}}}function Wh(r){let e,t,l;return t=new Rh({props:{show:r[2]}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0,slot:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","text-sm"),c(e,"slot","content")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s&4&&(o.show=n[2]),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function zo(r){let e,t,l,n;return e=new Ll({props:{title:r[3].t("System Prompt"),open:!0,buttonClassName:"w-full",$$slots:{content:[Gh]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment),t=W(),l=D("hr"),this.h()},l(s){L(e.$$.fragment,s),t=G(s),l=M(s,"HR",{class:!0}),this.h()},h(){c(l,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(s,o){j(e,s,o),B(s,t,o),B(s,l,o),n=!0},p(s,o){const a={};o&8&&(a.title=s[3].t("System Prompt")),o&524330&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){s&&(d(t),d(l)),R(e,s)}}}function Gh(r){let e,t,l,n,s,o,a=r[3].t("Generate User Turn")+"",i,f,u;return{c(){e=D("div"),t=D("textarea"),s=W(),o=D("button"),i=$e(a),this.h()},l(h){e=M(h,"DIV",{class:!0,slot:!0});var m=E(e);t=M(m,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),E(t).forEach(d),s=G(m),o=M(m,"BUTTON",{class:!0});var g=E(o);i=Ie(g,a),g.forEach(d),m.forEach(d),this.h()},h(){c(t,"class",l="w-full text-xs outline-hidden resize-vertical "+(r[5].highContrastMode?"border-2 border-gray-300 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800 p-2.5":"py-1.5 bg-transparent")),c(t,"rows","4"),c(t,"placeholder",n=r[3].t("Enter system prompt")),c(o,"class","mt-2 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 rounded-lg transition"),c(e,"class",""),c(e,"slot","content")},m(h,m){B(h,e,m),y(e,t),ll(t,r[1].system),y(e,s),y(e,o),y(o,i),f||(u=[Ne(t,"input",r[13]),Ne(o,"click",r[14])],f=!0)},p(h,m){m&32&&l!==(l="w-full text-xs outline-hidden resize-vertical "+(h[5].highContrastMode?"border-2 border-gray-300 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800 p-2.5":"py-1.5 bg-transparent"))&&c(t,"class",l),m&8&&n!==(n=h[3].t("Enter system prompt"))&&c(t,"placeholder",n),m&2&&ll(t,h[1].system),m&8&&a!==(a=h[3].t("Generate User Turn")+"")&&Ce(i,a)},d(h){h&&d(e),f=!1,ul(u)}}}function Ao(r){let e,t;return e=new Ll({props:{title:r[3].t("Advanced Params"),open:!0,buttonClassName:"w-full",$$slots:{content:[Jh]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&8&&(s.title=l[3].t("Advanced Params")),n&524306&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Jh(r){var i;let e,t,l,n,s;function o(f){r[15](f)}let a={admin:((i=r[4])==null?void 0:i.role)==="admin",custom:!0};return r[1]!==void 0&&(a.params=r[1]),l=new If({props:a}),Be.push(()=>Le(l,"params",o)),{c(){e=D("div"),t=D("div"),F(l.$$.fragment),this.h()},l(f){e=M(f,"DIV",{class:!0,slot:!0});var u=E(e);t=M(u,"DIV",{});var h=E(t);L(l.$$.fragment,h),h.forEach(d),u.forEach(d),this.h()},h(){c(e,"class","text-sm mt-1.5"),c(e,"slot","content")},m(f,u){B(f,e,u),y(e,t),j(l,t,null),s=!0},p(f,u){var m;const h={};u&16&&(h.admin=((m=f[4])==null?void 0:m.role)==="admin"),!n&&u&2&&(n=!0,h.params=f[1],je(()=>n=!1)),l.$set(h)},i(f){s||(v(l.$$.fragment,f),s=!0)},o(f){$(l.$$.fragment,f),s=!1},d(f){f&&d(e),R(l)}}}function qh(r){var b,p,_;let e,t,l,n=r[3].t("Chat Controls")+"",s,o,a,i,f,u,h,m;i=new hl({props:{className:"size-3.5"}});let g=(((b=r[4])==null?void 0:b.role)==="admin"||(((_=(p=r[4])==null?void 0:p.permissions.chat)==null?void 0:_.controls)??!0))&&Vo(r);return{c(){e=D("div"),t=D("div"),l=D("div"),s=$e(n),o=W(),a=D("button"),F(i.$$.fragment),f=W(),g&&g.c(),this.h()},l(w){e=M(w,"DIV",{class:!0});var S=E(e);t=M(S,"DIV",{class:!0});var k=E(t);l=M(k,"DIV",{class:!0});var I=E(l);s=Ie(I,n),I.forEach(d),o=G(k),a=M(k,"BUTTON",{class:!0});var T=E(a);L(i.$$.fragment,T),T.forEach(d),k.forEach(d),f=G(S),g&&g.l(S),S.forEach(d),this.h()},h(){c(l,"class","text-lg font-medium self-center font-primary"),c(a,"class","self-center"),c(t,"class","flex items-center justify-between dark:text-gray-100 mb-2"),c(e,"class","dark:text-white")},m(w,S){B(w,e,S),y(e,t),y(t,l),y(l,s),y(t,o),y(t,a),j(i,a,null),y(e,f),g&&g.m(e,null),u=!0,h||(m=Ne(a,"click",r[9]),h=!0)},p(w,[S]){var k,I,T;(!u||S&8)&&n!==(n=w[3].t("Chat Controls")+"")&&Ce(s,n),((k=w[4])==null?void 0:k.role)==="admin"||(((T=(I=w[4])==null?void 0:I.permissions.chat)==null?void 0:T.controls)??!0)?g?(g.p(w,S),S&16&&v(g,1)):(g=Vo(w),g.c(),v(g,1),g.m(e,null)):g&&(ce(),$(g,1,1,()=>{g=null}),ue())},i(w){u||(v(i.$$.fragment,w),v(g),u=!0)},o(w){$(i.$$.fragment,w),$(g),u=!1},d(w){w&&d(e),R(i),g&&g.d(),h=!1,m()}}}function Zh(r,e,t){let l,n,s;Ee(r,wl,k=>t(4,n=k)),Ee(r,Wt,k=>t(5,s=k));const o=yl(),a=Ot("i18n");Ee(r,a,k=>t(3,l=k));let{models:i=[]}=e,{chatFiles:f=[]}=e,{params:u={}}=e,h=!1;const m=()=>{o("close")},g=k=>{f.splice(k,1),t(0,f)},b=k=>{};function p(k){h=k,t(2,h)}function _(){u.system=this.value,t(1,u)}const w=()=>{o("generateUserTurn")};function S(k){u=k,t(1,u)}return r.$$set=k=>{"models"in k&&t(8,i=k.models),"chatFiles"in k&&t(0,f=k.chatFiles),"params"in k&&t(1,u=k.params)},[f,u,h,l,n,s,o,a,i,m,g,b,p,_,w,S]}class Pa extends st{constructor(e){super(),ot(this,e,Zh,qh,nt,{models:8,chatFiles:0,params:1})}}function Uo(r,e,t){const l=r.slice();return l[10]=e[t],l}function Yh(r){let e;const t=r[4].default,l=vn(t,r,r[8],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s&256)&&wn(l,t,n,n[8],e?yn(t,n[8],s,null):kn(n[8]),null)},i(n){e||(v(l,n),e=!0)},o(n){$(l,n),e=!1},d(n){l&&l.d(n)}}}function Kh(r){var o;let e,t,l=(((o=r[10])==null?void 0:o.label)??"Camera")+"",n,s;return{c(){e=D("div"),t=D("div"),n=$e(l),s=W(),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=E(e);t=M(i,"DIV",{class:!0});var f=E(t);n=Ie(f,l),f.forEach(d),i.forEach(d),s=G(a),this.h()},h(){c(t,"class","line-clamp-1"),c(e,"class","flex items-center")},m(a,i){B(a,e,i),y(e,t),y(t,n),B(a,s,i)},p(a,i){var f;i&2&&l!==(l=(((f=a[10])==null?void 0:f.label)??"Camera")+"")&&Ce(n,l)},d(a){a&&(d(e),d(s))}}}function Po(r){let e,t;function l(){return r[5](r[10])}return e=new Pt({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Kh]},$$scope:{ctx:r}}}),e.$on("click",l),{c(){F(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){r=n;const o={};s&258&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Xh(r){let e,t,l=ft(r[1]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Po(Uo(r,l,o));const s=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Oe()},l(o){for(let a=0;a<n.length;a+=1)n[a].l(o);e=Oe()},m(o,a){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,a);B(o,e,a),t=!0},p(o,a){if(a&10){l=ft(o[1]);let i;for(i=0;i<l.length;i+=1){const f=Uo(o,l,i);n[i]?(n[i].p(f,a),v(n[i],1)):(n[i]=Po(f),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(ce(),i=l.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)v(n[a]);t=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)$(n[a]);t=!1},d(o){o&&d(e),Rt(n,o)}}}function Qh(r){let e,t,l;return t=new Sn({props:{class:"w-full max-w-[180px] rounded-lg p-1 border border-gray-100  dark:border-gray-800 z-9999 bg-white dark:bg-gray-900 dark:text-white shadow-xs",sideOffset:6,side:"top",align:"start",transition:Fl,$$slots:{default:[Xh]},$$scope:{ctx:r}}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{slot:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"slot","content")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p(n,s){const o={};s&258&&(o.$$scope={dirty:s,ctx:n}),t.$set(o)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function xh(r){let e,t,l;function n(o){r[6](o)}let s={$$slots:{content:[Qh],default:[Yh]},$$scope:{ctx:r}};return r[2]!==void 0&&(s.show=r[2]),e=new Tn({props:s}),Be.push(()=>Le(e,"show",n)),e.$on("change",r[7]),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,[a]){const i={};a&258&&(i.$$scope={dirty:a,ctx:o}),!t&&a&4&&(t=!0,i.show=o[2],je(()=>t=!1)),e.$set(i)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function em(r,e,t){let{$$slots:l={},$$scope:n}=e;Ot("i18n");const s=yl();let{onClose:o=()=>{}}=e,{devices:a}=e,i=!1;const f=m=>{s("change",m.deviceId)};function u(m){i=m,t(2,i)}const h=m=>{m.detail===!1&&o()};return r.$$set=m=>{"onClose"in m&&t(0,o=m.onClose),"devices"in m&&t(1,a=m.devices),"$$scope"in m&&t(8,n=m.$$scope)},[o,a,i,s,l,f,u,h,n]}class tm extends st{constructor(e){super(),ot(this,e,em,xh,nt,{onClose:0,devices:1})}}function Fo(r){let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',w,S,k,I=r[4]&&Lo(r);function T(X,Q){return X[4]?sm:om}let C=T(r),N=C(r);const U=[um,cm],O=[];function A(X,Q){return X[4]?0:1}a=A(r),i=O[a]=U[a](r);function P(X,Q){return X[1]?gm:X[2]?pm:mm}let J=P(r),Z=J(r);return{c(){e=D("div"),I&&I.c(),t=W(),l=D("div"),N.c(),n=W(),s=D("div"),o=D("div"),i.c(),f=W(),u=D("div"),h=D("button"),m=D("div"),Z.c(),g=W(),b=D("div"),p=D("button"),p.innerHTML=_,this.h()},l(X){e=M(X,"DIV",{class:!0});var Q=E(e);I&&I.l(Q),t=G(Q),l=M(Q,"DIV",{class:!0});var re=E(l);N.l(re),re.forEach(d),n=G(Q),s=M(Q,"DIV",{class:!0});var _e=E(s);o=M(_e,"DIV",{});var De=E(o);i.l(De),De.forEach(d),f=G(_e),u=M(_e,"DIV",{});var x=E(u);h=M(x,"BUTTON",{type:!0});var be=E(h);m=M(be,"DIV",{class:!0});var Me=E(m);Z.l(Me),Me.forEach(d),be.forEach(d),x.forEach(d),g=G(_e),b=M(_e,"DIV",{});var oe=E(b);p=M(oe,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),El(p)!=="svelte-1k5eavb"&&(p.innerHTML=_),oe.forEach(d),_e.forEach(d),Q.forEach(d),this.h()},h(){c(l,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),c(m,"class","line-clamp-1 text-sm font-medium"),c(h,"type","button"),c(p,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),c(p,"type","button"),c(s,"class","flex justify-between items-center pb-2 w-full"),c(e,"class","max-w-lg w-full h-full max-h-[100dvh] flex flex-col justify-between p-3 md:p-6")},m(X,Q){B(X,e,Q),I&&I.m(e,null),y(e,t),y(e,l),N.m(l,null),y(e,n),y(e,s),y(s,o),O[a].m(o,null),y(s,f),y(s,u),y(u,h),y(h,m),Z.m(m,null),y(s,g),y(s,b),y(b,p),w=!0,S||(k=[Ne(h,"click",r[31]),Ne(p,"click",r[32])],S=!0)},p(X,Q){X[4]?I?I.p(X,Q):(I=Lo(X),I.c(),I.m(e,t)):I&&(I.d(1),I=null),C===(C=T(X))&&N?N.p(X,Q):(N.d(1),N=C(X),N&&(N.c(),N.m(l,null)));let re=a;a=A(X),a===re?O[a].p(X,Q):(ce(),$(O[re],1,1,()=>{O[re]=null}),ue(),i=O[a],i?i.p(X,Q):(i=O[a]=U[a](X),i.c()),v(i,1),i.m(o,null)),J===(J=P(X))&&Z?Z.p(X,Q):(Z.d(1),Z=J(X),Z&&(Z.c(),Z.m(m,null)))},i(X){w||(v(i),w=!0)},o(X){$(i),w=!1},d(X){X&&d(e),I&&I.d(),N.d(),O[a].d(),Z.d(),S=!1,ul(k)}}}function Lo(r){let e,t,l;function n(a,i){return a[3]?rm:a[1]||a[2]?nm:lm}let s=n(r),o=s(r);return{c(){e=D("button"),o.c(),this.h()},l(a){e=M(a,"BUTTON",{type:!0,class:!0});var i=E(e);o.l(i),i.forEach(d),this.h()},h(){c(e,"type","button"),c(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(a,i){B(a,e,i),o.m(e,null),t||(l=Ne(e,"click",r[26]),t=!0)},p(a,i){s===(s=n(a))&&o?o.p(a,i):(o.d(1),o=s(a),o&&(o.c(),o.m(e,null)))},d(a){a&&d(e),o.d(),t=!1,l()}}}function lm(r){let e,t,l;return{c(){e=D("div"),this.h()},l(n){e=M(n,"DIV",{class:!0,style:!0}),E(e).forEach(d),this.h()},h(){var n,s,o,a,i,f,u,h,m;c(e,"class",t=(r[6]*100>4?" size-[4.5rem]":r[6]*100>2?" size-16":r[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((o=(s=(n=r[0])==null?void 0:n.info)==null?void 0:s.meta)==null?void 0:o.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),c(e,"style",l=(((f=(i=(a=r[0])==null?void 0:a.info)==null?void 0:i.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(m=(h=(u=r[0])==null?void 0:u.info)==null?void 0:h.meta)==null?void 0:m.profile_image_url}');`:"")},m(n,s){B(n,e,s)},p(n,s){var o,a,i,f,u,h,m,g,b;s[0]&65&&t!==(t=(n[6]*100>4?" size-[4.5rem]":n[6]*100>2?" size-16":n[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((i=(a=(o=n[0])==null?void 0:o.info)==null?void 0:a.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&c(e,"class",t),s[0]&1&&l!==(l=(((h=(u=(f=n[0])==null?void 0:f.info)==null?void 0:u.meta)==null?void 0:h.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(b=(g=(m=n[0])==null?void 0:m.info)==null?void 0:g.meta)==null?void 0:b.profile_image_url}');`:"")&&c(e,"style",l)},d(n){n&&d(e)}}}function nm(r){let e,t,l,n,s,o;return{c(){e=we("svg"),t=we("style"),l=$e(`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),n=we("circle"),s=we("circle"),o=we("circle"),this.h()},l(a){e=ke(a,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var i=E(e);t=ke(i,"style",{});var f=E(t);l=Ie(f,`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),f.forEach(d),n=ke(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(n).forEach(d),s=ke(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(s).forEach(d),o=ke(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(o).forEach(d),i.forEach(d),this.h()},h(){c(n,"class","spinner_qM83"),c(n,"cx","4"),c(n,"cy","12"),c(n,"r","3"),c(s,"class","spinner_qM83 spinner_oXPr"),c(s,"cx","12"),c(s,"cy","12"),c(s,"r","3"),c(o,"class","spinner_qM83 spinner_ZTLf"),c(o,"cx","20"),c(o,"cy","12"),c(o,"r","3"),c(e,"class","size-12 text-gray-900 dark:text-gray-400"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(a,i){B(a,e,i),y(e,t),y(t,l),y(e,n),y(e,s),y(e,o)},p:me,d(a){a&&d(e)}}}function rm(r){let e,t;return{c(){e=D("div"),t=$e(r[3]),this.h()},l(l){e=M(l,"DIV",{class:!0,style:!0});var n=E(e);t=Ie(n,r[3]),n.forEach(d),this.h()},h(){c(e,"class","transition-all rounded-full"),At(e,"font-size",(r[6]*100>4?"4.5":r[6]*100>2?"4.25":r[6]*100>1?"3.75":"3.5")+"rem"),At(e,"width","100%"),At(e,"text-align","center")},m(l,n){B(l,e,n),y(e,t)},p(l,n){n[0]&8&&Ce(t,l[3]),n[0]&64&&At(e,"font-size",(l[6]*100>4?"4.5":l[6]*100>2?"4.25":l[6]*100>1?"3.75":"3.5")+"rem")},d(l){l&&d(e)}}}function sm(r){let e,t,l,n,s,o,a,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',f,u;return{c(){e=D("div"),t=D("video"),l=W(),n=D("canvas"),s=W(),o=D("div"),a=D("button"),a.innerHTML=i,this.h()},l(h){e=M(h,"DIV",{class:!0});var m=E(e);t=M(m,"VIDEO",{id:!0,class:!0}),E(t).forEach(d),l=G(m),n=M(m,"CANVAS",{id:!0,style:!0}),E(n).forEach(d),s=G(m),o=M(m,"DIV",{class:!0});var g=E(o);a=M(g,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),El(a)!=="svelte-16ul42n"&&(a.innerHTML=i),g.forEach(d),m.forEach(d),this.h()},h(){c(t,"id","camera-feed"),t.autoplay=!0,c(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,c(n,"id","camera-canvas"),At(n,"display","none"),c(a,"type","button"),c(a,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),c(o,"class","absolute top-4 md:top-8 left-4"),c(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(h,m){B(h,e,m),y(e,t),y(e,l),y(e,n),y(e,s),y(e,o),y(o,a),f||(u=Ne(a,"click",r[28]),f=!0)},p:me,d(h){h&&d(e),f=!1,u()}}}function om(r){let e,t,l;function n(a,i){return a[3]?fm:a[1]||a[2]?im:am}let s=n(r),o=s(r);return{c(){e=D("button"),o.c(),this.h()},l(a){e=M(a,"BUTTON",{type:!0});var i=E(e);o.l(i),i.forEach(d),this.h()},h(){c(e,"type","button")},m(a,i){B(a,e,i),o.m(e,null),t||(l=Ne(e,"click",r[27]),t=!0)},p(a,i){s===(s=n(a))&&o?o.p(a,i):(o.d(1),o=s(a),o&&(o.c(),o.m(e,null)))},d(a){a&&d(e),o.d(),t=!1,l()}}}function am(r){let e,t,l;return{c(){e=D("div"),this.h()},l(n){e=M(n,"DIV",{class:!0,style:!0}),E(e).forEach(d),this.h()},h(){var n,s,o,a,i,f,u,h,m;c(e,"class",t=(r[6]*100>4?" size-52":r[6]*100>2?"size-48":r[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((o=(s=(n=r[0])==null?void 0:n.info)==null?void 0:s.meta)==null?void 0:o.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),c(e,"style",l=(((f=(i=(a=r[0])==null?void 0:a.info)==null?void 0:i.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(m=(h=(u=r[0])==null?void 0:u.info)==null?void 0:h.meta)==null?void 0:m.profile_image_url}');`:"")},m(n,s){B(n,e,s)},p(n,s){var o,a,i,f,u,h,m,g,b;s[0]&65&&t!==(t=(n[6]*100>4?" size-52":n[6]*100>2?"size-48":n[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((i=(a=(o=n[0])==null?void 0:o.info)==null?void 0:a.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&c(e,"class",t),s[0]&1&&l!==(l=(((h=(u=(f=n[0])==null?void 0:f.info)==null?void 0:u.meta)==null?void 0:h.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(b=(g=(m=n[0])==null?void 0:m.info)==null?void 0:g.meta)==null?void 0:b.profile_image_url}');`:"")&&c(e,"style",l)},d(n){n&&d(e)}}}function im(r){let e,t,l,n,s,o;return{c(){e=we("svg"),t=we("style"),l=$e(`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),n=we("circle"),s=we("circle"),o=we("circle"),this.h()},l(a){e=ke(a,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var i=E(e);t=ke(i,"style",{});var f=E(t);l=Ie(f,`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),f.forEach(d),n=ke(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(n).forEach(d),s=ke(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(s).forEach(d),o=ke(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(o).forEach(d),i.forEach(d),this.h()},h(){c(n,"class","spinner_qM83"),c(n,"cx","4"),c(n,"cy","12"),c(n,"r","3"),c(s,"class","spinner_qM83 spinner_oXPr"),c(s,"cx","12"),c(s,"cy","12"),c(s,"r","3"),c(o,"class","spinner_qM83 spinner_ZTLf"),c(o,"cx","20"),c(o,"cy","12"),c(o,"r","3"),c(e,"class","size-44 text-gray-900 dark:text-gray-400"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(a,i){B(a,e,i),y(e,t),y(t,l),y(e,n),y(e,s),y(e,o)},p:me,d(a){a&&d(e)}}}function fm(r){let e,t;return{c(){e=D("div"),t=$e(r[3]),this.h()},l(l){e=M(l,"DIV",{class:!0,style:!0});var n=E(e);t=Ie(n,r[3]),n.forEach(d),this.h()},h(){c(e,"class","transition-all rounded-full"),At(e,"font-size",(r[6]*100>4?"13":r[6]*100>2?"12":r[6]*100>1?"11.5":"11")+"rem"),At(e,"width","100%"),At(e,"text-align","center")},m(l,n){B(l,e,n),y(e,t)},p(l,n){n[0]&8&&Ce(t,l[3]),n[0]&64&&At(e,"font-size",(l[6]*100>4?"13":l[6]*100>2?"12":l[6]*100>1?"11.5":"11")+"rem")},d(l){l&&d(e)}}}function cm(r){let e,t;return e=new tt({props:{content:r[11].t("Camera"),$$slots:{default:[dm]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&2048&&(s.content=l[11].t("Camera")),n[2]&16&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function um(r){let e,t;return e=new tm({props:{devices:r[8],$$slots:{default:[hm]},$$scope:{ctx:r}}}),e.$on("change",r[29]),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&256&&(s.devices=l[8]),n[2]&16&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function dm(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',l,n;return{c(){e=D("button"),e.innerHTML=t,this.h()},l(s){e=M(s,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),El(e)!=="svelte-1n1gs9g"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),c(e,"type","button")},m(s,o){B(s,e,o),l||(n=Ne(e,"click",r[30]),l=!0)},p:me,d(s){s&&d(e),l=!1,n()}}}function hm(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=D("button"),e.innerHTML=t,this.h()},l(l){e=M(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),El(e)!=="svelte-5e0pue"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),c(e,"type","button")},m(l,n){B(l,e,n)},p:me,d(l){l&&d(e)}}}function mm(r){let e=r[11].t("Listening...")+"",t;return{c(){t=$e(e)},l(l){t=Ie(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&2048&&e!==(e=l[11].t("Listening...")+"")&&Ce(t,e)},d(l){l&&d(t)}}}function pm(r){let e=r[11].t("Tap to interrupt")+"",t;return{c(){t=$e(e)},l(l){t=Ie(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&2048&&e!==(e=l[11].t("Tap to interrupt")+"")&&Ce(t,e)},d(l){l&&d(t)}}}function gm(r){let e=r[11].t("Thinking...")+"",t;return{c(){t=$e(e)},l(l){t=Ie(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&2048&&e!==(e=l[11].t("Thinking...")+"")&&Ce(t,e)},d(l){l&&d(t)}}}function _m(r){let e,t,l=r[10]&&Fo(r);return{c(){l&&l.c(),e=Oe()},l(n){l&&l.l(n),e=Oe()},m(n,s){l&&l.m(n,s),B(n,e,s),t=!0},p(n,s){n[10]?l?(l.p(n,s),s[0]&1024&&v(l,1)):(l=Fo(n),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ce(),$(l,1,1,()=>{l=null}),ue())},i(n){t||(v(l),t=!0)},o(n){$(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function bm(r,e,t){let l,n,s,o,a,i;Ee(r,ln,he=>t(45,l=he)),Ee(r,Pl,he=>t(46,n=he)),Ee(r,Wt,he=>t(47,s=he)),Ee(r,Er,he=>t(48,o=he)),Ee(r,Xt,he=>t(10,a=he));const f=yl(),u=Ot("i18n");Ee(r,u,he=>t(11,i=he));let{eventTarget:h}=e,{submitPrompt:m}=e,{stopResponse:g}=e,{files:b}=e,{chatId:p}=e,{modelId:_}=e,w=null,S=null,k=!1,I=!1,T=!1,C=null,N=!1,U=null,O=!1,A=0,P=!1,J,Z=null,X=[],Q=[],re=null;const _e=async()=>{const he=await navigator.mediaDevices.enumerateDevices();t(8,Q=he.filter(Pe=>Pe.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(8,Q=[...Q,{deviceId:"screen",label:"Screen Share"}]),re===null&&Q.length>0&&t(9,re=Q[0].deviceId)},De=async()=>{if(await _e(),U===null){t(4,N=!0),await qe();try{await x()}catch(he){}}},x=async()=>{const he=document.getElementById("camera-feed");he&&(re==="screen"?t(5,U=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1})):t(5,U=await navigator.mediaDevices.getUserMedia({video:{deviceId:re?{exact:re}:void 0}})),U&&(await _e(),he.srcObject=U,await he.play()))},be=async()=>{U&&U.getTracks().forEach(Pe=>Pe.stop()),t(5,U=null)},Me=()=>{const he=document.getElementById("camera-feed"),Pe=document.getElementById("camera-canvas");if(!Pe)return;const Ae=Pe.getContext("2d");Pe.width=he.videoWidth,Pe.height=he.videoHeight,Ae.drawImage(he,0,0,he.videoWidth,he.videoHeight);const Ke=Pe.toDataURL("image/png");return Ke},oe=async()=>{await be(),t(4,N=!1)},Je=-55,le=async he=>{var Ke,gt;await qe();const Pe=Ei(he,"recording.wav"),Ae=await Mf(localStorage.token,Pe,(gt=(Ke=s==null?void 0:s.audio)==null?void 0:Ke.stt)==null?void 0:gt.language).catch(_t=>(Ue.error(`${_t}`),null));if(Ae&&(Ae.text,Ae.text!=="")){const _t=await m(Ae.text,{_raw:!0})}},ee=async(he=!0)=>{if(a){const Pe=X.slice(0);if(X=[],J=!1,he&&Se(),I){if(t(1,k=!0),t(3,C=null),U){const Ke=Me();t(20,b=[{type:"image",url:Ke}])}const Ae=new Blob(Pe,{type:"audio/wav"});await le(Ae),I=!1,t(1,k=!1)}}else X=[],J=!1,Z&&Z.getTracks().forEach(Ae=>Ae.stop()),t(7,Z=null)},Se=async()=>{a&&(Z||t(7,Z=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})),J=new MediaRecorder(Z),J.onstart=()=>{X=[]},J.ondataavailable=he=>{P&&X.push(he.data)},J.onstop=he=>{ee()},Re(Z))},ne=async()=>{try{J&&J.stop()}catch(he){}Z&&(Z.getAudioTracks().forEach(function(he){he.stop()}),t(7,Z=null))},q=he=>{let Pe=0;for(let Ae=0;Ae<he.length;Ae++){const Ke=(he[Ae]-128)/128;Pe+=Ke*Ke}return Math.sqrt(Pe/he.length)},Re=he=>{const Pe=new AudioContext,Ae=Pe.createMediaStreamSource(he),Ke=Pe.createAnalyser();Ke.minDecibels=Je,Ae.connect(Ke);const gt=Ke.frequencyBinCount,_t=new Uint8Array(gt),Tt=new Uint8Array(Ke.fftSize);let ct=Date.now();P=!1,(()=>{const bt=()=>{if(!J||!a)return;if(T&&!((s==null?void 0:s.voiceInterruption)??!1)?(Ke.maxDecibels=0,Ke.minDecibels=-1):(Ke.minDecibels=Je,Ke.maxDecibels=-30),Ke.getByteTimeDomainData(Tt),Ke.getByteFrequencyData(_t),t(6,A=q(Tt)),_t.some(xt=>xt>0)&&(J&&J.state!=="recording"&&J.start(),P||(P=!0,et()),ct=Date.now()),P&&Date.now()-ct>2e3&&(I=!0,J)){J.stop();return}window.requestAnimationFrame(bt)};window.requestAnimationFrame(bt)})()};let ve={},se=null,H=null;const We=he=>a?new Promise(Pe=>{let Ae=[];const Ke=setInterval(async()=>{var gt,_t,Tt;if(Ae=await speechSynthesis.getVoices(),Ae.length>0){clearInterval(Ke);const ct=((gt=Ae==null?void 0:Ae.filter(Ut=>{var bt,rl,xt,fl;return Ut.voiceURI===(((rl=(bt=s==null?void 0:s.audio)==null?void 0:bt.tts)==null?void 0:rl.voice)??((fl=(xt=n==null?void 0:n.audio)==null?void 0:xt.tts)==null?void 0:fl.voice))}))==null?void 0:gt.at(0))??void 0;H=new SpeechSynthesisUtterance(he),H.rate=((Tt=(_t=s.audio)==null?void 0:_t.tts)==null?void 0:Tt.playbackRate)??1,ct&&(H.voice=ct),speechSynthesis.speak(H),H.onend=async Ut=>{await new Promise(bt=>setTimeout(bt,200)),Pe(Ut)}}},100)}):Promise.resolve(),ut=he=>a?new Promise(Pe=>{var Ke,gt;const Ae=document.getElementById("audioElement");Ae&&(Ae.src=he.src,Ae.muted=!0,Ae.playbackRate=((gt=(Ke=s.audio)==null?void 0:Ke.tts)==null?void 0:gt.playbackRate)??1,Ae.play().then(()=>{Ae.muted=!1}).catch(_t=>{}),Ae.onended=async _t=>{await new Promise(Tt=>setTimeout(Tt,100)),Pe(_t)})}):Promise.resolve(),et=async()=>{t(2,T=!1),O&&g(),H&&(speechSynthesis.cancel(),H=null);const he=document.getElementById("audioElement");he&&(he.muted=!0,he.pause(),he.currentTime=0)};let K=new AbortController;const mt=new Map,pt=new Map,ht=async he=>{var Pe,Ae,Ke,gt,_t,Tt,ct,Ut,bt,rl,xt,fl,$l,Il;if(!mt.has(he))try{if((s==null?void 0:s.showEmojiInCall)??!1){const Ht=await ji(localStorage.token,_,he,p);Ht&&pt.set(he,Ht)}if(((Ae=(Pe=s.audio)==null?void 0:Pe.tts)==null?void 0:Ae.engine)==="browser-kokoro"){const Ht=await o.generate({text:he,voice:((gt=(Ke=s==null?void 0:s.audio)==null?void 0:Ke.tts)==null?void 0:gt.voice)??((Tt=(_t=n==null?void 0:n.audio)==null?void 0:_t.tts)==null?void 0:Tt.voice)}).catch(Ft=>{Ue.error(`${Ft}`)});Ht&&mt.set(he,new Audio(Ht))}else if(n.audio.tts.engine!==""){const Ht=await Df(localStorage.token,((Ut=(ct=s==null?void 0:s.audio)==null?void 0:ct.tts)==null?void 0:Ut.defaultVoice)===n.audio.tts.voice?((rl=(bt=s==null?void 0:s.audio)==null?void 0:bt.tts)==null?void 0:rl.voice)??((fl=(xt=n==null?void 0:n.audio)==null?void 0:xt.tts)==null?void 0:fl.voice):(Il=($l=n==null?void 0:n.audio)==null?void 0:$l.tts)==null?void 0:Il.voice,he).catch(Ft=>null);if(Ht){const Ft=await Ht.blob(),jl=URL.createObjectURL(Ft);mt.set(he,new Audio(jl))}}else mt.set(he,!0)}catch(Ht){}return mt.get(he)};let ie={};const Te=async(he,Pe)=>{for(;!Pe.aborted;)if(ie[he]&&ie[he].length>0){const Ae=ie[he].shift();if(mt.has(Ae))if(((s==null?void 0:s.showEmojiInCall)??!1)&&pt.has(Ae)?t(3,C=pt.get(Ae)):t(3,C=null),n.audio.tts.engine!=="")try{`${Ae}`;const Ke=mt.get(Ae);await ut(Ke),`${Ae}`,await new Promise(gt=>setTimeout(gt,200))}catch(Ke){}else await We(Ae);else ie[he].unshift(Ae),`${Ae}`,await new Promise(Ke=>setTimeout(Ke,200))}else if(ve[he]&&ie[he]&&ie[he].length===0){t(2,T=!1);break}else await new Promise(Ae=>setTimeout(Ae,200));`${he}`},$t=async he=>{const{id:Pe}=he.detail;O=!0,se!==Pe&&(`${Pe}`,se=Pe,K&&K.abort(),K=new AbortController,t(2,T=!0),Te(Pe,K.signal))},Bt=async he=>{const{id:Pe,content:Ae}=he.detail;if(se===Pe){`${Pe}${Ae}`;try{ie[Pe]===void 0?ie[Pe]=[Ae]:ie[Pe].push(Ae),ht(Ae)}catch(Ke){}}},yt=async he=>{const{id:Pe,content:Ae}=he.detail;ve[Pe]=!0,O=!1};vl(async()=>{const he=async()=>{try{w=await navigator.wakeLock.request("screen")}catch(Pe){}w&&w.addEventListener("release",()=>{})};return"wakeLock"in navigator&&(await he(),document.addEventListener("visibilitychange",async()=>{w!==null&&document.visibilityState==="visible"&&await he()})),t(0,S=l.find(Pe=>Pe.id===_)),Se(),h.addEventListener("chat:start",$t),h.addEventListener("chat",Bt),h.addEventListener("chat:finish",yt),async()=>{await et(),ne(),h.removeEventListener("chat:start",$t),h.removeEventListener("chat",Bt),h.removeEventListener("chat:finish",yt),K.abort(),await qe(),await et(),await ee(!1),await oe()}}),En(async()=>{await et(),await ee(!1),await oe(),await ne(),h.removeEventListener("chat:start",$t),h.removeEventListener("chat",Bt),h.removeEventListener("chat:finish",yt),K.abort(),await qe(),await et()});const Vt=()=>{T&&et()},St=()=>{T&&et()},fe=()=>{oe()},Ge=async he=>{he.detail,t(9,re=he.detail),await be(),await x()},at=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),De()},It=()=>{T&&et()},zt=async()=>{await ne(),await be(),Xt.set(!1),f("close")};return r.$$set=he=>{"eventTarget"in he&&t(21,h=he.eventTarget),"submitPrompt"in he&&t(22,m=he.submitPrompt),"stopResponse"in he&&t(23,g=he.stopResponse),"files"in he&&t(20,b=he.files),"chatId"in he&&t(24,p=he.chatId),"modelId"in he&&t(25,_=he.modelId)},[S,k,T,C,N,U,A,Z,Q,re,a,i,f,u,De,x,be,oe,ne,et,b,h,m,g,p,_,Vt,St,fe,Ge,at,It,zt]}class Fa extends st{constructor(e){super(),ot(this,e,bm,_m,nt,{eventTarget:21,submitPrompt:22,stopResponse:23,files:20,chatId:24,modelId:25},null,[-1,-1,-1])}}function vm(r){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(l){e=ke(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=ke(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(l,n){B(l,e,n),y(e,t)},p(l,[n]){n&2&&c(e,"stroke-width",l[1]),n&1&&c(e,"class",l[0])},i:me,o:me,d(l){l&&d(e)}}}function wm(r,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return r.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,n=s.strokeWidth)},[l,n]}class km extends st{constructor(e){super(),ot(this,e,wm,vm,nt,{className:0,strokeWidth:1})}}function jo(r){let e,t,l,n,s,o,a,i,f,u,h=r[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:r[2]+1,totalVersions:r[1].length})+"",m,g,b,p,_,w,S,k,I,T=(r[3]?r[5].t("Copied"):r[5].t("Copy"))+"",C,N,U,O,A,P,J,Z,X,Q;U=new tt({props:{content:r[5].t("Download"),$$slots:{default:[ym]},$$scope:{ctx:r}}});let re=r[1][r[2]].type==="iframe"&&Ro(r);return J=new hl({props:{className:"size-3.5 text-gray-900 dark:text-white"}}),{c(){e=D("div"),t=D("div"),l=D("div"),n=D("div"),s=D("button"),o=we("svg"),a=we("path"),f=W(),u=D("div"),m=$e(h),g=W(),b=D("button"),p=we("svg"),_=we("path"),S=W(),k=D("div"),I=D("button"),C=$e(T),N=W(),F(U.$$.fragment),O=W(),re&&re.c(),A=W(),P=D("button"),F(J.$$.fragment),this.h()},l(_e){e=M(_e,"DIV",{class:!0});var De=E(e);t=M(De,"DIV",{class:!0});var x=E(t);l=M(x,"DIV",{class:!0});var be=E(l);n=M(be,"DIV",{class:!0,dir:!0});var Me=E(n);s=M(Me,"BUTTON",{class:!0});var oe=E(s);o=ke(oe,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var Je=E(o);a=ke(Je,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(a).forEach(d),Je.forEach(d),oe.forEach(d),f=G(Me),u=M(Me,"DIV",{class:!0});var le=E(u);m=Ie(le,h),le.forEach(d),g=G(Me),b=M(Me,"BUTTON",{class:!0});var ee=E(b);p=ke(ee,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var Se=E(p);_=ke(Se,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(_).forEach(d),Se.forEach(d),ee.forEach(d),Me.forEach(d),be.forEach(d),S=G(x),k=M(x,"DIV",{class:!0});var ne=E(k);I=M(ne,"BUTTON",{class:!0});var q=E(I);C=Ie(q,T),q.forEach(d),N=G(ne),L(U.$$.fragment,ne),O=G(ne),re&&re.l(ne),ne.forEach(d),x.forEach(d),A=G(De),P=M(De,"BUTTON",{class:!0});var Re=E(P);L(J.$$.fragment,Re),Re.forEach(d),De.forEach(d),this.h()},h(){c(a,"stroke-linecap","round"),c(a,"stroke-linejoin","round"),c(a,"d","M15.75 19.5 8.25 12l7.5-7.5"),c(o,"xmlns","http://www.w3.org/2000/svg"),c(o,"fill","none"),c(o,"viewBox","0 0 24 24"),c(o,"stroke","currentColor"),c(o,"stroke-width","2.5"),c(o,"class","size-3.5"),c(s,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),s.disabled=i=r[1].length<=1,c(u,"class","text-xs self-center dark:text-gray-100 min-w-fit"),c(_,"stroke-linecap","round"),c(_,"stroke-linejoin","round"),c(_,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),c(p,"xmlns","http://www.w3.org/2000/svg"),c(p,"fill","none"),c(p,"viewBox","0 0 24 24"),c(p,"stroke","currentColor"),c(p,"stroke-width","2.5"),c(p,"class","size-3.5"),c(b,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),b.disabled=w=r[1].length<=1,c(n,"class","flex items-center gap-0.5 self-center min-w-fit"),c(n,"dir","ltr"),c(l,"class","flex items-center space-x-2"),c(I,"class","copy-code-button bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md px-1.5 py-0.5"),c(k,"class","flex items-center gap-1.5"),c(t,"class","flex-1 flex items-center justify-between pr-1"),c(P,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),c(e,"class","pointer-events-auto z-20 flex justify-between items-center p-2.5 font-primar text-gray-900 dark:text-white")},m(_e,De){B(_e,e,De),y(e,t),y(t,l),y(l,n),y(n,s),y(s,o),y(o,a),y(n,f),y(n,u),y(u,m),y(n,g),y(n,b),y(b,p),y(p,_),y(t,S),y(t,k),y(k,I),y(I,C),y(k,N),j(U,k,null),y(k,O),re&&re.m(k,null),y(e,A),y(e,P),j(J,P,null),Z=!0,X||(Q=[Ne(s,"click",r[14]),Ne(b,"click",r[15]),Ne(I,"click",r[16]),Ne(P,"click",r[17])],X=!0)},p(_e,De){(!Z||De&2&&i!==(i=_e[1].length<=1))&&(s.disabled=i),(!Z||De&38)&&h!==(h=_e[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:_e[2]+1,totalVersions:_e[1].length})+"")&&Ce(m,h),(!Z||De&2&&w!==(w=_e[1].length<=1))&&(b.disabled=w),(!Z||De&40)&&T!==(T=(_e[3]?_e[5].t("Copied"):_e[5].t("Copy"))+"")&&Ce(C,T);const x={};De&32&&(x.content=_e[5].t("Download")),De&4194304&&(x.$$scope={dirty:De,ctx:_e}),U.$set(x),_e[1][_e[2]].type==="iframe"?re?(re.p(_e,De),De&6&&v(re,1)):(re=Ro(_e),re.c(),v(re,1),re.m(k,null)):re&&(ce(),$(re,1,1,()=>{re=null}),ue())},i(_e){Z||(v(U.$$.fragment,_e),v(re),v(J.$$.fragment,_e),Z=!0)},o(_e){$(U.$$.fragment,_e),$(re),$(J.$$.fragment,_e),Z=!1},d(_e){_e&&d(e),R(U),re&&re.d(),R(J),X=!1,ul(Q)}}}function ym(r){let e,t,l,n,s;return t=new Sa({props:{className:"size-3.5"}}),{c(){e=D("button"),F(t.$$.fragment),this.h()},l(o){e=M(o,"BUTTON",{class:!0});var a=E(e);L(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md p-0.5")},m(o,a){B(o,e,a),j(t,e,null),l=!0,n||(s=Ne(e,"click",r[12]),n=!0)},p:me,i(o){l||(v(t.$$.fragment,o),l=!0)},o(o){$(t.$$.fragment,o),l=!1},d(o){o&&d(e),R(t),n=!1,s()}}}function Ro(r){let e,t;return e=new tt({props:{content:r[5].t("Open in full screen"),$$slots:{default:[Em]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&32&&(s.content=l[5].t("Open in full screen")),n&4194304&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Em(r){let e,t,l,n,s;return t=new km({props:{className:"size-3.5"}}),{c(){e=D("button"),F(t.$$.fragment),this.h()},l(o){e=M(o,"BUTTON",{class:!0});var a=E(e);L(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md p-0.5")},m(o,a){B(o,e,a),j(t,e,null),l=!0,n||(s=Ne(e,"click",r[11]),n=!0)},p:me,i(o){l||(v(t.$$.fragment,o),l=!0)},o(o){$(t.$$.fragment,o),l=!1},d(o){o&&d(e),R(t),n=!1,s()}}}function Ho(r){let e;return{c(){e=D("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","absolute top-0 left-0 right-0 bottom-0 z-10")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function $m(r){let e,t=r[5].t("No HTML, CSS, or JavaScript content found.")+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","m-auto font-medium text-xs text-gray-900 dark:text-white")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s&32&&t!==(t=n[5].t("No HTML, CSS, or JavaScript content found.")+"")&&Ce(l,t)},i:me,o:me,d(n){n&&d(e)}}}function Im(r){let e,t,l,n;const s=[Sm,Cm],o=[];function a(i,f){return i[1][i[2]].type==="iframe"?0:i[1][i[2]].type==="svg"?1:-1}return~(t=a(r))&&(l=o[t]=s[t](r)),{c(){e=D("div"),l&&l.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=E(e);l&&l.l(f),f.forEach(d),this.h()},h(){c(e,"class","max-w-full w-full h-full")},m(i,f){B(i,e,f),~t&&o[t].m(e,null),n=!0},p(i,f){let u=t;t=a(i),t===u?~t&&o[t].p(i,f):(l&&(ce(),$(o[u],1,1,()=>{o[u]=null}),ue()),~t?(l=o[t],l?l.p(i,f):(l=o[t]=s[t](i),l.c()),v(l,1),l.m(e,null)):l=null)},i(i){n||(v(l),n=!0)},o(i){$(l),n=!1},d(i){i&&d(e),~t&&o[t].d()}}}function Cm(r){let e,t;return e=new of({props:{className:" w-full h-full max-h-full overflow-hidden",svg:r[1][r[2]].content}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&6&&(s.svg=l[1][l[2]].content),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Sm(r){let e,t,l,n,s;return{c(){e=D("iframe"),this.h()},l(o){e=M(o,"IFRAME",{title:!0,srcdoc:!0,class:!0,sandbox:!0}),E(e).forEach(d),this.h()},h(){var o,a;c(e,"title","Content"),c(e,"srcdoc",t=r[1][r[2]].content),c(e,"class","w-full border-0 h-full rounded-none"),c(e,"sandbox",l="allow-scripts allow-downloads"+(((o=r[6])==null?void 0:o.iframeSandboxAllowForms)??!1?" allow-forms":"")+(((a=r[6])==null?void 0:a.iframeSandboxAllowSameOrigin)??!1?" allow-same-origin":""))},m(o,a){B(o,e,a),r[18](e),n||(s=Ne(e,"load",r[10]),n=!0)},p(o,a){var i,f;a&6&&t!==(t=o[1][o[2]].content)&&c(e,"srcdoc",t),a&64&&l!==(l="allow-scripts allow-downloads"+(((i=o[6])==null?void 0:i.iframeSandboxAllowForms)??!1?" allow-forms":"")+(((f=o[6])==null?void 0:f.iframeSandboxAllowSameOrigin)??!1?" allow-same-origin":""))&&c(e,"sandbox",l)},i:me,o:me,d(o){o&&d(e),r[18](null),n=!1,s()}}}function Tm(r){let e,t,l,n,s,o,a,i,f,u=r[1].length>0&&jo(r),h=r[0]&&Ho();const m=[Im,$m],g=[];function b(p,_){return p[1].length>0?0:1}return a=b(r),i=g[a]=m[a](r),{c(){e=D("div"),t=D("div"),u&&u.c(),l=W(),h&&h.c(),n=W(),s=D("div"),o=D("div"),i.c(),this.h()},l(p){e=M(p,"DIV",{class:!0,id:!0});var _=E(e);t=M(_,"DIV",{class:!0});var w=E(t);u&&u.l(w),l=G(w),h&&h.l(w),n=G(w),s=M(w,"DIV",{class:!0});var S=E(s);o=M(S,"DIV",{class:!0});var k=E(o);i.l(k),k.forEach(d),S.forEach(d),w.forEach(d),_.forEach(d),this.h()},h(){c(o,"class","h-full flex flex-col"),c(s,"class","flex-1 w-full h-full"),c(t,"class","w-full h-full flex flex-col flex-1 relative"),c(e,"class","w-full h-full relative flex flex-col bg-white dark:bg-gray-850"),c(e,"id","artifacts-container")},m(p,_){B(p,e,_),y(e,t),u&&u.m(t,null),y(t,l),h&&h.m(t,null),y(t,n),y(t,s),y(s,o),g[a].m(o,null),f=!0},p(p,[_]){p[1].length>0?u?(u.p(p,_),_&2&&v(u,1)):(u=jo(p),u.c(),v(u,1),u.m(t,l)):u&&(ce(),$(u,1,1,()=>{u=null}),ue()),p[0]?h||(h=Ho(),h.c(),h.m(t,n)):h&&(h.d(1),h=null);let w=a;a=b(p),a===w?g[a].p(p,_):(ce(),$(g[w],1,1,()=>{g[w]=null}),ue(),i=g[a],i?i.p(p,_):(i=g[a]=m[a](p),i.c()),v(i,1),i.m(o,null))},i(p){f||(v(u),v(i),f=!0)},o(p){$(u),$(i),f=!1},d(p){p&&d(e),u&&u.d(),h&&h.d(),g[a].d()}}}function Dm(r,e,t){let l,n,s;Ee(r,pl,O=>t(20,l=O)),Ee(r,Wt,O=>t(6,s=O));const o=Ot("i18n");Ee(r,o,O=>t(5,n=O));const a=yl();let{overlay:i=!1}=e,{history:f}=e,u=[],h=[],m=0,g=!1,b;const p=()=>{t(1,h=[]),u.forEach(O=>{if((O==null?void 0:O.role)!=="user"&&(O!=null&&O.content)){const A=O.content.match(/```[\s\S]*?```/g);let P=[],J="",Z="",X="";if(A)A.forEach(Q=>{const re=Q.split(`
`)[0].replace("```","").trim().toLowerCase(),_e=Q.replace(/```[\s\S]*?\n/,"").replace(/```$/,"");P.push({lang:re,code:_e})}),P.forEach(Q=>{const{lang:re,code:_e}=Q;re==="html"?J+=_e+`
`:re==="css"?Z+=_e+`
`:(re==="javascript"||re==="js")&&(X+=_e+`
`)});else{const Q=O.content.match(/<html>[\s\S]*?<\/html>/gi),re=O.content.match(/<style>[\s\S]*?<\/style>/gi),_e=O.content.match(/<script>[\s\S]*?<\/script>/gi);Q&&Q.forEach(De=>{const x=De.replace(/<\/?html>/gi,"");J+=x+`
`}),re&&re.forEach(De=>{const x=De.replace(/<\/?style>/gi,"");Z+=x+`
`}),_e&&_e.forEach(De=>{const x=De.replace(/<\/?script>/gi,"");X+=x+`
`})}if(J||Z||X){const Q=`
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								${Z}
							</style>
                        </head>
                        <body>
                            ${J}

							<script>
                            	${X}
							<\/script>
                        </body>
                        </html>
                    `;t(1,h=[...h,{type:"iframe",content:Q}])}else for(const Q of P)(Q.lang==="svg"||Q.lang==="xml"&&Q.code.includes("<svg"))&&t(1,h=[...h,{type:"svg",content:Q.code}])}}),h.length===0&&(Mt.set(!1),_l.set(!1)),t(2,m=h?h.length-1:0)};function _(O){t(2,m=O==="prev"?Math.max(m-1,0):Math.min(m+1,h.length-1))}const w=()=>{b.contentWindow.addEventListener("click",function(O){const A=O.target.closest("a");if(A&&A.href){O.preventDefault();const P=new URL(A.href,b.baseURI);P.origin===window.location.origin?b.contentWindow.history.pushState(null,"",P.pathname+P.search+P.hash):console.info("External navigation blocked:",P.href)}},!0),b.contentWindow.addEventListener("mouseenter",function(O){O.preventDefault(),b.contentWindow.addEventListener("dragstart",A=>{A.preventDefault()})})},S=()=>{b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.msRequestFullscreen&&b.msRequestFullscreen()},k=()=>{const O=new Blob([h[m].content],{type:"text/html"}),A=URL.createObjectURL(O),P=document.createElement("a");P.href=A,P.download=`artifact-${l}-${m}.html`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(A)};vl(()=>{si.subscribe(O=>{if(h){const A=h.findIndex(P=>P.content.includes(O));t(2,m=A!==-1?A:0)}})});const I=()=>_("prev"),T=()=>_("next"),C=()=>{Vr(h[m].content),t(3,g=!0),setTimeout(()=>{t(3,g=!1)},2e3)},N=()=>{a("close"),Mt.set(!1),_l.set(!1)};function U(O){Be[O?"unshift":"push"](()=>{b=O,t(4,b)})}return r.$$set=O=>{"overlay"in O&&t(0,i=O.overlay),"history"in O&&t(13,f=O.history)},r.$$.update=()=>{r.$$.dirty&8192&&(f?(u=jt(f,f.currentId),p()):(u=[],p()))},[i,h,m,g,b,n,s,o,a,_,w,S,k,f,I,T,C,N,U]}class La extends st{constructor(e){super(),ot(this,e,Dm,Tm,nt,{overlay:0,history:13})}}function Wo(r){var k,I;let e,t,l,n,s=(((k=r[1])==null?void 0:k.title)??"Embedded Content")+"",o,a,i,f,u,h,m,g,b,p,_,w;u=new hl({props:{className:"size-3.5 text-gray-900 dark:text-white"}});let S=r[0]&&Go();return b=new af({props:{src:(I=r[1])==null?void 0:I.url,iframeClassName:"w-full h-full"}}),{c(){e=D("div"),t=D("div"),l=D("div"),n=D("a"),o=$e(s),i=W(),f=D("button"),F(u.$$.fragment),h=W(),m=D("div"),S&&S.c(),g=W(),F(b.$$.fragment),this.h()},l(T){e=M(T,"DIV",{class:!0});var C=E(e);t=M(C,"DIV",{class:!0});var N=E(t);l=M(N,"DIV",{class:!0});var U=E(l);n=M(U,"A",{class:!0,href:!0,target:!0,rel:!0});var O=E(n);o=Ie(O,s),O.forEach(d),U.forEach(d),i=G(N),f=M(N,"BUTTON",{class:!0});var A=E(f);L(u.$$.fragment,A),A.forEach(d),N.forEach(d),h=G(C),m=M(C,"DIV",{class:!0});var P=E(m);S&&S.l(P),g=G(P),L(b.$$.fragment,P),P.forEach(d),C.forEach(d),this.h()},h(){var T;c(n,"class","flex items-center space-x-2 hover:underline"),c(n,"href",a=(T=r[1])==null?void 0:T.url),c(n,"target","_blank"),c(n,"rel","noopener noreferrer"),c(l,"class","flex-1 flex items-center justify-between pl-2"),c(f,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),c(t,"class","pointer-events-auto z-20 flex justify-between items-center py-3 px-2 font-primar text-gray-900 dark:text-white"),c(m,"class","w-full h-full relative"),c(e,"class","h-full w-full")},m(T,C){B(T,e,C),y(e,t),y(t,l),y(l,n),y(n,o),y(t,i),y(t,f),j(u,f,null),y(e,h),y(e,m),S&&S.m(m,null),y(m,g),j(b,m,null),p=!0,_||(w=Ne(f,"click",r[2]),_=!0)},p(T,C){var U,O,A;(!p||C&2)&&s!==(s=(((U=T[1])==null?void 0:U.title)??"Embedded Content")+"")&&Ce(o,s),(!p||C&2&&a!==(a=(O=T[1])==null?void 0:O.url))&&c(n,"href",a),T[0]?S||(S=Go(),S.c(),S.m(m,g)):S&&(S.d(1),S=null);const N={};C&2&&(N.src=(A=T[1])==null?void 0:A.url),b.$set(N)},i(T){p||(v(u.$$.fragment,T),v(b.$$.fragment,T),p=!0)},o(T){$(u.$$.fragment,T),$(b.$$.fragment,T),p=!1},d(T){T&&d(e),R(u),S&&S.d(),R(b),_=!1,w()}}}function Go(r){let e;return{c(){e=D("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","absolute top-0 left-0 right-0 bottom-0 z-10")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function Mm(r){let e,t,l=r[1]&&Wo(r);return{c(){l&&l.c(),e=Oe()},l(n){l&&l.l(n),e=Oe()},m(n,s){l&&l.m(n,s),B(n,e,s),t=!0},p(n,[s]){n[1]?l?(l.p(n,s),s&2&&v(l,1)):(l=Wo(n),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ce(),$(l,1,1,()=>{l=null}),ue())},i(n){t||(v(l),t=!0)},o(n){$(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function Vm(r,e,t){let l;Ee(r,jr,o=>t(1,l=o));let{overlay:n=!1}=e;const s=()=>{Mt.set(!1),Vl.set(!1),jr.set(null)};return r.$$set=o=>{"overlay"in o&&t(0,n=o.overlay)},[n,l,s]}class ja extends st{constructor(e){super(),ot(this,e,Vm,Mm,nt,{overlay:0})}}function Jo(r){r[45]=r[46].default}function qo(r){r[45]=r[46].default}function Nm(r){let e,t,l,n,s=r[17]&&Zo(r);function o(i){r[39](i)}let a={defaultSize:0,onResize:r[37],onCollapse:r[38],collapsible:!0,class:" z-10 bg-white dark:bg-gray-850",$$slots:{default:[Hm]},$$scope:{ctx:r}};return r[4]!==void 0&&(a.pane=r[4]),t=new ua({props:a}),Be.push(()=>Le(t,"pane",o)),{c(){s&&s.c(),e=W(),F(t.$$.fragment)},l(i){s&&s.l(i),e=G(i),L(t.$$.fragment,i)},m(i,f){s&&s.m(i,f),B(i,e,f),j(t,i,f),n=!0},p(i,f){i[17]?s?f[0]&131072&&v(s,1):(s=Zo(i),s.c(),v(s,1),s.m(e.parentNode,e)):s&&(ce(),$(s,1,1,()=>{s=null}),ue());const u={};f[0]&163856&&(u.onResize=i[37]),f[0]&2056175|f[1]&65536&&(u.$$scope={dirty:f,ctx:i}),!l&&f[0]&16&&(l=!0,u.pane=i[4],je(()=>l=!1)),t.$set(u)},i(i){n||(v(s),v(t.$$.fragment,i),n=!0)},o(i){$(s),$(t.$$.fragment,i),n=!1},d(i){i&&d(e),s&&s.d(i),R(t,i)}}}function Bm(r){let e,t,l=r[17]&&Ko(r);return{c(){l&&l.c(),e=Oe()},l(n){l&&l.l(n),e=Oe()},m(n,s){l&&l.m(n,s),B(n,e,s),t=!0},p(n,s){n[17]?l?(l.p(n,s),s[0]&131072&&v(l,1)):(l=Ko(n),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ce(),$(l,1,1,()=>{l=null}),ue())},i(n){t||(v(l),t=!0)},o(n){$(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function Zo(r){let e,t;return e=new Qa({props:{class:"relative flex items-center justify-center group border-l border-gray-50 dark:border-gray-850 hover:border-gray-200 dark:hover:border-gray-800  transition z-20",id:"controls-resizer",$$slots:{default:[Om]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Om(r){let e;return{c(){e=D("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),E(e).forEach(d),this.h()},h(){c(e,"class","absolute -left-1.5 -right-1.5 -top-0 -bottom-0 z-20 cursor-col-resize bg-transparent")},m(t,l){B(t,e,l)},p:me,d(t){t&&d(e)}}}function Yo(r){let e,t,l,n,s,o;const a=[Fm,Pm,Um,Am,zm],i=[];function f(u,h){return u[16]?0:u[20]?1:u[19]?2:u[18]?3:4}return l=f(r),n=i[l]=a[l](r),{c(){e=D("div"),t=D("div"),n.c(),this.h()},l(u){e=M(u,"DIV",{class:!0});var h=E(e);t=M(h,"DIV",{class:!0,id:!0});var m=E(t);n.l(m),m.forEach(d),h.forEach(d),this.h()},h(){c(t,"class",s="w-full "+((r[18]||r[19]||r[20])&&!r[16]?" ":"px-4 py-3 bg-white dark:shadow-lg dark:bg-gray-850 ")+" z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"),c(t,"id","controls-container"),c(e,"class","flex max-h-full min-h-full")},m(u,h){B(u,e,h),y(e,t),i[l].m(t,null),o=!0},p(u,h){let m=l;l=f(u),l===m?i[l].p(u,h):(ce(),$(i[m],1,1,()=>{i[m]=null}),ue(),n=i[l],n?n.p(u,h):(n=i[l]=a[l](u),n.c()),v(n,1),n.m(t,null)),(!o||h[0]&1900544&&s!==(s="w-full "+((u[18]||u[19]||u[20])&&!u[16]?" ":"px-4 py-3 bg-white dark:shadow-lg dark:bg-gray-850 ")+" z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"))&&c(t,"class",s)},i(u){o||(v(n),o=!0)},o(u){$(n),o=!1},d(u){u&&d(e),i[l].d()}}}function zm(r){let e,t,l,n;function s(i){r[34](i)}function o(i){r[35](i)}let a={models:r[5]};return r[1]!==void 0&&(a.chatFiles=r[1]),r[2]!==void 0&&(a.params=r[2]),e=new Pa({props:a}),Be.push(()=>Le(e,"chatFiles",s)),Be.push(()=>Le(e,"params",o)),e.$on("close",r[36]),e.$on("generateUserTurn",function(){ca(r[11])&&r[11].apply(this,arguments)}),{c(){F(e.$$.fragment)},l(i){L(e.$$.fragment,i)},m(i,f){j(e,i,f),n=!0},p(i,f){r=i;const u={};f[0]&32&&(u.models=r[5]),!t&&f[0]&2&&(t=!0,u.chatFiles=r[1],je(()=>t=!1)),!l&&f[0]&4&&(l=!0,u.params=r[2],je(()=>l=!1)),e.$set(u)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){$(e.$$.fragment,i),n=!1},d(i){R(e,i)}}}function Am(r){let e,t,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Rm,then:jm,catch:Lm,value:46,blocks:[,,,]};return Na(Xl(()=>import("./Cr-6eInT.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url),l),{c(){e=Oe(),l.block.c()},l(n){e=Oe(),l.block.l(n)},m(n,s){B(n,e,s),l.block.m(n,l.anchor=s),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(n,s){r=n,Ba(l,r,s)},i(n){t||(v(l.block),t=!0)},o(n){for(let s=0;s<3;s+=1){const o=l.blocks[s];$(o)}t=!1},d(n){n&&d(e),l.block.d(n),l.token=null,l=null}}}function Um(r){let e,t;return e=new La({props:{history:r[0],overlay:r[14]}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&1&&(s.history=l[0]),n[0]&16384&&(s.overlay=l[14]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Pm(r){let e,t;return e=new ja({props:{overlay:r[14]}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&16384&&(s.overlay=l[14]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Fm(r){let e,t,l,n;function s(a){r[30](a)}let o={submitPrompt:r[8],stopResponse:r[9],modelId:r[12],chatId:r[6],eventTarget:r[7]};return r[3]!==void 0&&(o.files=r[3]),t=new Fa({props:o}),Be.push(()=>Le(t,"files",s)),t.$on("close",r[31]),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=E(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","w-full h-full flex justify-center")},m(a,i){B(a,e,i),j(t,e,null),n=!0},p(a,i){const f={};i[0]&256&&(f.submitPrompt=a[8]),i[0]&512&&(f.stopResponse=a[9]),i[0]&4096&&(f.modelId=a[12]),i[0]&64&&(f.chatId=a[6]),i[0]&128&&(f.eventTarget=a[7]),!l&&i[0]&8&&(l=!0,f.files=a[3],je(()=>l=!1)),t.$set(f)},i(a){n||(v(t.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),n=!1},d(a){a&&d(e),R(t)}}}function Lm(r){return{c:me,l:me,m:me,p:me,i:me,o:me,d:me}}function jm(r){Jo(r);let e,t;return e=new r[45]({props:{history:r[0],onNodeClick:r[32],onClose:r[33]}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){Jo(l);const s={};n[0]&1&&(s.history=l[0]),n[0]&1025&&(s.onNodeClick=l[32]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Rm(r){return{c:me,l:me,m:me,p:me,i:me,o:me,d:me}}function Hm(r){let e,t,l=r[17]&&Yo(r);return{c(){l&&l.c(),e=Oe()},l(n){l&&l.l(n),e=Oe()},m(n,s){l&&l.m(n,s),B(n,e,s),t=!0},p(n,s){n[17]?l?(l.p(n,s),s[0]&131072&&v(l,1)):(l=Yo(n),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ce(),$(l,1,1,()=>{l=null}),ue())},i(n){t||(v(l),t=!0)},o(n){$(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function Ko(r){let e,t;return e=new lf({props:{show:r[17],onClose:r[29],$$slots:{default:[Qm]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&131072&&(s.show=l[17]),n[0]&1908719|n[1]&65536&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Wm(r){let e,t,l,n;function s(i){r[26](i)}function o(i){r[27](i)}let a={models:r[5]};return r[1]!==void 0&&(a.chatFiles=r[1]),r[2]!==void 0&&(a.params=r[2]),e=new Pa({props:a}),Be.push(()=>Le(e,"chatFiles",s)),Be.push(()=>Le(e,"params",o)),e.$on("close",r[28]),e.$on("generateUserTurn",function(){ca(r[11])&&r[11].apply(this,arguments)}),{c(){F(e.$$.fragment)},l(i){L(e.$$.fragment,i)},m(i,f){j(e,i,f),n=!0},p(i,f){r=i;const u={};f[0]&32&&(u.models=r[5]),!t&&f[0]&2&&(t=!0,u.chatFiles=r[1],je(()=>t=!1)),!l&&f[0]&4&&(l=!0,u.params=r[2],je(()=>l=!1)),e.$set(u)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){$(e.$$.fragment,i),n=!1},d(i){R(e,i)}}}function Gm(r){let e,t,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Xm,then:Km,catch:Ym,value:46,blocks:[,,,]};return Na(Xl(()=>import("./Cr-6eInT.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url),l),{c(){e=Oe(),l.block.c()},l(n){e=Oe(),l.block.l(n)},m(n,s){B(n,e,s),l.block.m(n,l.anchor=s),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(n,s){r=n,Ba(l,r,s)},i(n){t||(v(l.block),t=!0)},o(n){for(let s=0;s<3;s+=1){const o=l.blocks[s];$(o)}t=!1},d(n){n&&d(e),l.block.d(n),l.token=null,l=null}}}function Jm(r){let e,t;return e=new La({props:{history:r[0]}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&1&&(s.history=l[0]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function qm(r){let e,t;return e=new ja({}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Zm(r){let e,t,l,n;function s(a){r[22](a)}let o={submitPrompt:r[8],stopResponse:r[9],modelId:r[12],chatId:r[6],eventTarget:r[7]};return r[3]!==void 0&&(o.files=r[3]),t=new Fa({props:o}),Be.push(()=>Le(t,"files",s)),t.$on("close",r[23]),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=E(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","h-full max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center")},m(a,i){B(a,e,i),j(t,e,null),n=!0},p(a,i){const f={};i[0]&256&&(f.submitPrompt=a[8]),i[0]&512&&(f.stopResponse=a[9]),i[0]&4096&&(f.modelId=a[12]),i[0]&64&&(f.chatId=a[6]),i[0]&128&&(f.eventTarget=a[7]),!l&&i[0]&8&&(l=!0,f.files=a[3],je(()=>l=!1)),t.$set(f)},i(a){n||(v(t.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),n=!1},d(a){a&&d(e),R(t)}}}function Ym(r){return{c:me,l:me,m:me,p:me,i:me,o:me,d:me}}function Km(r){qo(r);let e,t;return e=new r[45]({props:{history:r[0],onNodeClick:r[24],onClose:r[25]}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){qo(l);const s={};n[0]&1&&(s.history=l[0]),n[0]&1024&&(s.onNodeClick=l[24]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Xm(r){return{c:me,l:me,m:me,p:me,i:me,o:me,d:me}}function Qm(r){let e,t,l,n,s;const o=[Zm,qm,Jm,Gm,Wm],a=[];function i(f,u){return f[16]?0:f[20]?1:f[19]?2:f[18]?3:4}return t=i(r),l=a[t]=o[t](r),{c(){e=D("div"),l.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=E(e);l.l(u),u.forEach(d),this.h()},h(){c(e,"class",n=(r[16]||r[18]||r[19]||r[20]?" h-screen  w-full":"px-4 py-3")+" h-full")},m(f,u){B(f,e,u),a[t].m(e,null),s=!0},p(f,u){let h=t;t=i(f),t===h?a[t].p(f,u):(ce(),$(a[h],1,1,()=>{a[h]=null}),ue(),l=a[t],l?l.p(f,u):(l=a[t]=o[t](f),l.c()),v(l,1),l.m(e,null)),(!s||u[0]&1900544&&n!==(n=(f[16]||f[18]||f[19]||f[20]?" h-screen  w-full":"px-4 py-3")+" h-full"))&&c(e,"class",n)},i(f){s||(v(l),s=!0)},o(f){$(l),s=!1},d(f){f&&d(e),a[t].d()}}}function xm(r){let e,t,l,n;const s=[Bm,Nm],o=[];function a(i,f){return i[13]?1:0}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function e1(r,e,t){let l,n,s,o,a;Ee(r,Xt,H=>t(16,l=H)),Ee(r,Mt,H=>t(17,n=H)),Ee(r,Ml,H=>t(18,s=H)),Ee(r,_l,H=>t(19,o=H)),Ee(r,Vl,H=>t(20,a=H));let{history:i}=e,{models:f=[]}=e,{chatId:u=null}=e,{chatFiles:h=[]}=e,{params:m={}}=e,{eventTarget:g}=e,{submitPrompt:b}=e,{stopResponse:p}=e,{showMessage:_}=e,{generateUserTurn:w}=e,{files:S}=e,{modelId:k}=e,{pane:I}=e,T,C=!1,N=!1,U=0;const O=()=>{if(parseInt(localStorage==null?void 0:localStorage.chatControlsSize)){const H=document.getElementById("chat-container");let We=Math.floor(parseInt(localStorage==null?void 0:localStorage.chatControlsSize)/H.clientWidth*100);I.resize(We)}else I.resize(U)},A=async H=>{H.matches?(t(13,C=!0),l&&(Xt.set(!1),await qe(),Xt.set(!0))):(t(13,C=!1),l&&(Xt.set(!1),await qe(),Xt.set(!0)),t(4,I=null))},P=H=>{t(14,N=!0)},J=H=>{t(14,N=!1)};vl(()=>{T=window.matchMedia("(min-width: 1024px)"),T.addEventListener("change",A),A(T);const H=document.getElementById("chat-container");t(15,U=Math.floor(350/H.clientWidth*100)),new ResizeObserver(ut=>{for(let et of ut){const mt=350/et.contentRect.width*100;t(15,U=Math.floor(mt)),n&&(I&&I.isExpanded()&&I.getSize()<U||Math.floor(parseInt(localStorage==null?void 0:localStorage.chatControlsSize)/H.clientWidth*100)<U)&&I.resize(U)}}).observe(H),document.addEventListener("mousedown",P),document.addEventListener("mouseup",J)}),En(()=>{Mt.set(!1),T.removeEventListener("change",A),document.removeEventListener("mousedown",P),document.removeEventListener("mouseup",J)});const Z=()=>{Mt.set(!1),Ml.set(!1),_l.set(!1),Vl.set(!1),l&&Xt.set(!1)};function X(H){S=H,t(3,S)}const Q=()=>{Mt.set(!1)},re=H=>{const We=H.node;_(We.data.message,!0)},_e=()=>{Mt.set(!1)};function De(H){h=H,t(1,h)}function x(H){m=H,t(2,m)}const be=()=>{Mt.set(!1)},Me=()=>{Mt.set(!1)};function oe(H){S=H,t(3,S)}const Je=()=>{Mt.set(!1)},le=H=>{var ut,et;const We=H.node;(et=(ut=We==null?void 0:We.data)==null?void 0:ut.message)!=null&&et.favorite?t(0,i.messages[We.data.message.id].favorite=!0,i):t(0,i.messages[We.data.message.id].favorite=null,i),_(We.data.message,!0)},ee=()=>{Mt.set(!1)};function Se(H){h=H,t(1,h)}function ne(H){m=H,t(2,m)}const q=()=>{Mt.set(!1)},Re=H=>{if(n&&I.isExpanded())if(H<U&&I.resize(U),H<U)localStorage.chatControlsSize=0;else{const We=document.getElementById("chat-container");localStorage.chatControlsSize=Math.floor(H/100*We.clientWidth)}},ve=()=>{Mt.set(!1)};function se(H){I=H,t(4,I)}return r.$$set=H=>{"history"in H&&t(0,i=H.history),"models"in H&&t(5,f=H.models),"chatId"in H&&t(6,u=H.chatId),"chatFiles"in H&&t(1,h=H.chatFiles),"params"in H&&t(2,m=H.params),"eventTarget"in H&&t(7,g=H.eventTarget),"submitPrompt"in H&&t(8,b=H.submitPrompt),"stopResponse"in H&&t(9,p=H.stopResponse),"showMessage"in H&&t(10,_=H.showMessage),"generateUserTurn"in H&&t(11,w=H.generateUserTurn),"files"in H&&t(3,S=H.files),"modelId"in H&&t(12,k=H.modelId),"pane"in H&&t(4,I=H.pane)},r.$$.update=()=>{r.$$.dirty[0]&64&&(u||Z())},[i,h,m,S,I,f,u,g,b,p,_,w,k,C,N,U,l,n,s,o,a,O,X,Q,re,_e,De,x,be,Me,oe,Je,le,ee,Se,ne,q,Re,ve,se]}class t1 extends st{constructor(e){super(),ot(this,e,e1,xm,nt,{history:0,models:5,chatId:6,chatFiles:1,params:2,eventTarget:7,submitPrompt:8,stopResponse:9,showMessage:10,generateUserTurn:11,files:3,modelId:12,pane:4,openPane:21},null,[-1,-1])}get openPane(){return this.$$.ctx[21]}}function Xo(r,e,t){const l=r.slice();return l[11]=e[t],l[13]=t,l}function Qo(r){let e,t,l,n=[],s=new Map,o,a=r[0].length>0&&xo(r),i=r[0].length===0&&ea(r),f=ft(r[0]);const u=h=>h[11].id;for(let h=0;h<f.length;h+=1){let m=Xo(r,f,h),g=u(m);s.set(g,n[h]=la(g,m))}return{c(){a&&a.c(),e=W(),t=D("div"),i&&i.c(),l=W();for(let h=0;h<n.length;h+=1)n[h].c();this.h()},l(h){a&&a.l(h),e=G(h),t=M(h,"DIV",{class:!0});var m=E(t);i&&i.l(m),l=G(m);for(let g=0;g<n.length;g+=1)n[g].l(m);m.forEach(d),this.h()},h(){c(t,"class","text-left text-sm w-full mb-3")},m(h,m){a&&a.m(h,m),B(h,e,m),B(h,t,m),i&&i.m(t,null),y(t,l);for(let g=0;g<n.length;g+=1)n[g]&&n[g].m(t,null);o=!0},p(h,m){h[0].length>0?a?(a.p(h,m),m&1&&v(a,1)):(a=xo(h),a.c(),v(a,1),a.m(e.parentNode,e)):a&&(ce(),$(a,1,1,()=>{a=null}),ue()),h[0].length===0?i?i.p(h,m):(i=ea(h),i.c(),i.m(t,l)):i&&(i.d(1),i=null),m&9&&(f=ft(h[0]),n=Br(n,m,u,1,h,f,s,t,Xi,la,null,Xo))},i(h){o||(v(a),o=!0)},o(h){$(a),o=!1},d(h){h&&(d(e),d(t)),a&&a.d(h),i&&i.d();for(let m=0;m<n.length;m+=1)n[m].d()}}}function xo(r){let e,t,l,n=r[3].t("Title")+"",s,o,a,i,f,u,h,m=r[3].t("Updated at")+"",g,b,p,_,w,S,k;const I=[n1,l1],T=[];function C(A,P){return A[1]==="title"?0:1}a=C(r),i=T[a]=I[a](r);const N=[a1,o1],U=[];function O(A,P){return A[1]==="updated_at"?0:1}return p=O(r),_=U[p]=N[p](r),{c(){e=D("div"),t=D("button"),l=D("div"),s=$e(n),o=W(),i.c(),f=W(),u=D("button"),h=D("div"),g=$e(m),b=W(),_.c(),this.h()},l(A){e=M(A,"DIV",{class:!0});var P=E(e);t=M(P,"BUTTON",{class:!0});var J=E(t);l=M(J,"DIV",{class:!0});var Z=E(l);s=Ie(Z,n),o=G(Z),i.l(Z),Z.forEach(d),J.forEach(d),f=G(P),u=M(P,"BUTTON",{class:!0});var X=E(u);h=M(X,"DIV",{class:!0});var Q=E(h);g=Ie(Q,m),b=G(Q),_.l(Q),Q.forEach(d),X.forEach(d),P.forEach(d),this.h()},h(){c(l,"class","flex gap-1.5 items-center"),c(t,"class","px-1.5 py-1 cursor-pointer select-none basis-3/5"),c(h,"class","flex gap-1.5 items-center"),c(u,"class","px-1.5 py-1 cursor-pointer select-none hidden sm:flex sm:basis-2/5 justify-end"),c(e,"class","flex text-xs font-medium mb-1 items-center -mr-0.5")},m(A,P){B(A,e,P),y(e,t),y(t,l),y(l,s),y(l,o),T[a].m(l,null),y(e,f),y(e,u),y(u,h),y(h,g),y(h,b),U[p].m(h,null),w=!0,S||(k=[Ne(t,"click",r[7]),Ne(u,"click",r[8])],S=!0)},p(A,P){(!w||P&8)&&n!==(n=A[3].t("Title")+"")&&Ce(s,n);let J=a;a=C(A),a===J?T[a].p(A,P):(ce(),$(T[J],1,1,()=>{T[J]=null}),ue(),i=T[a],i?i.p(A,P):(i=T[a]=I[a](A),i.c()),v(i,1),i.m(l,null)),(!w||P&8)&&m!==(m=A[3].t("Updated at")+"")&&Ce(g,m);let Z=p;p=O(A),p===Z?U[p].p(A,P):(ce(),$(U[Z],1,1,()=>{U[Z]=null}),ue(),_=U[p],_?_.p(A,P):(_=U[p]=N[p](A),_.c()),v(_,1),_.m(h,null))},i(A){w||(v(i),v(_),w=!0)},o(A){$(i),$(_),w=!1},d(A){A&&d(e),T[a].d(),U[p].d(),S=!1,ul(k)}}}function l1(r){let e,t,l;return t=new Dn({props:{className:"size-2"}}),{c(){e=D("span"),F(t.$$.fragment),this.h()},l(n){e=M(n,"SPAN",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","invisible")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function n1(r){let e,t,l,n;const s=[s1,r1],o=[];function a(i,f){return i[2]==="asc"?0:1}return t=a(r),l=o[t]=s[t](r),{c(){e=D("span"),l.c(),this.h()},l(i){e=M(i,"SPAN",{class:!0});var f=E(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","font-normal")},m(i,f){B(i,e,f),o[t].m(e,null),n=!0},p(i,f){let u=t;t=a(i),t!==u&&(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),l=o[t],l||(l=o[t]=s[t](i),l.c()),v(l,1),l.m(e,null))},i(i){n||(v(l),n=!0)},o(i){$(l),n=!1},d(i){i&&d(e),o[t].d()}}}function r1(r){let e,t;return e=new Va({props:{className:"size-2"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function s1(r){let e,t;return e=new Dn({props:{className:"size-2"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function o1(r){let e,t,l;return t=new Dn({props:{className:"size-2"}}),{c(){e=D("span"),F(t.$$.fragment),this.h()},l(n){e=M(n,"SPAN",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","invisible")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function a1(r){let e,t,l,n;const s=[f1,i1],o=[];function a(i,f){return i[2]==="asc"?0:1}return t=a(r),l=o[t]=s[t](r),{c(){e=D("span"),l.c(),this.h()},l(i){e=M(i,"SPAN",{class:!0});var f=E(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","font-normal")},m(i,f){B(i,e,f),o[t].m(e,null),n=!0},p(i,f){let u=t;t=a(i),t!==u&&(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),l=o[t],l||(l=o[t]=s[t](i),l.c()),v(l,1),l.m(e,null))},i(i){n||(v(l),n=!0)},o(i){$(l),n=!1},d(i){i&&d(e),o[t].d()}}}function i1(r){let e,t;return e=new Va({props:{className:"size-2"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function f1(r){let e,t;return e=new Dn({props:{className:"size-2"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function ea(r){let e,t=r[3].t("No chats found")+"",l;return{c(){e=D("div"),l=$e(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);l=Ie(s,t),s.forEach(d),this.h()},h(){c(e,"class","text-xs text-gray-500 dark:text-gray-400 text-center px-5 min-h-20 w-full h-full flex justify-center items-center")},m(n,s){B(n,e,s),y(e,l)},p(n,s){s&8&&t!==(t=n[3].t("No chats found")+"")&&Ce(l,t)},d(n){n&&d(e)}}}function ta(r){let e,t=r[3].t(r[11].time_range)+"",l,n;return{c(){e=D("div"),l=$e(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);l=Ie(o,t),o.forEach(d),this.h()},h(){c(e,"class",n="w-full text-xs text-gray-500 dark:text-gray-500 font-medium "+(r[13]===0?"":"pt-5")+" pb-2 px-2")},m(s,o){B(s,e,o),y(e,l)},p(s,o){o&9&&t!==(t=s[3].t(s[11].time_range)+"")&&Ce(l,t),o&1&&n!==(n="w-full text-xs text-gray-500 dark:text-gray-500 font-medium "+(s[13]===0?"":"pt-5")+" pb-2 px-2")&&c(e,"class",n)},d(s){s&&d(e)}}}function la(r,e){var S,k,I;let t,l,n,s,o=((S=e[11])==null?void 0:S.title)+"",a,i,f,u,h=Ql(((k=e[11])==null?void 0:k.updated_at)*1e3).calendar()+"",m,g,b,p,_,w=(e[13]===0||e[13]>0&&e[11].time_range!==e[0][e[13]-1].time_range)&&((I=e[11])==null?void 0:I.time_range)&&ta(e);return{key:r,first:null,c(){t=Oe(),w&&w.c(),l=W(),n=D("a"),s=D("div"),a=$e(o),i=W(),f=D("div"),u=D("div"),m=$e(h),g=W(),this.h()},l(T){t=Oe(),w&&w.l(T),l=G(T),n=M(T,"A",{class:!0,draggable:!0,href:!0});var C=E(n);s=M(C,"DIV",{class:!0});var N=E(s);a=Ie(N,o),N.forEach(d),i=G(C),f=M(C,"DIV",{class:!0});var U=E(f);u=M(U,"DIV",{class:!0});var O=E(u);m=Ie(O,h),O.forEach(d),U.forEach(d),g=G(C),C.forEach(d),this.h()},h(){c(s,"class","text-ellipsis line-clamp-1 w-full sm:basis-3/5"),c(u,"class","text-gray-500 dark:text-gray-400 text-xs"),c(f,"class","hidden sm:flex sm:basis-2/5 items-center justify-end"),c(n,"class","w-full flex justify-between items-center rounded-lg text-sm py-2 px-3 hover:bg-gray-50 dark:hover:bg-gray-850"),c(n,"draggable","false"),c(n,"href",b=`/c/${e[11].id}`),this.first=t},m(T,C){B(T,t,C),w&&w.m(T,C),B(T,l,C),B(T,n,C),y(n,s),y(s,a),y(n,i),y(n,f),y(f,u),y(u,m),y(n,g),p||(_=Ne(n,"click",e[9]),p=!0)},p(T,C){var N,U,O;e=T,(e[13]===0||e[13]>0&&e[11].time_range!==e[0][e[13]-1].time_range)&&((N=e[11])!=null&&N.time_range)?w?w.p(e,C):(w=ta(e),w.c(),w.m(l.parentNode,l)):w&&(w.d(1),w=null),C&1&&o!==(o=((U=e[11])==null?void 0:U.title)+"")&&Ce(a,o),C&1&&h!==(h=Ql(((O=e[11])==null?void 0:O.updated_at)*1e3).calendar()+"")&&Ce(m,h),C&1&&b!==(b=`/c/${e[11].id}`)&&c(n,"href",b)},d(T){T&&(d(t),d(l),d(n)),w&&w.d(T),p=!1,_()}}}function c1(r){let e,t,l=r[0]&&Qo(r);return{c(){l&&l.c(),e=Oe()},l(n){l&&l.l(n),e=Oe()},m(n,s){l&&l.m(n,s),B(n,e,s),t=!0},p(n,[s]){n[0]?l?(l.p(n,s),s&1&&v(l,1)):(l=Qo(n),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ce(),$(l,1,1,()=>{l=null}),ue())},i(n){t||(v(l),t=!0)},o(n){$(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function u1(r,e,t){let l;const n=Ot("i18n");Ee(r,n,b=>t(3,l=b)),Ql.extend($i);let{chats:s=[]}=e,o=null;const a=async()=>{s.length===0?t(0,o=[]):(t(0,o=s.map(b=>({...b,time_range:Ii(b.updated_at)}))),o.sort((b,p)=>u==="asc"?b[f]>p[f]?1:-1:b[f]<p[f]?1:-1))},i=b=>{f===b?t(2,u=u==="asc"?"desc":"asc"):(t(1,f=b),t(2,u="asc")),a()};let f="updated_at",u="desc";const h=()=>i("title"),m=()=>i("updated_at"),g=()=>show=!1;return r.$$set=b=>{"chats"in b&&t(6,s=b.chats)},r.$$.update=()=>{r.$$.dirty&64&&s&&a()},[o,f,u,l,n,i,s,h,m,g]}class d1 extends st{constructor(e){super(),ot(this,e,u1,c1,nt,{chats:6})}}class h1 extends st{constructor(e){super(),ot(this,e,null,null,nt,{})}}function m1(r){let e,t,l,n;const s=[_1,g1],o=[];function a(i,f){return i[0]!==null?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),l=Oe()},l(i){t.l(i),l=Oe()},m(i,f){o[e].m(i,f),B(i,l,f),n=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),t=o[e],t?t.p(i,f):(t=o[e]=s[e](i),t.c()),v(t,1),t.m(l.parentNode,l))},i(i){n||(v(t),n=!0)},o(i){$(t),n=!1},d(i){i&&d(l),o[e].d(i)}}}function p1(r){let e,t;return e=new h1({}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function g1(r){let e,t,l;return t=new dl({}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){c(e,"class","py-10")},m(n,s){B(n,e,s),j(t,e,null),l=!0},p:me,i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&d(e),R(t)}}}function _1(r){let e,t;return e=new d1({props:{chats:r[0]}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&1&&(s.chats=l[0]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function b1(r){let e,t,l,n,s;const o=[p1,m1],a=[];function i(f,u){return 1}return~(l=i())&&(n=a[l]=o[l](r)),{c(){e=D("div"),t=D("div"),n&&n.c(),this.h()},l(f){e=M(f,"DIV",{});var u=E(e);t=M(u,"DIV",{class:!0});var h=E(t);n&&n.l(h),h.forEach(d),u.forEach(d),this.h()},h(){c(t,"class","")},m(f,u){B(f,e,u),y(e,t),~l&&a[l].m(t,null),s=!0},p(f,[u]){n&&n.p(f,u)},i(f){s||(v(n),s=!0)},o(f){$(n),s=!1},d(f){f&&d(e),~l&&a[l].d()}}}let v1=1;function w1(r,e,t){Ot("i18n");let{folder:l=null}=e,n=null;const s=async()=>{if(t(0,n=null),l&&l.id){const o=await Vi(localStorage.token,l.id,v1);o?t(0,n=o):t(0,n=[])}else t(0,n=[])};return r.$$set=o=>{"folder"in o&&t(1,l=o.folder)},r.$$.update=()=>{r.$$.dirty&2&&l&&s()},[n,l]}class k1 extends st{constructor(e){super(),ot(this,e,w1,b1,nt,{folder:1})}}function na(r){let e,t,l,n,s,o,a,i,f,u,h,m=r[0].name+"",g,b,p,_,w;function S(C){r[11](C)}let k={edit:!0,folderId:r[0].id,onSubmit:r[5]};r[1]!==void 0&&(k.show=r[1]),e=new pf({props:k}),Be.push(()=>Le(e,"show",S));function I(C){r[12](C)}let T={title:r[3].t("Delete folder?"),$$slots:{default:[y1]},$$scope:{ctx:r}};return r[2]!==void 0&&(T.show=r[2]),n=new Ma({props:T}),Be.push(()=>Le(n,"show",I)),n.$on("confirm",r[13]),f=new Bf({props:{onClose:T1,onSubmit:r[14],$$slots:{default:[I1]},$$scope:{ctx:r}}}),_=new gf({props:{align:"end",onEdit:r[15],onDelete:r[16],onExport:r[17],$$slots:{default:[C1]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment),l=W(),F(n.$$.fragment),o=W(),a=D("div"),i=D("div"),F(f.$$.fragment),u=W(),h=D("div"),g=$e(m),b=W(),p=D("div"),F(_.$$.fragment),this.h()},l(C){L(e.$$.fragment,C),l=G(C),L(n.$$.fragment,C),o=G(C),a=M(C,"DIV",{class:!0});var N=E(a);i=M(N,"DIV",{class:!0});var U=E(i);L(f.$$.fragment,U),u=G(U),h=M(U,"DIV",{class:!0});var O=E(h);g=Ie(O,m),O.forEach(d),U.forEach(d),b=G(N),p=M(N,"DIV",{class:!0});var A=E(p);L(_.$$.fragment,A),A.forEach(d),N.forEach(d),this.h()},h(){c(h,"class","text-3xl"),c(i,"class","text-center flex gap-3.5 items-center"),c(p,"class","flex items-center translate-x-2.5"),c(a,"class","mb-3 px-6 @md:max-w-3xl justify-between w-full flex relative group items-center")},m(C,N){j(e,C,N),B(C,l,N),j(n,C,N),B(C,o,N),B(C,a,N),y(a,i),j(f,i,null),y(i,u),y(i,h),y(h,g),y(a,b),y(a,p),j(_,p,null),w=!0},p(C,N){const U={};N&1&&(U.folderId=C[0].id),!t&&N&2&&(t=!0,U.show=C[1],je(()=>t=!1)),e.$set(U);const O={};N&8&&(O.title=C[3].t("Delete folder?")),N&524297&&(O.$$scope={dirty:N,ctx:C}),!s&&N&4&&(s=!0,O.show=C[2],je(()=>s=!1)),n.$set(O);const A={};N&524289&&(A.$$scope={dirty:N,ctx:C}),f.$set(A),(!w||N&1)&&m!==(m=C[0].name+"")&&Ce(g,m);const P={};N&2&&(P.onEdit=C[15]),N&4&&(P.onDelete=C[16]),N&524288&&(P.$$scope={dirty:N,ctx:C}),_.$set(P)},i(C){w||(v(e.$$.fragment,C),v(n.$$.fragment,C),v(f.$$.fragment,C),v(_.$$.fragment,C),w=!0)},o(C){$(e.$$.fragment,C),$(n.$$.fragment,C),$(f.$$.fragment,C),$(_.$$.fragment,C),w=!1},d(C){C&&(d(l),d(o),d(a)),R(e,C),R(n,C),R(f),R(_)}}}function y1(r){let e,t,l=bn.sanitize(r[3].t("This will delete <strong>{{NAME}}</strong> and <strong>all its contents</strong>.",{NAME:r[0].name}))+"";return{c(){e=D("div"),t=new Dr(!1),this.h()},l(n){e=M(n,"DIV",{class:!0});var s=E(e);t=Mr(s,!1),s.forEach(d),this.h()},h(){t.a=null,c(e,"class","text-sm text-gray-700 dark:text-gray-300 flex-1 line-clamp-3")},m(n,s){B(n,e,s),t.m(l,e)},p(n,s){s&9&&l!==(l=bn.sanitize(n[3].t("This will delete <strong>{{NAME}}</strong> and <strong>all its contents</strong>.",{NAME:n[0].name}))+"")&&t.p(l)},d(n){n&&d(e)}}}function E1(r){let e,t;return e=new Nr({props:{className:"size-4.5",strokeWidth:"2"}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:me,i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function $1(r){let e,t;return e=new Nf({props:{className:"size-6",shortCode:r[0].meta.icon}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&1&&(s.shortCode=l[0].meta.icon),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function I1(r){let e,t,l,n;const s=[$1,E1],o=[];function a(i,f){var u,h;return(h=(u=i[0])==null?void 0:u.meta)!=null&&h.icon?0:1}return t=a(r),l=o[t]=s[t](r),{c(){e=D("button"),l.c(),this.h()},l(i){e=M(i,"BUTTON",{class:!0});var f=E(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","rounded-full bg-gray-50 dark:bg-gray-800 size-11 flex justify-center items-center")},m(i,f){B(i,e,f),o[t].m(e,null),n=!0},p(i,f){let u=t;t=a(i),t===u?o[t].p(i,f):(ce(),$(o[u],1,1,()=>{o[u]=null}),ue(),l=o[t],l?l.p(i,f):(l=o[t]=s[t](i),l.c()),v(l,1),l.m(e,null))},i(i){n||(v(l),n=!0)},o(i){$(l),n=!1},d(i){i&&d(e),o[t].d()}}}function C1(r){let e,t,l,n,s;return t=new Ta({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=D("button"),F(t.$$.fragment),this.h()},l(o){e=M(o,"BUTTON",{class:!0});var a=E(e);L(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","p-1.5 dark:hover:bg-gray-850 rounded-full touch-auto")},m(o,a){B(o,e,a),j(t,e,null),l=!0,n||(s=Ne(e,"click",D1),n=!0)},p:me,i(o){l||(v(t.$$.fragment,o),l=!0)},o(o){$(t.$$.fragment,o),l=!1},d(o){o&&d(e),R(t),n=!1,s()}}}function S1(r){let e,t,l=r[0]&&na(r);return{c(){l&&l.c(),e=Oe()},l(n){l&&l.l(n),e=Oe()},m(n,s){l&&l.m(n,s),B(n,e,s),t=!0},p(n,[s]){n[0]?l?(l.p(n,s),s&1&&v(l,1)):(l=na(n),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ce(),$(l,1,1,()=>{l=null}),ue())},i(n){t||(v(l),t=!0)},o(n){$(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}const T1=()=>{},D1=r=>{};function M1(r,e,t){let l;const n=Ot("i18n");Ee(r,n,C=>t(3,l=C));const{saveAs:s}=Ca;let{folder:o=null}=e,{onUpdate:a=C=>{}}=e,{onDelete:i=C=>{}}=e,f=!1,u=!1;const h=async({name:C,meta:N,data:U})=>{if(C===""){Ue.error(l.t("Folder name cannot be empty."));return}const O=o.name;if(C=C.trim(),t(0,o.name=C,o),await Sr(localStorage.token,o.id,{name:C,...N?{meta:N}:{},...U?{data:U}:{}}).catch(P=>(Ue.error(`${P}`),t(0,o.name=O,o),null))){t(0,o.name=C,o),U&&t(0,o.data=U,o),Ue.success(l.t("Folder updated successfully"));const P=await Gr(localStorage.token,o.id).catch(J=>(Ue.error(`${J}`),null));await Nl.set(P),a(P)}},m=async C=>{if(await Sr(localStorage.token,o.id,{meta:{icon:C}}).catch(U=>(Ue.error(`${U}`),null))){t(0,o.meta={...o.meta,icon:C},o),Ue.success(l.t("Folder updated successfully"));const U=await Gr(localStorage.token,o.id).catch(O=>(Ue.error(`${O}`),null));await Nl.set(U),a(U)}},g=async()=>{await _f(localStorage.token,o.id).catch(N=>(Ue.error(`${N}`),null))&&(Ue.success(l.t("Folder deleted successfully")),i(o))},b=async()=>{const C=await Ni(localStorage.token,o.id).catch(U=>(Ue.error(`${U}`),null));if(!C)return;const N=new Blob([JSON.stringify(C)],{type:"application/json"});s(N,`folder-${o.name}-export-${Date.now()}.json`)};function p(C){f=C,t(1,f)}function _(C){u=C,t(2,u)}const w=()=>{g()},S=C=>{m(C)},k=()=>{t(1,f=!0)},I=()=>{t(2,u=!0)},T=()=>{b()};return r.$$set=C=>{"folder"in C&&t(0,o=C.folder),"onUpdate"in C&&t(9,a=C.onUpdate),"onDelete"in C&&t(10,i=C.onDelete)},[o,f,u,l,n,h,m,g,b,a,i,p,_,w,S,k,I,T]}class V1 extends st{constructor(e){super(),ot(this,e,M1,S1,nt,{folder:0,onUpdate:9,onDelete:10})}}function ra(r,e,t){const l=r.slice();return l[45]=e[t],l[47]=t,l}function sa(r){let e,t;return e=new tt({props:{content:r[21].t("This chat won't appear in history and your messages will not be saved."),className:"w-full flex justify-center mb-0.5",placement:"top",$$slots:{default:[N1]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&2097152&&(s.content=l[21].t("This chat won't appear in history and your messages will not be saved.")),n[0]&2097152|n[1]&131072&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function N1(r){let e,t,l=r[21].t("Temporary Chat")+"",n,s;return t=new Vf({props:{strokeWidth:"2.5",className:"size-4"}}),{c(){e=D("div"),F(t.$$.fragment),n=$e(l),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);L(t.$$.fragment,a),n=Ie(a,l),a.forEach(d),this.h()},h(){c(e,"class","flex items-center gap-2 text-gray-500 text-base my-2 w-fit")},m(o,a){B(o,e,a),j(t,e,null),y(e,n),s=!0},p(o,a){(!s||a[0]&2097152)&&l!==(l=o[21].t("Temporary Chat")+"")&&Ce(n,l)},i(o){s||(v(t.$$.fragment,o),s=!0)},o(o){$(t.$$.fragment,o),s=!1},d(o){o&&d(e),R(t)}}}function B1(r){var C,N,U;let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p=ft(r[18]),_=[];for(let O=0;O<p.length;O+=1)_[O]=oa(ra(r,p,O));const w=O=>$(_[O],1,1,()=>{_[O]=null}),S=[U1,A1],k=[];function I(O,A){var P;return(P=O[18][O[19]])!=null&&P.name?0:1}a=I(r),i=k[a]=S[a](r);let T=(((U=(N=(C=r[18][r[19]])==null?void 0:C.info)==null?void 0:N.meta)==null?void 0:U.description)??null)&&aa(r);return{c(){e=D("div"),t=D("div"),l=D("div");for(let O=0;O<_.length;O+=1)_[O].c();s=W(),o=D("div"),i.c(),u=W(),h=D("div"),m=D("div"),T&&T.c(),this.h()},l(O){e=M(O,"DIV",{class:!0});var A=E(e);t=M(A,"DIV",{class:!0});var P=E(t);l=M(P,"DIV",{class:!0});var J=E(l);for(let re=0;re<_.length;re+=1)_[re].l(J);J.forEach(d),P.forEach(d),s=G(A),o=M(A,"DIV",{class:!0});var Z=E(o);i.l(Z),Z.forEach(d),A.forEach(d),u=G(O),h=M(O,"DIV",{class:!0});var X=E(h);m=M(X,"DIV",{});var Q=E(m);T&&T.l(Q),Q.forEach(d),X.forEach(d),this.h()},h(){c(l,"class","flex -space-x-4 mb-0.5"),c(t,"class","flex shrink-0 justify-center"),c(o,"class","text-3xl @sm:text-3xl line-clamp-1 flex items-center"),c(e,"class","flex flex-row justify-center gap-3 @sm:gap-3.5 w-fit px-5 max-w-xl"),c(h,"class","flex mt-1 mb-2")},m(O,A){B(O,e,A),y(e,t),y(t,l);for(let P=0;P<_.length;P+=1)_[P]&&_[P].m(l,null);y(e,s),y(e,o),k[a].m(o,null),B(O,u,A),B(O,h,A),y(h,m),T&&T.m(m,null),b=!0},p(O,A){var J,Z,X;if(A[0]&2883584){p=ft(O[18]);let Q;for(Q=0;Q<p.length;Q+=1){const re=ra(O,p,Q);_[Q]?(_[Q].p(re,A),v(_[Q],1)):(_[Q]=oa(re),_[Q].c(),v(_[Q],1),_[Q].m(l,null))}for(ce(),Q=p.length;Q<_.length;Q+=1)w(Q);ue()}let P=a;a=I(O),a===P?k[a].p(O,A):(ce(),$(k[P],1,1,()=>{k[P]=null}),ue(),i=k[a],i?i.p(O,A):(i=k[a]=S[a](O),i.c()),v(i,1),i.m(o,null)),((X=(Z=(J=O[18][O[19]])==null?void 0:J.info)==null?void 0:Z.meta)==null?void 0:X.description)??null?T?(T.p(O,A),A[0]&786432&&v(T,1)):(T=aa(O),T.c(),v(T,1),T.m(m,null)):T&&(ce(),$(T,1,1,()=>{T=null}),ue())},i(O){if(!b){for(let A=0;A<p.length;A+=1)v(_[A]);O&&(n||Gt(()=>{n=Qt(l,zl,{duration:100}),n.start()})),v(i),O&&(f||Gt(()=>{f=Qt(o,zl,{duration:100}),f.start()})),v(T),O&&(g||Gt(()=>{g=Qt(m,zl,{duration:100,delay:50}),g.start()})),b=!0}},o(O){_=_.filter(Boolean);for(let A=0;A<_.length;A+=1)$(_[A]);$(i),$(T),b=!1},d(O){O&&(d(e),d(u),d(h)),Rt(_,O),k[a].d(),T&&T.d()}}}function O1(r){let e,t;return e=new V1({props:{folder:r[22],onUpdate:r[29],onDelete:r[30]}}),{c(){F(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n[0]&4194304&&(s.folder=l[22]),n[0]&8388608&&(s.onUpdate=l[29]),n[0]&8388608&&(s.onDelete=l[30]),e.$set(s)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function z1(r){let e,t,l,n,s,o,a,i;function f(){return r[31](r[47])}return{c(){e=D("button"),t=D("img"),o=W(),this.h()},l(u){e=M(u,"BUTTON",{"aria-hidden":!0,"aria-label":!0});var h=E(e);t=M(h,"IMG",{crossorigin:!0,src:!0,class:!0,"aria-hidden":!0,draggable:!0}),h.forEach(d),o=G(u),this.h()},h(){var u,h,m,g;c(t,"crossorigin","anonymous"),il(t.src,l=((m=(h=(u=r[45])==null?void 0:u.info)==null?void 0:h.meta)==null?void 0:m.profile_image_url)??(r[21].language==="dg-DG"?`${gl}/doge.png`:`${gl}/static/favicon.png`))||c(t,"src",l),c(t,"class","size-9 @sm:size-10 rounded-full border-[1px] border-gray-100 dark:border-none"),c(t,"aria-hidden","true"),c(t,"draggable","false"),c(e,"aria-hidden",n=r[18].length<=1),c(e,"aria-label",s=r[21].t("Get information on {{name}} in the UI",{name:(g=r[18][r[47]])==null?void 0:g.name}))},m(u,h){B(u,e,h),y(e,t),B(u,o,h),a||(i=Ne(e,"click",f),a=!0)},p(u,h){var m,g,b,p;r=u,h[0]&2359296&&!il(t.src,l=((b=(g=(m=r[45])==null?void 0:m.info)==null?void 0:g.meta)==null?void 0:b.profile_image_url)??(r[21].language==="dg-DG"?`${gl}/doge.png`:`${gl}/static/favicon.png`))&&c(t,"src",l),h[0]&262144&&n!==(n=r[18].length<=1)&&c(e,"aria-hidden",n),h[0]&2359296&&s!==(s=r[21].t("Get information on {{name}} in the UI",{name:(p=r[18][r[47]])==null?void 0:p.name}))&&c(e,"aria-label",s)},d(u){u&&(d(e),d(o)),a=!1,i()}}}function oa(r){var l,n,s;let e,t;return e=new tt({props:{content:(((s=(n=(l=r[18][r[47]])==null?void 0:l.info)==null?void 0:n.meta)==null?void 0:s.tags)??[]).map(fa).join(", "),placement:"top",$$slots:{default:[z1]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,a){j(e,o,a),t=!0},p(o,a){var f,u,h;const i={};a[0]&262144&&(i.content=(((h=(u=(f=o[18][o[47]])==null?void 0:f.info)==null?void 0:u.meta)==null?void 0:h.tags)??[]).map(fa).join(", ")),a[0]&2883584|a[1]&131072&&(i.$$scope={dirty:a,ctx:o}),e.$set(i)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){R(e,o)}}}function A1(r){var l;let e=r[21].t("Hello, {{name}}",{name:(l=r[24])==null?void 0:l.name})+"",t;return{c(){t=$e(e)},l(n){t=Ie(n,e)},m(n,s){B(n,t,s)},p(n,s){var o;s[0]&18874368&&e!==(e=n[21].t("Hello, {{name}}",{name:(o=n[24])==null?void 0:o.name})+"")&&Ce(t,e)},i:me,o:me,d(n){n&&d(t)}}}function U1(r){var l;let e,t;return e=new tt({props:{content:(l=r[18][r[19]])==null?void 0:l.name,placement:"top",className:" flex items-center ",$$slots:{default:[P1]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){var a;const o={};s[0]&786432&&(o.content=(a=n[18][n[19]])==null?void 0:a.name),s[0]&786432|s[1]&131072&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function P1(r){var n;let e,t=((n=r[18][r[19]])==null?void 0:n.name)+"",l;return{c(){e=D("span"),l=$e(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var o=E(e);l=Ie(o,t),o.forEach(d),this.h()},h(){c(e,"class","line-clamp-1")},m(s,o){B(s,e,o),y(e,l)},p(s,o){var a;o[0]&786432&&t!==(t=((a=s[18][s[19]])==null?void 0:a.name)+"")&&Ce(l,t)},d(s){s&&d(e)}}}function aa(r){var o,a,i,f,u,h;let e,t,l,n;e=new tt({props:{className:" w-fit",content:Al.parse(_n(((i=(a=(o=r[18][r[19]])==null?void 0:o.info)==null?void 0:a.meta)==null?void 0:i.description)??"").replaceAll(`
`,"<br>")),placement:"top",$$slots:{default:[F1]},$$scope:{ctx:r}}});let s=((h=(u=(f=r[18][r[19]])==null?void 0:f.info)==null?void 0:u.meta)==null?void 0:h.user)&&ia(r);return{c(){F(e.$$.fragment),t=W(),s&&s.c(),l=Oe()},l(m){L(e.$$.fragment,m),t=G(m),s&&s.l(m),l=Oe()},m(m,g){j(e,m,g),B(m,t,g),s&&s.m(m,g),B(m,l,g),n=!0},p(m,g){var p,_,w,S,k,I;const b={};g[0]&786432&&(b.content=Al.parse(_n(((w=(_=(p=m[18][m[19]])==null?void 0:p.info)==null?void 0:_.meta)==null?void 0:w.description)??"").replaceAll(`
`,"<br>"))),g[0]&786432|g[1]&131072&&(b.$$scope={dirty:g,ctx:m}),e.$set(b),(I=(k=(S=m[18][m[19]])==null?void 0:S.info)==null?void 0:k.meta)!=null&&I.user?s?s.p(m,g):(s=ia(m),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},i(m){n||(v(e.$$.fragment,m),n=!0)},o(m){$(e.$$.fragment,m),n=!1},d(m){m&&(d(t),d(l)),R(e,m),s&&s.d(m)}}}function F1(r){var n,s,o;let e,t,l=Al.parse(_n(((o=(s=(n=r[18][r[19]])==null?void 0:n.info)==null?void 0:s.meta)==null?void 0:o.description)??"").replaceAll(`
`,"<br>"))+"";return{c(){e=D("div"),t=new Dr(!1),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=E(e);t=Mr(i,!1),i.forEach(d),this.h()},h(){t.a=null,c(e,"class","mt-0.5 px-2 text-sm font-normal text-gray-500 dark:text-gray-400 line-clamp-2 max-w-xl markdown")},m(a,i){B(a,e,i),t.m(l,e)},p(a,i){var f,u,h;i[0]&786432&&l!==(l=Al.parse(_n(((h=(u=(f=a[18][a[19]])==null?void 0:f.info)==null?void 0:u.meta)==null?void 0:h.description)??"").replaceAll(`
`,"<br>"))+"")&&t.p(l)},d(a){a&&d(e)}}}function ia(r){let e,t;function l(o,a){var i,f,u;return(u=(f=(i=o[18][o[19]])==null?void 0:i.info)==null?void 0:f.meta)!=null&&u.user.community?j1:L1}let n=l(r),s=n(r);return{c(){e=D("div"),t=$e(`By
									`),s.c(),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=E(e);t=Ie(a,`By
									`),s.l(a),a.forEach(d),this.h()},h(){c(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(o,a){B(o,e,a),y(e,t),s.m(e,null)},p(o,a){n===(n=l(o))&&s?s.p(o,a):(s.d(1),s=n(o),s&&(s.c(),s.m(e,null)))},d(o){o&&d(e),s.d()}}}function L1(r){var l,n,s;let e=((s=(n=(l=r[18][r[19]])==null?void 0:l.info)==null?void 0:n.meta)==null?void 0:s.user.name)+"",t;return{c(){t=$e(e)},l(o){t=Ie(o,e)},m(o,a){B(o,t,a)},p(o,a){var i,f,u;a[0]&786432&&e!==(e=((u=(f=(i=o[18][o[19]])==null?void 0:i.info)==null?void 0:f.meta)==null?void 0:u.user.name)+"")&&Ce(t,e)},d(o){o&&d(t)}}}function j1(r){var s,o,a,i,f,u,h,m,g;let e,t=((a=(o=(s=r[18][r[19]])==null?void 0:s.info)==null?void 0:o.meta)!=null&&a.user.name?(u=(f=(i=r[18][r[19]])==null?void 0:i.info)==null?void 0:f.meta)==null?void 0:u.user.name:`@${(g=(m=(h=r[18][r[19]])==null?void 0:h.info)==null?void 0:m.meta)==null?void 0:g.user.username}`)+"",l,n;return{c(){e=D("a"),l=$e(t),this.h()},l(b){e=M(b,"A",{href:!0});var p=E(e);l=Ie(p,t),p.forEach(d),this.h()},h(){var b,p,_;c(e,"href",n="https://openwebui.com/m/"+((_=(p=(b=r[18][r[19]])==null?void 0:b.info)==null?void 0:p.meta)==null?void 0:_.user.username))},m(b,p){B(b,e,p),y(e,l)},p(b,p){var _,w,S,k,I,T,C,N,U,O,A,P;p[0]&786432&&t!==(t=((S=(w=(_=b[18][b[19]])==null?void 0:_.info)==null?void 0:w.meta)!=null&&S.user.name?(T=(I=(k=b[18][b[19]])==null?void 0:k.info)==null?void 0:I.meta)==null?void 0:T.user.name:`@${(U=(N=(C=b[18][b[19]])==null?void 0:C.info)==null?void 0:N.meta)==null?void 0:U.user.username}`)+"")&&Ce(l,t),p[0]&786432&&n!==(n="https://openwebui.com/m/"+((P=(A=(O=b[18][b[19]])==null?void 0:O.info)==null?void 0:A.meta)==null?void 0:P.user.username))&&c(e,"href",n)},d(b){b&&d(e)}}}function R1(r){var o,a,i,f,u,h,m;let e,t,l,n,s;return l=new uf({props:{suggestionPrompts:((i=(a=(o=r[1])==null?void 0:o.info)==null?void 0:a.meta)==null?void 0:i.suggestion_prompts)??((h=(u=(f=r[18][r[19]])==null?void 0:f.info)==null?void 0:u.meta)==null?void 0:h.suggestion_prompts)??((m=r[25])==null?void 0:m.default_prompt_suggestions)??[],inputValue:r[2],onSelect:r[15]}}),{c(){e=D("div"),t=D("div"),F(l.$$.fragment),this.h()},l(g){e=M(g,"DIV",{class:!0});var b=E(e);t=M(b,"DIV",{class:!0});var p=E(t);L(l.$$.fragment,p),p.forEach(d),b.forEach(d),this.h()},h(){c(t,"class","mx-5"),c(e,"class","mx-auto max-w-2xl font-primary mt-2")},m(g,b){B(g,e,b),y(e,t),j(l,t,null),s=!0},p(g,b){var _,w,S,k,I,T,C;const p={};b[0]&34340866&&(p.suggestionPrompts=((S=(w=(_=g[1])==null?void 0:_.info)==null?void 0:w.meta)==null?void 0:S.suggestion_prompts)??((T=(I=(k=g[18][g[19]])==null?void 0:k.info)==null?void 0:I.meta)==null?void 0:T.suggestion_prompts)??((C=g[25])==null?void 0:C.default_prompt_suggestions)??[]),b[0]&4&&(p.inputValue=g[2]),b[0]&32768&&(p.onSelect=g[15]),l.$set(p)},i(g){s||(v(l.$$.fragment,g),g&&(n||Gt(()=>{n=Qt(e,zl,{duration:200,delay:200}),n.start()})),s=!0)},o(g){$(l.$$.fragment,g),s=!1},d(g){g&&d(e),R(l)}}}function H1(r){let e,t,l,n;return t=new k1({props:{folder:r[22]}}),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);L(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"class","mx-auto px-4 md:max-w-3xl md:px-6 font-primary min-h-62")},m(s,o){B(s,e,o),j(t,e,null),n=!0},p(s,o){const a={};o[0]&4194304&&(a.folder=s[22]),t.$set(a)},i(s){n||(v(t.$$.fragment,s),s&&(l||Gt(()=>{l=Qt(e,zl,{duration:200,delay:200}),l.start()})),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){s&&d(e),R(t)}}}function W1(r){let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_,w,S,k,I,T,C,N,U,O=r[20]&&sa(r);const A=[O1,B1],P=[];function J(ne,q){return ne[22]?0:1}s=J(r),o=P[s]=A[s](r);function Z(ne){r[33](ne)}function X(ne){r[34](ne)}function Q(ne){r[35](ne)}function re(ne){r[36](ne)}function _e(ne){r[37](ne)}function De(ne){r[38](ne)}function x(ne){r[39](ne)}function be(ne){r[40](ne)}function Me(ne){r[41](ne)}function oe(ne){r[42](ne)}let Je={history:r[14],selectedModels:r[13],toolServers:r[17],stopResponse:r[12],createMessagePair:r[11],placeholder:r[21].t("How can I help you today?"),onChange:r[16]};r[3]!==void 0&&(Je.files=r[3]),r[2]!==void 0&&(Je.prompt=r[2]),r[0]!==void 0&&(Je.autoScroll=r[0]),r[5]!==void 0&&(Je.selectedToolIds=r[5]),r[6]!==void 0&&(Je.selectedFilterIds=r[6]),r[8]!==void 0&&(Je.imageGenerationEnabled=r[8]),r[9]!==void 0&&(Je.codeInterpreterEnabled=r[9]),r[10]!==void 0&&(Je.webSearchEnabled=r[10]),r[1]!==void 0&&(Je.atSelectedModel=r[1]),r[7]!==void 0&&(Je.showCommands=r[7]),f=new Ua({props:Je}),r[32](f),Be.push(()=>Le(f,"files",Z)),Be.push(()=>Le(f,"prompt",X)),Be.push(()=>Le(f,"autoScroll",Q)),Be.push(()=>Le(f,"selectedToolIds",re)),Be.push(()=>Le(f,"selectedFilterIds",_e)),Be.push(()=>Le(f,"imageGenerationEnabled",De)),Be.push(()=>Le(f,"codeInterpreterEnabled",x)),Be.push(()=>Le(f,"webSearchEnabled",be)),Be.push(()=>Le(f,"atSelectedModel",Me)),Be.push(()=>Le(f,"showCommands",oe)),f.$on("upload",r[43]),f.$on("submit",r[44]);const le=[H1,R1],ee=[];function Se(ne,q){return ne[22]?0:1}return C=Se(r),N=ee[C]=le[C](r),{c(){e=D("div"),O&&O.c(),t=W(),l=D("div"),n=D("div"),o.c(),a=W(),i=D("div"),F(f.$$.fragment),T=W(),N.c(),this.h()},l(ne){e=M(ne,"DIV",{class:!0});var q=E(e);O&&O.l(q),t=G(q),l=M(q,"DIV",{class:!0});var Re=E(l);n=M(Re,"DIV",{class:!0});var ve=E(n);o.l(ve),a=G(ve),i=M(ve,"DIV",{class:!0});var se=E(i);L(f.$$.fragment,se),se.forEach(d),ve.forEach(d),Re.forEach(d),T=G(q),N.l(q),q.forEach(d),this.h()},h(){c(i,"class",I="text-base font-normal @md:max-w-3xl w-full py-3 "+(r[1]?"mt-2":"")),c(n,"class","w-full flex flex-col justify-center items-center"),c(l,"class","w-full text-3xl text-gray-800 dark:text-gray-100 text-center flex items-center gap-4 font-primary"),c(e,"class","m-auto w-full max-w-6xl px-2 @2xl:px-20 translate-y-6 py-24 text-center")},m(ne,q){B(ne,e,q),O&&O.m(e,null),y(e,t),y(e,l),y(l,n),P[s].m(n,null),y(n,a),y(n,i),j(f,i,null),y(e,T),ee[C].m(e,null),U=!0},p(ne,q){ne[20]?O?(O.p(ne,q),q[0]&1048576&&v(O,1)):(O=sa(ne),O.c(),v(O,1),O.m(e,t)):O&&(ce(),$(O,1,1,()=>{O=null}),ue());let Re=s;s=J(ne),s===Re?P[s].p(ne,q):(ce(),$(P[Re],1,1,()=>{P[Re]=null}),ue(),o=P[s],o?o.p(ne,q):(o=P[s]=A[s](ne),o.c()),v(o,1),o.m(n,a));const ve={};q[0]&16384&&(ve.history=ne[14]),q[0]&8192&&(ve.selectedModels=ne[13]),q[0]&131072&&(ve.toolServers=ne[17]),q[0]&4096&&(ve.stopResponse=ne[12]),q[0]&2048&&(ve.createMessagePair=ne[11]),q[0]&2097152&&(ve.placeholder=ne[21].t("How can I help you today?")),q[0]&65536&&(ve.onChange=ne[16]),!u&&q[0]&8&&(u=!0,ve.files=ne[3],je(()=>u=!1)),!h&&q[0]&4&&(h=!0,ve.prompt=ne[2],je(()=>h=!1)),!m&&q[0]&1&&(m=!0,ve.autoScroll=ne[0],je(()=>m=!1)),!g&&q[0]&32&&(g=!0,ve.selectedToolIds=ne[5],je(()=>g=!1)),!b&&q[0]&64&&(b=!0,ve.selectedFilterIds=ne[6],je(()=>b=!1)),!p&&q[0]&256&&(p=!0,ve.imageGenerationEnabled=ne[8],je(()=>p=!1)),!_&&q[0]&512&&(_=!0,ve.codeInterpreterEnabled=ne[9],je(()=>_=!1)),!w&&q[0]&1024&&(w=!0,ve.webSearchEnabled=ne[10],je(()=>w=!1)),!S&&q[0]&2&&(S=!0,ve.atSelectedModel=ne[1],je(()=>S=!1)),!k&&q[0]&128&&(k=!0,ve.showCommands=ne[7],je(()=>k=!1)),f.$set(ve),(!U||q[0]&2&&I!==(I="text-base font-normal @md:max-w-3xl w-full py-3 "+(ne[1]?"mt-2":"")))&&c(i,"class",I);let se=C;C=Se(ne),C===se?ee[C].p(ne,q):(ce(),$(ee[se],1,1,()=>{ee[se]=null}),ue(),N=ee[C],N?N.p(ne,q):(N=ee[C]=le[C](ne),N.c()),v(N,1),N.m(e,null))},i(ne){U||(v(O),v(o),v(f.$$.fragment,ne),v(N),U=!0)},o(ne){$(O),$(o),$(f.$$.fragment,ne),$(N),U=!1},d(ne){ne&&d(e),O&&O.d(),P[s].d(),r[32](null),R(f),ee[C].d()}}}const fa=r=>r.name.toUpperCase();function G1(r,e,t){let l,n,s,o,a,i,f;Ee(r,ln,H=>t(28,l=H)),Ee(r,tl,H=>t(20,n=H)),Ee(r,Nl,H=>t(22,o=H)),Ee(r,ol,H=>t(23,a=H)),Ee(r,wl,H=>t(24,i=H)),Ee(r,Pl,H=>t(25,f=H));const u=yl(),h=Ot("i18n");Ee(r,h,H=>t(21,s=H));let{createMessagePair:m}=e,{stopResponse:g}=e,{autoScroll:b=!1}=e,{atSelectedModel:p}=e,{selectedModels:_}=e,{history:w}=e,{prompt:S=""}=e,{files:k=[]}=e,{messageInput:I=null}=e,{selectedToolIds:T=[]}=e,{selectedFilterIds:C=[]}=e,{showCommands:N=!1}=e,{imageGenerationEnabled:U=!1}=e,{codeInterpreterEnabled:O=!1}=e,{webSearchEnabled:A=!1}=e,{onSelect:P=H=>{}}=e,{onChange:J=H=>{}}=e,{toolServers:Z=[]}=e,X=[],Q=0;const re=async H=>{await sl.set(await al(localStorage.token,a)),ol.set(1)},_e=async()=>{await sl.set(await al(localStorage.token,a)),ol.set(1),Nl.set(null)},De=H=>{t(19,Q=H)};function x(H){Be[H?"unshift":"push"](()=>{I=H,t(4,I)})}function be(H){k=H,t(3,k)}function Me(H){S=H,t(2,S)}function oe(H){b=H,t(0,b)}function Je(H){T=H,t(5,T)}function le(H){C=H,t(6,C)}function ee(H){U=H,t(8,U)}function Se(H){O=H,t(9,O)}function ne(H){A=H,t(10,A)}function q(H){p=H,t(1,p)}function Re(H){N=H,t(7,N)}const ve=H=>{u("upload",H.detail)},se=H=>{u("submit",H.detail)};return r.$$set=H=>{"createMessagePair"in H&&t(11,m=H.createMessagePair),"stopResponse"in H&&t(12,g=H.stopResponse),"autoScroll"in H&&t(0,b=H.autoScroll),"atSelectedModel"in H&&t(1,p=H.atSelectedModel),"selectedModels"in H&&t(13,_=H.selectedModels),"history"in H&&t(14,w=H.history),"prompt"in H&&t(2,S=H.prompt),"files"in H&&t(3,k=H.files),"messageInput"in H&&t(4,I=H.messageInput),"selectedToolIds"in H&&t(5,T=H.selectedToolIds),"selectedFilterIds"in H&&t(6,C=H.selectedFilterIds),"showCommands"in H&&t(7,N=H.showCommands),"imageGenerationEnabled"in H&&t(8,U=H.imageGenerationEnabled),"codeInterpreterEnabled"in H&&t(9,O=H.codeInterpreterEnabled),"webSearchEnabled"in H&&t(10,A=H.webSearchEnabled),"onSelect"in H&&t(15,P=H.onSelect),"onChange"in H&&t(16,J=H.onChange),"toolServers"in H&&t(17,Z=H.toolServers)},r.$$.update=()=>{r.$$.dirty[0]&268443648&&t(18,X=_.map(H=>l.find(We=>We.id===H))),r.$$.dirty[0]&270336&&_.length>0&&t(19,Q=X.length-1)},[b,p,S,k,I,T,C,N,U,O,A,m,g,_,w,P,J,Z,X,Q,n,s,o,a,i,f,u,h,l,re,_e,De,x,be,Me,oe,Je,le,ee,Se,ne,q,Re,ve,se]}class J1 extends st{constructor(e){super(),ot(this,e,G1,W1,nt,{createMessagePair:11,stopResponse:12,autoScroll:0,atSelectedModel:1,selectedModels:13,history:14,prompt:2,files:3,messageInput:4,selectedToolIds:5,selectedFilterIds:6,showCommands:7,imageGenerationEnabled:8,codeInterpreterEnabled:9,webSearchEnabled:10,onSelect:15,onChange:16,toolServers:17},null,[-1,-1])}}const{document:kr}=Za;function q1(r){let e,t,l,n;return l=new dl({props:{className:"size-5"}}),{c(){e=D("div"),t=D("div"),F(l.$$.fragment),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=E(e);t=M(o,"DIV",{class:!0});var a=E(t);L(l.$$.fragment,a),a.forEach(d),o.forEach(d),this.h()},h(){c(t,"class","m-auto"),c(e,"class","flex items-center justify-center h-full w-full")},m(s,o){B(s,e,o),y(e,t),j(l,t,null),n=!0},p:me,i(s){n||(v(l.$$.fragment,s),n=!0)},o(s){$(l.$$.fragment,s),n=!1},d(s){s&&d(e),R(l)}}}function Z1(r){let e,t,l,n,s;function o(f,u){var h,m,g,b,p;if(f[34]&&((m=(h=f[34])==null?void 0:h.meta)!=null&&m.background_image_url))return K1;if(((g=f[35])==null?void 0:g.backgroundImageUrl)??((p=(b=f[38])==null?void 0:b.license_metadata)==null?void 0:p.background_image_url)??null)return Y1}let a=o(r),i=a&&a(r);return l=new xa({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[ep]},$$scope:{ctx:r}}}),{c(){e=D("div"),i&&i.c(),t=W(),F(l.$$.fragment),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=E(e);i&&i.l(u),t=G(u),L(l.$$.fragment,u),u.forEach(d),this.h()},h(){c(e,"class","w-full h-full flex flex-col")},m(f,u){B(f,e,u),i&&i.m(e,null),y(e,t),j(l,e,null),s=!0},p(f,u){a===(a=o(f))&&i?i.p(f,u):(i&&i.d(1),i=a&&a(f),i&&(i.c(),i.m(e,t)));const h={};u[0]&2147353591|u[1]&383|u[4]&4194304&&(h.$$scope={dirty:u,ctx:f}),l.$set(h)},i(f){s||(v(l.$$.fragment,f),f&&(n||Gt(()=>{n=Qt(e,zl,{duration:50}),n.start()})),s=!0)},o(f){$(l.$$.fragment,f),s=!1},d(f){f&&d(e),i&&i.d(),R(l)}}}function Y1(r){let e,t,l,n;return{c(){e=D("div"),l=W(),n=D("div"),this.h()},l(s){e=M(s,"DIV",{class:!0,style:!0}),E(e).forEach(d),l=G(s),n=M(s,"DIV",{class:!0}),E(n).forEach(d),this.h()},h(){var s,o,a;c(e,"class",t="absolute "+(r[41]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),At(e,"background-image","url("+(((s=r[35])==null?void 0:s.backgroundImageUrl)??((a=(o=r[38])==null?void 0:o.license_metadata)==null?void 0:a.background_image_url))+")"),c(n,"class","absolute top-0 left-0 w-full h-full bg-linear-to-t from-white to-white/85 dark:from-gray-900 dark:to-gray-900/90 z-0")},m(s,o){B(s,e,o),B(s,l,o),B(s,n,o)},p(s,o){var a,i,f;o[1]&1024&&t!==(t="absolute "+(s[41]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&c(e,"class",t),o[1]&144&&At(e,"background-image","url("+(((a=s[35])==null?void 0:a.backgroundImageUrl)??((f=(i=s[38])==null?void 0:i.license_metadata)==null?void 0:f.background_image_url))+")")},d(s){s&&(d(e),d(l),d(n))}}}function K1(r){let e,t,l,n;return{c(){e=D("div"),l=W(),n=D("div"),this.h()},l(s){e=M(s,"DIV",{class:!0,style:!0}),E(e).forEach(d),l=G(s),n=M(s,"DIV",{class:!0}),E(n).forEach(d),this.h()},h(){var s,o;c(e,"class",t="absolute "+(r[41]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),At(e,"background-image","url("+((o=(s=r[34])==null?void 0:s.meta)==null?void 0:o.background_image_url)+")"),c(n,"class","absolute top-0 left-0 w-full h-full bg-linear-to-t from-white to-white/85 dark:from-gray-900 dark:to-gray-900/90 z-0")},m(s,o){B(s,e,o),B(s,l,o),B(s,n,o)},p(s,o){var a,i;o[1]&1024&&t!==(t="absolute "+(s[41]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&c(e,"class",t),o[1]&8&&At(e,"background-image","url("+((i=(a=s[34])==null?void 0:a.meta)==null?void 0:i.background_image_url)+")")},d(s){s&&(d(e),d(l),d(n))}}}function X1(r){let e,t,l,n,s,o,a,i,f,u,h,m,g,b;function p(P){r[93](P)}function _(P){r[94](P)}function w(P){r[95](P)}function S(P){r[96](P)}function k(P){r[97](P)}function I(P){r[98](P)}function T(P){r[99](P)}function C(P){r[100](P)}function N(P){r[101](P)}function U(P){r[102](P)}function O(P){r[103](P)}let A={history:r[24],selectedModels:r[0],toolServers:r[37],stopResponse:r[56],createMessagePair:r[51],onSelect:r[44],onChange:r[92]};return r[6]!==void 0&&(A.messageInput=r[6]),r[28]!==void 0&&(A.files=r[28]),r[26]!==void 0&&(A.prompt=r[26]),r[7]!==void 0&&(A.autoScroll=r[7]),r[17]!==void 0&&(A.selectedToolIds=r[17]),r[18]!==void 0&&(A.selectedFilterIds=r[18]),r[19]!==void 0&&(A.imageGenerationEnabled=r[19]),r[21]!==void 0&&(A.codeInterpreterEnabled=r[21]),r[20]!==void 0&&(A.webSearchEnabled=r[20]),r[1]!==void 0&&(A.atSelectedModel=r[1]),r[22]!==void 0&&(A.showCommands=r[22]),t=new J1({props:A}),Be.push(()=>Le(t,"messageInput",p)),Be.push(()=>Le(t,"files",_)),Be.push(()=>Le(t,"prompt",w)),Be.push(()=>Le(t,"autoScroll",S)),Be.push(()=>Le(t,"selectedToolIds",k)),Be.push(()=>Le(t,"selectedFilterIds",I)),Be.push(()=>Le(t,"imageGenerationEnabled",T)),Be.push(()=>Le(t,"codeInterpreterEnabled",C)),Be.push(()=>Le(t,"webSearchEnabled",N)),Be.push(()=>Le(t,"atSelectedModel",U)),Be.push(()=>Le(t,"showCommands",O)),t.$on("upload",r[104]),t.$on("submit",r[105]),{c(){e=D("div"),F(t.$$.fragment),this.h()},l(P){e=M(P,"DIV",{class:!0});var J=E(e);L(t.$$.fragment,J),J.forEach(d),this.h()},h(){c(e,"class","flex items-center h-full")},m(P,J){B(P,e,J),j(t,e,null),b=!0},p(P,J){const Z={};J[0]&16777216&&(Z.history=P[24]),J[0]&1&&(Z.selectedModels=P[0]),J[1]&64&&(Z.toolServers=P[37]),J[1]&2&&(Z.onChange=P[92]),!l&&J[0]&64&&(l=!0,Z.messageInput=P[6],je(()=>l=!1)),!n&&J[0]&268435456&&(n=!0,Z.files=P[28],je(()=>n=!1)),!s&&J[0]&67108864&&(s=!0,Z.prompt=P[26],je(()=>s=!1)),!o&&J[0]&128&&(o=!0,Z.autoScroll=P[7],je(()=>o=!1)),!a&&J[0]&131072&&(a=!0,Z.selectedToolIds=P[17],je(()=>a=!1)),!i&&J[0]&262144&&(i=!0,Z.selectedFilterIds=P[18],je(()=>i=!1)),!f&&J[0]&524288&&(f=!0,Z.imageGenerationEnabled=P[19],je(()=>f=!1)),!u&&J[0]&2097152&&(u=!0,Z.codeInterpreterEnabled=P[21],je(()=>u=!1)),!h&&J[0]&1048576&&(h=!0,Z.webSearchEnabled=P[20],je(()=>h=!1)),!m&&J[0]&2&&(m=!0,Z.atSelectedModel=P[1],je(()=>m=!1)),!g&&J[0]&4194304&&(g=!0,Z.showCommands=P[22],je(()=>g=!1)),t.$set(Z)},i(P){b||(v(t.$$.fragment,P),b=!0)},o(P){$(t.$$.fragment,P),b=!1},d(P){P&&d(e),R(t)}}}function Q1(r){let e,t,l,n,s,o,a,i,f,u,h,m,g,b,p,_,w,S,k,I,T,C="",N,U,O;function A(ee){r[73](ee)}function P(ee){r[74](ee)}function J(ee){r[75](ee)}let Z={chatId:r[33],setInputText:r[72],selectedModels:r[0],atSelectedModel:r[1],sendMessage:r[55],showMessage:r[45],submitMessage:r[57],continueResponse:r[59],regenerateResponse:r[58],mergeResponses:r[60],chatActionHandler:r[50],addMessages:r[52],topPadding:!0,bottomPadding:r[28].length>0,onSelect:r[44]};r[24]!==void 0&&(Z.history=r[24]),r[7]!==void 0&&(Z.autoScroll=r[7]),r[26]!==void 0&&(Z.prompt=r[26]),l=new ya({props:Z}),Be.push(()=>Le(l,"history",A)),Be.push(()=>Le(l,"autoScroll",P)),Be.push(()=>Le(l,"prompt",J));function X(ee){r[80](ee)}function Q(ee){r[81](ee)}function re(ee){r[82](ee)}function _e(ee){r[83](ee)}function De(ee){r[84](ee)}function x(ee){r[85](ee)}function be(ee){r[86](ee)}function Me(ee){r[87](ee)}function oe(ee){r[88](ee)}function Je(ee){r[89](ee)}let le={history:r[24],taskIds:r[25],selectedModels:r[0],toolServers:r[37],generating:r[23],stopResponse:r[56],createMessagePair:r[51],onChange:r[78]};return r[28]!==void 0&&(le.files=r[28]),r[26]!==void 0&&(le.prompt=r[26]),r[7]!==void 0&&(le.autoScroll=r[7]),r[17]!==void 0&&(le.selectedToolIds=r[17]),r[18]!==void 0&&(le.selectedFilterIds=r[18]),r[19]!==void 0&&(le.imageGenerationEnabled=r[19]),r[21]!==void 0&&(le.codeInterpreterEnabled=r[21]),r[20]!==void 0&&(le.webSearchEnabled=r[20]),r[1]!==void 0&&(le.atSelectedModel=r[1]),r[22]!==void 0&&(le.showCommands=r[22]),f=new Ua({props:le}),r[79](f),Be.push(()=>Le(f,"files",X)),Be.push(()=>Le(f,"prompt",Q)),Be.push(()=>Le(f,"autoScroll",re)),Be.push(()=>Le(f,"selectedToolIds",_e)),Be.push(()=>Le(f,"selectedFilterIds",De)),Be.push(()=>Le(f,"imageGenerationEnabled",x)),Be.push(()=>Le(f,"codeInterpreterEnabled",be)),Be.push(()=>Le(f,"webSearchEnabled",Me)),Be.push(()=>Le(f,"atSelectedModel",oe)),Be.push(()=>Le(f,"showCommands",Je)),f.$on("upload",r[90]),f.$on("submit",r[91]),{c(){e=D("div"),t=D("div"),F(l.$$.fragment),a=W(),i=D("div"),F(f.$$.fragment),I=W(),T=D("div"),T.innerHTML=C,this.h()},l(ee){e=M(ee,"DIV",{class:!0,id:!0});var Se=E(e);t=M(Se,"DIV",{class:!0});var ne=E(t);L(l.$$.fragment,ne),ne.forEach(d),Se.forEach(d),a=G(ee),i=M(ee,"DIV",{class:!0});var q=E(i);L(f.$$.fragment,q),I=G(q),T=M(q,"DIV",{class:!0,"data-svelte-h":!0}),El(T)!=="svelte-ko82kn"&&(T.innerHTML=C),q.forEach(d),this.h()},h(){c(t,"class","h-full w-full flex flex-col"),c(e,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden"),c(e,"id","messages-container"),c(T,"class","absolute bottom-1 text-xs text-gray-500 text-center line-clamp-1 right-0 left-0"),c(i,"class","pb-2")},m(ee,Se){B(ee,e,Se),y(e,t),j(l,t,null),r[76](e),B(ee,a,Se),B(ee,i,Se),j(f,i,null),y(i,I),y(i,T),N=!0,U||(O=Ne(e,"scroll",r[77]),U=!0)},p(ee,Se){const ne={};Se[1]&4&&(ne.chatId=ee[33]),Se[0]&64&&(ne.setInputText=ee[72]),Se[0]&1&&(ne.selectedModels=ee[0]),Se[0]&2&&(ne.atSelectedModel=ee[1]),Se[0]&268435456&&(ne.bottomPadding=ee[28].length>0),!n&&Se[0]&16777216&&(n=!0,ne.history=ee[24],je(()=>n=!1)),!s&&Se[0]&128&&(s=!0,ne.autoScroll=ee[7],je(()=>s=!1)),!o&&Se[0]&67108864&&(o=!0,ne.prompt=ee[26],je(()=>o=!1)),l.$set(ne);const q={};Se[0]&16777216&&(q.history=ee[24]),Se[0]&33554432&&(q.taskIds=ee[25]),Se[0]&1&&(q.selectedModels=ee[0]),Se[1]&64&&(q.toolServers=ee[37]),Se[0]&8388608&&(q.generating=ee[23]),Se[1]&6&&(q.onChange=ee[78]),!u&&Se[0]&268435456&&(u=!0,q.files=ee[28],je(()=>u=!1)),!h&&Se[0]&67108864&&(h=!0,q.prompt=ee[26],je(()=>h=!1)),!m&&Se[0]&128&&(m=!0,q.autoScroll=ee[7],je(()=>m=!1)),!g&&Se[0]&131072&&(g=!0,q.selectedToolIds=ee[17],je(()=>g=!1)),!b&&Se[0]&262144&&(b=!0,q.selectedFilterIds=ee[18],je(()=>b=!1)),!p&&Se[0]&524288&&(p=!0,q.imageGenerationEnabled=ee[19],je(()=>p=!1)),!_&&Se[0]&2097152&&(_=!0,q.codeInterpreterEnabled=ee[21],je(()=>_=!1)),!w&&Se[0]&1048576&&(w=!0,q.webSearchEnabled=ee[20],je(()=>w=!1)),!S&&Se[0]&2&&(S=!0,q.atSelectedModel=ee[1],je(()=>S=!1)),!k&&Se[0]&4194304&&(k=!0,q.showCommands=ee[22],je(()=>k=!1)),f.$set(q)},i(ee){N||(v(l.$$.fragment,ee),v(f.$$.fragment,ee),N=!0)},o(ee){$(l.$$.fragment,ee),$(f.$$.fragment,ee),N=!1},d(ee){ee&&(d(e),d(a),d(i)),R(l),r[76](null),r[79](null),R(f),U=!1,O()}}}function x1(r){let e,t,l,n,s,o,a,i;function f(b){r[71](b)}let u={chat:{id:r[33],chat:{title:r[39],models:r[0],system:r[35].system??void 0,params:r[29],history:r[24],timestamp:Date.now()}},history:r[24],title:r[39],shareEnabled:!!r[24].currentId,initNewChat:r[49],archiveChatHandler:np,moveChatHandler:r[63],onSaveTempChat:r[69]};r[0]!==void 0&&(u.selectedModels=r[0]),e=new Bh({props:u}),r[70](e),Be.push(()=>Le(e,"selectedModels",f));const h=[Q1,X1],m=[];function g(b,p){var _;return p[0]&16777216|p[1]&24&&(s=null),s==null&&(s=((_=b[35])==null?void 0:_.landingPageMode)==="chat"&&!b[34]||jt(b[24],b[24].currentId).length>0),s?0:1}return o=g(r,[-1,-1,-1,-1,-1]),a=m[o]=h[o](r),{c(){F(e.$$.fragment),l=W(),n=D("div"),a.c(),this.h()},l(b){L(e.$$.fragment,b),l=G(b),n=M(b,"DIV",{class:!0});var p=E(n);a.l(p),p.forEach(d),this.h()},h(){c(n,"class","flex flex-col flex-auto z-10 w-full @container overflow-auto")},m(b,p){j(e,b,p),B(b,l,p),B(b,n,p),m[o].m(n,null),i=!0},p(b,p){const _={};p[0]&553648129|p[1]&276&&(_.chat={id:b[33],chat:{title:b[39],models:b[0],system:b[35].system??void 0,params:b[29],history:b[24],timestamp:Date.now()}}),p[0]&16777216&&(_.history=b[24]),p[1]&256&&(_.title=b[39]),p[0]&16777216&&(_.shareEnabled=!!b[24].currentId),p[0]&1090519041|p[1]&1&&(_.onSaveTempChat=b[69]),!t&&p[0]&1&&(t=!0,_.selectedModels=b[0],je(()=>t=!1)),e.$set(_);let w=o;o=g(b,p),o===w?m[o].p(b,p):(ce(),$(m[w],1,1,()=>{m[w]=null}),ue(),a=m[o],a?a.p(b,p):(a=m[o]=h[o](b),a.c()),v(a,1),a.m(n,null))},i(b){i||(v(e.$$.fragment,b),v(a),i=!0)},o(b){$(e.$$.fragment,b),$(a),i=!1},d(b){b&&(d(l),d(n)),r[70](null),R(e,b),m[o].d()}}}function ep(r){var _;let e,t,l,n,s,o,a,i,f;e=new ua({props:{defaultSize:50,minSize:30,class:"h-full flex relative max-w-full flex-col",$$slots:{default:[x1]},$$scope:{ctx:r}}});function u(w){r[108](w)}function h(w){r[109](w)}function m(w){r[110](w)}function g(w){r[111](w)}function b(w){r[112](w)}let p={chatId:r[33],modelId:((_=r[2])==null?void 0:_.at(0))??null,models:r[2].reduce(r[106],[]),submitPrompt:r[53],generateUserTurn:r[54],stopResponse:r[56],showMessage:r[45],eventTarget:r[43]};return r[24]!==void 0&&(p.history=r[24]),r[27]!==void 0&&(p.chatFiles=r[27]),r[29]!==void 0&&(p.params=r[29]),r[28]!==void 0&&(p.files=r[28]),r[4]!==void 0&&(p.pane=r[4]),l=new t1({props:p}),r[107](l),Be.push(()=>Le(l,"history",u)),Be.push(()=>Le(l,"chatFiles",h)),Be.push(()=>Le(l,"params",m)),Be.push(()=>Le(l,"files",g)),Be.push(()=>Le(l,"pane",b)),{c(){F(e.$$.fragment),t=W(),F(l.$$.fragment)},l(w){L(e.$$.fragment,w),t=G(w),L(l.$$.fragment,w)},m(w,S){j(e,w,S),B(w,t,S),j(l,w,S),f=!0},p(w,S){var T;const k={};S[0]&2013135811|S[1]&351|S[4]&4194304&&(k.$$scope={dirty:S,ctx:w}),e.$set(k);const I={};S[1]&4&&(I.chatId=w[33]),S[0]&4&&(I.modelId=((T=w[2])==null?void 0:T.at(0))??null),S[0]&4|S[1]&32&&(I.models=w[2].reduce(w[106],[])),!n&&S[0]&16777216&&(n=!0,I.history=w[24],je(()=>n=!1)),!s&&S[0]&134217728&&(s=!0,I.chatFiles=w[27],je(()=>s=!1)),!o&&S[0]&536870912&&(o=!0,I.params=w[29],je(()=>o=!1)),!a&&S[0]&268435456&&(a=!0,I.files=w[28],je(()=>a=!1)),!i&&S[0]&16&&(i=!0,I.pane=w[4],je(()=>i=!1)),l.$set(I)},i(w){f||(v(e.$$.fragment,w),v(l.$$.fragment,w),f=!0)},o(w){$(e.$$.fragment,w),$(l.$$.fragment,w),f=!1},d(w){w&&d(t),R(e,w),r[107](null),R(l,w)}}}function tp(r){let e,t,l,n,s,o,a,i,f,u,h,m,g;kr.title=e=`
		`+(r[35].showChatTitleInTab!==!1&&r[39]?`${r[39].length>30?`${r[39].slice(0,30)}...`:r[39]}  ${r[40]}`:`${r[40]}`)+`
	`;function b(k){r[66](k)}let p={title:r[11],message:r[12],input:r[13],inputPlaceholder:r[14],inputValue:r[15]};r[10]!==void 0&&(p.show=r[10]),o=new Ma({props:p}),Be.push(()=>Le(o,"show",b)),o.$on("confirm",r[67]),o.$on("cancel",r[68]);const _=[Z1,q1],w=[];function S(k,I){return k[3]?k[3]?1:-1:0}return~(u=S(r))&&(h=w[u]=_[u](r)),{c(){t=W(),l=D("audio"),s=W(),F(o.$$.fragment),i=W(),f=D("div"),h&&h.c(),this.h()},l(k){qa("svelte-mbrmpu",kr.head).forEach(d),t=G(k),l=M(k,"AUDIO",{id:!0,src:!0,style:!0}),E(l).forEach(d),s=G(k),L(o.$$.fragment,k),i=G(k),f=M(k,"DIV",{class:!0,id:!0});var T=E(f);h&&h.l(T),T.forEach(d),this.h()},h(){c(l,"id","audioElement"),il(l.src,n="")||c(l,"src",n),At(l,"display","none"),c(f,"class",m="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(r[41]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"),c(f,"id","chat-container")},m(k,I){B(k,t,I),B(k,l,I),B(k,s,I),j(o,k,I),B(k,i,I),B(k,f,I),~u&&w[u].m(f,null),g=!0},p(k,I){(!g||I[1]&784)&&e!==(e=`
		`+(k[35].showChatTitleInTab!==!1&&k[39]?`${k[39].length>30?`${k[39].slice(0,30)}...`:k[39]}  ${k[40]}`:`${k[40]}`)+`
	`)&&(kr.title=e);const T={};I[0]&2048&&(T.title=k[11]),I[0]&4096&&(T.message=k[12]),I[0]&8192&&(T.input=k[13]),I[0]&16384&&(T.inputPlaceholder=k[14]),I[0]&32768&&(T.inputValue=k[15]),!a&&I[0]&1024&&(a=!0,T.show=k[10],je(()=>a=!1)),o.$set(T);let C=u;u=S(k),u===C?~u&&w[u].p(k,I):(h&&(ce(),$(w[C],1,1,()=>{w[C]=null}),ue()),~u?(h=w[u],h?h.p(k,I):(h=w[u]=_[u](k),h.c()),v(h,1),h.m(f,null)):h=null),(!g||I[1]&1024&&m!==(m="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(k[41]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"))&&c(f,"class",m)},i(k){g||(v(o.$$.fragment,k),v(h),g=!0)},o(k){$(o.$$.fragment,k),$(h),g=!1},d(k){k&&(d(t),d(l),d(s),d(i),d(f)),R(o,k),~u&&w[u].d()}}}const lp=5e3,np=()=>{};function rp(r,e,t){let l,n,s,o,a,i,f,u,h,m,g,b,p,_,w,S,k,I,T;Ee(r,ol,V=>t(31,n=V)),Ee(r,tl,V=>t(32,s=V)),Ee(r,pl,V=>t(33,o=V)),Ee(r,oi,V=>t(120,a=V)),Ee(r,Nl,V=>t(34,i=V)),Ee(r,Wt,V=>t(35,f=V)),Ee(r,ln,V=>t(36,u=V)),Ee(r,wl,V=>t(121,h=V)),Ee(r,$n,V=>t(37,m=V)),Ee(r,Pl,V=>t(38,g=V)),Ee(r,Xt,V=>t(122,b=V)),Ee(r,Lr,V=>t(123,p=V)),Ee(r,In,V=>t(124,_=V)),Ee(r,bl,V=>t(125,w=V)),Ee(r,gn,V=>t(126,S=V)),Ee(r,dn,V=>t(39,k=V)),Ee(r,ai,V=>t(40,I=V)),Ee(r,$r,V=>t(41,T=V));const C=Ot("i18n");Ee(r,C,V=>t(30,l=V));let{chatIdProp:N=""}=e,U=!0;const O=new EventTarget;let A,P,J,Z=!0,X,Q,re=!1,_e="",De="",x=!1,be="",Me="",oe=null,Je,le=[""],ee,Se=[],ne=[],q=[],Re=!1,ve=!1,se=!1,H=!1,We=!1,ut=null,et=null,K={messages:{},currentId:null},mt=null,pt="",ht=[],ie=[],Te={};const $t=async()=>{t(3,U=!0),t(26,pt=""),J==null||J.setText(""),t(28,ie=[]),t(17,ne=[]),t(18,q=[]),t(20,ve=!1),t(19,Re=!1);const V=sessionStorage.getItem(`chat-input${N?`-${N}`:""}`);if(N&&await Ut()){if(await qe(),t(3,U=!1),window.setTimeout(()=>bt(),0),await qe(),V)try{const te=JSON.parse(V);s||(J==null||J.setText(te.prompt),t(28,ie=te.files),t(17,ne=te.selectedToolIds),t(18,q=te.selectedFilterIds),t(20,ve=te.webSearchEnabled),t(19,Re=te.imageGenerationEnabled),t(21,se=te.codeInterpreterEnabled))}catch{}const Y=document.getElementById("chat-input");Y==null||Y.focus()}else await mn("/")},Bt=async V=>{const{type:Y,data:te}=V;Y==="prompt"&&(J==null||J.setText(te,async()=>{((f==null?void 0:f.insertSuggestionPrompt)??!1)||(await qe(),Ft(pt))}))},yt=()=>{const V=JSON.stringify(le);le.length===0||le.length===1&&le[0]===""||sessionStorage.selectedModels===V||(sessionStorage.selectedModels=V,sessionStorage.selectedModels)};let Vt=[""];const St=()=>{Vt.filter(V=>V).length>0&&fe(),t(65,Vt=Se)},fe=()=>{t(17,ne=[]),t(18,q=[]),t(20,ve=!1),t(19,Re=!1),t(21,se=!1),Ge()},Ge=async()=>{var Y,te,ge,de,ae,Ve,Fe,Qe,it,Ze,Ye,lt,dt,Nt,Dt,Lt,Zt;if(w||bl.set(await Cn(localStorage.token)),S||gn.set(await Da(localStorage.token)),le.length!==1&&!ee)return;const V=ee??u.find(Yt=>Yt.id===le[0]);V&&((te=(Y=V==null?void 0:V.info)==null?void 0:Y.meta)!=null&&te.toolIds&&t(17,ne=[...new Set([...((de=(ge=V==null?void 0:V.info)==null?void 0:ge.meta)==null?void 0:de.toolIds)??[]].filter(Yt=>w.find(Kt=>Kt.id===Yt)))]),(Ve=(ae=V==null?void 0:V.info)==null?void 0:ae.meta)!=null&&Ve.defaultFilterIds&&t(18,q=V.info.meta.defaultFilterIds.filter(Yt=>{var Kt;return(Kt=V==null?void 0:V.filters)==null?void 0:Kt.find(ml=>ml.id===Yt)})),(Qe=(Fe=V==null?void 0:V.info)==null?void 0:Fe.meta)!=null&&Qe.defaultFeatureIds&&((Ye=(Ze=(it=V.info)==null?void 0:it.meta)==null?void 0:Ze.capabilities)!=null&&Ye.image_generation&&t(19,Re=V.info.meta.defaultFeatureIds.includes("image_generation")),(Nt=(dt=(lt=V.info)==null?void 0:lt.meta)==null?void 0:dt.capabilities)!=null&&Nt.web_search&&t(20,ve=V.info.meta.defaultFeatureIds.includes("web_search")),(Zt=(Lt=(Dt=V.info)==null?void 0:Dt.meta)==null?void 0:Lt.capabilities)!=null&&Zt.code_interpreter&&t(21,se=V.info.meta.defaultFeatureIds.includes("code_interpreter"))))},at=async(V,Y=!1)=>{await qe();const te=JSON.parse(JSON.stringify(o));let ge=JSON.parse(JSON.stringify(V.id)),de=[];for(ge===null?de=Object.keys(K.messages).filter(ae=>K.messages[ae].parentId===null):de=K.messages[ge].childrenIds;de.length!==0;)ge=de.at(-1),de=K.messages[ge].childrenIds;if(t(24,K.currentId=ge,K),await qe(),await qe(),await qe(),((f==null?void 0:f.scrollOnBranchChange)??!0)||Y){const ae=document.getElementById(`message-${V.id}`);ae&&ae.scrollIntoView({behavior:"smooth"})}await qe(),Cl(te,K)},It=async(V,Y)=>{var te,ge;if(V.chat_id===o){await qe();let de=K.messages[V.message_id];if(de){const ae=((te=V==null?void 0:V.data)==null?void 0:te.type)??null,Ve=((ge=V==null?void 0:V.data)==null?void 0:ge.data)??null;if(ae==="status")de!=null&&de.statusHistory?de.statusHistory.push(Ve):de.statusHistory=[Ve];else if(ae==="chat:completion")Ht(Ve,de,V.chat_id);else if(ae==="chat:tasks:cancel"){t(25,mt=null);const Fe=K.messages[K.currentId];for(const Qe of K.messages[Fe.parentId].childrenIds)t(24,K.messages[Qe].done=!0,K)}else if(ae==="chat:message:delta"||ae==="message")de.content+=Ve.content;else if(ae==="chat:message"||ae==="replace")de.content=Ve.content;else if(ae==="chat:message:files"||ae==="files")de.files=Ve.files;else if(ae==="chat:message:embeds"||ae==="embeds")de.embeds=Ve.embeds;else if(ae==="chat:message:error")de.error=Ve.error;else if(ae==="chat:message:follow_ups")de.followUps=Ve.follow_ups,Z&&bt("smooth");else if(ae==="chat:title")dn.set(Ve),ol.set(1),await sl.set(await al(localStorage.token,n));else if(ae==="chat:tags")et=await Cr(localStorage.token,o),yr.set(await Ir(localStorage.token));else if(ae==="source"||ae==="citation")if((Ve==null?void 0:Ve.type)==="code_execution"){de!=null&&de.code_executions||(de.code_executions=[]);const Fe=de.code_executions.findIndex(Qe=>Qe.id===Ve.id);Fe!==-1?de.code_executions[Fe]=Ve:de.code_executions.push(Ve),de.code_executions=de.code_executions}else de!=null&&de.sources?de.sources.push(Ve):de.sources=[Ve];else if(ae==="notification"){const Fe=(Ve==null?void 0:Ve.type)??"info",Qe=(Ve==null?void 0:Ve.content)??"";Fe==="success"?Ue.success(Qe):Fe==="error"?Ue.error(Qe):Fe==="warning"?Ue.warning(Qe):Ue.info(Qe)}else if(ae==="confirmation")t(16,oe=Y),t(13,x=!1),t(10,re=!0),t(11,_e=Ve.title),t(12,De=Ve.message);else if(ae==="execute"){t(16,oe=Y);try{const Qe=await new Function(`return (async () => { ${Ve.code} })()`)();Y&&Y(Qe)}catch(Fe){}}else ae==="input"&&(t(16,oe=Y),t(13,x=!0),t(10,re=!0),t(11,_e=Ve.title),t(12,De=Ve.message),t(14,be=Ve.placeholder),t(15,Me=(Ve==null?void 0:Ve.value)??""));t(24,K.messages[V.message_id]=de,K)}}},zt=async V=>{if(V.origin===window.origin){if(V.data.type==="action:submit"&&(V.data.text,pt!==""&&(await qe(),Ft(pt))),V.data.type==="input:prompt"){V.data.text;const Y=document.getElementById("chat-input");Y&&(J==null||J.setText(V.data.text),Y.focus())}V.data.type==="input:prompt:submit"&&(V.data.text,V.data.text!==""&&(await qe(),Ft(V.data.text)))}},he=async()=>{var V;i&&le.filter(Y=>Y!=="").length>0&&JSON.stringify((V=i==null?void 0:i.data)==null?void 0:V.model_ids)!==JSON.stringify(le)&&await Sr(localStorage.token,i.id,{data:{model_ids:le}})};let Pe=null,Ae=null,Ke=null;vl(async()=>{t(3,U=!0),window.addEventListener("message",zt),a==null||a.on("events",It),Pe=Lr.subscribe(async te=>{te.url.pathname==="/"&&(await qe(),ct())});const V=sessionStorage.getItem(`chat-input${N?`-${N}`:""}`);if(N||(t(3,U=!1),await qe()),V){t(26,pt=""),J==null||J.setText(""),t(28,ie=[]),t(17,ne=[]),t(18,q=[]),t(20,ve=!1),t(19,Re=!1),t(21,se=!1);try{const te=JSON.parse(V);s||(J==null||J.setText(te.prompt),t(28,ie=te.files),t(17,ne=te.selectedToolIds),t(18,q=te.selectedFilterIds),t(20,ve=te.webSearchEnabled),t(19,Re=te.imageGenerationEnabled),t(21,se=te.codeInterpreterEnabled))}catch{}}Ae=Mt.subscribe(async te=>{if(A&&!_)try{te?P.openPane():A.collapse()}catch{}te||(Xt.set(!1),Ml.set(!1),_l.set(!1),Vl.set(!1))}),Ke=Nl.subscribe(async te=>{var ge;(ge=te==null?void 0:te.data)!=null&&ge.model_ids&&JSON.stringify(le)!==JSON.stringify(te.data.model_ids)&&t(0,le=te.data.model_ids)});const Y=document.getElementById("chat-input");Y==null||Y.focus()}),En(()=>{try{Pe(),Ae(),Ke(),Je==null||Je(),window.removeEventListener("message",zt),a==null||a.off("events",It)}catch(V){}});const gt=async V=>{var ge,de,ae,Ve,Fe,Qe;if(V.id,V.name,V.url,`${token}`,!(V!=null&&V.id)||!(V!=null&&V.name)||!(V!=null&&V.url)||!((ge=V==null?void 0:V.headers)!=null&&ge.Authorization))throw new Error("Invalid file data provided");const Y=el(),te={type:"file",file:"",id:null,url:V.url,name:V.name,collection_name:"",status:"uploading",error:"",itemId:Y,size:0};try{t(28,ie=[...ie,te]),V.url;const it={headers:{Authorization:V.headers.Authorization,Accept:"*/*"},method:"GET"},Ze=await fetch(V.url,it);if(!Ze.ok){const Lt=await Ze.text();throw new Error(`Failed to fetch file (${Ze.status}): ${Lt}`)}const Ye=Ze.headers.get("content-type")||"application/octet-stream",lt=await Ze.blob();if(lt.size===0)throw new Error("Retrieved file is empty");lt.size,lt.type;const dt=new File([lt],V.name,{type:lt.type||Ye});if(dt.name,dt.size,dt.type,dt.size===0)throw new Error("Created file is empty");let Nt=null;(dt.type.startsWith("audio/")||dt.type.startsWith("video/"))&&((ae=(de=f==null?void 0:f.audio)==null?void 0:de.stt)!=null&&ae.language)&&(Nt={language:(Fe=(Ve=f==null?void 0:f.audio)==null?void 0:Ve.stt)==null?void 0:Fe.language});const Dt=await pa(localStorage.token,dt,Nt);if(!Dt)throw new Error("Server returned null response for file upload");te.status="uploaded",te.file=Dt,te.id=Dt.id,te.size=dt.size,te.collection_name=(Qe=Dt==null?void 0:Dt.meta)==null?void 0:Qe.collection_name,te.url=`${WEBUI_API_BASE_URL}/files/${Dt.id}`,t(28,ie),Ue.success(l.t("File uploaded successfully"))}catch(it){t(28,ie=ie.filter(Ze=>Ze.itemId!==Y)),Ue.error(l.t("Error uploading file: {{error}}",{error:it.message||"Unknown error"}))}},_t=async V=>{const Y={type:"text",name:V,collection_name:"",status:"uploading",url:V,error:""};try{t(28,ie=[...ie,Y]);const te=await Ui(localStorage.token,"",V);te&&(Y.status="uploaded",Y.collection_name=te.collection_name,Y.file={...te.file,...Y.file},t(28,ie))}catch(te){t(28,ie=ie.filter(ge=>ge.name!==V)),Ue.error(JSON.stringify(te))}},Tt=async V=>{const Y={type:"text",name:V,collection_name:"",status:"uploading",context:"full",url:V,error:""};try{t(28,ie=[...ie,Y]);const te=await Pi(localStorage.token,V);te&&(Y.status="uploaded",Y.collection_name=te.collection_name,Y.file={...te.file,...Y.file},t(28,ie))}catch(te){t(28,ie=ie.filter(ge=>ge.name!==V)),Ue.error(`${te}`)}},ct=async()=>{var ge,de,ae,Ve,Fe,Qe,it;(h==null?void 0:h.role)!=="admin"&&((de=(ge=h==null?void 0:h.permissions)==null?void 0:ge.chat)!=null&&de.temporary_enforced)&&await tl.set(!0),((f==null?void 0:f.temporaryChatByDefault)??!1)&&(s===!1?await tl.set(!0):s===null&&await tl.set(!1));const V=u.filter(Ze=>{var Ye,lt;return!(((lt=(Ye=Ze==null?void 0:Ze.info)==null?void 0:Ye.meta)==null?void 0:lt.hidden)??!1)}).map(Ze=>Ze.id);if(p.url.searchParams.get("models")||p.url.searchParams.get("model")){const Ze=(ae=p.url.searchParams.get("models")||p.url.searchParams.get("model")||"")==null?void 0:ae.split(",");if(Ze.length===1)if(u.find(lt=>lt.id===Ze[0]))t(0,le=Ze);else{const lt=document.getElementById("model-selector-0-button");if(lt){lt.click(),await qe();const dt=document.getElementById("model-search-input");dt&&(dt.focus(),dt.value=Ze[0],dt.dispatchEvent(new Event("input")))}}else t(0,le=Ze);t(0,le=le.filter(Ye=>u.map(lt=>lt.id).includes(Ye)))}else(Ve=i==null?void 0:i.data)!=null&&Ve.model_ids?t(0,le=(Fe=i==null?void 0:i.data)==null?void 0:Fe.model_ids):sessionStorage.selectedModels?(t(0,le=JSON.parse(sessionStorage.selectedModels)),sessionStorage.removeItem("selectedModels")):f!=null&&f.models?t(0,le=f==null?void 0:f.models):g!=null&&g.default_models&&(g==null||g.default_models.split(","),t(0,le=g==null?void 0:g.default_models.split(","))),t(0,le=le.filter(Ze=>V.includes(Ze)));if((le.length===0||le.length===1&&le[0]==="")&&(V.length>0?t(0,le=[(V==null?void 0:V.at(0))??""]):t(0,le=[""])),await Mt.set(!1),await Xt.set(!1),await Ml.set(!1),await _l.set(!1),p.url.pathname.includes("/c/")&&window.history.replaceState(K.state,"","/"),t(7,Z=!0),fe(),await pl.set(""),await dn.set(""),t(24,K={messages:{},currentId:null}),t(27,ht=[]),t(29,Te={}),p.url.searchParams.get("youtube")&&Tt(`https://www.youtube.com/watch?v=${p.url.searchParams.get("youtube")}`),p.url.searchParams.get("load-url")&&await _t(p.url.searchParams.get("load-url")),p.url.searchParams.get("web-search")==="true"&&t(20,ve=!0),p.url.searchParams.get("image-generation")==="true"&&t(19,Re=!0),p.url.searchParams.get("code-interpreter")==="true"&&t(21,se=!0),p.url.searchParams.get("tools")?t(17,ne=(Qe=p.url.searchParams.get("tools"))==null?void 0:Qe.split(",").map(Ze=>Ze.trim()).filter(Ze=>Ze)):p.url.searchParams.get("tool-ids")&&t(17,ne=(it=p.url.searchParams.get("tool-ids"))==null?void 0:it.split(",").map(Ze=>Ze.trim()).filter(Ze=>Ze)),p.url.searchParams.get("call")==="true"&&(Xt.set(!0),Mt.set(!0)),p.url.searchParams.get("q")){const Ze=p.url.searchParams.get("q")??"";J==null||J.setText(Ze),Ze&&(p.url.searchParams.get("submit")??"true")==="true"&&(await qe(),Ft(Ze))}t(0,le=le.map(Ze=>u.map(Ye=>Ye.id).includes(Ze)?Ze:""));const Y=await Wr(localStorage.token);Y?Wt.set(Y.ui):Wt.set(JSON.parse(localStorage.getItem("settings")??"{}"));const te=document.getElementById("chat-input");setTimeout(()=>te==null?void 0:te.focus(),0)},Ut=async()=>{var V,Y;if(pl.set(N),s&&tl.set(!1),et=await Cr(localStorage.token,o).catch(async te=>(await mn("/"),null)),et){await da(localStorage.token,o).catch(async ge=>[]);const te=et.chat;if(te){t(0,le=((te==null?void 0:te.models)??void 0)!==void 0?te.models:[te.models??""]),(h==null?void 0:h.role)==="admin"||(((Y=(V=h==null?void 0:h.permissions)==null?void 0:V.chat)==null?void 0:Y.multiple_models)??!0)||t(0,le=le.length>0?[le[0]]:[""]),t(65,Vt=le),t(24,K=((te==null?void 0:te.history)??void 0)!==void 0?te.history:Ti(te.messages)),dn.set(te.title);const ge=await Wr(localStorage.token);if(ge?await Wt.set(ge.ui):await Wt.set(JSON.parse(localStorage.getItem("settings")??"{}")),t(29,Te=(te==null?void 0:te.params)??{}),t(27,ht=(te==null?void 0:te.files)??[]),t(7,Z=!0),await qe(),K.currentId)for(const ae of Object.values(K.messages))ae.role==="assistant"&&(ae.done=!0);const de=await Ri(localStorage.token,o).catch(ae=>null);return de&&t(25,mt=de.task_ids),await qe(),!0}else return null}},bt=async(V="auto")=>{await qe(),X&&X.scrollTo({top:X.scrollHeight,behavior:V})},rl=async(V,Y,te,ge)=>{const de=await Ji(localStorage.token,{model:Y,messages:ge.map(ae=>({id:ae.id,role:ae.role,content:ae.content,info:ae.info?ae.info:void 0,timestamp:ae.timestamp,...ae.usage?{usage:ae.usage}:{},...ae.sources?{sources:ae.sources}:{}})),filter_ids:q.length>0?q:void 0,model_item:u.find(ae=>ae.id===Y),chat_id:V,session_id:a==null?void 0:a.id,id:te}).catch(ae=>(Ue.error(`${ae}`),ge.at(-1).error={content:ae},null));if(de!==null&&de.messages)for(const ae of de.messages)ae!=null&&ae.id&&t(24,K.messages[ae.id]={...K.messages[ae.id],...K.messages[ae.id].content!==ae.content?{originalContent:K.messages[ae.id].content}:{},...ae},K);await qe(),o==V&&(s||(et=await Kl(localStorage.token,V,{models:le,messages:ge,history:K,params:Te,files:ht}),ol.set(1),await sl.set(await al(localStorage.token,n)))),t(25,mt=null)},xt=async(V,Y,te,ge,de=null)=>{const ae=jt(K,ge),Ve=await Hi(localStorage.token,Y,{model:te,messages:ae.map(Fe=>({id:Fe.id,role:Fe.role,content:Fe.content,info:Fe.info?Fe.info:void 0,timestamp:Fe.timestamp,...Fe.sources?{sources:Fe.sources}:{}})),...de?{event:de}:{},model_item:u.find(Fe=>Fe.id===te),chat_id:V,session_id:a==null?void 0:a.id,id:ge}).catch(Fe=>(Ue.error(`${Fe}`),ae.at(-1).error={content:Fe},null));if(Ve!==null&&Ve.messages)for(const Fe of Ve.messages)t(24,K.messages[Fe.id]={...K.messages[Fe.id],...K.messages[Fe.id].content!==Fe.content?{originalContent:K.messages[Fe.id].content}:{},...Fe},K);o==V&&(s||(et=await Kl(localStorage.token,V,{models:le,messages:ae,history:K,params:Te,files:ht}),ol.set(1),await sl.set(await al(localStorage.token,n))))},fl=async(V,Y="")=>setInterval(()=>{a==null||a.emit("usage",{action:"chat",model:V,chat_id:Y})},1e3),$l=async V=>{if(J==null||J.setText(""),le.length===0)Ue.error(l.t("Model not selected"));else{const Y=le[0],te=u.filter(it=>it.id===Y).at(0),ge=jt(K,K.currentId),de=ge.length!==0?ge.at(-1):null,ae=el(),Ve=el(),Fe={id:ae,parentId:de?de.id:null,childrenIds:[Ve],role:"user",content:V||`[PROMPT] ${ae}`,timestamp:Math.floor(Date.now()/1e3)},Qe={id:Ve,parentId:ae,childrenIds:[],role:"assistant",content:`[RESPONSE] ${Ve}`,done:!0,model:Y,modelName:te.name??te.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3)};de&&(de.childrenIds.push(ae),t(24,K.messages[de.id]=de,K)),t(24,K.messages[ae]=Fe,K),t(24,K.messages[Ve]=Qe,K),t(24,K.currentId=Ve,K),await qe(),Z&&bt(),ge.length===0?await Rl(K):await Cl(o,K)}},Il=async({modelId:V,parentId:Y,messages:te})=>{const ge=u.filter(Ve=>Ve.id===V).at(0);let de=K.messages[Y],ae=de?de.id:null;for(const Ve of te){let Fe=el();if(Ve.role==="user"){const Qe={id:Fe,parentId:ae,childrenIds:[],timestamp:Math.floor(Date.now()/1e3),...Ve};de&&(de.childrenIds.push(Fe),t(24,K.messages[de.id]=de,K)),t(24,K.messages[Fe]=Qe,K),de=Qe,ae=Fe}else{const Qe={id:Fe,parentId:ae,childrenIds:[],done:!0,model:ge.id,modelName:ge.name??ge.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3),...Ve};de&&(de.childrenIds.push(Fe),t(24,K.messages[de.id]=de,K)),t(24,K.messages[Fe]=Qe,K),de=Qe,ae=Fe}}t(24,K.currentId=ae,K),await qe(),Z&&bt(),te.length===0?await Rl(K):await Cl(o,K)},Ht=async(V,Y,te)=>{var Ye,lt,dt,Nt,Dt,Lt,Zt,Yt,Kt,ml,Gl,Jl,ql,Zl;const{id:ge,done:de,choices:ae,content:Ve,sources:Fe,selected_model_id:Qe,error:it,usage:Ze}=V;if(it&&await an(it,Y),Fe&&!(Y!=null&&Y.sources)&&(Y.sources=Fe),ae)if((lt=(Ye=ae[0])==null?void 0:Ye.message)!=null&&lt.content)Y.content+=(Nt=(dt=ae[0])==null?void 0:dt.message)==null?void 0:Nt.content;else{let ze=((Lt=(Dt=ae[0])==null?void 0:Dt.delta)==null?void 0:Lt.content)??"";if(!(Y.content==""&&ze==`
`)){Y.content+=ze,navigator.vibrate&&((f==null?void 0:f.hapticFeedback)??!1)&&navigator.vibrate(5);const kt=vr(wr(Y.content),((Yt=(Zt=g==null?void 0:g.audio)==null?void 0:Zt.tts)==null?void 0:Yt.split_on)??"punctuation");kt.pop(),kt.length>0&&kt[kt.length-1]!==Y.lastSentence&&(Y.lastSentence=kt[kt.length-1],O.dispatchEvent(new CustomEvent("chat",{detail:{id:Y.id,content:kt[kt.length-1]}})))}}if(Ve){Y.content=Ve,navigator.vibrate&&((f==null?void 0:f.hapticFeedback)??!1)&&navigator.vibrate(5);const ze=vr(wr(Y.content),((ml=(Kt=g==null?void 0:g.audio)==null?void 0:Kt.tts)==null?void 0:ml.split_on)??"punctuation");ze.pop(),ze.length>0&&ze[ze.length-1]!==Y.lastSentence&&(Y.lastSentence=ze[ze.length-1],O.dispatchEvent(new CustomEvent("chat",{detail:{id:Y.id,content:ze[ze.length-1]}})))}if(Qe&&(Y.selectedModelId=Qe,Y.arena=!0),Ze&&(Y.usage=Ze),t(24,K.messages[Y.id]=Y,K),de){Y.done=!0,f.responseAutoCopy&&Vr(Y.content),f.responseAutoPlayback&&!b&&(await qe(),(Gl=document.getElementById(`speak-button-${Y.id}`))==null||Gl.click());let ze=((Zl=vr(wr(Y.content),((ql=(Jl=g==null?void 0:g.audio)==null?void 0:Jl.tts)==null?void 0:ql.split_on)??"punctuation"))==null?void 0:Zl.at(-1))??"";ze&&O.dispatchEvent(new CustomEvent("chat",{detail:{id:Y.id,content:ze}})),O.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:Y.id,content:Y.content}})),t(24,K.messages[Y.id]=Y,K),await qe(),Z&&bt(),await rl(te,Y.model,Y.id,jt(K,Y.id))}await qe(),Z&&bt()},Ft=async(V,{_raw:Y=!1}={})=>{var Qe,it,Ze;const te=le.map(Ye=>u.map(lt=>lt.id).includes(Ye)?Ye:"");if(JSON.stringify(le)!==JSON.stringify(te)&&t(0,le=te),V===""&&ie.length===0){Ue.error(l.t("Please enter a prompt"));return}if(le.includes("")){Ue.error(l.t("Model not selected"));return}if(ie.length>0&&ie.filter(Ye=>Ye.type!=="image"&&Ye.status==="uploading").length>0){Ue.error(l.t("Oops! There are files still uploading. Please wait for the upload to complete."));return}if((((Qe=g==null?void 0:g.file)==null?void 0:Qe.max_count)??null)!==null&&ie.length+ht.length>((it=g==null?void 0:g.file)==null?void 0:it.max_count)){Ue.error(l.t("You can only chat with a maximum of {{maxCount}} file(s) at a time.",{maxCount:(Ze=g==null?void 0:g.file)==null?void 0:Ze.max_count}));return}if(K!=null&&K.currentId){const Ye=K.messages[K.currentId];if(Ye.done!=!0)return;if(Ye.error&&!Ye.content){Ue.error(l.t("Oops! There was an error in the previous response."));return}}J==null||J.setText(""),t(26,pt="");const ge=jt(K,K.currentId),de=JSON.parse(JSON.stringify(ie));ht.push(...de.filter(Ye=>["doc","text","file","note","chat","folder","collection"].includes(Ye.type))),t(27,ht=ht.filter((Ye,lt,dt)=>dt.findIndex(Nt=>JSON.stringify(Nt)===JSON.stringify(Ye))===lt)),t(28,ie=[]),J==null||J.setText("");let ae=el(),Ve={id:ae,parentId:ge.length!==0?ge.at(-1).id:null,childrenIds:[],role:"user",content:V,files:de.length>0?de:void 0,timestamp:Math.floor(Date.now()/1e3),models:le};t(24,K.messages[ae]=Ve,K),t(24,K.currentId=ae,K),ge.length!==0&&K.messages[ge.at(-1).id].childrenIds.push(ae);const Fe=document.getElementById("chat-input");Fe==null||Fe.focus(),yt(),await Ol(K,ae,{newChat:!0})},jl=async()=>{var V;if(!Te.system||Te.system.trim()===""){Ue.error(l.t("Please enter a system prompt first"));return}if(le.length===0||le[0]===""){Ue.error(l.t("Model not selected"));return}try{const Y=jt(K,K.currentId);let te=`<|start_header_id|>system<|end_header_id|>
${Te.system}<|eot_id|>`;for(const de of Y)de.role==="user"?te+=`<|start_header_id|>user<|end_header_id|>
${de.content}<|eot_id|>`:de.role==="assistant"&&(te+=`<|start_header_id|>assistant<|end_header_id|>
${de.content}<|eot_id|>`);te+=`<|start_header_id|>user<|end_header_id|>
`;const ge=await Ai(localStorage.token,{model:le[0],prompt:te,max_tokens:256,temperature:1,top_p:.8,stop:["<|eot_id|>","<|endconversation|>"]});if(ge&&ge.choices&&((V=ge.choices[0])!=null&&V.text)){const de=ge.choices[0].text.trim();let ae=el(),Ve={id:ae,parentId:Y.length!==0?Y.at(-1).id:null,childrenIds:[],role:"user",content:de,timestamp:Math.floor(Date.now()/1e3),models:le};t(24,K.messages[ae]=Ve,K),t(24,K.currentId=ae,K),Y.length!==0&&K.messages[Y.at(-1).id].childrenIds.push(ae),await qe(),Z&&bt(),Ue.success(l.t("User turn generated successfully"))}}catch(Y){Ue.error(l.t("Failed to generate user turn: ")+((Y==null?void 0:Y.message)||Y))}},Ol=async(V,Y,{messages:te=null,modelId:ge=null,modelIdx:de=null,newChat:ae=!1}={})=>{Z&&bt();let Ve=JSON.parse(JSON.stringify(o));V=JSON.parse(JSON.stringify(V));const Fe={};let Qe=ge?[ge]:ee!==void 0?[ee.id]:le;for(const[it,Ze]of Qe.entries()){const Ye=u.filter(lt=>lt.id===Ze).at(0);if(Ye){let lt=el(),dt={parentId:Y,id:lt,childrenIds:[],role:"assistant",content:"",model:Ye.id,modelName:Ye.name??Ye.id,modelIdx:de||it,timestamp:Math.floor(Date.now()/1e3)};t(24,K.messages[lt]=dt,K),t(24,K.currentId=lt,K),Y!==null&&K.messages[Y]&&t(24,K.messages[Y].childrenIds=[...K.messages[Y].childrenIds,lt],K),Fe[`${Ze}-${de||it}`]=lt}}t(24,K),ae&&V.messages[V.currentId].parentId===null&&(Ve=await Rl(V)),await qe(),V=JSON.parse(JSON.stringify(K)),await Cl(Ve,V),await Promise.all(Qe.map(async(it,Ze)=>{var lt,dt,Nt;const Ye=u.filter(Dt=>Dt.id===it).at(0);if(Ye){jt(V,Y).some(Yt=>{var Kt;return(Kt=Yt.files)==null?void 0:Kt.some(ml=>ml.type==="image")})&&!(((Nt=(dt=(lt=Ye.info)==null?void 0:lt.meta)==null?void 0:dt.capabilities)==null?void 0:Nt.vision)??!0)&&Ue.error(l.t("Model {{modelName}} is not vision capable",{modelName:Ye.name??Ye.id}));let Lt=Fe[`${it}-${de||Ze}`];const Zt=await fl(Ye.id,Ve);bt(),await on(Ye,te&&te.length>0?te:jt(V,Lt),V,Lt),Zt&&clearInterval(Zt)}else Ue.error(l.t("Model {{modelId}} not found",{modelId:it}))})),ol.set(1),sl.set(await al(localStorage.token,n))},Vn=()=>{var te,ge,de,ae,Ve,Fe,Qe,it,Ze,Ye;let V={};g!=null&&g.features&&(V={image_generation:(te=g==null?void 0:g.features)!=null&&te.enable_image_generation&&((h==null?void 0:h.role)==="admin"||(de=(ge=h==null?void 0:h.permissions)==null?void 0:ge.features)!=null&&de.image_generation)?Re:!1,code_interpreter:(ae=g==null?void 0:g.features)!=null&&ae.enable_code_interpreter&&((h==null?void 0:h.role)==="admin"||(Fe=(Ve=h==null?void 0:h.permissions)==null?void 0:Ve.features)!=null&&Fe.code_interpreter)?se:!1,web_search:(Qe=g==null?void 0:g.features)!=null&&Qe.enable_web_search&&((h==null?void 0:h.role)==="admin"||(Ze=(it=h==null?void 0:h.permissions)==null?void 0:it.features)!=null&&Ze.web_search)?ve:!1});const Y=ee!=null&&ee.id?[ee.id]:le;return Y.filter(lt=>{var dt,Nt,Dt,Lt;return((Lt=(Dt=(Nt=(dt=u.find(Zt=>Zt.id===lt))==null?void 0:dt.info)==null?void 0:Nt.meta)==null?void 0:Dt.capabilities)==null?void 0:Lt.web_search)??!0}).length===Y.length&&(Ye=g==null?void 0:g.features)!=null&&Ye.enable_web_search&&((f==null?void 0:f.webSearch)??!1)==="always"&&(V={...V,web_search:!0}),((f==null?void 0:f.memory)??!1)&&(V={...V,memory:!0}),V},on=async(V,Y,te,ge,de)=>{var Dt,Lt,Zt,Yt,Kt,ml,Gl,Jl,ql,Zl;const ae=te.messages[ge],Ve=te.messages[ae.parentId],Fe=Y.filter(ze=>ze.files).flatMap(ze=>ze.files);t(27,ht=ht.filter(ze=>Fe.some(Tl=>Tl.id===ze.id)));let Qe=JSON.parse(JSON.stringify(ht));Qe.push(...((Ve==null?void 0:Ve.files)??[]).filter(ze=>["doc","text","file","note","chat","collection"].includes(ze.type))),Qe=Qe.filter((ze,kt,Tl)=>Tl.findIndex(fn=>JSON.stringify(fn)===JSON.stringify(ze))===kt),bt(),O.dispatchEvent(new CustomEvent("chat:start",{detail:{id:ge}})),await qe();let it;f!=null&&f.userLocation&&(it=await Fi(localStorage.token).catch(ze=>{}));const Ze=((Lt=(Dt=V==null?void 0:V.info)==null?void 0:Dt.params)==null?void 0:Lt.stream_response)??((Zt=f==null?void 0:f.params)==null?void 0:Zt.stream_response)??(Te==null?void 0:Te.stream_response)??!0;let Ye=[Te!=null&&Te.system||f.system?{role:"system",content:`${(Te==null?void 0:Te.system)??(f==null?void 0:f.system)??""}`}:void 0,...Y.map(ze=>({...ze,content:Ci(ze.content)}))].filter(ze=>ze);Ye=Ye.map((ze,kt,Tl)=>{var fn,Ur,Pr;return{role:ze.role,...((fn=ze.files)==null?void 0:fn.filter(Yl=>Yl.type==="image").length)>0&&ze.role==="user"?{content:[{type:"text",text:((Ur=ze==null?void 0:ze.merged)==null?void 0:Ur.content)??ze.content},...ze.files.filter(Yl=>Yl.type==="image").map(Yl=>({type:"image_url",image_url:{url:Yl.url}}))]}:{content:((Pr=ze==null?void 0:ze.merged)==null?void 0:Pr.content)??ze.content}}}).filter(ze=>{var kt;return(ze==null?void 0:ze.role)==="user"||((kt=ze==null?void 0:ze.content)==null?void 0:kt.trim())});const lt=[],dt=[];for(const ze of ne)if(ze.startsWith("direct_server:")){let kt=ze.replace("direct_server:","");isNaN(parseInt(kt))?dt.push(kt):dt.push(parseInt(kt))}else lt.push(ze);const Nt=await zi(localStorage.token,{stream:Ze,model:V.id,messages:Ye,params:{...f==null?void 0:f.params,...Te,stop:(Te==null?void 0:Te.stop)??((Yt=f==null?void 0:f.params)==null?void 0:Yt.stop)??void 0?((Te==null?void 0:Te.stop.split(",").map(ze=>ze.trim()))??f.params.stop).map(ze=>decodeURIComponent(JSON.parse('"'+ze.replace(/\"/g,'\\"')+'"'))):void 0},files:((Qe==null?void 0:Qe.length)??0)>0?Qe:void 0,filter_ids:q.length>0?q:void 0,tool_ids:lt.length>0?lt:void 0,tool_servers:(m??[]).filter((ze,kt)=>dt.includes(kt)||dt.includes(ze==null?void 0:ze.id)),features:Vn(),variables:{...Si(h==null?void 0:h.name,f!=null&&f.userLocation?it:void 0)},model_item:u.find(ze=>ze.id===V.id),session_id:a==null?void 0:a.id,chat_id:o,id:ge,background_tasks:{...!s&&(Ye.length==1||Ye.length==2&&((Kt=Ye.at(0))==null?void 0:Kt.role)==="system"&&((ml=Ye.at(1))==null?void 0:ml.role)==="user")&&(le[0]===V.id||ee!==void 0)?{title_generation:((Gl=f==null?void 0:f.title)==null?void 0:Gl.auto)??!0,tags_generation:(f==null?void 0:f.autoTags)??!0}:{},follow_up_generation:(f==null?void 0:f.autoFollowUps)??!0},...Ze&&(((Zl=(ql=(Jl=V.info)==null?void 0:Jl.meta)==null?void 0:ql.capabilities)==null?void 0:Zl.usage)??!1)?{stream_options:{include_usage:!0}}:{}},`${gl}/api`).catch(async ze=>{var Tl;let kt=ze;return(Tl=ze==null?void 0:ze.error)!=null&&Tl.message?kt=ze.error.message:ze!=null&&ze.message&&(kt=ze.message),typeof kt=="object"&&(kt=l.t("Uh-oh! There was an issue with the response.")),Ue.error(`${kt}`),ae.error={content:ze},ae.done=!0,t(24,K.messages[ge]=ae,K),t(24,K.currentId=ge,K),null});Nt&&(Nt.error?await an(Nt.error,ae):mt?mt.push(Nt.task_id):t(25,mt=[Nt.task_id])),await qe(),bt()},an=async(V,Y)=>{let te="",ge;V&&(ge=V),"detail"in ge?(Ue.error(ge.detail),te=ge.detail):"error"in ge?"message"in ge.error?(Ue.error(ge.error.message),te=ge.error.message):(Ue.error(ge.error),te=ge.error):"message"in ge&&(Ue.error(ge.message),te=ge.message),Y.error={content:l.t("Uh-oh! There was an issue with the response.")+`
`+te},Y.done=!0,Y.statusHistory&&(Y.statusHistory=Y.statusHistory.filter(de=>de.action!=="knowledge_search")),t(24,K.messages[Y.id]=Y,K)},Nn=async()=>{if(mt){for(const Y of mt)await Wi(localStorage.token,Y).catch(te=>(Ue.error(`${te}`),null));t(25,mt=null);const V=K.messages[K.currentId];for(const Y of K.messages[V.parentId].childrenIds)t(24,K.messages[Y].done=!0,K);t(24,K.messages[K.currentId]=V,K),Z&&bt()}We&&(t(23,We=!1),ut==null||ut.abort(),ut=null)},Bn=async(V,Y)=>{let te=Y,ge=el(),de={id:ge,parentId:V,childrenIds:[],role:"user",content:te,models:le,timestamp:Math.floor(Date.now()/1e3)};V!==null&&t(24,K.messages[V].childrenIds=[...K.messages[V].childrenIds,ge],K),t(24,K.messages[ge]=de,K),t(24,K.currentId=ge,K),await qe(),Z&&bt(),await Ol(K,ge)},On=async(V,Y=null)=>{if(K.currentId){let te=K.messages[V.parentId];Z&&bt(),await Ol(K,te.id,{...Y?{messages:[...jt(K,V.id),{role:"user",content:Y}]}:{},...((te==null?void 0:te.models)??[...le]).length>1?{modelId:V.model,modelIdx:V.modelIdx}:{}})}},zn=async()=>{if(JSON.parse(JSON.stringify(o)),K.currentId&&K.messages[K.currentId].done==!0){const V=K.messages[K.currentId];V.done=!1,await qe();const Y=u.filter(te=>te.id===((V==null?void 0:V.selectedModelId)??V.model)).at(0);Y&&await on(Y,jt(K,V.id),K,V.id)}},An=async(V,Y,te)=>{const ge=K.messages[V],de={status:!0,content:""};ge.merged=de,t(24,K.messages[V]=ge,K);try{t(23,We=!0);const[ae,Ve]=await Gi(localStorage.token,ge.model,K.messages[ge.parentId].content,Y);if(ae&&ae.ok&&ae.body&&We){ut=Ve;const Fe=await Lf(ae.body,f.splitLargeChunks);for await(const Qe of Fe){const{value:it,done:Ze,sources:Ye,error:lt,usage:dt}=Qe;if(lt||Ze){t(23,We=!1),ut=null;break}de.content==""&&it==`
`||(de.content+=it,t(24,K.messages[V]=ge,K),Z&&bt())}await Cl(te,K)}}catch(ae){}},Rl=async V=>{let Y=o;return s?(Y=`local:${a==null?void 0:a.id}`,await pl.set(Y)):(et=await Rr(localStorage.token,{id:Y,title:l.t("New Chat"),models:le,system:f.system??void 0,params:Te,history:V,messages:jt(V,V.currentId),tags:[],timestamp:Date.now()},i==null?void 0:i.id),Y=et.id,await pl.set(Y),window.history.replaceState(V.state,"",`/c/${Y}`),await qe(),await sl.set(await al(localStorage.token,n)),ol.set(1),Nl.set(null)),await qe(),Y},Cl=async(V,Y)=>{o==V&&(s||(et=await Kl(localStorage.token,V,{models:le,history:Y,messages:jt(Y,Y.currentId),params:Te,files:ht}),ol.set(1),await sl.set(await al(localStorage.token,n))))};let Sl=null;const Hl=async(V,Y=null)=>{Sl&&clearTimeout(Sl),V.prompt!==null&&V.prompt.length<lp?Sl=setTimeout(async()=>{await sessionStorage.setItem(`chat-input${Y?`-${Y}`:""}`,JSON.stringify(V))},500):sessionStorage.removeItem(`chat-input${Y?`-${Y}`:""}`)},Wl=async(V=null)=>{Sl&&clearTimeout(Sl),await sessionStorage.removeItem(`chat-input${V?`-${V}`:""}`)},Un=async(V,Y)=>{V&&Y?await Bi(localStorage.token,V,Y).catch(ge=>(Ue.error(`${ge}`),null))&&(ol.set(1),await sl.set(await al(localStorage.token,n)),await ii.set(await Oi(localStorage.token)),Ue.success(l.t("Chat moved successfully"))):Ue.error(l.t("Failed to move chat"))};function Pn(V){re=V,t(10,re)}const Fn=V=>{V.detail?oe(V.detail):oe(!0)},Ln=()=>{oe(!1)},jn=async()=>{var V;try{if(!(K!=null&&K.currentId)||!Object.keys(K.messages).length){Ue.error(l.t("No conversation to save"));return}const Y=jt(K,K.currentId),te=((V=Y.find(de=>de.role==="user"))==null?void 0:V.content)??l.t("New Chat"),ge=await Rr(localStorage.token,{id:el(),title:te.length>50?`${te.slice(0,50)}...`:te,models:le,history:K,messages:Y,timestamp:Date.now()},null);ge&&(tl.set(!1),pl.set(ge.id),sl.set(await al(localStorage.token,n)),await mn(`/c/${ge.id}`),Ue.success(l.t("Conversation saved successfully")))}catch(Y){Ue.error(l.t("Failed to save conversation"))}};function Rn(V){Be[V?"unshift":"push"](()=>{Q=V,t(9,Q)})}function Hn(V){le=V,t(0,le)}const Wn=V=>{J==null||J.setText(V)};function Gn(V){K=V,t(24,K)}function Jn(V){Z=V,t(7,Z)}function qn(V){pt=V,t(26,pt)}function Zn(V){Be[V?"unshift":"push"](()=>{X=V,t(8,X)})}const Yn=V=>{t(7,Z=X.scrollHeight-X.scrollTop<=X.clientHeight+5)},Kn=V=>{s||Hl(V,o)};function Xn(V){Be[V?"unshift":"push"](()=>{J=V,t(6,J)})}function Qn(V){ie=V,t(28,ie)}function xn(V){pt=V,t(26,pt)}function er(V){Z=V,t(7,Z)}function tr(V){ne=V,t(17,ne)}function lr(V){q=V,t(18,q)}function nr(V){Re=V,t(19,Re)}function rr(V){se=V,t(21,se)}function sr(V){ve=V,t(20,ve)}function or(V){ee=V,t(1,ee)}function ar(V){H=V,t(22,H)}const ir=async V=>{const{type:Y,data:te}=V.detail;Y==="web"?await _t(te):Y==="youtube"?await Tt(te):Y==="google-drive"&&await gt(te)},fr=async V=>{Wl(),(V.detail||ie.length>0)&&(await qe(),Ft(V.detail.replaceAll(`

`,`
`)))},cr=V=>{s||Hl(V)};function ur(V){J=V,t(6,J)}function dr(V){ie=V,t(28,ie)}function hr(V){pt=V,t(26,pt)}function mr(V){Z=V,t(7,Z)}function pr(V){ne=V,t(17,ne)}function gr(V){q=V,t(18,q)}function z(V){Re=V,t(19,Re)}function pe(V){se=V,t(21,se)}function ye(V){ve=V,t(20,ve)}function He(V){ee=V,t(1,ee)}function Xe(V){H=V,t(22,H)}const Et=async V=>{const{type:Y,data:te}=V.detail;Y==="web"?await _t(te):Y==="youtube"&&await Tt(te)},Jt=async V=>{Wl(),(V.detail||ie.length>0)&&(await qe(),Ft(V.detail.replaceAll(`

`,`
`)))},qt=(V,Y,te,ge)=>{const de=u.find(ae=>ae.id===Y);return de?[...V,de]:V};function cl(V){Be[V?"unshift":"push"](()=>{P=V,t(5,P)})}function Ct(V){K=V,t(24,K)}function wt(V){ht=V,t(27,ht)}function vt(V){Te=V,t(29,Te)}function rt(V){ie=V,t(28,ie)}function xe(V){A=V,t(4,A)}return r.$$set=V=>{"chatIdProp"in V&&t(64,N=V.chatIdProp)},r.$$.update=()=>{r.$$.dirty[0]&3&&t(2,Se=ee!==void 0?[ee.id]:le),r.$$.dirty[2]&4&&N&&$t(),r.$$.dirty[0]&1|r.$$.dirty[2]&4&&le&&N!==""&&yt(),r.$$.dirty[0]&4|r.$$.dirty[2]&8&&JSON.stringify(Se)!==JSON.stringify(Vt)&&St(),r.$$.dirty[0]&1&&le!==null&&he()},[le,ee,Se,U,A,P,J,Z,X,Q,re,_e,De,x,be,Me,oe,ne,q,Re,ve,se,H,We,K,mt,pt,ht,ie,Te,l,n,s,o,i,f,u,m,g,k,I,T,C,O,Bt,at,gt,_t,Tt,ct,xt,$l,Il,Ft,jl,Ol,Nn,Bn,On,zn,An,Hl,Wl,Un,N,Vt,Pn,Fn,Ln,jn,Rn,Hn,Wn,Gn,Jn,qn,Zn,Yn,Kn,Xn,Qn,xn,er,tr,lr,nr,rr,sr,or,ar,ir,fr,cr,ur,dr,hr,mr,pr,gr,z,pe,ye,He,Xe,Et,Jt,qt,cl,Ct,wt,vt,rt,xe]}class pg extends st{constructor(e){super(),ot(this,e,rp,tp,nt,{chatIdProp:64},null,[-1,-1,-1,-1,-1])}}export{pg as C};
//# sourceMappingURL=DqqJ8Gp7.js.map
