var oi=Object.defineProperty;var fi=(n,e,t)=>e in n?oi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var kt=(n,e,t)=>fi(n,typeof e!="symbol"?e+"":e,t);import{S as Ae,i as ze,s as Pe,l as j,e as I,t as W,C as Y,p as A,c as M,a as k,b as F,d as m,D as le,f as d,g as y,h as p,E as $,L as ot,G as ue,j as K,q as b,r as w,F as x,a0 as Ge,X as rt,k as Te,v as Ze,N as Bt,w as Mt,H as Je,I as xe,K as et,x as _r,z as pr,A as br,B as vr,y as ee,u as te,T as ht,m as ie,U as ft,n as Be,a2 as Ht,_ as kr,M as Re,V as me,W as ge,a6 as wl,ak as ui,Q as Dt,a4 as Tt,O as ci,P as di}from"./BsAB9Z30.js";import{e as Ne,u as yt,o as St,d as hi}from"./BjVHJN9o.js";import"./IHki7fMi.js";import{d as Et,e as Il,H as Xt,J as wr,K as mi,j as Ir,r as gi,m as Mr,a as bt,L as Ml,N as _i,P as pi,c as yr,T as yl,u as qt,E as $t,g as $e,W as bi,b as El,D as Cl,G as vi}from"./Px_ajtSr.js";import{t as Fe}from"./DQjSdZ1e.js";import{a as ki,u as wi,e as Ii}from"./B26fW9V3.js";import{b as Yt,H as Nl,i as Er,I as Mi,z as wt,F as It,l as Cr,m as Ut,v as Dl}from"./C06TgqeF.js";import{d as He}from"./I1CDPYOB.js";import"./BFK-koEx.js";import{u as Tl,c as yi}from"./UZ0K5Azy.js";import{d as Ei}from"./BAwefT_m.js";import{s as Ci}from"./CsB0EUwg.js";import{i as Ni}from"./1tD_ufw0.js";import{P as Nr,N as xt}from"./X57m8tU6.js";import{S as el}from"./BO0KuA--.js";import{C as Di,b as Ti,c as Vi,d as Bi,M as Ot,F as Si,I as tl,B as Oi}from"./Do3D_Int.js";import{T as Le}from"./cMkWkffq.js";import{T as Ri}from"./Du5aQI1I.js";import{X as Wt}from"./CubwYUHd.js";import"./BXP-4RTu.js";import"./BQWQRICs.js";import{f as Vt}from"./CCuVEwBR.js";import"./5-chS5bE.js";import"./BFmuJLeH.js";import"./CgqN014N.js";import"./BYfvXhfD.js";import{S as Pi}from"./C8iviNoy.js";import{C as Dr}from"./B3qUBvVu.js";import{M as Tr}from"./C_R67QgC.js";import{T as Li}from"./DmxdQp_j.js";import{S as ll}from"./CbQmQGdd.js";import{B as sl}from"./HNTRN4uT.js";import{C as ji}from"./C5K_OTdC.js";import{E as Ai}from"./BNJXXAzR.js";import{c as zi}from"./BhhYmb9i.js";import{C as Hi,F as nl}from"./C-kfCiLr.js";import{b as Ui,c as Ft}from"./fl9Qo3pM.js";import{f as qi}from"./g5t9vw8M.js";import{D as Wi}from"./ozVhkuYd.js";import{C as Fi}from"./BjfKCu6r.js";import{C as Ji}from"./Cbzj8oLO.js";import{S as rl}from"./D9KdRKiL.js";import"./B1Cj3nBs.js";import{L as Gi}from"./LNJKunkS.js";import{F as Zi}from"./CU2r43ac.js";import{E as Ki}from"./CPRxkh2D.js";function Vl(n,e,t){const l=n.slice();return l[23]=e[t],l}function Bl(n,e,t){const l=n.slice();return l[26]=e[t],l}function Sl(n){var s;let e,t=n[8].t('This response was generated by "{{model}}"',{model:n[7]?((s=n[7])==null?void 0:s.name)??n[7].id:n[1].selectedModelId})+"",l;return{c(){e=I("div"),l=W(t),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);l=F(o,t),o.forEach(m),this.h()},h(){d(e,"class","text-xs font-medium pt-1.5 -mb-0.5")},m(r,o){y(r,e,o),p(e,l)},p(r,o){var a;o&386&&t!==(t=r[8].t('This response was generated by "{{model}}"',{model:r[7]?((a=r[7])==null?void 0:a.name)??r[7].id:r[1].selectedModelId})+"")&&K(l,t)},d(r){r&&m(e)}}}function Ol(n){let e,t=n[26]+"",l,s,r,o,a,i;function f(){return n[12](n[26])}return{c(){e=I("button"),l=W(t),s=j(),this.h()},l(u){e=M(u,"BUTTON",{class:!0});var c=k(e);l=F(c,t),s=A(c),c.forEach(m),this.h()},h(){var u,c;d(e,"class",r="size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(n[6]===n[26]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900"),e.disabled=o=((c=(u=n[1])==null?void 0:u.annotation)==null?void 0:c.rating)===-1?n[26]>5:n[26]<6},m(u,c){y(u,e,c),p(e,l),p(e,s),a||(i=ue(e,"click",f),a=!0)},p(u,c){var g,h;n=u,c&64&&r!==(r="size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(n[6]===n[26]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900")&&d(e,"class",r),c&2&&o!==(o=((h=(g=n[1])==null?void 0:g.annotation)==null?void 0:h.rating)===-1?n[26]>5:n[26]<6)&&(e.disabled=o)},d(u){u&&m(e),a=!1,i()}}}function Rl(n){let e,t=n[8].t("Why?")+"",l,s,r,o=Ne(n[3]),a=[];for(let i=0;i<o.length;i+=1)a[i]=Pl(Vl(n,o,i));return{c(){e=I("div"),l=W(t),s=j(),r=I("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);l=F(f,t),f.forEach(m),s=A(i),r=M(i,"DIV",{class:!0});var u=k(r);for(let c=0;c<a.length;c+=1)a[c].l(u);u.forEach(m),this.h()},h(){d(e,"class","text-sm mt-1.5 font-medium"),d(r,"class","flex flex-wrap gap-1.5 text-sm mt-1.5")},m(i,f){y(i,e,f),p(e,l),y(i,s,f),y(i,r,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null)},p(i,f){if(f&256&&t!==(t=i[8].t("Why?")+"")&&K(l,t),f&280){o=Ne(i[3]);let u;for(u=0;u<o.length;u+=1){const c=Vl(i,o,u);a[u]?a[u].p(c,f):(a[u]=Pl(c),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},d(i){i&&(m(e),m(s),m(r)),Ge(a,i)}}}function Qi(n){let e=n[23]+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&8&&e!==(e=l[23]+"")&&K(t,e)},d(l){l&&m(t)}}}function Xi(n){let e=n[8].t("Other")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Other")+"")&&K(t,e)},d(l){l&&m(t)}}}function Yi(n){let e=n[8].t("Being lazy")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Being lazy")+"")&&K(t,e)},d(l){l&&m(t)}}}function $i(n){let e=n[8].t("Refused when it shouldn't have")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Refused when it shouldn't have")+"")&&K(t,e)},d(l){l&&m(t)}}}function xi(n){let e=n[8].t("Didn't fully follow instructions")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Didn't fully follow instructions")+"")&&K(t,e)},d(l){l&&m(t)}}}function ea(n){let e=n[8].t("Not factually correct")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Not factually correct")+"")&&K(t,e)},d(l){l&&m(t)}}}function ta(n){let e=n[8].t("Not helpful")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Not helpful")+"")&&K(t,e)},d(l){l&&m(t)}}}function la(n){let e=n[8].t("Too verbose")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Too verbose")+"")&&K(t,e)},d(l){l&&m(t)}}}function sa(n){let e=n[8].t("Don't like the style")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Don't like the style")+"")&&K(t,e)},d(l){l&&m(t)}}}function na(n){let e=n[8].t("Thorough explanation")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Thorough explanation")+"")&&K(t,e)},d(l){l&&m(t)}}}function ra(n){let e=n[8].t("Attention to detail")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Attention to detail")+"")&&K(t,e)},d(l){l&&m(t)}}}function ia(n){let e=n[8].t("Positive attitude")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Positive attitude")+"")&&K(t,e)},d(l){l&&m(t)}}}function aa(n){let e=n[8].t("Showcased creativity")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Showcased creativity")+"")&&K(t,e)},d(l){l&&m(t)}}}function oa(n){let e=n[8].t("Followed instructions perfectly")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Followed instructions perfectly")+"")&&K(t,e)},d(l){l&&m(t)}}}function fa(n){let e=n[8].t("Accurate information")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Accurate information")+"")&&K(t,e)},d(l){l&&m(t)}}}function Pl(n){let e,t,l,s,r;function o(u,c){return u[23]==="accurate_information"?fa:u[23]==="followed_instructions_perfectly"?oa:u[23]==="showcased_creativity"?aa:u[23]==="positive_attitude"?ia:u[23]==="attention_to_detail"?ra:u[23]==="thorough_explanation"?na:u[23]==="dont_like_the_style"?sa:u[23]==="too_verbose"?la:u[23]==="not_helpful"?ta:u[23]==="not_factually_correct"?ea:u[23]==="didnt_fully_follow_instructions"?xi:u[23]==="refused_when_it_shouldnt_have"?$i:u[23]==="being_lazy"?Yi:u[23]==="other"?Xi:Qi}let a=o(n),i=a(n);function f(){return n[13](n[23])}return{c(){e=I("button"),i.c(),t=j(),this.h()},l(u){e=M(u,"BUTTON",{class:!0});var c=k(e);i.l(c),t=A(c),c.forEach(m),this.h()},h(){d(e,"class",l="px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(n[4]===n[23]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-xl")},m(u,c){y(u,e,c),i.m(e,null),p(e,t),s||(r=ue(e,"click",f),s=!0)},p(u,c){n=u,a===(a=o(n))&&i?i.p(n,c):(i.d(1),i=a(n),i&&(i.c(),i.m(e,t))),c&24&&l!==(l="px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(n[4]===n[23]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-xl")&&d(e,"class",l)},d(u){u&&m(e),i.d(),s=!1,r()}}}function ua(n){var _e;let e,t,l,s,r=n[8].t("How would you rate this response?")+"",o,a,i,f,u,c,g,h,_,E,v,T,P=n[8].t("Awful")+"",R,B,D,C,N=n[8].t("Amazing")+"",V,O,q,Z,se,L,U,H,ae,be,G,pe,X,ce=n[8].t("Save")+"",Me,ve,ne,oe,De,ke=((_e=n[1])==null?void 0:_e.arena)&&Sl(n);f=new Wt({props:{className:"size-4"}});let Ce=Ne(Array.from({length:10}).map(Ll)),we=[];for(let S=0;S<Ce.length;S+=1)we[S]=Ol(Bl(n,Ce,S));let he=n[3].length>0&&Rl(n);return G=new Ri({props:{tags:n[2]}}),G.$on("delete",n[15]),G.$on("add",n[16]),{c(){ke&&ke.c(),e=j(),t=I("div"),l=I("div"),s=I("div"),o=W(r),a=j(),i=I("button"),Y(f.$$.fragment),u=j(),c=I("div"),g=I("div"),h=I("div");for(let S=0;S<we.length;S+=1)we[S].c();_=j(),E=I("div"),v=I("div"),T=W("1 - "),R=W(P),B=j(),D=I("div"),C=W("10 - "),V=W(N),O=j(),q=I("div"),he&&he.c(),Z=j(),se=I("div"),L=I("textarea"),H=j(),ae=I("div"),be=I("div"),Y(G.$$.fragment),pe=j(),X=I("button"),Me=W(ce),this.h()},l(S){ke&&ke.l(S),e=A(S),t=M(S,"DIV",{class:!0,id:!0});var Q=k(t);l=M(Q,"DIV",{class:!0});var fe=k(l);s=M(fe,"DIV",{class:!0});var Ee=k(s);o=F(Ee,r),Ee.forEach(m),a=A(fe),i=M(fe,"BUTTON",{});var ye=k(i);le(f.$$.fragment,ye),ye.forEach(m),fe.forEach(m),u=A(Q),c=M(Q,"DIV",{class:!0});var J=k(c);g=M(J,"DIV",{class:!0});var de=k(g);h=M(de,"DIV",{class:!0});var Ie=k(h);for(let ut=0;ut<we.length;ut+=1)we[ut].l(Ie);Ie.forEach(m),_=A(de),E=M(de,"DIV",{class:!0});var Ve=k(E);v=M(Ve,"DIV",{});var We=k(v);T=F(We,"1 - "),R=F(We,P),We.forEach(m),B=A(Ve),D=M(Ve,"DIV",{});var je=k(D);C=F(je,"10 - "),V=F(je,N),je.forEach(m),Ve.forEach(m),de.forEach(m),J.forEach(m),O=A(Q),q=M(Q,"DIV",{});var re=k(q);he&&he.l(re),re.forEach(m),Z=A(Q),se=M(Q,"DIV",{class:!0});var tt=k(se);L=M(tt,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),k(L).forEach(m),tt.forEach(m),H=A(Q),ae=M(Q,"DIV",{class:!0});var Qe=k(ae);be=M(Qe,"DIV",{class:!0});var Xe=k(be);le(G.$$.fragment,Xe),Xe.forEach(m),pe=A(Qe),X=M(Qe,"BUTTON",{class:!0});var lt=k(X);Me=F(lt,ce),lt.forEach(m),Qe.forEach(m),Q.forEach(m),this.h()},h(){d(s,"class","text-sm font-medium"),d(l,"class","flex justify-between items-center"),d(h,"class","mt-1.5 w-fit flex gap-1 pb-2"),d(E,"class","sticky top-0 bottom-0 left-0 right-0 flex justify-between text-xs"),d(g,"class","relative w-fit overflow-x-auto scrollbar-none"),d(c,"class","w-full flex justify-center"),d(L,"class","w-full text-sm px-1 py-2 bg-transparent outline-hidden resize-none rounded-xl"),d(L,"placeholder",U=n[8].t("Feel free to add specific details")),d(L,"rows","3"),d(se,"class","mt-2"),d(be,"class","flex items-end group"),d(X,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),d(ae,"class","mt-2 gap-1.5 flex justify-between"),d(t,"class","my-2.5 rounded-xl px-4 py-3 border border-gray-100 dark:border-gray-850"),d(t,"id",ve="message-feedback-"+n[1].id)},m(S,Q){ke&&ke.m(S,Q),y(S,e,Q),y(S,t,Q),p(t,l),p(l,s),p(s,o),p(l,a),p(l,i),$(f,i,null),p(t,u),p(t,c),p(c,g),p(g,h);for(let fe=0;fe<we.length;fe+=1)we[fe]&&we[fe].m(h,null);p(g,_),p(g,E),p(E,v),p(v,T),p(v,R),p(E,B),p(E,D),p(D,C),p(D,V),p(t,O),p(t,q),he&&he.m(q,null),p(t,Z),p(t,se),p(se,L),ot(L,n[5]),p(t,H),p(t,ae),p(ae,be),$(G,be,null),p(ae,pe),p(ae,X),p(X,Me),ne=!0,oe||(De=[ue(i,"click",n[11]),ue(L,"input",n[14]),ue(X,"click",n[17])],oe=!0)},p(S,[Q]){var Ee;if((Ee=S[1])!=null&&Ee.arena?ke?ke.p(S,Q):(ke=Sl(S),ke.c(),ke.m(e.parentNode,e)):ke&&(ke.d(1),ke=null),(!ne||Q&256)&&r!==(r=S[8].t("How would you rate this response?")+"")&&K(o,r),Q&66){Ce=Ne(Array.from({length:10}).map(Ll));let ye;for(ye=0;ye<Ce.length;ye+=1){const J=Bl(S,Ce,ye);we[ye]?we[ye].p(J,Q):(we[ye]=Ol(J),we[ye].c(),we[ye].m(h,null))}for(;ye<we.length;ye+=1)we[ye].d(1);we.length=Ce.length}(!ne||Q&256)&&P!==(P=S[8].t("Awful")+"")&&K(R,P),(!ne||Q&256)&&N!==(N=S[8].t("Amazing")+"")&&K(V,N),S[3].length>0?he?he.p(S,Q):(he=Rl(S),he.c(),he.m(q,null)):he&&(he.d(1),he=null),(!ne||Q&256&&U!==(U=S[8].t("Feel free to add specific details")))&&d(L,"placeholder",U),Q&32&&ot(L,S[5]);const fe={};Q&4&&(fe.tags=S[2]),G.$set(fe),(!ne||Q&256)&&ce!==(ce=S[8].t("Save")+"")&&K(Me,ce),(!ne||Q&2&&ve!==(ve="message-feedback-"+S[1].id))&&d(t,"id",ve)},i(S){ne||(b(f.$$.fragment,S),b(G.$$.fragment,S),ne=!0)},o(S){w(f.$$.fragment,S),w(G.$$.fragment,S),ne=!1},d(S){S&&(m(e),m(t)),ke&&ke.d(S),x(f),Ge(we,S),he&&he.d(),x(G),oe=!1,rt(De)}}}const Ll=(n,e)=>e+1;function ca(n,e,t){let l,s;Te(n,Et,q=>t(18,s=q));const r=Ze("i18n");Te(n,r,q=>t(8,l=q));const o=Bt();let{message:a}=e,{show:i=!1}=e,f=["accurate_information","followed_instructions_perfectly","showcased_creativity","positive_attitude","attention_to_detail","thorough_explanation","other"],u=["dont_like_the_style","too_verbose","not_helpful","not_factually_correct","didnt_fully_follow_instructions","refused_when_it_shouldnt_have","being_lazy","other"],c=[],g=[],h=null,_="",E=null,v=null;const T=()=>{var q,Z,se,L,U;h||t(4,h=((q=a==null?void 0:a.annotation)==null?void 0:q.reason)??""),_||t(5,_=((Z=a==null?void 0:a.annotation)==null?void 0:Z.comment)??""),t(2,c=(((se=a==null?void 0:a.annotation)==null?void 0:se.tags)??[]).map(H=>({name:H}))),E||t(6,E=((U=(L=a==null?void 0:a.annotation)==null?void 0:L.details)==null?void 0:U.rating)??null)};Mt(()=>{a!=null&&a.arena&&(t(7,v=s.find(q=>q.id===a.selectedModelId)),Fe.success(l.t('This response was generated by "{{model}}"',{model:v?(v==null?void 0:v.name)??v.id:a.selectedModelId})))});const P=()=>{o("save",{reason:h,comment:_,tags:c.map(q=>q.name),details:{rating:E}}),Fe.success(l.t("Thanks for your feedback!")),t(0,i=!1)},R=()=>{t(0,i=!1)},B=q=>{t(6,E=q)},D=q=>{t(4,h=q)};function C(){_=this.value,t(5,_)}const N=q=>{t(2,c=c.filter(Z=>Z.name.replaceAll(" ","_").toLowerCase()!==q.detail.replaceAll(" ","_").toLowerCase()))},V=q=>{t(2,c=[...c,{name:q.detail}])},O=()=>{P()};return n.$$set=q=>{"message"in q&&t(1,a=q.message),"show"in q&&t(0,i=q.show)},n.$$.update=()=>{var q,Z;n.$$.dirty&2&&(((q=a==null?void 0:a.annotation)==null?void 0:q.rating)===1?t(3,g=f):((Z=a==null?void 0:a.annotation)==null?void 0:Z.rating)===-1&&t(3,g=u)),n.$$.dirty&2&&a&&T()},[i,a,c,g,h,_,E,v,l,r,P,R,B,D,C,N,V,O]}class da extends Ae{constructor(e){super(),ze(this,e,ca,ua,Pe,{message:1,show:0})}}function jl(n,e,t){const l=n.slice();return l[8]=e[t],l[10]=t,l}function Al(n,e,t){const l=n.slice();return l[5]=e[t],l[7]=t,l}function ha(n){let e,t;return e=new Fi({props:{strokeWidth:"2.5",className:"size-3.5 "}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function ma(n){let e,t;return e=new Ji({props:{strokeWidth:"2.5",className:"size-3.5 "}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function ga(n){let e,t,l,s,r;const o=n[2].default,a=_r(o,n,n[4],null),i=[ma,ha],f=[];function u(c,g){return c[1]?0:1}return l=u(n),s=f[l]=i[l](n),{c(){e=I("div"),a&&a.c(),t=j(),s.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);a&&a.l(g),t=A(g),s.l(g),g.forEach(m),this.h()},h(){d(e,"class","flex items-center gap-2 text-gray-500 transition")},m(c,g){y(c,e,g),a&&a.m(e,null),p(e,t),f[l].m(e,null),r=!0},p(c,g){a&&a.p&&(!r||g&16)&&pr(a,o,c,c[4],r?vr(o,c[4],g,null):br(c[4]),null);let h=l;l=u(c),l!==h&&(ee(),w(f[h],1,1,()=>{f[h]=null}),te(),s=f[l],s||(s=f[l]=i[l](c),s.c()),b(s,1),s.m(e,null))},i(c){r||(b(a,c),b(s),r=!0)},o(c){w(a,c),w(s),r=!1},d(c){c&&m(e),a&&a.d(c),f[l].d()}}}function zl(n){let e,t,l,s,r,o=n[0].query+"",a,i,f,u='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg>',c,g;return l=new rl({}),{c(){e=I("a"),t=I("div"),Y(l.$$.fragment),s=j(),r=I("div"),a=W(o),i=j(),f=I("div"),f.innerHTML=u,this.h()},l(h){e=M(h,"A",{href:!0,target:!0,class:!0});var _=k(e);t=M(_,"DIV",{class:!0});var E=k(t);le(l.$$.fragment,E),s=A(E),r=M(E,"DIV",{class:!0});var v=k(r);a=F(v,o),v.forEach(m),E.forEach(m),i=A(_),f=M(_,"DIV",{class:!0,"data-svelte-h":!0}),ht(f)!=="svelte-14xjows"&&(f.innerHTML=u),_.forEach(m),this.h()},h(){d(r,"class","line-clamp-1"),d(t,"class","flex gap-2 items-center"),d(f,"class","ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition"),d(e,"href",c="https://www.google.com/search?q="+n[0].query),d(e,"target","_blank"),d(e,"class","flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 font-normal! no-underline!")},m(h,_){y(h,e,_),p(e,t),$(l,t,null),p(t,s),p(t,r),p(r,a),p(e,i),p(e,f),g=!0},p(h,_){(!g||_&1)&&o!==(o=h[0].query+"")&&K(a,o),(!g||_&1&&c!==(c="https://www.google.com/search?q="+h[0].query))&&d(e,"href",c)},i(h){g||(b(l.$$.fragment,h),g=!0)},o(h){w(l.$$.fragment,h),g=!1},d(h){h&&m(e),x(l)}}}function _a(n){let e,t=Ne(n[0].urls),l=[];for(let s=0;s<t.length;s+=1)l[s]=Hl(jl(n,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=ie()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=ie()},m(s,r){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(s,r);y(s,e,r)},p(s,r){if(r&1){t=Ne(s[0].urls);let o;for(o=0;o<t.length;o+=1){const a=jl(s,t,o);l[o]?l[o].p(a,r):(l[o]=Hl(a),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(s){s&&m(e),Ge(l,s)}}}function pa(n){let e,t=Ne(n[0].items),l=[];for(let s=0;s<t.length;s+=1)l[s]=Ul(Al(n,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=ie()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=ie()},m(s,r){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(s,r);y(s,e,r)},p(s,r){if(r&1){t=Ne(s[0].items);let o;for(o=0;o<t.length;o+=1){const a=Al(s,t,o);l[o]?l[o].p(a,r):(l[o]=Ul(a),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(s){s&&m(e),Ge(l,s)}}}function Hl(n){let e,t,l,s,r,o,a,i=n[8]+"",f,u,c,g='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg>',h,_;return{c(){e=I("a"),t=I("div"),l=I("div"),s=I("img"),o=j(),a=I("div"),f=W(i),u=j(),c=I("div"),c.innerHTML=g,h=j(),this.h()},l(E){e=M(E,"A",{href:!0,target:!0,class:!0});var v=k(e);t=M(v,"DIV",{class:!0});var T=k(t);l=M(T,"DIV",{class:!0});var P=k(l);s=M(P,"IMG",{src:!0,alt:!0,class:!0}),P.forEach(m),o=A(T),a=M(T,"DIV",{class:!0});var R=k(a);f=F(R,i),R.forEach(m),T.forEach(m),u=A(v),c=M(v,"DIV",{class:!0,"data-svelte-h":!0}),ht(c)!=="svelte-ar5qfw"&&(c.innerHTML=g),h=A(v),v.forEach(m),this.h()},h(){ft(s.src,r="https://www.google.com/s2/favicons?sz=32&domain="+n[8])||d(s,"src",r),d(s,"alt","favicon"),d(s,"class","size-3.5"),d(l,"class","w-fit"),d(a,"class","w-full text-sm line-clamp-1"),d(t,"class","flex justify-center items-center gap-3"),d(c,"class","ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition"),d(e,"href",_=n[8]),d(e,"target","_blank"),d(e,"class","flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 rounded-lg no-underline mb-1")},m(E,v){y(E,e,v),p(e,t),p(t,l),p(l,s),p(t,o),p(t,a),p(a,f),p(e,u),p(e,c),p(e,h)},p(E,v){v&1&&!ft(s.src,r="https://www.google.com/s2/favicons?sz=32&domain="+E[8])&&d(s,"src",r),v&1&&i!==(i=E[8]+"")&&K(f,i),v&1&&_!==(_=E[8])&&d(e,"href",_)},d(E){E&&m(e)}}}function Ul(n){var E;let e,t,l,s,r,o,a,i=(((E=n[5])==null?void 0:E.title)??n[5].link)+"",f,u,c,g='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg>',h,_;return{c(){e=I("a"),t=I("div"),l=I("div"),s=I("img"),o=j(),a=I("div"),f=W(i),u=j(),c=I("div"),c.innerHTML=g,h=j(),this.h()},l(v){e=M(v,"A",{href:!0,target:!0,class:!0});var T=k(e);t=M(T,"DIV",{class:!0});var P=k(t);l=M(P,"DIV",{class:!0});var R=k(l);s=M(R,"IMG",{src:!0,alt:!0,class:!0}),R.forEach(m),o=A(P),a=M(P,"DIV",{class:!0});var B=k(a);f=F(B,i),B.forEach(m),P.forEach(m),u=A(T),c=M(T,"DIV",{class:!0,"data-svelte-h":!0}),ht(c)!=="svelte-ar5qfw"&&(c.innerHTML=g),h=A(T),T.forEach(m),this.h()},h(){ft(s.src,r="https://www.google.com/s2/favicons?sz=32&domain="+n[5].link)||d(s,"src",r),d(s,"alt","favicon"),d(s,"class","size-3.5"),d(l,"class","w-fit"),d(a,"class","w-full text-sm line-clamp-1"),d(t,"class","flex justify-center items-center gap-3"),d(c,"class","ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition"),d(e,"href",_=n[5].link),d(e,"target","_blank"),d(e,"class","flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 rounded-lg font-normal! no-underline! mb-1")},m(v,T){y(v,e,T),p(e,t),p(t,l),p(l,s),p(t,o),p(t,a),p(a,f),p(e,u),p(e,c),p(e,h)},p(v,T){var P;T&1&&!ft(s.src,r="https://www.google.com/s2/favicons?sz=32&domain="+v[5].link)&&d(s,"src",r),T&1&&i!==(i=(((P=v[5])==null?void 0:P.title)??v[5].link)+"")&&K(f,i),T&1&&_!==(_=v[5].link)&&d(e,"href",_)},d(v){v&&m(e)}}}function ba(n){var i;let e,t,l,s=((i=n[0])==null?void 0:i.query)&&zl(n);function r(f,u){var c,g;if((c=f[0])!=null&&c.items)return pa;if((g=f[0])!=null&&g.urls)return _a}let o=r(n),a=o&&o(n);return{c(){e=I("div"),s&&s.c(),t=j(),a&&a.c(),this.h()},l(f){e=M(f,"DIV",{class:!0,slot:!0});var u=k(e);s&&s.l(u),t=A(u),a&&a.l(u),u.forEach(m),this.h()},h(){d(e,"class","text-sm border border-gray-50 dark:border-gray-850 rounded-xl my-1.5 p-2 w-full"),d(e,"slot","content")},m(f,u){y(f,e,u),s&&s.m(e,null),p(e,t),a&&a.m(e,null),l=!0},p(f,u){var c;(c=f[0])!=null&&c.query?s?(s.p(f,u),u&1&&b(s,1)):(s=zl(f),s.c(),b(s,1),s.m(e,t)):s&&(ee(),w(s,1,1,()=>{s=null}),te()),o===(o=r(f))&&a?a.p(f,u):(a&&a.d(1),a=o&&o(f),a&&(a.c(),a.m(e,null)))},i(f){l||(b(s),l=!0)},o(f){w(s),l=!1},d(f){f&&m(e),s&&s.d(),a&&a.d()}}}function va(n){let e,t,l;function s(o){n[3](o)}let r={grow:!0,className:"w-full",buttonClassName:"w-full",$$slots:{content:[ba],default:[ga]},$$scope:{ctx:n}};return n[1]!==void 0&&(r.open=n[1]),e=new Di({props:r}),Je.push(()=>xe(e,"open",s)),{c(){Y(e.$$.fragment)},l(o){le(e.$$.fragment,o)},m(o,a){$(e,o,a),l=!0},p(o,[a]){const i={};a&19&&(i.$$scope={dirty:a,ctx:o}),!t&&a&2&&(t=!0,i.open=o[1],et(()=>t=!1)),e.$set(i)},i(o){l||(b(e.$$.fragment,o),l=!0)},o(o){w(e.$$.fragment,o),l=!1},d(o){x(e,o)}}}function ka(n,e,t){let{$$slots:l={},$$scope:s}=e,{status:r={urls:[],query:""}}=e,o=!1;function a(i){o=i,t(1,o)}return n.$$set=i=>{"status"in i&&t(0,r=i.status),"$$scope"in i&&t(4,s=i.$$scope)},[r,o,l,a,s]}class wa extends Ae{constructor(e){super(),ze(this,e,ka,va,Pe,{status:0})}}function Ia(n){let e=JSON.stringify(n[0])+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&1&&e!==(e=JSON.stringify(l[0])+"")&&K(t,e)},d(l){l&&m(t)}}}function Ma(n){let e;function t(r,o){var a,i,f,u,c;return(a=r[0])!=null&&a.error&&((f=(i=r[0])==null?void 0:i.error)!=null&&f.message)?Da:(u=r[0])!=null&&u.detail?Na:(c=r[0])!=null&&c.message?Ca:Ea}let l=t(n),s=l(n);return{c(){s.c(),e=ie()},l(r){s.l(r),e=ie()},m(r,o){s.m(r,o),y(r,e,o)},p(r,o){l===(l=t(r))&&s?s.p(r,o):(s.d(1),s=l(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&m(e),s.d(r)}}}function ya(n){let e;return{c(){e=W(n[0])},l(t){e=F(t,n[0])},m(t,l){y(t,e,l)},p(t,l){l&1&&K(e,t[0])},d(t){t&&m(e)}}}function Ea(n){let e=JSON.stringify(n[0])+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&1&&e!==(e=JSON.stringify(l[0])+"")&&K(t,e)},d(l){l&&m(t)}}}function Ca(n){let e=n[0].message+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&1&&e!==(e=l[0].message+"")&&K(t,e)},d(l){l&&m(t)}}}function Na(n){let e=n[0].detail+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&1&&e!==(e=l[0].detail+"")&&K(t,e)},d(l){l&&m(t)}}}function Da(n){let e=n[0].error.message+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&1&&e!==(e=l[0].error.message+"")&&K(t,e)},d(l){l&&m(t)}}}function Ta(n){let e,t,l,s,r,o;l=new Ti({props:{className:"size-5 text-red-700 dark:text-red-400"}});function a(u,c){return typeof u[0]=="string"?ya:typeof u[0]=="object"&&u[0]!==null?Ma:Ia}let i=a(n),f=i(n);return{c(){e=I("div"),t=I("div"),Y(l.$$.fragment),s=j(),r=I("div"),f.c(),this.h()},l(u){e=M(u,"DIV",{class:!0});var c=k(e);t=M(c,"DIV",{class:!0});var g=k(t);le(l.$$.fragment,g),g.forEach(m),s=A(c),r=M(c,"DIV",{class:!0});var h=k(r);f.l(h),h.forEach(m),c.forEach(m),this.h()},h(){d(t,"class","self-start mt-0.5"),d(r,"class","self-center text-sm"),d(e,"class","flex my-2 gap-2.5 border px-4 py-3 border-red-600/10 bg-red-600/10 rounded-lg")},m(u,c){y(u,e,c),p(e,t),$(l,t,null),p(e,s),p(e,r),f.m(r,null),o=!0},p(u,[c]){i===(i=a(u))&&f?f.p(u,c):(f.d(1),f=i(u),f&&(f.c(),f.m(r,null)))},i(u){o||(b(l.$$.fragment,u),o=!0)},o(u){w(l.$$.fragment,u),o=!1},d(u){u&&m(e),x(l),f.d()}}}function Va(n,e,t){let{content:l=""}=e;return n.$$set=s=>{"content"in s&&t(0,l=s.content)},[l]}let Ba=class extends Ae{constructor(e){super(),ze(this,e,Va,Ta,Pe,{content:0})}};function ql(n,e,t){const l=n.slice();return l[10]=e[t],l[12]=t,l}function Sa(n){const e=n.slice(),t=Ja(e[10].distance);return e[13]=t,e}function Oa(n){var l;const e=n.slice(),t=(l=e[4])==null?void 0:l[0];return e[10]=t,e}function Ra(n){let e=n[5].t("Citation")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&32&&e!==(e=l[5].t("Citation")+"")&&K(t,e)},i:Be,o:Be,d(l){l&&m(t)}}}function Pa(n){let e,t,l,s,r;const o=[ja,La],a=[];function i(f,u){var c,g,h,_;return u&16&&(e=null),e==null&&(e=!!((g=(c=f[10])==null?void 0:c.metadata)!=null&&g.file_id||(_=(h=f[10].source)==null?void 0:h.url)!=null&&_.includes("http"))),e?0:1}return t=i(n,-1),l=a[t]=o[t](n),{c(){l.c(),s=ie()},l(f){l.l(f),s=ie()},m(f,u){a[t].m(f,u),y(f,s,u),r=!0},p(f,u){let c=t;t=i(f,u),t===c?a[t].p(f,u):(ee(),w(a[c],1,1,()=>{a[c]=null}),te(),l=a[t],l?l.p(f,u):(l=a[t]=o[t](f),l.c()),b(l,1),l.m(s.parentNode,s))},i(f){r||(b(l),r=!0)},o(f){w(l),r=!1},d(f){f&&m(s),a[t].d(f)}}}function La(n){var l,s;let e=n[7]((s=(l=n[1])==null?void 0:l.source)==null?void 0:s.name)+"",t;return{c(){t=W(e)},l(r){t=F(r,e)},m(r,o){y(r,t,o)},p(r,o){var a,i;o&2&&e!==(e=r[7]((i=(a=r[1])==null?void 0:a.source)==null?void 0:i.name)+"")&&K(t,e)},i:Be,o:Be,d(r){r&&m(t)}}}function ja(n){var l,s;let e,t;return e=new Le({props:{className:"w-fit",content:(s=(l=n[10].source)==null?void 0:l.url)!=null&&s.includes("http")?n[5].t("Open link"):n[5].t("Open file"),placement:"top-start",tippyOptions:{duration:[500,0]},$$slots:{default:[Aa]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,o){$(e,r,o),t=!0},p(r,o){var i,f;const a={};o&48&&(a.content=(f=(i=r[10].source)==null?void 0:i.url)!=null&&f.includes("http")?r[5].t("Open link"):r[5].t("Open file")),o&16402&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Aa(n){var r,o;let e,t=n[7]((o=(r=n[1])==null?void 0:r.source)==null?void 0:o.name)+"",l,s;return{c(){e=I("a"),l=W(t),this.h()},l(a){e=M(a,"A",{class:!0,href:!0,target:!0});var i=k(e);l=F(i,t),i.forEach(m),this.h()},h(){var a,i,f,u,c,g,h,_;d(e,"class","hover:text-gray-500 dark:hover:text-gray-100 underline grow line-clamp-1"),d(e,"href",s=(i=(a=n[10])==null?void 0:a.metadata)!=null&&i.file_id?`${Il}/files/${(u=(f=n[10])==null?void 0:f.metadata)==null?void 0:u.file_id}/content${((g=(c=n[10])==null?void 0:c.metadata)==null?void 0:g.page)!==void 0?`#page=${n[10].metadata.page+1}`:""}`:(_=(h=n[10].source)==null?void 0:h.url)!=null&&_.includes("http")?n[10].source.url:"#"),d(e,"target","_blank")},m(a,i){y(a,e,i),p(e,l)},p(a,i){var f,u,c,g,h,_,E,v,T,P;i&2&&t!==(t=a[7]((u=(f=a[1])==null?void 0:f.source)==null?void 0:u.name)+"")&&K(l,t),i&16&&s!==(s=(g=(c=a[10])==null?void 0:c.metadata)!=null&&g.file_id?`${Il}/files/${(_=(h=a[10])==null?void 0:h.metadata)==null?void 0:_.file_id}/content${((v=(E=a[10])==null?void 0:E.metadata)==null?void 0:v.page)!==void 0?`#page=${a[10].metadata.page+1}`:""}`:(P=(T=a[10].source)==null?void 0:T.url)!=null&&P.includes("http")?a[10].source.url:"#")&&d(e,"href",s)},d(a){a&&m(e)}}}function Wl(n){let e,t,l=n[5].t("Parameters")+"",s,r,o,a;return o=new Li({props:{readonly:!0,value:JSON.stringify(n[10].metadata.parameters,null,2)}}),{c(){e=I("div"),t=I("div"),s=W(l),r=j(),Y(o.$$.fragment),this.h()},l(i){e=M(i,"DIV",{});var f=k(e);t=M(f,"DIV",{class:!0});var u=k(t);s=F(u,l),u.forEach(m),r=A(f),le(o.$$.fragment,f),f.forEach(m),this.h()},h(){d(t,"class","text-sm font-medium dark:text-gray-300 mb-1")},m(i,f){y(i,e,f),p(e,t),p(t,s),p(e,r),$(o,e,null),a=!0},p(i,f){(!a||f&32)&&l!==(l=i[5].t("Parameters")+"")&&K(s,l);const u={};f&16&&(u.value=JSON.stringify(i[10].metadata.parameters,null,2)),o.$set(u)},i(i){a||(b(o.$$.fragment,i),a=!0)},o(i){w(o.$$.fragment,i),a=!1},d(i){i&&m(e),x(o)}}}function Fl(n){let e,t;return e=new Le({props:{className:"w-fit",content:n[5].t("Relevance"),placement:"top-start",tippyOptions:{duration:[500,0]},$$slots:{default:[Ha]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s&32&&(r.content=l[5].t("Relevance")),s&16404&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function za(n){var o;let e,t,l=(((o=n[10])==null?void 0:o.distance)??0).toFixed(4)+"",s,r;return{c(){e=I("span"),t=W("("),s=W(l),r=W(")"),this.h()},l(a){e=M(a,"SPAN",{class:!0});var i=k(e);t=F(i,"("),s=F(i,l),r=F(i,")"),i.forEach(m),this.h()},h(){d(e,"class","text-gray-500 dark:text-gray-500")},m(a,i){y(a,e,i),p(e,t),p(e,s),p(e,r)},p(a,i){var f;i&16&&l!==(l=(((f=a[10])==null?void 0:f.distance)??0).toFixed(4)+"")&&K(s,l)},d(a){a&&m(e)}}}function Jl(n){let e,t=typeof n[13]=="number"&&Gl(n);return{c(){t&&t.c(),e=ie()},l(l){t&&t.l(l),e=ie()},m(l,s){t&&t.m(l,s),y(l,e,s)},p(l,s){typeof l[13]=="number"?t?t.p(l,s):(t=Gl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function Gl(n){let e,t=n[13].toFixed(2)+"",l,s,r;return{c(){e=I("span"),l=W(t),s=W("%"),this.h()},l(o){e=M(o,"SPAN",{class:!0});var a=k(e);l=F(a,t),s=F(a,"%"),a.forEach(m),this.h()},h(){d(e,"class",r=`px-1 rounded-sm font-medium ${Ql(n[13])}`)},m(o,a){y(o,e,a),p(e,l),p(e,s)},p(o,a){a&16&&t!==(t=o[13].toFixed(2)+"")&&K(l,t),a&16&&r!==(r=`px-1 rounded-sm font-medium ${Ql(o[13])}`)&&d(e,"class",r)},d(o){o&&m(e)}}}function Ha(n){let e;function t(o,a){var i;if(o[2])return Jl;if(typeof((i=o[10])==null?void 0:i.distance)=="number")return za}function l(o,a){return a===Jl?Sa(o):o}let s=t(n),r=s&&s(l(n,s));return{c(){e=I("div"),r&&r.c(),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);r&&r.l(a),a.forEach(m),this.h()},h(){d(e,"class","text-sm my-1 dark:text-gray-400 flex items-center gap-2 w-fit")},m(o,a){y(o,e,a),r&&r.m(e,null)},p(o,a){s===(s=t(o))&&r?r.p(l(o,s),a):(r&&r.d(1),r=s&&s(l(o,s)),r&&(r.c(),r.m(e,null)))},d(o){o&&m(e),r&&r.d()}}}function Zl(n){let e,t,l=n[5].t("page")+"",s,r,o=n[10].metadata.page+1+"",a,i;return{c(){e=I("span"),t=W("("),s=W(l),r=j(),a=W(o),i=W(")"),this.h()},l(f){e=M(f,"SPAN",{class:!0});var u=k(e);t=F(u,"("),s=F(u,l),r=A(u),a=F(u,o),i=F(u,")"),u.forEach(m),this.h()},h(){d(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(f,u){y(f,e,u),p(e,t),p(e,s),p(e,r),p(e,a),p(e,i)},p(f,u){u&32&&l!==(l=f[5].t("page")+"")&&K(s,l),u&16&&o!==(o=f[10].metadata.page+1+"")&&K(a,o)},d(f){f&&m(e)}}}function Ua(n){let e,t,l=n[10].document+"",s,r;return{c(){e=I("pre"),t=W("                "),s=W(l),r=W(`
              `),this.h()},l(o){e=M(o,"PRE",{class:!0});var a=k(e);t=F(a,"                "),s=F(a,l),r=F(a,`
              `),a.forEach(m),this.h()},h(){d(e,"class","text-sm dark:text-gray-400 whitespace-pre-line")},m(o,a){y(o,e,a),p(e,t),p(e,s),p(e,r)},p(o,a){a&16&&l!==(l=o[10].document+"")&&K(s,l)},d(o){o&&m(e)}}}function qa(n){let e,t,l;return{c(){e=I("iframe"),this.h()},l(s){e=M(s,"IFRAME",{class:!0,sandbox:!0,srcdoc:!0,title:!0}),k(e).forEach(m),this.h()},h(){d(e,"class","w-full border-0 h-auto rounded-none"),d(e,"sandbox","allow-scripts allow-forms allow-same-origin"),d(e,"srcdoc",t=n[10].document),d(e,"title",l=n[5].t("Content"))},m(s,r){y(s,e,r)},p(s,r){r&16&&t!==(t=s[10].document)&&d(e,"srcdoc",t),r&32&&l!==(l=s[5].t("Content"))&&d(e,"title",l)},d(s){s&&m(e)}}}function Kl(n){var R,B,D;let e,t,l,s,r=n[5].t("Content")+"",o,a,i,f=Number.isInteger((B=(R=n[10])==null?void 0:R.metadata)==null?void 0:B.page),u,c,g,h=((D=n[10].metadata)==null?void 0:D.parameters)&&Wl(n),_=n[3]&&n[10].distance!==void 0&&Fl(n),E=f&&Zl(n);function v(C,N){var V;return(V=C[10].metadata)!=null&&V.html?qa:Ua}let T=v(n),P=T(n);return{c(){e=I("div"),h&&h.c(),t=j(),l=I("div"),s=I("div"),o=W(r),a=j(),_&&_.c(),i=j(),E&&E.c(),u=j(),P.c(),c=j(),this.h()},l(C){e=M(C,"DIV",{class:!0});var N=k(e);h&&h.l(N),t=A(N),l=M(N,"DIV",{});var V=k(l);s=M(V,"DIV",{class:!0});var O=k(s);o=F(O,r),a=A(O),_&&_.l(O),i=A(O),E&&E.l(O),O.forEach(m),u=A(V),P.l(V),V.forEach(m),c=A(N),N.forEach(m),this.h()},h(){d(s,"class","text-sm font-medium dark:text-gray-300 flex items-center gap-2 w-fit mb-1"),d(e,"class","flex flex-col w-full gap-2")},m(C,N){y(C,e,N),h&&h.m(e,null),p(e,t),p(e,l),p(l,s),p(s,o),p(s,a),_&&_.m(s,null),p(s,i),E&&E.m(s,null),p(l,u),P.m(l,null),p(e,c),g=!0},p(C,N){var V,O,q;(V=C[10].metadata)!=null&&V.parameters?h?(h.p(C,N),N&16&&b(h,1)):(h=Wl(C),h.c(),b(h,1),h.m(e,t)):h&&(ee(),w(h,1,1,()=>{h=null}),te()),(!g||N&32)&&r!==(r=C[5].t("Content")+"")&&K(o,r),C[3]&&C[10].distance!==void 0?_?(_.p(C,N),N&24&&b(_,1)):(_=Fl(C),_.c(),b(_,1),_.m(s,i)):_&&(ee(),w(_,1,1,()=>{_=null}),te()),N&16&&(f=Number.isInteger((q=(O=C[10])==null?void 0:O.metadata)==null?void 0:q.page)),f?E?E.p(C,N):(E=Zl(C),E.c(),E.m(s,null)):E&&(E.d(1),E=null),T===(T=v(C))&&P?P.p(C,N):(P.d(1),P=T(C),P&&(P.c(),P.m(l,null)))},i(C){g||(b(h),b(_),g=!0)},o(C){w(h),w(_),g=!1},d(C){C&&m(e),h&&h.d(),_&&_.d(),E&&E.d(),P.d()}}}function Wa(n){let e,t,l,s,r,o,a,i,f,u,c,g,h,_;const E=[Pa,Ra],v=[];function T(C,N){var V,O;return(O=(V=C[1])==null?void 0:V.source)!=null&&O.name?0:1}function P(C,N){return N===0?Oa(C):C}s=T(n),r=v[s]=E[s](P(n,s)),i=new Wt({props:{className:"size-5"}});let R=Ne(n[4]),B=[];for(let C=0;C<R.length;C+=1)B[C]=Kl(ql(n,R,C));const D=C=>w(B[C],1,1,()=>{B[C]=null});return{c(){e=I("div"),t=I("div"),l=I("div"),r.c(),o=j(),a=I("button"),Y(i.$$.fragment),f=j(),u=I("div"),c=I("div");for(let C=0;C<B.length;C+=1)B[C].c();this.h()},l(C){e=M(C,"DIV",{});var N=k(e);t=M(N,"DIV",{class:!0});var V=k(t);l=M(V,"DIV",{class:!0});var O=k(l);r.l(O),O.forEach(m),o=A(V),a=M(V,"BUTTON",{class:!0});var q=k(a);le(i.$$.fragment,q),q.forEach(m),V.forEach(m),f=A(N),u=M(N,"DIV",{class:!0});var Z=k(u);c=M(Z,"DIV",{class:!0});var se=k(c);for(let L=0;L<B.length;L+=1)B[L].l(se);se.forEach(m),Z.forEach(m),N.forEach(m),this.h()},h(){d(l,"class","text-lg font-medium self-center flex items-center"),d(a,"class","self-center"),d(t,"class","flex justify-between dark:text-gray-300 px-4.5 pt-3 pb-2"),d(c,"class","flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-thin gap-1"),d(u,"class","flex flex-col md:flex-row w-full px-5 pb-5 md:space-x-4")},m(C,N){y(C,e,N),p(e,t),p(t,l),v[s].m(l,null),p(t,o),p(t,a),$(i,a,null),p(e,f),p(e,u),p(u,c);for(let V=0;V<B.length;V+=1)B[V]&&B[V].m(c,null);g=!0,h||(_=ue(a,"click",n[8]),h=!0)},p(C,N){let V=s;if(s=T(C),s===V?v[s].p(P(C,s),N):(ee(),w(v[V],1,1,()=>{v[V]=null}),te(),r=v[s],r?r.p(P(C,s),N):(r=v[s]=E[s](P(C,s)),r.c()),b(r,1),r.m(l,null)),N&60){R=Ne(C[4]);let O;for(O=0;O<R.length;O+=1){const q=ql(C,R,O);B[O]?(B[O].p(q,N),b(B[O],1)):(B[O]=Kl(q),B[O].c(),b(B[O],1),B[O].m(c,null))}for(ee(),O=R.length;O<B.length;O+=1)D(O);te()}},i(C){if(!g){b(r),b(i.$$.fragment,C);for(let N=0;N<R.length;N+=1)b(B[N]);g=!0}},o(C){w(r),w(i.$$.fragment,C),B=B.filter(Boolean);for(let N=0;N<B.length;N+=1)w(B[N]);g=!1},d(C){C&&m(e),v[s].d(),x(i),Ge(B,C),h=!1,_()}}}function Fa(n){let e,t,l;function s(o){n[9](o)}let r={size:"lg",$$slots:{default:[Wa]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.show=n[0]),e=new Tr({props:r}),Je.push(()=>xe(e,"show",s)),{c(){Y(e.$$.fragment)},l(o){le(e.$$.fragment,o)},m(o,a){$(e,o,a),l=!0},p(o,[a]){const i={};a&16447&&(i.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,i.show=o[0],et(()=>t=!1)),e.$set(i)},i(o){l||(b(e.$$.fragment,o),l=!0)},o(o){w(e.$$.fragment,o),l=!1},d(o){x(e,o)}}}function Ja(n){return typeof n!="number"?null:n<0?0:n>1?100:Math.round(n*1e4)/100}function Ql(n){return n>=80?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":n>=60?"bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200":n>=40?"bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200":"bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200"}function Ga(n,e,t){let l;const s=Ze("i18n");Te(n,s,h=>t(5,l=h));let{show:r=!1}=e,{citation:o}=e,{showPercentage:a=!1}=e,{showRelevance:i=!0}=e,f=[];const u=h=>{try{return decodeURIComponent(h)}catch{return h}},c=()=>{t(0,r=!1)};function g(h){r=h,t(0,r)}return n.$$set=h=>{"show"in h&&t(0,r=h.show),"citation"in h&&t(1,o=h.citation),"showPercentage"in h&&t(2,a=h.showPercentage),"showRelevance"in h&&t(3,i=h.showRelevance)},n.$$.update=()=>{var h;n.$$.dirty&18&&o&&(t(4,f=(h=o.document)==null?void 0:h.map((_,E)=>{var v,T;return{source:o.source,document:_,metadata:(v=o.metadata)==null?void 0:v[E],distance:(T=o.distances)==null?void 0:T[E]}})),f.every(_=>_.distance!==void 0)&&t(4,f=f.sort((_,E)=>(E.distance??1/0)-(_.distance??1/0))))},[r,o,a,i,f,l,s,u,c,g]}class Za extends Ae{constructor(e){super(),ze(this,e,Ga,Fa,Pe,{show:0,citation:1,showPercentage:2,showRelevance:3})}}function Xl(n,e,t){const l=n.slice();return l[16]=e[t],l[18]=t,l}function Yl(n,e,t){const l=n.slice();return l[16]=e[t],l[18]=t,l}function Jt(n){const e=n.slice(),t=e[1].filter(l=>{var s,r;return(r=(s=l==null?void 0:l.source)==null?void 0:s.name)==null?void 0:r.startsWith("http")});return e[19]=t,e}function $l(n){let e,t,l,s,r,o,a=n[19].length>0&&xl(n);function i(c,g){return c[1].length===1?Qa:Ka}let f=i(n),u=f(n);return{c(){e=I("div"),t=I("button"),a&&a.c(),l=j(),s=I("div"),u.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);t=M(g,"BUTTON",{class:!0});var h=k(t);a&&a.l(h),l=A(h),s=M(h,"DIV",{});var _=k(s);u.l(_),_.forEach(m),h.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","text-xs font-medium text-gray-600 dark:text-gray-300 px-3.5 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition flex items-center gap-1 border border-gray-50 dark:border-gray-850"),d(e,"class","py-1 -mx-0.5 w-full flex gap-1 items-center flex-wrap")},m(c,g){y(c,e,g),p(e,t),a&&a.m(t,null),p(t,l),p(t,s),u.m(s,null),r||(o=ue(t,"click",n[14]),r=!0)},p(c,g){c[19].length>0?a?a.p(c,g):(a=xl(c),a.c(),a.m(t,l)):a&&(a.d(1),a=null),f===(f=i(c))&&u?u.p(c,g):(u.d(1),u=f(c),u&&(u.c(),u.m(s,null)))},d(c){c&&m(e),a&&a.d(),u.d(),r=!1,o()}}}function xl(n){let e,t=Ne(n[19].slice(0,3)),l=[];for(let s=0;s<t.length;s+=1)l[s]=es(Yl(n,t,s));return{c(){e=I("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=M(s,"DIV",{class:!0});var r=k(e);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(m),this.h()},h(){d(e,"class","flex -space-x-1 items-center")},m(s,r){y(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&2){t=Ne(s[19].slice(0,3));let o;for(o=0;o<t.length;o+=1){const a=Yl(s,t,o);l[o]?l[o].p(a,r):(l[o]=es(a),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(s){s&&m(e),Ge(l,s)}}}function es(n){let e,t;return{c(){e=I("img"),this.h()},l(l){e=M(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ft(e.src,t="https://www.google.com/s2/favicons?sz=32&domain="+n[16].source.name)||d(e,"src",t),d(e,"alt","favicon"),d(e,"class","size-4 rounded-full shrink-0 border border-white dark:border-gray-850 bg-white dark:bg-gray-900")},m(l,s){y(l,e,s)},p(l,s){s&2&&!ft(e.src,t="https://www.google.com/s2/favicons?sz=32&domain="+l[16].source.name)&&d(e,"src",t)},d(l){l&&m(e)}}}function Ka(n){let e=n[7].t("{{COUNT}} Sources",{COUNT:n[1].length})+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&130&&e!==(e=l[7].t("{{COUNT}} Sources",{COUNT:l[1].length})+"")&&K(t,e)},d(l){l&&m(t)}}}function Qa(n){let e=n[7].t("1 Source")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&128&&e!==(e=l[7].t("1 Source")+"")&&K(t,e)},d(l){l&&m(t)}}}function ts(n){let e,t,l=Ne(n[1]),s=[];for(let r=0;r<l.length;r+=1)s[r]=ls(Xl(n,l,r));return{c(){e=I("div"),t=I("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);t=M(o,"DIV",{class:!0});var a=k(t);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(m),o.forEach(m),this.h()},h(){d(t,"class","text-xs gap-2 flex flex-col"),d(e,"class","py-1.5")},m(r,o){y(r,e,o),p(e,t);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(t,null)},p(r,o){if(o&611){l=Ne(r[1]);let a;for(a=0;a<l.length;a+=1){const i=Xl(r,l,a);s[a]?s[a].p(i,o):(s[a]=ls(i),s[a].c(),s[a].m(t,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=l.length}},d(r){r&&m(e),Ge(s,r)}}}function ls(n){let e,t,l=n[18]+1+"",s,r,o,a=n[9](n[16].source.name)+"",i,f,u,c,g;function h(){return n[15](n[16])}return{c(){e=I("button"),t=I("div"),s=W(l),r=j(),o=I("div"),i=W(a),f=j(),this.h()},l(_){e=M(_,"BUTTON",{id:!0,class:!0});var E=k(e);t=M(E,"DIV",{class:!0});var v=k(t);s=F(v,l),v.forEach(m),r=A(E),o=M(E,"DIV",{class:!0});var T=k(o);i=F(T,a),T.forEach(m),f=A(E),E.forEach(m),this.h()},h(){d(t,"class","font-medium bg-gray-50 dark:bg-gray-850 rounded-md px-1"),d(o,"class","flex-1 truncate hover:text-black dark:text-white/60 dark:hover:text-white transition text-left"),d(e,"id",u=`source-${n[0]}-${n[18]+1}`),d(e,"class","no-toggle outline-hidden flex dark:text-gray-300 bg-transparent text-gray-600 rounded-xl gap-1.5 items-center")},m(_,E){y(_,e,E),p(e,t),p(t,s),p(e,r),p(e,o),p(o,i),p(e,f),c||(g=ue(e,"click",h),c=!0)},p(_,E){n=_,E&2&&a!==(a=n[9](n[16].source.name)+"")&&K(i,a),E&1&&u!==(u=`source-${n[0]}-${n[18]+1}`)&&d(e,"id",u)},d(_){_&&m(e),c=!1,g()}}}function Xa(n){let e,t,l,s,r,o;function a(c){n[13](c)}let i={citation:n[6],showPercentage:n[2],showRelevance:n[3]};n[5]!==void 0&&(i.show=n[5]),e=new Za({props:i}),Je.push(()=>xe(e,"show",a));let f=n[1].length>0&&$l(Jt(n)),u=n[4]&&ts(n);return{c(){Y(e.$$.fragment),l=j(),f&&f.c(),s=j(),u&&u.c(),r=ie()},l(c){le(e.$$.fragment,c),l=A(c),f&&f.l(c),s=A(c),u&&u.l(c),r=ie()},m(c,g){$(e,c,g),y(c,l,g),f&&f.m(c,g),y(c,s,g),u&&u.m(c,g),y(c,r,g),o=!0},p(c,[g]){const h={};g&64&&(h.citation=c[6]),g&4&&(h.showPercentage=c[2]),g&8&&(h.showRelevance=c[3]),!t&&g&32&&(t=!0,h.show=c[5],et(()=>t=!1)),e.$set(h),c[1].length>0?f?f.p(Jt(c),g):(f=$l(Jt(c)),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null),c[4]?u?u.p(c,g):(u=ts(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i(c){o||(b(e.$$.fragment,c),o=!0)},o(c){w(e.$$.fragment,c),o=!1},d(c){c&&(m(l),m(s),m(r)),x(e,c),f&&f.d(c),u&&u.d(c)}}}function Ya(n){const e=n.flatMap(s=>s.distances??[]),t=e.filter(s=>s!==void 0&&s>=-1&&s<=1).length,l=e.filter(s=>s!==void 0&&(s<-1||s>1)).length;return!(e.length===0||t===e.length-1&&l===1||l===e.length-1&&t===1)}function $a(n){return n.flatMap(t=>t.distances??[]).every(t=>t!==void 0&&t>=-1&&t<=1)}function xa(n,e,t){let l;const s=Ze("i18n");Te(n,s,R=>t(7,l=R));let{id:r=""}=e,{sources:o=[]}=e,{readOnly:a=!1}=e,i=[],f=!1,u=!0,c=!1,g=!1,h=null;const _=R=>{var B,D,C,N;if(i[R])if(i[R],(D=(B=i[R])==null?void 0:B.source)!=null&&D.embed_url){const V=i[R].source.embed_url;if(V)if(a){window.open(V,"_blank");return}else Xt.set(!0),wr.set(!0),mi.set({title:((N=(C=i[R])==null?void 0:C.source)==null?void 0:N.name)||"Embedded Content",url:V});else t(6,h=i[R]),t(5,g=!0)}else t(6,h=i[R]),t(5,g=!0)},E=R=>{try{return decodeURIComponent(R)}catch{return R}};function v(R){g=R,t(5,g)}const T=()=>{t(4,c=!c)},P=R=>{t(5,g=!0),t(6,h=R)};return n.$$set=R=>{"id"in R&&t(0,r=R.id),"sources"in R&&t(10,o=R.sources),"readOnly"in R&&t(11,a=R.readOnly)},n.$$.update=()=>{n.$$.dirty&1026&&(t(1,i=o.reduce((R,B)=>{var D;return Object.keys(B).length===0||(D=B==null?void 0:B.document)==null||D.forEach((C,N)=>{var L,U,H;const V=(L=B==null?void 0:B.metadata)==null?void 0:L[N],O=(U=B==null?void 0:B.distances)==null?void 0:U[N],q=(V==null?void 0:V.source)??((H=B==null?void 0:B.source)==null?void 0:H.id)??"N/A";let Z=B==null?void 0:B.source;V!=null&&V.name&&(Z={...Z,name:V.name}),(q.startsWith("http://")||q.startsWith("https://"))&&(Z={...Z,name:q,url:q});const se=R.find(ae=>ae.id===q);se?(se.document.push(C),se.metadata.push(V),O!==void 0&&se.distances.push(O)):R.push({id:q,source:Z,document:[C],metadata:V?[V]:[],distances:O!==void 0?[O]:void 0})}),R},[])),t(3,u=Ya(i)),t(2,f=$a(i)))},[r,i,f,u,c,g,h,l,s,E,o,a,_,v,T,P]}class eo extends Ae{constructor(e){super(),ze(this,e,xa,Xa,Pe,{id:0,sources:10,readOnly:11,showSourceModal:12})}get showSourceModal(){return this.$$.ctx[12]}}function ss(n,e,t){const l=n.slice();return l[6]=e[t],l}function ns(n){let e,t,l,s;const r=[so,lo,to],o=[];function a(i,f){var u,c;return(u=i[1].result)!=null&&u.error?0:(c=i[1].result)!=null&&c.output?1:2}return t=a(n),l=o[t]=r[t](n),{c(){e=I("div"),l.c()},l(i){e=M(i,"DIV",{});var f=k(e);l.l(f),f.forEach(m)},m(i,f){y(i,e,f),o[t].m(e,null),s=!0},p(i,f){let u=t;t=a(i),t!==u&&(ee(),w(o[u],1,1,()=>{o[u]=null}),te(),l=o[t],l||(l=o[t]=r[t](i),l.c()),b(l,1),l.m(e,null))},i(i){s||(b(l),s=!0)},o(i){w(l),s=!1},d(i){i&&m(e),o[t].d()}}}function to(n){let e,t;return e=new sl({props:{type:"warning",content:"incomplete"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function lo(n){let e,t;return e=new sl({props:{type:"success",content:"success"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function so(n){let e,t;return e=new sl({props:{type:"error",content:"error"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function rs(n){let e,t,l;return t=new ll({props:{className:"size-4"}}),{c(){e=I("div"),Y(t.$$.fragment)},l(s){e=M(s,"DIV",{});var r=k(e);le(t.$$.fragment,r),r.forEach(m)},m(s,r){y(s,e,r),$(t,e,null),l=!0},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){w(t.$$.fragment,s),l=!1},d(s){s&&m(e),x(t)}}}function no(n){let e=n[2].t("Code execution")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("Code execution")+"")&&K(t,e)},d(l){l&&m(t)}}}function ro(n){var o;let e=n[2].t("Code execution")+"",t,l,s=((o=n[1])==null?void 0:o.name)+"",r;return{c(){t=W(e),l=W(": "),r=W(s)},l(a){t=F(a,e),l=F(a,": "),r=F(a,s)},m(a,i){y(a,t,i),y(a,l,i),y(a,r,i)},p(a,i){var f;i&4&&e!==(e=a[2].t("Code execution")+"")&&K(t,e),i&2&&s!==(s=((f=a[1])==null?void 0:f.name)+"")&&K(r,s)},d(a){a&&(m(t),m(l),m(r))}}}function is(n){var r,o,a,i;let e,t,l=((o=(r=n[1])==null?void 0:r.result)==null?void 0:o.error)&&as(n),s=((i=(a=n[1])==null?void 0:a.result)==null?void 0:i.output)&&os(n);return{c(){e=I("div"),l&&l.c(),t=j(),s&&s.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l&&l.l(u),t=A(u),s&&s.l(u),u.forEach(m),this.h()},h(){d(e,"class","dark:bg-[#202123] dark:text-white px-4 py-4 rounded-b-lg flex flex-col gap-3")},m(f,u){y(f,e,u),l&&l.m(e,null),p(e,t),s&&s.m(e,null)},p(f,u){var c,g,h,_;(g=(c=f[1])==null?void 0:c.result)!=null&&g.error?l?l.p(f,u):(l=as(f),l.c(),l.m(e,t)):l&&(l.d(1),l=null),(_=(h=f[1])==null?void 0:h.result)!=null&&_.output?s?s.p(f,u):(s=os(f),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(f){f&&m(e),l&&l.d(),s&&s.d()}}}function as(n){var f,u;let e,t,l=n[2].t("ERROR")+"",s,r,o,a=((u=(f=n[1])==null?void 0:f.result)==null?void 0:u.error)+"",i;return{c(){e=I("div"),t=I("div"),s=W(l),r=j(),o=I("div"),i=W(a),this.h()},l(c){e=M(c,"DIV",{});var g=k(e);t=M(g,"DIV",{class:!0});var h=k(t);s=F(h,l),h.forEach(m),r=A(g),o=M(g,"DIV",{class:!0});var _=k(o);i=F(_,a),_.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","text-gray-500 text-xs mb-1"),d(o,"class","text-sm")},m(c,g){y(c,e,g),p(e,t),p(t,s),p(e,r),p(e,o),p(o,i)},p(c,g){var h,_;g&4&&l!==(l=c[2].t("ERROR")+"")&&K(s,l),g&2&&a!==(a=((_=(h=c[1])==null?void 0:h.result)==null?void 0:_.error)+"")&&K(i,a)},d(c){c&&m(e)}}}function os(n){var f,u;let e,t,l=n[2].t("OUTPUT")+"",s,r,o,a=((u=(f=n[1])==null?void 0:f.result)==null?void 0:u.output)+"",i;return{c(){e=I("div"),t=I("div"),s=W(l),r=j(),o=I("div"),i=W(a),this.h()},l(c){e=M(c,"DIV",{});var g=k(e);t=M(g,"DIV",{class:!0});var h=k(t);s=F(h,l),h.forEach(m),r=A(g),o=M(g,"DIV",{class:!0});var _=k(o);i=F(_,a),_.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","text-gray-500 text-xs mb-1"),d(o,"class","text-sm")},m(c,g){y(c,e,g),p(e,t),p(t,s),p(e,r),p(e,o),p(o,i)},p(c,g){var h,_;g&4&&l!==(l=c[2].t("OUTPUT")+"")&&K(s,l),g&2&&a!==(a=((_=(h=c[1])==null?void 0:h.result)==null?void 0:_.output)+"")&&K(i,a)},d(c){c&&m(e)}}}function fs(n){var c,g;let e,t,l,s,r=n[2].t("Files")+"",o,a,i,f=Ne((g=(c=n[1])==null?void 0:c.result)==null?void 0:g.files),u=[];for(let h=0;h<f.length;h+=1)u[h]=us(ss(n,f,h));return{c(){e=I("div"),t=I("hr"),l=j(),s=I("div"),o=W(r),a=j(),i=I("ul");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=M(h,"DIV",{class:!0});var _=k(e);t=M(_,"HR",{class:!0}),l=A(_),s=M(_,"DIV",{class:!0});var E=k(s);o=F(E,r),E.forEach(m),a=A(_),i=M(_,"UL",{class:!0});var v=k(i);for(let T=0;T<u.length;T+=1)u[T].l(v);v.forEach(m),_.forEach(m),this.h()},h(){d(t,"class","border-gray-100 dark:border-gray-850 my-2"),d(s,"class","text-sm font-medium dark:text-gray-300"),d(i,"class","mt-1 list-disc pl-4 text-xs"),d(e,"class","flex flex-col w-full")},m(h,_){y(h,e,_),p(e,t),p(e,l),p(e,s),p(s,o),p(e,a),p(e,i);for(let E=0;E<u.length;E+=1)u[E]&&u[E].m(i,null)},p(h,_){var E,v;if(_&4&&r!==(r=h[2].t("Files")+"")&&K(o,r),_&2){f=Ne((v=(E=h[1])==null?void 0:E.result)==null?void 0:v.files);let T;for(T=0;T<f.length;T+=1){const P=ss(h,f,T);u[T]?u[T].p(P,_):(u[T]=us(P),u[T].c(),u[T].m(i,null))}for(;T<u.length;T+=1)u[T].d(1);u.length=f.length}},d(h){h&&m(e),Ge(u,h)}}}function us(n){let e,t,l=n[6].name+"",s,r,o;return{c(){e=I("li"),t=I("a"),s=W(l),o=j(),this.h()},l(a){e=M(a,"LI",{});var i=k(e);t=M(i,"A",{href:!0,target:!0});var f=k(t);s=F(f,l),f.forEach(m),o=A(i),i.forEach(m),this.h()},h(){d(t,"href",r=n[6].url),d(t,"target","_blank")},m(a,i){y(a,e,i),p(e,t),p(t,s),p(e,o)},p(a,i){i&2&&l!==(l=a[6].name+"")&&K(s,l),i&2&&r!==(r=a[6].url)&&d(t,"href",r)},d(a){a&&m(e)}}}function io(n){var se,L,U,H,ae,be,G,pe,X,ce,Me,ve,ne,oe,De,ke,Ce,we,he;let e,t,l,s,r,o,a,i,f,u,c,g,h,_,E,v,T,P,R,B,D=((se=n[1])==null?void 0:se.result)&&ns(n),C=!((L=n[1])!=null&&L.result)&&rs();function N(_e,S){var Q;return(Q=_e[1])!=null&&Q.name?ro:no}let V=N(n),O=V(n);u=new Wt({props:{className:"size-5"}}),E=new Vi({props:{id:"code-exec-"+((U=n[1])==null?void 0:U.id)+"-code",lang:((H=n[1])==null?void 0:H.language)??"",code:((ae=n[1])==null?void 0:ae.code)??"",className:"",editorClassName:(be=n[1])!=null&&be.result&&((pe=(G=n[1])==null?void 0:G.result)!=null&&pe.error||(ce=(X=n[1])==null?void 0:X.result)!=null&&ce.output)?"rounded-b-none":"",run:!1}});let q=((Me=n[1])==null?void 0:Me.result)&&(((ne=(ve=n[1])==null?void 0:ve.result)==null?void 0:ne.error)||((De=(oe=n[1])==null?void 0:oe.result)==null?void 0:De.output))&&is(n),Z=((Ce=(ke=n[1])==null?void 0:ke.result)==null?void 0:Ce.files)&&((he=(we=n[1])==null?void 0:we.result)==null?void 0:he.files.length)>0&&fs(n);return{c(){e=I("div"),t=I("div"),l=I("div"),D&&D.c(),s=j(),r=I("div"),C&&C.c(),o=j(),a=I("div"),O.c(),i=j(),f=I("button"),Y(u.$$.fragment),c=j(),g=I("div"),h=I("div"),_=I("div"),Y(E.$$.fragment),v=j(),q&&q.c(),T=j(),Z&&Z.c(),this.h()},l(_e){e=M(_e,"DIV",{});var S=k(e);t=M(S,"DIV",{class:!0});var Q=k(t);l=M(Q,"DIV",{class:!0});var fe=k(l);D&&D.l(fe),s=A(fe),r=M(fe,"DIV",{class:!0});var Ee=k(r);C&&C.l(Ee),o=A(Ee),a=M(Ee,"DIV",{});var ye=k(a);O.l(ye),ye.forEach(m),Ee.forEach(m),fe.forEach(m),i=A(Q),f=M(Q,"BUTTON",{class:!0});var J=k(f);le(u.$$.fragment,J),J.forEach(m),Q.forEach(m),c=A(S),g=M(S,"DIV",{class:!0});var de=k(g);h=M(de,"DIV",{class:!0});var Ie=k(h);_=M(Ie,"DIV",{class:!0});var Ve=k(_);le(E.$$.fragment,Ve),Ve.forEach(m),v=A(Ie),q&&q.l(Ie),T=A(Ie),Z&&Z.l(Ie),Ie.forEach(m),de.forEach(m),S.forEach(m),this.h()},h(){d(r,"class","flex gap-2 items-center"),d(l,"class","text-lg font-medium self-center flex flex-col gap-0.5 capitalize"),d(f,"class","self-center"),d(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"),d(_,"class","flex flex-col w-full"),d(h,"class","flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden"),d(g,"class","flex flex-col md:flex-row w-full px-4 pb-5")},m(_e,S){y(_e,e,S),p(e,t),p(t,l),D&&D.m(l,null),p(l,s),p(l,r),C&&C.m(r,null),p(r,o),p(r,a),O.m(a,null),p(t,i),p(t,f),$(u,f,null),p(e,c),p(e,g),p(g,h),p(h,_),$(E,_,null),p(h,v),q&&q.m(h,null),p(h,T),Z&&Z.m(h,null),P=!0,R||(B=ue(f,"click",n[4]),R=!0)},p(_e,S){var fe,Ee,ye,J,de,Ie,Ve,We,je,re,tt,Qe,Xe,lt,ut,Rt,Pt,Lt,jt;(fe=_e[1])!=null&&fe.result?D?(D.p(_e,S),S&2&&b(D,1)):(D=ns(_e),D.c(),b(D,1),D.m(l,s)):D&&(ee(),w(D,1,1,()=>{D=null}),te()),(Ee=_e[1])!=null&&Ee.result?C&&(ee(),w(C,1,1,()=>{C=null}),te()):C?S&2&&b(C,1):(C=rs(),C.c(),b(C,1),C.m(r,o)),V===(V=N(_e))&&O?O.p(_e,S):(O.d(1),O=V(_e),O&&(O.c(),O.m(a,null)));const Q={};S&2&&(Q.id="code-exec-"+((ye=_e[1])==null?void 0:ye.id)+"-code"),S&2&&(Q.lang=((J=_e[1])==null?void 0:J.language)??""),S&2&&(Q.code=((de=_e[1])==null?void 0:de.code)??""),S&2&&(Q.editorClassName=(Ie=_e[1])!=null&&Ie.result&&((We=(Ve=_e[1])==null?void 0:Ve.result)!=null&&We.error||(re=(je=_e[1])==null?void 0:je.result)!=null&&re.output)?"rounded-b-none":""),E.$set(Q),(tt=_e[1])!=null&&tt.result&&((Xe=(Qe=_e[1])==null?void 0:Qe.result)!=null&&Xe.error||(ut=(lt=_e[1])==null?void 0:lt.result)!=null&&ut.output)?q?q.p(_e,S):(q=is(_e),q.c(),q.m(h,T)):q&&(q.d(1),q=null),(Pt=(Rt=_e[1])==null?void 0:Rt.result)!=null&&Pt.files&&((jt=(Lt=_e[1])==null?void 0:Lt.result)==null?void 0:jt.files.length)>0?Z?Z.p(_e,S):(Z=fs(_e),Z.c(),Z.m(h,null)):Z&&(Z.d(1),Z=null)},i(_e){P||(b(D),b(C),b(u.$$.fragment,_e),b(E.$$.fragment,_e),P=!0)},o(_e){w(D),w(C),w(u.$$.fragment,_e),w(E.$$.fragment,_e),P=!1},d(_e){_e&&m(e),D&&D.d(),C&&C.d(),O.d(),x(u),x(E),q&&q.d(),Z&&Z.d(),R=!1,B()}}}function ao(n){let e,t,l;function s(o){n[5](o)}let r={size:"lg",$$slots:{default:[io]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.show=n[0]),e=new Tr({props:r}),Je.push(()=>xe(e,"show",s)),{c(){Y(e.$$.fragment)},l(o){le(e.$$.fragment,o)},m(o,a){$(e,o,a),l=!0},p(o,[a]){const i={};a&519&&(i.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,i.show=o[0],et(()=>t=!1)),e.$set(i)},i(o){l||(b(e.$$.fragment,o),l=!0)},o(o){w(e.$$.fragment,o),l=!1},d(o){x(e,o)}}}function oo(n,e,t){let l;const s=Ze("i18n");Te(n,s,f=>t(2,l=f));let{show:r=!1}=e,{codeExecution:o=null}=e;const a=()=>{t(0,r=!1),t(1,o=null)};function i(f){r=f,t(0,r)}return n.$$set=f=>{"show"in f&&t(0,r=f.show),"codeExecution"in f&&t(1,o=f.codeExecution)},[r,o,l,s,a,i]}class fo extends Ae{constructor(e){super(),ze(this,e,oo,ao,Pe,{show:0,codeExecution:1})}}function cs(n,e,t){const l=n.slice();return l[6]=e[t],l}function ds(n){let e,t=[],l=new Map,s,r=Ne(n[0]);const o=a=>a[6].id;for(let a=0;a<r.length;a+=1){let i=cs(n,r,a),f=o(i);l.set(f,t[a]=hs(f,i))}return{c(){e=I("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0});var i=k(e);for(let f=0;f<t.length;f+=1)t[f].l(i);i.forEach(m),this.h()},h(){d(e,"class","mt-1 mb-2 w-full flex gap-1 items-center flex-wrap")},m(a,i){y(a,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(a,i){i&7&&(r=Ne(a[0]),ee(),t=yt(t,i,o,1,a,r,l,e,St,hs,null,cs),te())},i(a){if(!s){for(let i=0;i<r.length;i+=1)b(t[i]);s=!0}},o(a){for(let i=0;i<t.length;i+=1)w(t[i]);s=!1},d(a){a&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function uo(n){let e,t;return e=new ll({props:{className:"size-4"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p:Be,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function co(n){let e,t,l,s;const r=[go,mo,ho],o=[];function a(i,f){var u,c;return(u=i[6].result)!=null&&u.error?0:(c=i[6].result)!=null&&c.output?1:2}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),l=ie()},l(i){t.l(i),l=ie()},m(i,f){o[e].m(i,f),y(i,l,f),s=!0},p(i,f){let u=e;e=a(i),e!==u&&(ee(),w(o[u],1,1,()=>{o[u]=null}),te(),t=o[e],t||(t=o[e]=r[e](i),t.c()),b(t,1),t.m(l.parentNode,l))},i(i){s||(b(t),s=!0)},o(i){w(t),s=!1},d(i){i&&m(l),o[e].d(i)}}}function ho(n){let e,t;return e=new Ai({}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function mo(n){let e,t;return e=new ji({props:{strokeWidth:"3",className:"size-3"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function go(n){let e,t;return e=new Wt({}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function hs(n,e){let t,l,s,r,o,a,i,f=e[6].name+"",u,c,g,h,_,E;const v=[co,uo],T=[];function P(B,D){var C;return(C=B[6])!=null&&C.result?0:1}r=P(e),o=T[r]=v[r](e);function R(){return e[4](e[6])}return{key:n,first:null,c(){t=I("div"),l=I("button"),s=I("div"),o.c(),a=j(),i=I("div"),u=W(f),g=j(),this.h()},l(B){t=M(B,"DIV",{class:!0});var D=k(t);l=M(D,"BUTTON",{class:!0});var C=k(l);s=M(C,"DIV",{class:!0});var N=k(s);o.l(N),N.forEach(m),a=A(C),i=M(C,"DIV",{class:!0});var V=k(i);u=F(V,f),V.forEach(m),C.forEach(m),g=A(D),D.forEach(m),this.h()},h(){var B;d(s,"class","bg-white dark:bg-gray-700 rounded-full size-4 flex items-center justify-center"),d(i,"class",c="flex-1 mx-2 line-clamp-1 code-execution-name "+((B=e[6])!=null&&B.result?"":"pulse")+" svelte-1gvtig2"),d(l,"class","flex dark:text-gray-300 py-1 px-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-xl max-w-96"),d(t,"class","flex gap-1 text-xs font-semibold"),this.first=t},m(B,D){y(B,t,D),p(t,l),p(l,s),T[r].m(s,null),p(l,a),p(l,i),p(i,u),p(t,g),h=!0,_||(E=ue(l,"click",R),_=!0)},p(B,D){var N;e=B;let C=r;r=P(e),r===C?T[r].p(e,D):(ee(),w(T[C],1,1,()=>{T[C]=null}),te(),o=T[r],o?o.p(e,D):(o=T[r]=v[r](e),o.c()),b(o,1),o.m(s,null)),(!h||D&1)&&f!==(f=e[6].name+"")&&K(u,f),(!h||D&1&&c!==(c="flex-1 mx-2 line-clamp-1 code-execution-name "+((N=e[6])!=null&&N.result?"":"pulse")+" svelte-1gvtig2"))&&d(i,"class",c)},i(B){h||(b(o),h=!0)},o(B){w(o),h=!1},d(B){B&&m(t),T[r].d(),_=!1,E()}}}function _o(n){let e,t,l,s,r;function o(f){n[3](f)}let a={codeExecution:n[1]};n[2]!==void 0&&(a.show=n[2]),e=new fo({props:a}),Je.push(()=>xe(e,"show",o));let i=n[0].length>0&&ds(n);return{c(){Y(e.$$.fragment),l=j(),i&&i.c(),s=ie()},l(f){le(e.$$.fragment,f),l=A(f),i&&i.l(f),s=ie()},m(f,u){$(e,f,u),y(f,l,u),i&&i.m(f,u),y(f,s,u),r=!0},p(f,[u]){const c={};u&2&&(c.codeExecution=f[1]),!t&&u&4&&(t=!0,c.show=f[2],et(()=>t=!1)),e.$set(c),f[0].length>0?i?(i.p(f,u),u&1&&b(i,1)):(i=ds(f),i.c(),b(i,1),i.m(s.parentNode,s)):i&&(ee(),w(i,1,1,()=>{i=null}),te())},i(f){r||(b(e.$$.fragment,f),b(i),r=!0)},o(f){w(e.$$.fragment,f),w(i),r=!1},d(f){f&&(m(l),m(s)),x(e,f),i&&i.d(f)}}}function po(n,e,t){let{codeExecutions:l=[]}=e,s=null,r=!1;const o=()=>{s&&t(1,s=l.find(f=>f.id===s.id))};function a(f){r=f,t(2,r)}const i=f=>{t(1,s=f),t(2,r=!0)};return n.$$set=f=>{"codeExecutions"in f&&t(0,l=f.codeExecutions)},n.$$.update=()=>{n.$$.dirty&1&&l&&o()},[l,s,r,a,i]}class bo extends Ae{constructor(e){super(),ze(this,e,po,_o,Pe,{codeExecutions:0})}}function ms(n,e,t){const l=n.slice();return l[28]=e[t],l}function vo(n){let e,t,l,s,r,o,a,i,f,u,c,g;s=new Ot({props:{id:`${n[1]}-float-prompt`,content:n[6]}});const h=[Io,wo],_=[];function E(T,P){var R;return P&128&&(i=null),i==null&&(i=!T[7]||((R=T[7])==null?void 0:R.trim())===""),i?0:1}f=E(n,-1),u=_[f]=h[f](n);let v=n[8]&&gs(n);return{c(){e=I("div"),t=I("div"),l=I("div"),Y(s.$$.fragment),r=j(),o=I("div"),a=I("div"),u.c(),c=j(),v&&v.c(),this.h()},l(T){e=M(T,"DIV",{class:!0});var P=k(e);t=M(P,"DIV",{class:!0});var R=k(t);l=M(R,"DIV",{class:!0});var B=k(l);le(s.$$.fragment,B),B.forEach(m),R.forEach(m),r=A(P),o=M(P,"DIV",{class:!0});var D=k(o);a=M(D,"DIV",{class:!0,id:!0});var C=k(a);u.l(C),c=A(C),v&&v.l(C),C.forEach(m),D.forEach(m),P.forEach(m),this.h()},h(){d(l,"class","font-medium"),d(t,"class","bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-3xl px-3.5 pt-3 w-full"),d(a,"class","max-h-80 overflow-y-auto w-full markdown-prose-xs px-3.5 py-3"),d(a,"id","response-container"),d(o,"class","bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-4xl w-full"),d(e,"class","bg-white dark:bg-gray-850 dark:text-gray-100 rounded-3xl shadow-xl w-80 max-w-full border border-gray-100 dark:border-gray-800")},m(T,P){y(T,e,P),p(e,t),p(t,l),$(s,l,null),p(e,r),p(e,o),p(o,a),_[f].m(a,null),p(a,c),v&&v.m(a,null),g=!0},p(T,P){const R={};P&2&&(R.id=`${T[1]}-float-prompt`),P&64&&(R.content=T[6]),s.$set(R);let B=f;f=E(T,P),f===B?_[f].p(T,P):(ee(),w(_[B],1,1,()=>{_[B]=null}),te(),u=_[f],u?u.p(T,P):(u=_[f]=h[f](T),u.c()),b(u,1),u.m(a,c)),T[8]?v?v.p(T,P):(v=gs(T),v.c(),v.m(a,null)):v&&(v.d(1),v=null)},i(T){g||(b(s.$$.fragment,T),b(u),g=!0)},o(T){w(s.$$.fragment,T),w(u),g=!1},d(T){T&&m(e),x(s),_[f].d(),v&&v.d()}}}function ko(n){let e,t,l,s;const r=[yo,Mo],o=[];function a(i,f){return i[2]?1:0}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),l=ie()},l(i){t.l(i),l=ie()},m(i,f){o[e].m(i,f),y(i,l,f),s=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ee(),w(o[u],1,1,()=>{o[u]=null}),te(),t=o[e],t?t.p(i,f):(t=o[e]=r[e](i),t.c()),b(t,1),t.m(l.parentNode,l))},i(i){s||(b(t),s=!0)},o(i){w(t),s=!1},d(i){i&&m(l),o[e].d(i)}}}function wo(n){let e,t;return e=new Ot({props:{id:`${n[1]}-float-response`,content:n[7]}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s&2&&(r.id=`${l[1]}-float-response`),s&128&&(r.content=l[7]),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Io(n){let e,t;return e=new el({props:{size:"sm"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p:Be,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function gs(n){let e,t,l=n[9].t("Add")+"",s,r,o;return{c(){e=I("div"),t=I("button"),s=W(l),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=k(e);t=M(i,"BUTTON",{class:!0});var f=k(t);s=F(f,l),f.forEach(m),i.forEach(m),this.h()},h(){d(t,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),d(e,"class","flex justify-end pt-3 text-sm font-medium")},m(a,i){y(a,e,i),p(e,t),p(t,s),r||(o=ue(t,"click",n[12]),r=!0)},p(a,i){i&512&&l!==(l=a[9].t("Add")+"")&&K(s,l)},d(a){a&&m(e),r=!1,o()}}}function Mo(n){let e,t,l,s,r,o,a,i,f,u,c;return{c(){e=I("div"),t=I("input"),s=j(),r=I("div"),o=I("button"),a=me("svg"),i=me("path"),this.h()},l(g){e=M(g,"DIV",{class:!0});var h=k(e);t=M(h,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),s=A(h),r=M(h,"DIV",{class:!0});var _=k(r);o=M(_,"BUTTON",{class:!0});var E=k(o);a=ge(E,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var v=k(a);i=ge(v,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(i).forEach(m),v.forEach(m),E.forEach(m),_.forEach(m),h.forEach(m),this.h()},h(){d(t,"type","text"),d(t,"id","floating-message-input"),d(t,"class","ml-5 bg-transparent outline-hidden w-full flex-1 text-sm"),d(t,"placeholder",l=n[9].t("Ask a question")),d(i,"fill-rule","evenodd"),d(i,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),d(i,"clip-rule","evenodd"),d(a,"xmlns","http://www.w3.org/2000/svg"),d(a,"viewBox","0 0 16 16"),d(a,"fill","currentColor"),d(a,"class","size-4"),d(o,"class",f=(n[5]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center"),d(r,"class","ml-1 mr-1"),d(e,"class","py-1 flex dark:text-gray-100 bg-white dark:bg-gray-850 border border-gray-100 dark:border-gray-800 w-72 rounded-full shadow-xl")},m(g,h){y(g,e,h),p(e,t),ot(t,n[5]),p(e,s),p(e,r),p(r,o),p(o,a),p(a,i),u||(c=[ue(t,"input",n[19]),ue(t,"keydown",n[20]),ue(o,"click",n[21])],u=!0)},p(g,h){h&512&&l!==(l=g[9].t("Ask a question"))&&d(t,"placeholder",l),h&32&&t.value!==g[5]&&ot(t,g[5]),h&32&&f!==(f=(g[5]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center")&&d(o,"class",f)},i:Be,o:Be,d(g){g&&m(e),u=!1,rt(c)}}}function yo(n){let e,t,l=Ne(n[0]),s=[];for(let o=0;o<l.length;o+=1)s[o]=ps(ms(n,l,o));const r=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=I("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","flex flex-row shrink-0 p-0.5 bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-xl shadow-xl border border-gray-100 dark:border-gray-800")},m(o,a){y(o,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,a){if(a&2109){l=Ne(o[0]);let i;for(i=0;i<l.length;i+=1){const f=ms(o,l,i);s[i]?(s[i].p(f,a),b(s[i],1)):(s[i]=ps(f),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ee(),i=l.length;i<s.length;i+=1)r(i);te()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function _s(n){let e,t,l;var s=n[28].icon;function r(o,a){return{props:{className:"size-3 shrink-0"}}}return s&&(e=wl(s,r())),{c(){e&&Y(e.$$.fragment),t=ie()},l(o){e&&le(e.$$.fragment,o),t=ie()},m(o,a){e&&$(e,o,a),y(o,t,a),l=!0},p(o,a){if(a&1&&s!==(s=o[28].icon)){if(e){ee();const i=e;w(i.$$.fragment,1,0,()=>{x(i,1)}),te()}s?(e=wl(s,r()),Y(e.$$.fragment),b(e.$$.fragment,1),$(e,t.parentNode,t)):e=null}},i(o){l||(e&&b(e.$$.fragment,o),l=!0)},o(o){e&&w(e.$$.fragment,o),l=!1},d(o){o&&m(t),e&&x(e,o)}}}function ps(n){let e,t,l,s=n[28].label+"",r,o,a,i,f,u=n[28].icon&&_s(n);function c(){return n[18](n[28])}return{c(){e=I("button"),u&&u.c(),t=j(),l=I("div"),r=W(s),o=j(),this.h()},l(g){e=M(g,"BUTTON",{class:!0});var h=k(e);u&&u.l(h),t=A(h),l=M(h,"DIV",{class:!0});var _=k(l);r=F(_,s),_.forEach(m),o=A(h),h.forEach(m),this.h()},h(){d(l,"class","shrink-0"),d(e,"class","px-1.5 py-[1px] hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl flex items-center gap-1 min-w-fit transition")},m(g,h){y(g,e,h),u&&u.m(e,null),p(e,t),p(e,l),p(l,r),p(e,o),a=!0,i||(f=ue(e,"click",c),i=!0)},p(g,h){n=g,n[28].icon?u?(u.p(n,h),h&1&&b(u,1)):(u=_s(n),u.c(),b(u,1),u.m(e,t)):u&&(ee(),w(u,1,1,()=>{u=null}),te()),(!a||h&1)&&s!==(s=n[28].label+"")&&K(r,s)},i(g){a||(b(u),a=!0)},o(g){w(u),a=!1},d(g){g&&m(e),u&&u.d(),i=!1,f()}}}function Eo(n){let e,t,l,s,r;const o=[ko,vo],a=[];function i(f,u){return f[7]===null?0:1}return t=i(n),l=a[t]=o[t](n),{c(){e=I("div"),l.c(),this.h()},l(f){e=M(f,"DIV",{id:!0,class:!0,style:!0});var u=k(e);l.l(u),u.forEach(m),this.h()},h(){d(e,"id",s=`floating-buttons-${n[1]}`),d(e,"class","absolute rounded-lg mt-1 text-xs z-9999"),Ht(e,"display","none")},m(f,u){y(f,e,u),a[t].m(e,null),r=!0},p(f,[u]){let c=t;t=i(f),t===c?a[t].p(f,u):(ee(),w(a[c],1,1,()=>{a[c]=null}),te(),l=a[t],l?l.p(f,u):(l=a[t]=o[t](f),l.c()),b(l,1),l.m(e,null)),(!r||u&2&&s!==(s=`floating-buttons-${f[1]}`))&&d(e,"id",s)},i(f){r||(b(l),r=!0)},o(f){w(l),r=!1},d(f){f&&m(e),a[t].d()}}}function Co(n,e,t){let l,s,r,o;Te(n,Ir,H=>t(23,s=H)),Te(n,gi,H=>t(24,r=H)),Te(n,Et,H=>t(25,o=H));const a=Ze("i18n");Te(n,a,H=>t(9,l=H));let{id:i=""}=e,{messageId:f=""}=e,{model:u=null}=e,{messages:c=[]}=e,{actions:g=[]}=e,{onAdd:h=H=>{}}=e,_=!1,E=null,v="",T="",P="",R=null,B=!1,D=null;const C=[{id:"ask",label:l.t("Ask"),icon:Hi,input:!0,prompt:`{{SELECTED_CONTENT}}


{{INPUT_CONTENT}}`},{id:"explain",label:l.t("Explain"),icon:Bi,prompt:`{{SELECTED_CONTENT}}


${l.t("Explain")}`}],N=async()=>{const H=document.getElementById("response-container");H&&H.scrollHeight-H.clientHeight<=H.scrollTop+50&&(H.scrollTop=H.scrollHeight)},V=async H=>{if(!u){Fe.error(l.t("Model not selected"));return}let ae=v.split(`
`).map(ne=>`> ${ne}`).join(`
`),be=g.find(ne=>ne.id===H);if(!be){Fe.error(l.t("Action not found"));return}let G=(be==null?void 0:be.prompt)??"",pe=[];const X=/\{\{(.*?)\|tool:id="([^"]+)"\}\}/g;G=G.replace(X,(ne,oe,De)=>(pe.push(De),oe));let ce=/\{\{TOOL:([^\}]+)\}\}/g,Me;for(;(Me=ce.exec(G))!==null;)pe.push(Me[1]);G=G.replace(ce,""),G.includes("{{INPUT_CONTENT}}")&&_&&(G=G.replace("{{INPUT_CONTENT}}",T),t(5,T="")),G=G.replace("{{CONTENT}}",v),G=G.replace("{{SELECTED_CONTENT}}",ae),t(6,P=G),t(7,R="");let ve;if([ve,D]=await zi(localStorage.token,{model:u,model_item:o.find(ne=>ne.id===u),session_id:r==null?void 0:r.id,chat_id:s,messages:[...c,{role:"user",content:P}].map(ne=>({role:ne.role,content:ne.content})),...pe.length>0?{tool_ids:pe}:{},stream:!0}),ve&&ve.ok){const ne=ve.body.getReader(),oe=new TextDecoder,De=async()=>{var ke,Ce;for(;;){const{done:we,value:he}=await ne.read();if(we)break;const S=oe.decode(he,{stream:!0}).split(`
`).filter(Q=>Q.trim()!=="");for(const Q of S)if(Q.startsWith("data: "))if(Q.startsWith("data: [DONE]")){t(8,B=!0),await Re(),N();continue}else try{const fe=JSON.parse(Q.slice(6));fe.choices&&((Ce=(ke=fe.choices[0])==null?void 0:ke.delta)!=null&&Ce.content)&&(t(7,R+=fe.choices[0].delta.content),N())}catch(fe){}}};try{await De()}catch(ke){ke.name}}else Fe.error(l.t("An error occurred while fetching the explanation"))},O=async()=>{h({modelId:u,parentId:f,messages:[{role:"user",content:P},{role:"assistant",content:R}]})},q=()=>{D&&D.abort(),t(3,E=null),t(4,v=""),t(7,R=null),t(8,B=!1),t(2,_=!1),t(5,T="")};kr(()=>{D&&D.abort()});const Z=async H=>{t(4,v=window.getSelection().toString()),t(3,E=H),H.prompt.includes("{{INPUT_CONTENT}}")?(t(2,_=!0),t(5,T=""),await Re(),setTimeout(()=>{const ae=document.getElementById("floating-message-input");ae&&ae.focus()},0)):V(H.id)};function se(){T=this.value,t(5,T)}const L=H=>{H.key==="Enter"&&V(E==null?void 0:E.id)},U=()=>{V(E==null?void 0:E.id)};return n.$$set=H=>{"id"in H&&t(1,i=H.id),"messageId"in H&&t(13,f=H.messageId),"model"in H&&t(14,u=H.model),"messages"in H&&t(15,c=H.messages),"actions"in H&&t(0,g=H.actions),"onAdd"in H&&t(16,h=H.onAdd)},n.$$.update=()=>{n.$$.dirty&1&&g.length===0&&t(0,g=C)},[g,i,_,E,v,T,P,R,B,l,a,V,O,f,u,c,h,q,Z,se,L,U]}class No extends Ae{constructor(e){super(),ze(this,e,Co,Eo,Pe,{id:1,messageId:13,model:14,messages:15,actions:0,onAdd:16,closeHandler:17})}get closeHandler(){return this.$$.ctx[17]}}function bs(n){var s,r,o,a;let e,t,l={id:n[0],messageId:n[3],actions:((s=n[20])==null?void 0:s.floatingActionButtons)??[],model:(n[4]??[]).includes((r=n[6])==null?void 0:r.id)?(o=n[6])==null?void 0:o.id:(n[4]??[]).length>0?n[4].at(0):(a=n[6])==null?void 0:a.id,messages:Yt(n[2],n[3]),onAdd:n[27]};return e=new No({props:l}),n[28](e),{c(){Y(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,f){$(e,i,f),t=!0},p(i,f){var c,g,h,_;const u={};f[0]&1&&(u.id=i[0]),f[0]&8&&(u.messageId=i[3]),f[0]&1048576&&(u.actions=((c=i[20])==null?void 0:c.floatingActionButtons)??[]),f[0]&80&&(u.model=(i[4]??[]).includes((g=i[6])==null?void 0:g.id)?(h=i[6])==null?void 0:h.id:(i[4]??[]).length>0?i[4].at(0):(_=i[6])==null?void 0:_.id),f[0]&12&&(u.messages=Yt(i[2],i[3])),f[0]&65536&&(u.onAdd=i[27]),e.$set(u)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){n[28](null),x(e,i)}}}function Do(n){let e,t,l,s,r;t=new Ot({props:{id:n[0],content:n[1],model:n[6],save:n[8],preview:n[9],done:n[5],editCodeBlock:n[11],topPadding:n[12],sourceIds:(n[7]??[]).reduce(n[23],[]),onSourceClick:n[14],onTaskClick:n[15],onSave:n[13],onUpdate:n[24],onPreview:n[25]}});let o=n[10]&&n[6]&&bs(n);return{c(){e=I("div"),Y(t.$$.fragment),l=j(),o&&o.c(),s=ie()},l(a){e=M(a,"DIV",{});var i=k(e);le(t.$$.fragment,i),i.forEach(m),l=A(a),o&&o.l(a),s=ie()},m(a,i){y(a,e,i),$(t,e,null),n[26](e),y(a,l,i),o&&o.m(a,i),y(a,s,i),r=!0},p(a,i){const f={};i[0]&1&&(f.id=a[0]),i[0]&2&&(f.content=a[1]),i[0]&64&&(f.model=a[6]),i[0]&256&&(f.save=a[8]),i[0]&512&&(f.preview=a[9]),i[0]&32&&(f.done=a[5]),i[0]&2048&&(f.editCodeBlock=a[11]),i[0]&4096&&(f.topPadding=a[12]),i[0]&192&&(f.sourceIds=(a[7]??[]).reduce(a[23],[])),i[0]&16384&&(f.onSourceClick=a[14]),i[0]&32768&&(f.onTaskClick=a[15]),i[0]&8192&&(f.onSave=a[13]),i[0]&3670016&&(f.onUpdate=a[24]),t.$set(f),a[10]&&a[6]?o?(o.p(a,i),i[0]&1088&&b(o,1)):(o=bs(a),o.c(),b(o,1),o.m(s.parentNode,s)):o&&(ee(),w(o,1,1,()=>{o=null}),te())},i(a){r||(b(t.$$.fragment,a),b(o),r=!0)},o(a){w(t.$$.fragment,a),w(o),r=!1},d(a){a&&(m(e),m(l),m(s)),x(t),n[26](null),o&&o.d(a)}}}function To(n,e,t){let l,s,r;Te(n,Mr,G=>t(19,l=G)),Te(n,bt,G=>t(20,s=G)),Te(n,Ir,G=>t(21,r=G)),Ze("i18n");let{id:o}=e,{content:a}=e,{history:i}=e,{messageId:f}=e,{selectedModels:u=[]}=e,{done:c=!0}=e,{model:g=null}=e,{sources:h=null}=e,{save:_=!1}=e,{preview:E=!1}=e,{floatingButtons:v=!0}=e,{editCodeBlock:T=!0}=e,{topPadding:P=!1}=e,{onSave:R=G=>{}}=e,{onSourceClick:B=G=>{}}=e,{onTaskClick:D=G=>{}}=e,{onAddMessages:C=G=>{}}=e,N,V;const O=G=>{const pe=document.getElementById(`floating-buttons-${o}`);if(!(N!=null&&N.contains(G.target))&&!(pe!=null&&pe.contains(G.target))){q();return}setTimeout(async()=>{if(await Re(),!(N!=null&&N.contains(G.target)))return;let X=window.getSelection();if(X.toString().trim().length>0){const Me=X.getRangeAt(0).getBoundingClientRect(),ve=N.getBoundingClientRect(),ne=Me.bottom-ve.top,oe=Me.left-ve.left;if(pe){pe.style.display="block";const De=ve.width-oe;let ke=l?window.innerWidth/2:window.innerWidth/3;if(De<ke){const Ce=ve.right-Me.right;pe.style.right=`${Ce}px`,pe.style.left="auto"}else pe.style.left=`${oe}px`,pe.style.right="auto";pe.style.top=`${ne+5}px`}}else q()},0)},q=()=>{const G=document.getElementById(`floating-buttons-${o}`);G&&(G.style.display="none"),V&&typeof(V==null?void 0:V.closeHandler)=="function"&&(V==null||V.closeHandler())},Z=G=>{G.key==="Escape"&&q()};Mt(()=>{v&&(N==null||N.addEventListener("mouseup",O),document.addEventListener("mouseup",O),document.addEventListener("keydown",Z))}),kr(()=>{v&&(N==null||N.removeEventListener("mouseup",O),document.removeEventListener("mouseup",O),document.removeEventListener("keydown",Z))});const se=(G,pe)=>{let X=[];return pe.document.forEach((ce,Me)=>{var oe,De,ke,Ce,we;if(((ke=(De=(oe=g==null?void 0:g.info)==null?void 0:oe.meta)==null?void 0:De.capabilities)==null?void 0:ke.citations)==!1)return X.push("N/A"),X;const ve=(Ce=pe.metadata)==null?void 0:Ce[Me],ne=(ve==null?void 0:ve.source)??"N/A";return ve!=null&&ve.name?(X.push(ve.name),X):(ne.startsWith("http://")||ne.startsWith("https://")?X.push(ne):X.push(((we=pe==null?void 0:pe.source)==null?void 0:we.name)??ne),X)}),G=[...G,...X],G.filter((ce,Me)=>G.indexOf(ce)===Me)},L=G=>{const{lang:pe,text:X}=G;((s==null?void 0:s.detectArtifacts)??!0)&&(["html","svg"].includes(pe)||pe==="xml"&&X.includes("svg"))&&!l&&r&&(Ml.set(!0),Xt.set(!0))},U=async G=>{await _i.set(G),await Xt.set(!0),await Ml.set(!0),await pi.set(!1),await wr.set(!1)};function H(G){Je[G?"unshift":"push"](()=>{N=G,t(17,N)})}const ae=({modelId:G,parentId:pe,messages:X})=>{C({modelId:G,parentId:pe,messages:X}),q()};function be(G){Je[G?"unshift":"push"](()=>{V=G,t(18,V)})}return n.$$set=G=>{"id"in G&&t(0,o=G.id),"content"in G&&t(1,a=G.content),"history"in G&&t(2,i=G.history),"messageId"in G&&t(3,f=G.messageId),"selectedModels"in G&&t(4,u=G.selectedModels),"done"in G&&t(5,c=G.done),"model"in G&&t(6,g=G.model),"sources"in G&&t(7,h=G.sources),"save"in G&&t(8,_=G.save),"preview"in G&&t(9,E=G.preview),"floatingButtons"in G&&t(10,v=G.floatingButtons),"editCodeBlock"in G&&t(11,T=G.editCodeBlock),"topPadding"in G&&t(12,P=G.topPadding),"onSave"in G&&t(13,R=G.onSave),"onSourceClick"in G&&t(14,B=G.onSourceClick),"onTaskClick"in G&&t(15,D=G.onTaskClick),"onAddMessages"in G&&t(16,C=G.onAddMessages)},[o,a,i,f,u,c,g,h,_,E,v,T,P,R,B,D,C,N,V,l,s,r,q,se,L,U,H,ae,be]}class Vo extends Ae{constructor(e){super(),ze(this,e,To,Do,Pe,{id:0,content:1,history:2,messageId:3,selectedModels:4,done:5,model:6,sources:7,save:8,preview:9,floatingButtons:10,editCodeBlock:11,topPadding:12,onSave:13,onSourceClick:14,onTaskClick:15,onAddMessages:16},null,[-1,-1])}}function Bo(n){return new Worker(""+new URL("../workers/kokoro.worker-DH_kWnDg.js",import.meta.url).href,{type:"module",name:n==null?void 0:n.name})}class So{constructor(e="fp32"){kt(this,"worker",null);kt(this,"initialized",!1);kt(this,"dtype");kt(this,"requestQueue",[]);kt(this,"processing",!1);this.dtype=e}async init(){if(this.worker){console.warn("KokoroWorker is already initialized.");return}return this.worker=new Bo,this.worker.onmessage=e=>{const{status:t,error:l,audioUrl:s}=e.data;if(t==="init:complete")this.initialized=!0;else if(t==="init:error")this.initialized=!1;else if(t==="generate:complete"){const r=this.requestQueue.shift();r&&(r.resolve(s),this.processNextRequest())}else if(t==="generate:error"){const r=this.requestQueue.shift();r&&(r.reject(new Error(l)),this.processNextRequest())}},new Promise((e,t)=>{this.worker.postMessage({type:"init",payload:{dtype:this.dtype}});const l=s=>{s.data.status==="init:complete"?(this.worker.removeEventListener("message",l),this.initialized=!0,e()):s.data.status==="init:error"&&(this.worker.removeEventListener("message",l),t(new Error(s.data.error)))};this.worker.addEventListener("message",l)})}async generate({text:e,voice:t}){if(!this.initialized||!this.worker)throw new Error("KokoroTTS Worker is not initialized yet.");return new Promise((l,s)=>{this.requestQueue.push({text:e,voice:t,resolve:l,reject:s}),this.processing||this.processNextRequest()})}processNextRequest(){if(this.requestQueue.length===0){this.processing=!1;return}this.processing=!0;const{text:e,voice:t}=this.requestQueue[0];this.worker.postMessage({type:"generate",payload:{text:e,voice:t}})}terminate(){this.worker&&(this.worker.terminate(),this.worker=null,this.initialized=!1,this.requestQueue=[],this.processing=!1)}}function vs(n,e,t){const l=n.slice();return l[5]=e[t],l[7]=t,l}function Oo(n){let e,t,l=n[5]+"",s,r,o,a;function i(){return n[4](n[5])}return{c(){e=I("div"),t=I("div"),s=W(l),this.h()},l(f){e=M(f,"DIV",{class:!0,"aria-label":!0});var u=k(e);t=M(u,"DIV",{class:!0});var c=k(t);s=F(c,l),c.forEach(m),u.forEach(m),this.h()},h(){d(t,"class","line-clamp-1"),d(e,"class","py-1.5 bg-transparent text-left text-sm flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition cursor-pointer"),d(e,"aria-label",r=n[5])},m(f,u){y(f,e,u),p(e,t),p(t,s),o||(a=ue(e,"click",i),o=!0)},p(f,u){n=f,u&1&&l!==(l=n[5]+"")&&K(s,l),u&1&&r!==(r=n[5])&&d(e,"aria-label",r)},d(f){f&&m(e),o=!1,a()}}}function ks(n){let e;return{c(){e=I("hr"),this.h()},l(t){e=M(t,"HR",{class:!0}),this.h()},h(){d(e,"class","border-gray-50 dark:border-gray-850")},m(t,l){y(t,e,l)},d(t){t&&m(e)}}}function ws(n,e){let t,l,s,r,o;l=new Le({props:{content:e[5],placement:"top-start",className:"line-clamp-1",$$slots:{default:[Oo]},$$scope:{ctx:e}}});let a=e[7]<e[0].length-1&&ks();return{key:n,first:null,c(){t=ie(),Y(l.$$.fragment),s=j(),a&&a.c(),r=ie(),this.h()},l(i){t=ie(),le(l.$$.fragment,i),s=A(i),a&&a.l(i),r=ie(),this.h()},h(){this.first=t},m(i,f){y(i,t,f),$(l,i,f),y(i,s,f),a&&a.m(i,f),y(i,r,f),o=!0},p(i,f){e=i;const u={};f&1&&(u.content=e[5]),f&259&&(u.$$scope={dirty:f,ctx:e}),l.$set(u),e[7]<e[0].length-1?a||(a=ks(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i(i){o||(b(l.$$.fragment,i),o=!0)},o(i){w(l.$$.fragment,i),o=!1},d(i){i&&(m(t),m(s),m(r)),x(l,i),a&&a.d(i)}}}function Ro(n){let e,t,l=n[2].t("Follow up")+"",s,r,o,a=[],i=new Map,f,u=Ne(n[0]);const c=g=>g[7];for(let g=0;g<u.length;g+=1){let h=vs(n,u,g),_=c(h);i.set(_,a[g]=ws(_,h))}return{c(){e=I("div"),t=I("div"),s=W(l),r=j(),o=I("div");for(let g=0;g<a.length;g+=1)a[g].c();this.h()},l(g){e=M(g,"DIV",{class:!0});var h=k(e);t=M(h,"DIV",{class:!0});var _=k(t);s=F(_,l),_.forEach(m),r=A(h),o=M(h,"DIV",{class:!0});var E=k(o);for(let v=0;v<a.length;v+=1)a[v].l(E);E.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","text-sm font-medium"),d(o,"class","flex flex-col text-left gap-1 mt-1.5"),d(e,"class","mt-4")},m(g,h){y(g,e,h),p(e,t),p(t,s),p(e,r),p(e,o);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(o,null);f=!0},p(g,[h]){(!f||h&4)&&l!==(l=g[2].t("Follow up")+"")&&K(s,l),h&3&&(u=Ne(g[0]),ee(),a=yt(a,h,c,1,g,u,i,o,St,ws,null,vs),te())},i(g){if(!f){for(let h=0;h<u.length;h+=1)b(a[h]);f=!0}},o(g){for(let h=0;h<a.length;h+=1)w(a[h]);f=!1},d(g){g&&m(e);for(let h=0;h<a.length;h+=1)a[h].d()}}}function Po(n,e,t){let l;const s=Ze("i18n");Te(n,s,i=>t(2,l=i));let{followUps:r=[]}=e,{onClick:o=()=>{}}=e;const a=i=>o(i);return n.$$set=i=>{"followUps"in i&&t(0,r=i.followUps),"onClick"in i&&t(1,o=i.onClick)},[r,o,l,s,a]}class Lo extends Ae{constructor(e){super(),ze(this,e,Po,Ro,Pe,{followUps:0,onClick:1})}}function jo(n){let e,t,l,s,r;return{c(){e=me("svg"),t=me("path"),l=me("path"),s=me("path"),r=me("path"),this.h()},l(o){e=ge(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=k(e);t=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(t).forEach(m),l=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(l).forEach(m),s=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(s).forEach(m),r=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(r).forEach(m),a.forEach(m),this.h()},h(){d(t,"d","M11 6H21"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(l,"d","M11 12H21"),d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(s,"d","M11 18H21"),d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(r,"d","M5 19V5M5 19L3 16.5M5 19L7 16.5M5 5L3 7M5 5L7 7"),d(r,"stroke-linecap","round"),d(r,"stroke-linejoin","round"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width",n[1]),d(e,"stroke","currentColor"),d(e,"class",n[0])},m(o,a){y(o,e,a),p(e,t),p(e,l),p(e,s),p(e,r)},p(o,[a]){a&2&&d(e,"stroke-width",o[1]),a&1&&d(e,"class",o[0])},i:Be,o:Be,d(o){o&&m(e)}}}function Ao(n,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return n.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[l,s]}class zo extends Ae{constructor(e){super(),ze(this,e,Ao,jo,Pe,{className:0,strokeWidth:1})}}function Ho(n){let e,t,l,s,r;return{c(){e=me("svg"),t=me("path"),l=me("path"),s=me("path"),r=me("path"),this.h()},l(o){e=ge(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=k(e);t=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(t).forEach(m),l=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(l).forEach(m),s=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(s).forEach(m),r=ge(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),k(r).forEach(m),a.forEach(m),this.h()},h(){d(t,"d","M11 6H21"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(l,"d","M11 12H21"),d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(s,"d","M11 18H21"),d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(r,"d","M5 19V5M5 10L3 8M5 10L7 8M5 14L3 16M5 14L7 16"),d(r,"stroke-linecap","round"),d(r,"stroke-linejoin","round"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width",n[1]),d(e,"stroke","currentColor"),d(e,"class",n[0])},m(o,a){y(o,e,a),p(e,t),p(e,l),p(e,s),p(e,r)},p(o,[a]){a&2&&d(e,"stroke-width",o[1]),a&1&&d(e,"class",o[0])},i:Be,o:Be,d(o){o&&m(e)}}}function Uo(n,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return n.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[l,s]}class qo extends Ae{constructor(e){super(),ze(this,e,Uo,Ho,Pe,{className:0,strokeWidth:1})}}function Wo(n){let e;const t=n[6].default,l=_r(t,n,n[15],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),e=!0},p(s,r){l&&l.p&&(!e||r&32768)&&pr(l,t,s,s[15],e?vr(t,s[15],r,null):br(s[15]),null)},i(s){e||(b(l,s),e=!0)},o(s){w(l,s),e=!1},d(s){l&&l.d(s)}}}function Fo(n){let e,t,l,s,r=n[4].t("Try Again")+"",o;return{c(){e=me("svg"),t=me("path"),l=j(),s=I("div"),o=W(r),this.h()},l(a){e=ge(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var i=k(e);t=ge(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),i.forEach(m),l=A(a),s=M(a,"DIV",{class:!0});var f=k(s);o=F(f,r),f.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","2"),d(e,"aria-hidden","true"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4"),d(s,"class","flex items-center")},m(a,i){y(a,e,i),p(e,t),y(a,l,i),y(a,s,i),p(s,o)},p(a,i){i&16&&r!==(r=a[4].t("Try Again")+"")&&K(o,r)},d(a){a&&(m(e),m(l),m(s))}}}function Jo(n){let e,t,l,s=n[4].t("Add Details")+"",r,o;return e=new zo({props:{strokeWidth:"2"}}),{c(){Y(e.$$.fragment),t=j(),l=I("div"),r=W(s),this.h()},l(a){le(e.$$.fragment,a),t=A(a),l=M(a,"DIV",{class:!0});var i=k(l);r=F(i,s),i.forEach(m),this.h()},h(){d(l,"class","flex items-center")},m(a,i){$(e,a,i),y(a,t,i),y(a,l,i),p(l,r),o=!0},p(a,i){(!o||i&16)&&s!==(s=a[4].t("Add Details")+"")&&K(r,s)},i(a){o||(b(e.$$.fragment,a),o=!0)},o(a){w(e.$$.fragment,a),o=!1},d(a){a&&(m(t),m(l)),x(e,a)}}}function Go(n){let e,t,l,s=n[4].t("More Concise")+"",r,o;return e=new qo({props:{strokeWidth:"2"}}),{c(){Y(e.$$.fragment),t=j(),l=I("div"),r=W(s),this.h()},l(a){le(e.$$.fragment,a),t=A(a),l=M(a,"DIV",{class:!0});var i=k(l);r=F(i,s),i.forEach(m),this.h()},h(){d(l,"class","flex items-center")},m(a,i){$(e,a,i),y(a,t,i),y(a,l,i),p(l,r),o=!0},p(a,i){(!o||i&16)&&s!==(s=a[4].t("More Concise")+"")&&K(r,s)},i(a){o||(b(e.$$.fragment,a),o=!0)},o(a){w(e.$$.fragment,a),o=!1},d(a){a&&(m(t),m(l)),x(e,a)}}}function Zo(n){let e,t,l,s,r,o,a,i,f,u,c,g,h,_,E,v,T,P,R,B;return h=new Ft({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Fo]},$$scope:{ctx:n}}}),h.$on("click",n[10]),E=new Ft({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Jo]},$$scope:{ctx:n}}}),E.$on("click",n[11]),T=new Ft({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Go]},$$scope:{ctx:n}}}),T.$on("click",n[12]),{c(){e=I("div"),t=I("input"),s=j(),r=I("div"),o=I("button"),a=me("svg"),i=me("path"),u=j(),c=I("hr"),g=j(),Y(h.$$.fragment),_=j(),Y(E.$$.fragment),v=j(),Y(T.$$.fragment),this.h()},l(D){e=M(D,"DIV",{class:!0});var C=k(e);t=M(C,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0,autocomplete:!0}),s=A(C),r=M(C,"DIV",{class:!0});var N=k(r);o=M(N,"BUTTON",{class:!0});var V=k(o);a=ge(V,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var O=k(a);i=ge(O,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(i).forEach(m),O.forEach(m),V.forEach(m),N.forEach(m),C.forEach(m),u=A(D),c=M(D,"HR",{class:!0}),g=A(D),le(h.$$.fragment,D),_=A(D),le(E.$$.fragment,D),v=A(D),le(T.$$.fragment,D),this.h()},h(){d(t,"type","text"),d(t,"id","floating-message-input"),d(t,"class","bg-transparent outline-hidden w-full flex-1 text-sm"),d(t,"placeholder",l=n[4].t("Suggest a change")),d(t,"autocomplete","off"),d(i,"fill-rule","evenodd"),d(i,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),d(i,"clip-rule","evenodd"),d(a,"xmlns","http://www.w3.org/2000/svg"),d(a,"viewBox","0 0 16 16"),d(a,"fill","currentColor"),d(a,"class","size-3.5"),d(o,"class",f=(n[3]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1 self-center"),d(r,"class","ml-2 self-center flex items-center"),d(e,"class","py-1.5 px-2.5 flex dark:text-gray-100"),d(c,"class","border-gray-50 dark:border-gray-800 my-1 mx-2")},m(D,C){y(D,e,C),p(e,t),ot(t,n[3]),p(e,s),p(e,r),p(r,o),p(o,a),p(a,i),y(D,u,C),y(D,c,C),y(D,g,C),$(h,D,C),y(D,_,C),$(E,D,C),y(D,v,C),$(T,D,C),P=!0,R||(B=[ue(t,"input",n[7]),ue(t,"keydown",n[8]),ue(o,"click",n[9])],R=!0)},p(D,C){(!P||C&16&&l!==(l=D[4].t("Suggest a change")))&&d(t,"placeholder",l),C&8&&t.value!==D[3]&&ot(t,D[3]),(!P||C&8&&f!==(f=(D[3]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1 self-center"))&&d(o,"class",f);const N={};C&32784&&(N.$$scope={dirty:C,ctx:D}),h.$set(N);const V={};C&32784&&(V.$$scope={dirty:C,ctx:D}),E.$set(V);const O={};C&32784&&(O.$$scope={dirty:C,ctx:D}),T.$set(O)},i(D){P||(b(h.$$.fragment,D),b(E.$$.fragment,D),b(T.$$.fragment,D),P=!0)},o(D){w(h.$$.fragment,D),w(E.$$.fragment,D),w(T.$$.fragment,D),P=!1},d(D){D&&(m(e),m(u),m(c),m(g),m(_),m(v)),x(h,D),x(E,D),x(T,D),R=!1,rt(B)}}}function Ko(n){let e,t,l;return t=new Ui({props:{class:"w-full max-w-[200px] rounded-2xl px-1 py-1 border border-gray-100 dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg transition",sideOffset:-2,side:"bottom",align:"start",transition:qi,$$slots:{default:[Zo]},$$scope:{ctx:n}}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{slot:!0});var r=k(e);le(t.$$.fragment,r),r.forEach(m),this.h()},h(){d(e,"slot","content")},m(s,r){y(s,e,r),$(t,e,null),l=!0},p(s,r){const o={};r&32797&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){w(t.$$.fragment,s),l=!1},d(s){s&&m(e),x(t)}}}function Qo(n){let e,t,l;function s(o){n[13](o)}let r={align:"end",$$slots:{content:[Ko],default:[Wo]},$$scope:{ctx:n}};return n[2]!==void 0&&(r.show=n[2]),e=new Wi({props:r}),Je.push(()=>xe(e,"show",s)),e.$on("change",n[14]),{c(){Y(e.$$.fragment)},l(o){le(e.$$.fragment,o)},m(o,a){$(e,o,a),l=!0},p(o,[a]){const i={};a&32797&&(i.$$scope={dirty:a,ctx:o}),!t&&a&4&&(t=!0,i.show=o[2],et(()=>t=!1)),e.$set(i)},i(o){l||(b(e.$$.fragment,o),l=!0)},o(o){w(e.$$.fragment,o),l=!1},d(o){x(e,o)}}}function Xo(n,e,t){let l,{$$slots:s={},$$scope:r}=e;const o=Ze("i18n");Te(n,o,R=>t(4,l=R));let{onRegenerate:a=(R=null)=>{}}=e,{onClose:i=()=>{}}=e,f=!1,u="";function c(){u=this.value,t(3,u)}const g=R=>{R.key==="Enter"&&(a(u),t(2,f=!1))},h=()=>{a(u),t(2,f=!1)},_=()=>{a(),t(2,f=!1)},E=()=>{a(l.t("Add Details"))},v=()=>{a(l.t("More Concise"))};function T(R){f=R,t(2,f)}const P=R=>{R.detail===!1&&i()};return n.$$set=R=>{"onRegenerate"in R&&t(0,a=R.onRegenerate),"onClose"in R&&t(1,i=R.onClose),"$$scope"in R&&t(15,r=R.$$scope)},[a,i,f,u,l,o,s,c,g,h,_,E,v,T,P,r]}class Yo extends Ae{constructor(e){super(),ze(this,e,Xo,Qo,Pe,{onRegenerate:0,onClose:1})}}function Is(n,e,t){const l=n.slice();return l[4]=e[t],l[6]=t,l}function Ms(n,e,t){const l=n.slice();return l[4]=e[t],l[6]=t,l}function ys(n){let e,t,l,s;const r=[sf,lf,tf,ef,xo,$o],o=[];function a(i,f){var u,c,g,h,_,E,v,T,P,R;return((u=i[0])==null?void 0:u.action)==="web_search"&&((c=i[0])!=null&&c.urls||(g=i[0])!=null&&g.items)?0:((h=i[0])==null?void 0:h.action)==="knowledge_search"?1:((_=i[0])==null?void 0:_.action)==="web_search_queries_generated"&&((E=i[0])!=null&&E.queries)?2:((v=i[0])==null?void 0:v.action)==="queries_generated"&&((T=i[0])!=null&&T.queries)?3:((P=i[0])==null?void 0:P.action)==="sources_retrieved"&&((R=i[0])==null?void 0:R.count)!==void 0?4:5}return t=a(n),l=o[t]=r[t](n),{c(){e=I("div"),l.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);l.l(f),f.forEach(m),this.h()},h(){d(e,"class","status-description flex items-center gap-2 py-0.5 w-full text-left")},m(i,f){y(i,e,f),o[t].m(e,null),s=!0},p(i,f){let u=t;t=a(i),t===u?o[t].p(i,f):(ee(),w(o[u],1,1,()=>{o[u]=null}),te(),l=o[t],l?l.p(i,f):(l=o[t]=r[t](i),l.c()),b(l,1),l.m(e,null))},i(i){s||(b(l),s=!0)},o(i){w(l),s=!1},d(i){i&&m(e),o[t].d()}}}function $o(n){let e,t,l,s;function r(i,f){var u,c,g,h,_;return f&1&&(l=null),l==null&&(l=!!((c=(u=i[0])==null?void 0:u.description)!=null&&c.includes("{{searchQuery}}"))),l?ff:((g=i[0])==null?void 0:g.description)==="No search query generated"?of:((h=i[0])==null?void 0:h.description)==="Generating search query"?af:((_=i[0])==null?void 0:_.description)==="Searching the web"?rf:nf}let o=r(n,-1),a=o(n);return{c(){e=I("div"),t=I("div"),a.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);t=M(f,"DIV",{class:!0});var u=k(t);a.l(u),u.forEach(m),f.forEach(m),this.h()},h(){var i;d(t,"class",s=((n[1]||((i=n[0])==null?void 0:i.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(i,f){y(i,e,f),p(e,t),a.m(t,null)},p(i,f){var u;o===(o=r(i,f))&&a?a.p(i,f):(a.d(1),a=o(i),a&&(a.c(),a.m(t,null))),f&3&&s!==(s=((i[1]||((u=i[0])==null?void 0:u.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap")&&d(t,"class",s)},i:Be,o:Be,d(i){i&&m(e),a.d()}}}function xo(n){let e,t,l;function s(a,i){return a[0].count===0?df:a[0].count===1?cf:uf}let r=s(n),o=r(n);return{c(){e=I("div"),t=I("div"),o.c(),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=k(e);t=M(i,"DIV",{class:!0});var f=k(t);o.l(f),f.forEach(m),i.forEach(m),this.h()},h(){var a;d(t,"class",l=((n[1]||((a=n[0])==null?void 0:a.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(a,i){y(a,e,i),p(e,t),o.m(t,null)},p(a,i){var f;r===(r=s(a))&&o?o.p(a,i):(o.d(1),o=r(a),o&&(o.c(),o.m(t,null))),i&3&&l!==(l=((a[1]||((f=a[0])==null?void 0:f.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap")&&d(t,"class",l)},i:Be,o:Be,d(a){a&&m(e),o.d()}}}function ef(n){let e,t,l=n[2].t("Querying")+"",s,r,o,a,i=[],f=new Map,u,c=Ne(n[0].queries);const g=h=>h[4];for(let h=0;h<c.length;h+=1){let _=Is(n,c,h),E=g(_);f.set(E,i[h]=Es(E,_))}return{c(){e=I("div"),t=I("div"),s=W(l),o=j(),a=I("div");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){e=M(h,"DIV",{class:!0});var _=k(e);t=M(_,"DIV",{class:!0});var E=k(t);s=F(E,l),E.forEach(m),o=A(_),a=M(_,"DIV",{class:!0});var v=k(a);for(let T=0;T<i.length;T+=1)i[T].l(v);v.forEach(m),_.forEach(m),this.h()},h(){var h;d(t,"class",r=((n[1]||((h=n[0])==null?void 0:h.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(a,"class","flex gap-1 flex-wrap mt-2"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(h,_){y(h,e,_),p(e,t),p(t,s),p(e,o),p(e,a);for(let E=0;E<i.length;E+=1)i[E]&&i[E].m(a,null);u=!0},p(h,_){var E;(!u||_&4)&&l!==(l=h[2].t("Querying")+"")&&K(s,l),(!u||_&3&&r!==(r=((h[1]||((E=h[0])==null?void 0:E.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"))&&d(t,"class",r),_&1&&(c=Ne(h[0].queries),ee(),i=yt(i,_,g,1,h,c,f,a,St,Es,null,Is),te())},i(h){if(!u){for(let _=0;_<c.length;_+=1)b(i[_]);u=!0}},o(h){for(let _=0;_<i.length;_+=1)w(i[_]);u=!1},d(h){h&&m(e);for(let _=0;_<i.length;_+=1)i[_].d()}}}function tf(n){let e,t,l=n[2].t("Searching")+"",s,r,o,a,i=[],f=new Map,u,c=Ne(n[0].queries);const g=h=>h[4];for(let h=0;h<c.length;h+=1){let _=Ms(n,c,h),E=g(_);f.set(E,i[h]=Cs(E,_))}return{c(){e=I("div"),t=I("div"),s=W(l),o=j(),a=I("div");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){e=M(h,"DIV",{class:!0});var _=k(e);t=M(_,"DIV",{class:!0});var E=k(t);s=F(E,l),E.forEach(m),o=A(_),a=M(_,"DIV",{class:!0});var v=k(a);for(let T=0;T<i.length;T+=1)i[T].l(v);v.forEach(m),_.forEach(m),this.h()},h(){var h;d(t,"class",r=((n[1]||((h=n[0])==null?void 0:h.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(a,"class","flex gap-1 flex-wrap mt-2"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(h,_){y(h,e,_),p(e,t),p(t,s),p(e,o),p(e,a);for(let E=0;E<i.length;E+=1)i[E]&&i[E].m(a,null);u=!0},p(h,_){var E;(!u||_&4)&&l!==(l=h[2].t("Searching")+"")&&K(s,l),(!u||_&3&&r!==(r=((h[1]||((E=h[0])==null?void 0:E.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"))&&d(t,"class",r),_&1&&(c=Ne(h[0].queries),ee(),i=yt(i,_,g,1,h,c,f,a,St,Cs,null,Ms),te())},i(h){if(!u){for(let _=0;_<c.length;_+=1)b(i[_]);u=!0}},o(h){for(let _=0;_<i.length;_+=1)w(i[_]);u=!1},d(h){h&&m(e);for(let _=0;_<i.length;_+=1)i[_].d()}}}function lf(n){let e,t,l=n[2].t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:n[0].query})+"",s,r;return{c(){e=I("div"),t=I("div"),s=W(l),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);t=M(a,"DIV",{class:!0});var i=k(t);s=F(i,l),i.forEach(m),a.forEach(m),this.h()},h(){var o;d(t,"class",r=((n[1]||((o=n[0])==null?void 0:o.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(o,a){y(o,e,a),p(e,t),p(t,s)},p(o,a){var i;a&5&&l!==(l=o[2].t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:o[0].query})+"")&&K(s,l),a&3&&r!==(r=((o[1]||((i=o[0])==null?void 0:i.done))===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap")&&d(t,"class",r)},i:Be,o:Be,d(o){o&&m(e)}}}function sf(n){let e,t;return e=new wa({props:{status:n[0],$$slots:{default:[pf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.status=l[0]),s&263&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function nf(n){var l;let e=((l=n[0])==null?void 0:l.description)+"",t;return{c(){t=W(e)},l(s){t=F(s,e)},m(s,r){y(s,t,r)},p(s,r){var o;r&1&&e!==(e=((o=s[0])==null?void 0:o.description)+"")&&K(t,e)},d(s){s&&m(t)}}}function rf(n){let e=n[2].t("Searching the web")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("Searching the web")+"")&&K(t,e)},d(l){l&&m(t)}}}function af(n){let e=n[2].t("Generating search query")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("Generating search query")+"")&&K(t,e)},d(l){l&&m(t)}}}function of(n){let e=n[2].t("No search query generated")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("No search query generated")+"")&&K(t,e)},d(l){l&&m(t)}}}function ff(n){var l,s;let e=n[2].t((l=n[0])==null?void 0:l.description,{searchQuery:(s=n[0])==null?void 0:s.query})+"",t;return{c(){t=W(e)},l(r){t=F(r,e)},m(r,o){y(r,t,o)},p(r,o){var a,i;o&5&&e!==(e=r[2].t((a=r[0])==null?void 0:a.description,{searchQuery:(i=r[0])==null?void 0:i.query})+"")&&K(t,e)},d(r){r&&m(t)}}}function uf(n){let e=n[2].t("Retrieved {{count}} sources",{count:n[0].count})+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&5&&e!==(e=l[2].t("Retrieved {{count}} sources",{count:l[0].count})+"")&&K(t,e)},d(l){l&&m(t)}}}function cf(n){let e=n[2].t("Retrieved 1 source")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("Retrieved 1 source")+"")&&K(t,e)},d(l){l&&m(t)}}}function df(n){let e=n[2].t("No sources found")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("No sources found")+"")&&K(t,e)},d(l){l&&m(t)}}}function Es(n,e){let t,l,s,r,o,a=e[4]+"",i,f,u;return s=new rl({props:{className:"size-3"}}),{key:n,first:null,c(){t=I("div"),l=I("div"),Y(s.$$.fragment),r=j(),o=I("span"),i=W(a),f=j(),this.h()},l(c){t=M(c,"DIV",{class:!0});var g=k(t);l=M(g,"DIV",{});var h=k(l);le(s.$$.fragment,h),h.forEach(m),r=A(g),o=M(g,"SPAN",{class:!0});var _=k(o);i=F(_,a),_.forEach(m),f=A(g),g.forEach(m),this.h()},h(){d(o,"class","line-clamp-1"),d(t,"class","bg-gray-50 dark:bg-gray-850 flex rounded-lg py-1 px-2 items-center gap-1 text-xs"),this.first=t},m(c,g){y(c,t,g),p(t,l),$(s,l,null),p(t,r),p(t,o),p(o,i),p(t,f),u=!0},p(c,g){e=c,(!u||g&1)&&a!==(a=e[4]+"")&&K(i,a)},i(c){u||(b(s.$$.fragment,c),u=!0)},o(c){w(s.$$.fragment,c),u=!1},d(c){c&&m(t),x(s)}}}function Cs(n,e){let t,l,s,r,o,a=e[4]+"",i,f,u;return s=new rl({props:{className:"size-3"}}),{key:n,first:null,c(){t=I("div"),l=I("div"),Y(s.$$.fragment),r=j(),o=I("span"),i=W(a),f=j(),this.h()},l(c){t=M(c,"DIV",{class:!0});var g=k(t);l=M(g,"DIV",{});var h=k(l);le(s.$$.fragment,h),h.forEach(m),r=A(g),o=M(g,"SPAN",{class:!0});var _=k(o);i=F(_,a),_.forEach(m),f=A(g),g.forEach(m),this.h()},h(){d(o,"class","line-clamp-1"),d(t,"class","bg-gray-50 dark:bg-gray-850 flex rounded-lg py-1 px-2 items-center gap-1 text-xs"),this.first=t},m(c,g){y(c,t,g),p(t,l),$(s,l,null),p(t,r),p(t,o),p(o,i),p(t,f),u=!0},p(c,g){e=c,(!u||g&1)&&a!==(a=e[4]+"")&&K(i,a)},i(c){u||(b(s.$$.fragment,c),u=!0)},o(c){w(s.$$.fragment,c),u=!1},d(c){c&&m(t),x(s)}}}function hf(n){var l;let e=((l=n[0])==null?void 0:l.description)+"",t;return{c(){t=W(e)},l(s){t=F(s,e)},m(s,r){y(s,t,r)},p(s,r){var o;r&1&&e!==(e=((o=s[0])==null?void 0:o.description)+"")&&K(t,e)},d(s){s&&m(t)}}}function mf(n){let e=n[2].t("Generating search query")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("Generating search query")+"")&&K(t,e)},d(l){l&&m(t)}}}function gf(n){let e=n[2].t("No search query generated")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("No search query generated")+"")&&K(t,e)},d(l){l&&m(t)}}}function _f(n){var l,s,r;let e=n[2].t((l=n[0])==null?void 0:l.description,{count:(((s=n[0])==null?void 0:s.urls)||((r=n[0])==null?void 0:r.items)).length})+"",t;return{c(){t=W(e)},l(o){t=F(o,e)},m(o,a){y(o,t,a)},p(o,a){var i,f,u;a&5&&e!==(e=o[2].t((i=o[0])==null?void 0:i.description,{count:(((f=o[0])==null?void 0:f.urls)||((u=o[0])==null?void 0:u.items)).length})+"")&&K(t,e)},d(o){o&&m(t)}}}function pf(n){let e,t,l,s;function r(i,f){var u,c,g,h;return f&1&&(l=null),l==null&&(l=!!((c=(u=i[0])==null?void 0:u.description)!=null&&c.includes("{{count}}"))),l?_f:((g=i[0])==null?void 0:g.description)==="No search query generated"?gf:((h=i[0])==null?void 0:h.description)==="Generating search query"?mf:hf}let o=r(n,-1),a=o(n);return{c(){e=I("div"),t=I("div"),a.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);t=M(f,"DIV",{class:!0});var u=k(t);a.l(u),u.forEach(m),f.forEach(m),this.h()},h(){var i;d(t,"class",s=((n[1]||((i=n[0])==null?void 0:i.done))===!1?"shimmer":"")+" text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(i,f){y(i,e,f),p(e,t),a.m(t,null)},p(i,f){var u;o===(o=r(i,f))&&a?a.p(i,f):(a.d(1),a=o(i),a&&(a.c(),a.m(t,null))),f&3&&s!==(s=((i[1]||((u=i[0])==null?void 0:u.done))===!1?"shimmer":"")+" text-base line-clamp-1 text-wrap")&&d(t,"class",s)},d(i){i&&m(e),a.d()}}}function bf(n){var s;let e,t,l=!((s=n[0])!=null&&s.hidden)&&ys(n);return{c(){l&&l.c(),e=ie()},l(r){l&&l.l(r),e=ie()},m(r,o){l&&l.m(r,o),y(r,e,o),t=!0},p(r,[o]){var a;(a=r[0])!=null&&a.hidden?l&&(ee(),w(l,1,1,()=>{l=null}),te()):l?(l.p(r,o),o&1&&b(l,1)):(l=ys(r),l.c(),b(l,1),l.m(e.parentNode,e))},i(r){t||(b(l),t=!0)},o(r){w(l),t=!1},d(r){r&&m(e),l&&l.d(r)}}}function vf(n,e,t){let l;const s=Ze("i18n");Te(n,s,a=>t(2,l=a));let{status:r=null}=e,{done:o=!1}=e;return n.$$set=a=>{"status"in a&&t(0,r=a.status),"done"in a&&t(1,o=a.done)},[r,o,l,s]}class Vr extends Ae{constructor(e){super(),ze(this,e,vf,bf,Pe,{status:0,done:1})}}function Ns(n,e,t){const l=n.slice();return l[2]=e[t],l[8]=t,l}function Ds(n){var s;let e,t,l=((s=n[2])==null?void 0:s.hidden)!==!0&&Ts(n);return{c(){l&&l.c(),e=ie()},l(r){l&&l.l(r),e=ie()},m(r,o){l&&l.m(r,o),y(r,e,o),t=!0},p(r,o){var a;((a=r[2])==null?void 0:a.hidden)!==!0?l?(l.p(r,o),o&4&&b(l,1)):(l=Ts(r),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(r){t||(b(l),t=!0)},o(r){w(l),t=!1},d(r){r&&m(e),l&&l.d(r)}}}function Ts(n){let e,t,l,s,r,o,a,i,f,u=n[1]&&Vs(n),c=n[0].length>1&&Rs(n);return o=new Vr({props:{status:n[2]}}),{c(){e=I("div"),u&&u.c(),t=j(),l=I("button"),s=I("div"),c&&c.c(),r=j(),Y(o.$$.fragment),this.h()},l(g){e=M(g,"DIV",{class:!0});var h=k(e);u&&u.l(h),t=A(h),l=M(h,"BUTTON",{class:!0});var _=k(l);s=M(_,"DIV",{class:!0});var E=k(s);c&&c.l(E),r=A(E),le(o.$$.fragment,E),E.forEach(m),_.forEach(m),h.forEach(m),this.h()},h(){d(s,"class","flex items-start gap-2"),d(l,"class","w-full"),d(e,"class","text-sm flex flex-col w-full")},m(g,h){y(g,e,h),u&&u.m(e,null),p(e,t),p(e,l),p(l,s),c&&c.m(s,null),p(s,r),$(o,s,null),a=!0,i||(f=ue(l,"click",n[5]),i=!0)},p(g,h){g[1]?u?(u.p(g,h),h&2&&b(u,1)):(u=Vs(g),u.c(),b(u,1),u.m(e,t)):u&&(ee(),w(u,1,1,()=>{u=null}),te()),g[0].length>1?c?c.p(g,h):(c=Rs(g),c.c(),c.m(s,r)):c&&(c.d(1),c=null);const _={};h&4&&(_.status=g[2]),o.$set(_)},i(g){a||(b(u),b(o.$$.fragment,g),a=!0)},o(g){w(u),w(o.$$.fragment,g),a=!1},d(g){g&&m(e),u&&u.d(),c&&c.d(),x(o),i=!1,f()}}}function Vs(n){let e,t,l=n[0].length>1&&Bs(n);return{c(){e=I("div"),l&&l.c(),this.h()},l(s){e=M(s,"DIV",{class:!0});var r=k(e);l&&l.l(r),r.forEach(m),this.h()},h(){d(e,"class","flex flex-row")},m(s,r){y(s,e,r),l&&l.m(e,null),t=!0},p(s,r){s[0].length>1?l?(l.p(s,r),r&1&&b(l,1)):(l=Bs(s),l.c(),b(l,1),l.m(e,null)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d()}}}function Bs(n){let e,t,l=Ne(n[0]),s=[];for(let o=0;o<l.length;o+=1)s[o]=Os(Ns(n,l,o));const r=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=I("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","w-full")},m(o,a){y(o,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,a){if(a&1){l=Ne(o[0]);let i;for(i=0;i<l.length;i+=1){const f=Ns(o,l,i);s[i]?(s[i].p(f,a),b(s[i],1)):(s[i]=Os(f),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ee(),i=l.length;i<s.length;i+=1)r(i);te()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function Ss(n){let e,t,l='<div class="pt-3 px-1 mb-1.5"><span class="relative flex size-1.5 rounded-full justify-center items-center"><span class="relative inline-flex size-1.5 rounded-full bg-gray-500 dark:bg-gray-300"></span></span></div> <div class="w-[0.5px] ml-[6.5px] h-[calc(100%-14px)] bg-gray-300 dark:bg-gray-700"></div>',s,r,o,a;return r=new Vr({props:{status:n[2],done:!0}}),{c(){e=I("div"),t=I("div"),t.innerHTML=l,s=j(),Y(r.$$.fragment),o=j(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);t=M(f,"DIV",{class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-r0z7dq"&&(t.innerHTML=l),s=A(f),le(r.$$.fragment,f),o=A(f),f.forEach(m),this.h()},h(){d(t,"class",""),d(e,"class","flex items-stretch gap-2 mb-1")},m(i,f){y(i,e,f),p(e,t),p(e,s),$(r,e,null),p(e,o),a=!0},p(i,f){const u={};f&1&&(u.status=i[2]),r.$set(u)},i(i){a||(b(r.$$.fragment,i),a=!0)},o(i){w(r.$$.fragment,i),a=!1},d(i){i&&m(e),x(r)}}}function Os(n){let e,t,l=n[8]!==n[0].length-1&&Ss(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){s[8]!==s[0].length-1?l?(l.p(s,r),r&1&&b(l,1)):(l=Ss(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function Rs(n){var o;let e,t,l,s,r=((o=n[2])==null?void 0:o.done)===!1&&Ps();return{c(){e=I("div"),t=I("span"),r&&r.c(),l=j(),s=I("span"),this.h()},l(a){e=M(a,"DIV",{class:!0});var i=k(e);t=M(i,"SPAN",{class:!0});var f=k(t);r&&r.l(f),l=A(f),s=M(f,"SPAN",{class:!0}),k(s).forEach(m),f.forEach(m),i.forEach(m),this.h()},h(){d(s,"class","relative inline-flex size-1.5 rounded-full bg-gray-500 dark:bg-gray-300"),d(t,"class","relative flex size-1.5 rounded-full justify-center items-center"),d(e,"class","pt-3 px-1")},m(a,i){y(a,e,i),p(e,t),r&&r.m(t,null),p(t,l),p(t,s)},p(a,i){var f;((f=a[2])==null?void 0:f.done)===!1?r||(r=Ps(),r.c(),r.m(t,l)):r&&(r.d(1),r=null)},d(a){a&&m(e),r&&r.d()}}}function Ps(n){let e;return{c(){e=I("span"),this.h()},l(t){e=M(t,"SPAN",{class:!0}),k(e).forEach(m),this.h()},h(){d(e,"class","absolute inline-flex h-full w-full animate-ping rounded-full bg-gray-500 dark:bg-gray-300 opacity-75")},m(t,l){y(t,e,l)},d(t){t&&m(e)}}}function kf(n){let e,t,l=n[0]&&n[0].length>0&&Ds(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,[r]){s[0]&&s[0].length>0?l?(l.p(s,r),r&1&&b(l,1)):(l=Ds(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function wf(n,e,t){Ze("i18n");let{statusHistory:l=[]}=e,{expand:s=!1}=e,r=!0,o=[],a=null;const i=()=>{t(1,r=!r)};return n.$$set=f=>{"statusHistory"in f&&t(3,l=f.statusHistory),"expand"in f&&t(4,s=f.expand)},n.$$.update=()=>{n.$$.dirty&16&&(s?t(1,r=!0):t(1,r=!1)),n.$$.dirty&9&&JSON.stringify(l)!==JSON.stringify(o)&&t(0,o=l),n.$$.dirty&1&&o&&o.length>0&&t(2,a=o.at(-1))},[o,r,a,l,s,i]}class If extends Ae{constructor(e){super(),ze(this,e,wf,kf,Pe,{statusHistory:3,expand:4})}}function Ls(n,e,t){const l=n.slice();return l[97]=e[t],l}function js(n,e,t){const l=n.slice();return l[100]=e[t],l[102]=t,l}function As(n,e,t){const l=n.slice();return l[103]=e[t],l}function Mf(n){var s;let e,t=(((s=n[23])==null?void 0:s.name)??n[18].model)+"",l;return{c(){e=I("span"),l=W(t),this.h()},l(r){e=M(r,"SPAN",{class:!0});var o=k(e);l=F(o,t),o.forEach(m),this.h()},h(){d(e,"class","line-clamp-1 text-black dark:text-white")},m(r,o){y(r,e,o),p(e,l)},p(r,o){var a;o[0]&8650752&&t!==(t=(((a=r[23])==null?void 0:a.name)??r[18].model)+"")&&K(l,t)},d(r){r&&m(e)}}}function zs(n){let e,t,l,s;return t=new Le({props:{content:He(n[18].timestamp*1e3).format("LLLL"),$$slots:{default:[yf]},$$scope:{ctx:n}}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);le(t.$$.fragment,o),o.forEach(m),this.h()},h(){var r;d(e,"class",l="self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] "+(((r=n[32])==null?void 0:r.highContrastMode)??!1?"dark:text-gray-100 text-gray-900":"invisible group-hover:visible transition text-gray-400"))},m(r,o){y(r,e,o),$(t,e,null),s=!0},p(r,o){var i;const a={};o[0]&262144&&(a.content=He(r[18].timestamp*1e3).format("LLLL")),o[0]&262144|o[1]&8|o[3]&8192&&(a.$$scope={dirty:o,ctx:r}),t.$set(a),(!s||o[1]&2&&l!==(l="self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] "+(((i=r[32])==null?void 0:i.highContrastMode)??!1?"dark:text-gray-100 text-gray-900":"invisible group-hover:visible transition text-gray-400")))&&d(e,"class",l)},i(r){s||(b(t.$$.fragment,r),s=!0)},o(r){w(t.$$.fragment,r),s=!1},d(r){r&&m(e),x(t)}}}function yf(n){let e,t=n[34].t(It(n[18].timestamp*1e3),{LOCALIZED_TIME:He(n[18].timestamp*1e3).format("LT"),LOCALIZED_DATE:He(n[18].timestamp*1e3).format("L")})+"",l;return{c(){e=I("span"),l=W(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var r=k(e);l=F(r,t),r.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,r){y(s,e,r),p(e,l)},p(s,r){r[0]&262144|r[1]&8&&t!==(t=s[34].t(It(s[18].timestamp*1e3),{LOCALIZED_TIME:He(s[18].timestamp*1e3).format("LT"),LOCALIZED_DATE:He(s[18].timestamp*1e3).format("L")})+"")&&K(l,t)},d(s){s&&m(e)}}}function Ef(n){var o;let e,t,l,s;e=new Le({props:{content:((o=n[23])==null?void 0:o.name)??n[18].model,placement:"top-start",$$slots:{default:[Mf]},$$scope:{ctx:n}}});let r=n[18].timestamp&&zs(n);return{c(){Y(e.$$.fragment),t=j(),r&&r.c(),l=ie()},l(a){le(e.$$.fragment,a),t=A(a),r&&r.l(a),l=ie()},m(a,i){$(e,a,i),y(a,t,i),r&&r.m(a,i),y(a,l,i),s=!0},p(a,i){var u;const f={};i[0]&8650752&&(f.content=((u=a[23])==null?void 0:u.name)??a[18].model),i[0]&8650752|i[3]&8192&&(f.$$scope={dirty:i,ctx:a}),e.$set(f),a[18].timestamp?r?(r.p(a,i),i[0]&262144&&b(r,1)):(r=zs(a),r.c(),b(r,1),r.m(l.parentNode,l)):r&&(ee(),w(r,1,1,()=>{r=null}),te())},i(a){s||(b(e.$$.fragment,a),b(r),s=!0)},o(a){w(e.$$.fragment,a),w(r),s=!1},d(a){a&&(m(t),m(l)),x(e,a),r&&r.d(a)}}}function Hs(n){var l,s;let e,t;return e=new If({props:{statusHistory:(l=n[18])==null?void 0:l.statusHistory,expand:((s=n[18])==null?void 0:s.content)===""}}),{c(){Y(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,o){$(e,r,o),t=!0},p(r,o){var i,f;const a={};o[0]&262144&&(a.statusHistory=(i=r[18])==null?void 0:i.statusHistory),o[0]&262144&&(a.expand=((f=r[18])==null?void 0:f.content)===""),e.$set(a)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Us(n){let e,t,l=Ne(n[18].files),s=[];for(let o=0;o<l.length;o+=1)s[o]=qs(As(n,l,o));const r=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=I("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","my-1 w-full flex overflow-x-auto gap-2 flex-wrap")},m(o,a){y(o,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,a){if(a[0]&262144){l=Ne(o[18].files);let i;for(i=0;i<l.length;i+=1){const f=As(o,l,i);s[i]?(s[i].p(f,a),b(s[i],1)):(s[i]=qs(f),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ee(),i=l.length;i<s.length;i+=1)r(i);te()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function Cf(n){var l;let e,t;return e=new nl({props:{item:n[103],url:n[103].url,name:n[103].name,type:n[103].type,size:(l=n[103])==null?void 0:l.size,small:!0}}),{c(){Y(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){$(e,s,r),t=!0},p(s,r){var a;const o={};r[0]&262144&&(o.item=s[103]),r[0]&262144&&(o.url=s[103].url),r[0]&262144&&(o.name=s[103].name),r[0]&262144&&(o.type=s[103].type),r[0]&262144&&(o.size=(a=s[103])==null?void 0:a.size),e.$set(o)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Nf(n){let e,t;return e=new tl({props:{src:n[103].url,alt:n[18].content}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&262144&&(r.src=l[103].url),s[0]&262144&&(r.alt=l[18].content),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function qs(n){let e,t,l,s,r;const o=[Nf,Cf],a=[];function i(f,u){return f[103].type==="image"?0:1}return t=i(n),l=a[t]=o[t](n),{c(){e=I("div"),l.c(),s=j()},l(f){e=M(f,"DIV",{});var u=k(e);l.l(u),s=A(u),u.forEach(m)},m(f,u){y(f,e,u),a[t].m(e,null),p(e,s),r=!0},p(f,u){let c=t;t=i(f),t===c?a[t].p(f,u):(ee(),w(a[c],1,1,()=>{a[c]=null}),te(),l=a[t],l?l.p(f,u):(l=a[t]=o[t](f),l.c()),b(l,1),l.m(e,s))},i(f){r||(b(l),r=!0)},o(f){w(l),r=!1},d(f){f&&m(e),a[t].d()}}}function Ws(n){let e,t,l=Ne(n[18].embeds),s=[];for(let o=0;o<l.length;o+=1)s[o]=Fs(js(n,l,o));const r=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=I("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","my-1 w-full flex overflow-x-auto gap-2 flex-wrap")},m(o,a){y(o,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,a){if(a[0]&262144){l=Ne(o[18].embeds);let i;for(i=0;i<l.length;i+=1){const f=js(o,l,i);s[i]?(s[i].p(f,a),b(s[i],1)):(s[i]=Fs(f),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ee(),i=l.length;i<s.length;i+=1)r(i);te()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function Fs(n){let e,t,l,s,r;return t=new Si({props:{src:n[100],allowScripts:!0,allowForms:!0,allowSameOrigin:!0,allowPopups:!0}}),{c(){e=I("div"),Y(t.$$.fragment),l=j(),this.h()},l(o){e=M(o,"DIV",{class:!0,id:!0});var a=k(e);le(t.$$.fragment,a),l=A(a),a.forEach(m),this.h()},h(){d(e,"class","my-2 w-full"),d(e,"id",s=`${n[18].id}-embeds-${n[102]}`)},m(o,a){y(o,e,a),$(t,e,null),p(e,l),r=!0},p(o,a){const i={};a[0]&262144&&(i.src=o[100]),t.$set(i),(!r||a[0]&262144&&s!==(s=`${o[18].id}-embeds-${o[102]}`))&&d(e,"id",s)},i(o){r||(b(t.$$.fragment,o),r=!0)},o(o){w(t.$$.fragment,o),r=!1},d(o){o&&m(e),x(t)}}}function Df(n){var E,v,T,P,R,B,D;let e,t,l,s,r,o,a,i;const f=[Bf,Vf],u=[];function c(C,N){var V,O,q,Z,se,L,U,H,ae,be;return N[0]&8650752&&(t=null),t==null&&(t=!!(C[18].content===""&&!C[18].error&&(!(((Z=(q=(O=(V=C[23])==null?void 0:V.info)==null?void 0:O.meta)==null?void 0:q.capabilities)==null?void 0:Z.status_updates)??!0)||(((se=C[18])==null?void 0:se.statusHistory)??[...(L=C[18])!=null&&L.status?[(U=C[18])==null?void 0:U.status]:[]]).length===0||(((be=(ae=(H=C[18])==null?void 0:H.statusHistory)==null?void 0:ae.at(-1))==null?void 0:be.hidden)??!1)))),t?0:C[18].content&&C[18].error!==!0?1:-1}~(l=c(n,[-1,-1,-1,-1]))&&(s=u[l]=f[l](n));let g=((E=n[18])==null?void 0:E.error)&&Js(n),h=(((v=n[18])==null?void 0:v.sources)||((T=n[18])==null?void 0:T.citations))&&(((D=(B=(R=(P=n[23])==null?void 0:P.info)==null?void 0:R.meta)==null?void 0:B.capabilities)==null?void 0:D.citations)??!0)&&Gs(n),_=n[18].code_executions&&Zs(n);return{c(){e=I("div"),s&&s.c(),r=j(),g&&g.c(),o=j(),h&&h.c(),a=j(),_&&_.c(),this.h()},l(C){e=M(C,"DIV",{class:!0,id:!0});var N=k(e);s&&s.l(N),r=A(N),g&&g.l(N),o=A(N),h&&h.l(N),a=A(N),_&&_.l(N),N.forEach(m),this.h()},h(){d(e,"class","w-full flex flex-col relative"),d(e,"id","response-content-container")},m(C,N){y(C,e,N),~l&&u[l].m(e,null),p(e,r),g&&g.m(e,null),p(e,o),h&&h.m(e,null),p(e,a),_&&_.m(e,null),i=!0},p(C,N){var O,q,Z,se,L,U,H;let V=l;l=c(C,N),l===V?~l&&u[l].p(C,N):(s&&(ee(),w(u[V],1,1,()=>{u[V]=null}),te()),~l?(s=u[l],s?s.p(C,N):(s=u[l]=f[l](C),s.c()),b(s,1),s.m(e,r)):s=null),(O=C[18])!=null&&O.error?g?(g.p(C,N),N[0]&262144&&b(g,1)):(g=Js(C),g.c(),b(g,1),g.m(e,o)):g&&(ee(),w(g,1,1,()=>{g=null}),te()),((q=C[18])!=null&&q.sources||(Z=C[18])!=null&&Z.citations)&&(((H=(U=(L=(se=C[23])==null?void 0:se.info)==null?void 0:L.meta)==null?void 0:U.capabilities)==null?void 0:H.citations)??!0)?h?(h.p(C,N),N[0]&8650752&&b(h,1)):(h=Gs(C),h.c(),b(h,1),h.m(e,a)):h&&(ee(),w(h,1,1,()=>{h=null}),te()),C[18].code_executions?_?(_.p(C,N),N[0]&262144&&b(_,1)):(_=Zs(C),_.c(),b(_,1),_.m(e,null)):_&&(ee(),w(_,1,1,()=>{_=null}),te())},i(C){i||(b(s),b(g),b(h),b(_),i=!0)},o(C){w(s),w(g),w(h),w(_),i=!1},d(C){C&&m(e),~l&&u[l].d(),g&&g.d(),h&&h.d(),_&&_.d()}}}function Tf(n){let e,t,l,s,r,o,a,i=n[34].t("Save As Copy")+"",f,u,c,g,h=n[34].t("Cancel")+"",_,E,v,T=n[34].t("Save")+"",P,R,B;return{c(){e=I("div"),t=I("textarea"),s=j(),r=I("div"),o=I("div"),a=I("button"),f=W(i),u=j(),c=I("div"),g=I("button"),_=W(h),E=j(),v=I("button"),P=W(T),this.h()},l(D){e=M(D,"DIV",{class:!0});var C=k(e);t=M(C,"TEXTAREA",{id:!0,class:!0}),k(t).forEach(m),s=A(C),r=M(C,"DIV",{class:!0});var N=k(r);o=M(N,"DIV",{});var V=k(o);a=M(V,"BUTTON",{id:!0,class:!0});var O=k(a);f=F(O,i),O.forEach(m),V.forEach(m),u=A(N),c=M(N,"DIV",{class:!0});var q=k(c);g=M(q,"BUTTON",{id:!0,class:!0});var Z=k(g);_=F(Z,h),Z.forEach(m),E=A(q),v=M(q,"BUTTON",{id:!0,class:!0});var se=k(v);P=F(se,T),se.forEach(m),q.forEach(m),N.forEach(m),C.forEach(m),this.h()},h(){d(t,"id",l="message-edit-"+n[18].id),d(t,"class","bg-transparent outline-hidden w-full resize-none"),d(a,"id","save-new-message-button"),d(a,"class","px-3.5 py-1.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl"),d(g,"id","close-edit-message-button"),d(g,"class","px-3.5 py-1.5 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl"),d(v,"id","confirm-edit-message-button"),d(v,"class","px-3.5 py-1.5 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl"),d(c,"class","flex space-x-1.5"),d(r,"class","mt-2 mb-1 flex justify-between text-sm font-medium"),d(e,"class","w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 my-2")},m(D,C){y(D,e,C),p(e,t),n[56](t),ot(t,n[24]),p(e,s),p(e,r),p(r,o),p(o,a),p(a,f),p(r,u),p(r,c),p(c,g),p(g,_),p(c,E),p(c,v),p(v,P),R||(B=[ue(t,"input",n[57]),ue(t,"input",su),ue(t,"keydown",n[58]),ue(a,"click",n[59]),ue(g,"click",n[60]),ue(v,"click",n[61])],R=!0)},p(D,C){C[0]&262144&&l!==(l="message-edit-"+D[18].id)&&d(t,"id",l),C[0]&16777216&&ot(t,D[24]),C[1]&8&&i!==(i=D[34].t("Save As Copy")+"")&&K(f,i),C[1]&8&&h!==(h=D[34].t("Cancel")+"")&&K(_,h),C[1]&8&&T!==(T=D[34].t("Save")+"")&&K(P,T)},i:Be,o:Be,d(D){D&&m(e),n[56](null),R=!1,rt(B)}}}function Vf(n){var l,s,r,o;let e,t;return e=new Vo({props:{id:`${n[1]}-${n[18].id}`,messageId:n[18].id,history:n[0],selectedModels:n[2],content:n[18].content,sources:n[18].sources,floatingButtons:((l=n[18])==null?void 0:l.done)&&!n[15]&&(((s=n[32])==null?void 0:s.showFloatingActionButtons)??!0),save:!n[15],preview:!n[15],editCodeBlock:n[16],topPadding:n[17],done:((r=n[32])==null?void 0:r.chatFadeStreamingText)??!0?((o=n[18])==null?void 0:o.done)??!1:!0,model:n[23],onTaskClick:n[62],onSourceClick:n[63],onAddMessages:n[64],onSave:n[65]}}),{c(){Y(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,i){$(e,a,i),t=!0},p(a,i){var u,c,g,h;const f={};i[0]&262146&&(f.id=`${a[1]}-${a[18].id}`),i[0]&262144&&(f.messageId=a[18].id),i[0]&1&&(f.history=a[0]),i[0]&4&&(f.selectedModels=a[2]),i[0]&262144&&(f.content=a[18].content),i[0]&262144&&(f.sources=a[18].sources),i[0]&294912|i[1]&2&&(f.floatingButtons=((u=a[18])==null?void 0:u.done)&&!a[15]&&(((c=a[32])==null?void 0:c.showFloatingActionButtons)??!0)),i[0]&32768&&(f.save=!a[15]),i[0]&32768&&(f.preview=!a[15]),i[0]&65536&&(f.editCodeBlock=a[16]),i[0]&131072&&(f.topPadding=a[17]),i[0]&262144|i[1]&2&&(f.done=((g=a[32])==null?void 0:g.chatFadeStreamingText)??!0?((h=a[18])==null?void 0:h.done)??!1:!0),i[0]&8388608&&(f.model=a[23]),i[0]&1048576&&(f.onSourceClick=a[63]),i[0]&8192&&(f.onAddMessages=a[64]),i[0]&262401&&(f.onSave=a[65]),e.$set(f)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){x(e,a)}}}function Bf(n){let e,t;return e=new el({}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p:Be,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Js(n){var l,s;let e,t;return e=new Ba({props:{content:((s=(l=n[18])==null?void 0:l.error)==null?void 0:s.content)??n[18].content}}),{c(){Y(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,o){$(e,r,o),t=!0},p(r,o){var i,f;const a={};o[0]&262144&&(a.content=((f=(i=r[18])==null?void 0:i.error)==null?void 0:f.content)??r[18].content),e.$set(a)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Gs(n){var s,r,o;let e,t,l={id:(s=n[18])==null?void 0:s.id,sources:((r=n[18])==null?void 0:r.sources)??((o=n[18])==null?void 0:o.citations),readOnly:n[15]};return e=new eo({props:l}),n[66](e),{c(){Y(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,i){$(e,a,i),t=!0},p(a,i){var u,c,g;const f={};i[0]&262144&&(f.id=(u=a[18])==null?void 0:u.id),i[0]&262144&&(f.sources=((c=a[18])==null?void 0:c.sources)??((g=a[18])==null?void 0:g.citations)),i[0]&32768&&(f.readOnly=a[15]),e.$set(f)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){n[66](null),x(e,a)}}}function Zs(n){let e,t;return e=new bo({props:{codeExecutions:n[18].code_executions}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&262144&&(r.codeExecutions=l[18].code_executions),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Ks(n){var f,u;let e,t,l,s,r,o=(n[18].done||n[3].length>1)&&Qs(n),a=n[18].done&&n[30]&&dn(n),i=(n[14]||(((f=n[32])==null?void 0:f.keepFollowUpPrompts)??!1))&&n[18].done&&!n[15]&&(((u=n[18])==null?void 0:u.followUps)??[]).length>0&&hn(n);return{c(){e=I("div"),o&&o.c(),t=j(),a&&a.c(),l=j(),i&&i.c(),s=ie(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);o&&o.l(g),g.forEach(m),t=A(c),a&&a.l(c),l=A(c),i&&i.l(c),s=ie(),this.h()},h(){d(e,"class","flex justify-start overflow-x-auto buttons text-gray-600 dark:text-gray-500 mt-0.5 svelte-1u5gq5j")},m(c,g){y(c,e,g),o&&o.m(e,null),n[85](e),y(c,t,g),a&&a.m(c,g),y(c,l,g),i&&i.m(c,g),y(c,s,g),r=!0},p(c,g){var h,_;c[18].done||c[3].length>1?o?(o.p(c,g),g[0]&262152&&b(o,1)):(o=Qs(c),o.c(),b(o,1),o.m(e,null)):o&&(ee(),w(o,1,1,()=>{o=null}),te()),c[18].done&&c[30]?a?(a.p(c,g),g[0]&1074003968&&b(a,1)):(a=dn(c),a.c(),b(a,1),a.m(l.parentNode,l)):a&&(ee(),w(a,1,1,()=>{a=null}),te()),(c[14]||(((h=c[32])==null?void 0:h.keepFollowUpPrompts)??!1))&&c[18].done&&!c[15]&&(((_=c[18])==null?void 0:_.followUps)??[]).length>0?i?(i.p(c,g),g[0]&311296|g[1]&2&&b(i,1)):(i=hn(c),i.c(),b(i,1),i.m(s.parentNode,s)):i&&(ee(),w(i,1,1,()=>{i=null}),te())},i(c){r||(b(o),b(a),b(i),r=!0)},o(c){w(o),w(a),w(i),r=!1},d(c){c&&(m(e),m(t),m(l),m(s)),o&&o.d(),n[85](null),a&&a.d(c),i&&i.d(c)}}}function Qs(n){let e,t,l,s=n[3].length>1&&Xs(n),r=n[18].done&&Ys(n);return{c(){s&&s.c(),e=j(),r&&r.c(),t=ie()},l(o){s&&s.l(o),e=A(o),r&&r.l(o),t=ie()},m(o,a){s&&s.m(o,a),y(o,e,a),r&&r.m(o,a),y(o,t,a),l=!0},p(o,a){o[3].length>1?s?s.p(o,a):(s=Xs(o),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),o[18].done?r?(r.p(o,a),a[0]&262144&&b(r,1)):(r=Ys(o),r.c(),b(r,1),r.m(t.parentNode,t)):r&&(ee(),w(r,1,1,()=>{r=null}),te())},i(o){l||(b(r),l=!0)},o(o){w(r),l=!1},d(o){o&&(m(e),m(t)),s&&s.d(o),r&&r.d(o)}}}function Xs(n){let e,t,l,s,r,o,a,i,f,u,c,g,h;function _(T,P){return T[26]?Of:Sf}let E=_(n),v=E(n);return{c(){e=I("div"),t=I("button"),l=me("svg"),s=me("path"),o=j(),v.c(),a=j(),i=I("button"),f=me("svg"),u=me("path"),this.h()},l(T){e=M(T,"DIV",{class:!0,dir:!0});var P=k(e);t=M(P,"BUTTON",{"aria-label":!0,class:!0});var R=k(t);l=ge(R,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var B=k(l);s=ge(B,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(s).forEach(m),B.forEach(m),R.forEach(m),o=A(P),v.l(P),a=A(P),i=M(P,"BUTTON",{class:!0,"aria-label":!0});var D=k(i);f=ge(D,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var C=k(f);u=ge(C,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(u).forEach(m),C.forEach(m),D.forEach(m),P.forEach(m),this.h()},h(){d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(s,"d","M15.75 19.5 8.25 12l7.5-7.5"),d(l,"aria-hidden","true"),d(l,"xmlns","http://www.w3.org/2000/svg"),d(l,"fill","none"),d(l,"viewBox","0 0 24 24"),d(l,"stroke","currentColor"),d(l,"stroke-width","2.5"),d(l,"class","size-3.5"),d(t,"aria-label",r=n[34].t("Previous message")),d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(u,"stroke-linecap","round"),d(u,"stroke-linejoin","round"),d(u,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),d(f,"xmlns","http://www.w3.org/2000/svg"),d(f,"fill","none"),d(f,"aria-hidden","true"),d(f,"viewBox","0 0 24 24"),d(f,"stroke","currentColor"),d(f,"stroke-width","2.5"),d(f,"class","size-3.5"),d(i,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(i,"aria-label",c=n[34].t("Next message")),d(e,"class","flex self-center min-w-fit"),d(e,"dir","ltr")},m(T,P){y(T,e,P),p(e,t),p(t,l),p(l,s),p(e,o),v.m(e,null),p(e,a),p(e,i),p(i,f),p(f,u),g||(h=[ue(t,"click",n[67]),ue(i,"click",n[71])],g=!0)},p(T,P){P[1]&8&&r!==(r=T[34].t("Previous message"))&&d(t,"aria-label",r),E===(E=_(T))&&v?v.p(T,P):(v.d(1),v=E(T),v&&(v.c(),v.m(e,a))),P[1]&8&&c!==(c=T[34].t("Next message"))&&d(i,"aria-label",c)},d(T){T&&m(e),v.d(),g=!1,rt(h)}}}function Sf(n){let e,t=n[3].indexOf(n[18].id)+1+"",l,s,r=n[3].length+"",o,a,i;return{c(){e=I("div"),l=W(t),s=W("/"),o=W(r),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l=F(u,t),s=F(u,"/"),o=F(u,r),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){y(f,e,u),p(e,l),p(e,s),p(e,o),a||(i=ue(e,"dblclick",n[70]),a=!0)},p(f,u){u[0]&262152&&t!==(t=f[3].indexOf(f[18].id)+1+"")&&K(l,t),u[0]&8&&r!==(r=f[3].length+"")&&K(o,r)},d(f){f&&m(e),a=!1,i()}}}function Of(n){let e,t,l,s,r,o,a=n[3].length+"",i,f,u;return{c(){e=I("div"),t=I("input"),o=W("/"),i=W(a),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);t=M(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),o=F(g,"/"),i=F(g,a),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+n[18].id),d(t,"type","number"),t.value=s=n[3].indexOf(n[18].id)+1,d(t,"min","1"),d(t,"max",r=n[3].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){y(c,e,g),p(e,t),p(e,o),p(e,i),f||(u=[ue(t,"focus",nu),ue(t,"blur",n[68]),ue(t,"keydown",n[69])],f=!0)},p(c,g){g[0]&262144&&l!==(l="message-index-input-"+c[18].id)&&d(t,"id",l),g[0]&262152&&s!==(s=c[3].indexOf(c[18].id)+1)&&t.value!==s&&(t.value=s),g[0]&8&&r!==(r=c[3].length)&&d(t,"max",r),g[0]&8&&a!==(a=c[3].length+"")&&K(i,a)},d(c){c&&m(e),f=!1,rt(u)}}}function Ys(n){var _,E,v,T,P,R,B,D,C;let e,t,l,s,r,o,a,i,f=!n[15]&&$s(n);t=new Le({props:{content:n[34].t("Copy"),placement:"bottom",$$slots:{default:[Pf]},$$scope:{ctx:n}}});let u=(((_=n[35])==null?void 0:_.role)==="admin"||(((T=(v=(E=n[35])==null?void 0:E.permissions)==null?void 0:v.chat)==null?void 0:T.tts)??!0))&&en(n),c=((P=n[33])==null?void 0:P.features.enable_image_generation)&&(((R=n[35])==null?void 0:R.role)==="admin"||((C=(D=(B=n[35])==null?void 0:B.permissions)==null?void 0:D.features)==null?void 0:C.image_generation))&&!n[15]&&tn(n),g=n[18].usage&&ln(n),h=!n[15]&&sn(n);return{c(){f&&f.c(),e=j(),Y(t.$$.fragment),l=j(),u&&u.c(),s=j(),c&&c.c(),r=j(),g&&g.c(),o=j(),h&&h.c(),a=ie()},l(N){f&&f.l(N),e=A(N),le(t.$$.fragment,N),l=A(N),u&&u.l(N),s=A(N),c&&c.l(N),r=A(N),g&&g.l(N),o=A(N),h&&h.l(N),a=ie()},m(N,V){f&&f.m(N,V),y(N,e,V),$(t,N,V),y(N,l,V),u&&u.m(N,V),y(N,s,V),c&&c.m(N,V),y(N,r,V),g&&g.m(N,V),y(N,o,V),h&&h.m(N,V),y(N,a,V),i=!0},p(N,V){var q,Z,se,L,U,H,ae,be,G;N[15]?f&&(ee(),w(f,1,1,()=>{f=null}),te()):f?(f.p(N,V),V[0]&32768&&b(f,1)):(f=$s(N),f.c(),b(f,1),f.m(e.parentNode,e));const O={};V[1]&8&&(O.content=N[34].t("Copy")),V[0]&278528|V[1]&10|V[3]&8192&&(O.$$scope={dirty:V,ctx:N}),t.$set(O),((q=N[35])==null?void 0:q.role)==="admin"||(((L=(se=(Z=N[35])==null?void 0:Z.permissions)==null?void 0:se.chat)==null?void 0:L.tts)??!0)?u?(u.p(N,V),V[1]&16&&b(u,1)):(u=en(N),u.c(),b(u,1),u.m(s.parentNode,s)):u&&(ee(),w(u,1,1,()=>{u=null}),te()),(U=N[33])!=null&&U.features.enable_image_generation&&(((H=N[35])==null?void 0:H.role)==="admin"||(G=(be=(ae=N[35])==null?void 0:ae.permissions)==null?void 0:be.features)!=null&&G.image_generation)&&!N[15]?c?(c.p(N,V),V[0]&32768|V[1]&20&&b(c,1)):(c=tn(N),c.c(),b(c,1),c.m(r.parentNode,r)):c&&(ee(),w(c,1,1,()=>{c=null}),te()),N[18].usage?g?(g.p(N,V),V[0]&262144&&b(g,1)):(g=ln(N),g.c(),b(g,1),g.m(o.parentNode,o)):g&&(ee(),w(g,1,1,()=>{g=null}),te()),N[15]?h&&(ee(),w(h,1,1,()=>{h=null}),te()):h?(h.p(N,V),V[0]&32768&&b(h,1)):(h=sn(N),h.c(),b(h,1),h.m(a.parentNode,a))},i(N){i||(b(f),b(t.$$.fragment,N),b(u),b(c),b(g),b(h),i=!0)},o(N){w(f),w(t.$$.fragment,N),w(u),w(c),w(g),w(h),i=!1},d(N){N&&(m(e),m(l),m(s),m(r),m(o),m(a)),f&&f.d(N),x(t,N),u&&u.d(N),c&&c.d(N),g&&g.d(N),h&&h.d(N)}}}function $s(n){var s,r,o,a;let e,t,l=(((s=n[35])==null?void 0:s.role)==="user"?((a=(o=(r=n[35])==null?void 0:r.permissions)==null?void 0:o.chat)==null?void 0:a.edit)??!0:!0)&&xs(n);return{c(){l&&l.c(),e=ie()},l(i){l&&l.l(i),e=ie()},m(i,f){l&&l.m(i,f),y(i,e,f),t=!0},p(i,f){var u,c,g,h;((u=i[35])==null?void 0:u.role)!=="user"||(((h=(g=(c=i[35])==null?void 0:c.permissions)==null?void 0:g.chat)==null?void 0:h.edit)??!0)?l?(l.p(i,f),f[1]&16&&b(l,1)):(l=xs(i),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(i){t||(b(l),t=!0)},o(i){w(l),t=!1},d(i){i&&m(e),l&&l.d(i)}}}function xs(n){let e,t;return e=new Le({props:{content:n[34].t("Edit"),placement:"bottom",$$slots:{default:[Rf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[1]&8&&(r.content=l[34].t("Edit")),s[0]&16384|s[1]&10|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Rf(n){let e,t,l,s,r,o,a;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(i){e=M(i,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=ge(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var u=k(t);l=ge(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var i;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",s=n[34].t("Edit")),d(e,"class",r=(n[14]||(((i=n[32])==null?void 0:i.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(i,f){y(i,e,f),p(e,t),p(t,l),o||(a=ue(e,"click",n[72]),o=!0)},p(i,f){var u;f[1]&8&&s!==(s=i[34].t("Edit"))&&d(e,"aria-label",s),f[0]&16384|f[1]&2&&r!==(r=(i[14]||(((u=i[32])==null?void 0:u.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",r)},d(i){i&&m(e),o=!1,a()}}}function Pf(n){let e,t,l,s,r,o,a;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(i){e=M(i,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=ge(f,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=k(t);l=ge(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var i;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"aria-hidden","true"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",s=n[34].t("Copy")),d(e,"class",r=(n[14]||(((i=n[32])==null?void 0:i.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button")},m(i,f){y(i,e,f),p(e,t),p(t,l),o||(a=ue(e,"click",n[73]),o=!0)},p(i,f){var u;f[1]&8&&s!==(s=i[34].t("Copy"))&&d(e,"aria-label",s),f[0]&16384|f[1]&2&&r!==(r=(i[14]||(((u=i[32])==null?void 0:u.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button")&&d(e,"class",r)},d(i){i&&m(e),o=!1,a()}}}function en(n){let e,t;return e=new Le({props:{content:n[34].t("Read Aloud"),placement:"bottom",$$slots:{default:[zf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[1]&8&&(r.content=l[34].t("Read Aloud")),s[0]&402931712|s[1]&10|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Lf(n){let e,t;return{c(){e=me("svg"),t=me("path"),this.h()},l(l){e=ge(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"aria-hidden":!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=ge(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){y(l,e,s),p(e,t)},d(l){l&&m(e)}}}function jf(n){let e,t;return{c(){e=me("svg"),t=me("path"),this.h()},l(l){e=ge(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"aria-hidden":!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=ge(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){y(l,e,s),p(e,t)},d(l){l&&m(e)}}}function Af(n){let e,t,l,s,r,o;return{c(){e=me("svg"),t=me("style"),l=W(`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),s=me("circle"),r=me("circle"),o=me("circle"),this.h()},l(a){e=ge(a,"svg",{class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,xmlns:!0});var i=k(e);t=ge(i,"style",{});var f=k(t);l=F(f,`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),f.forEach(m),s=ge(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(s).forEach(m),r=ge(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(r).forEach(m),o=ge(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(o).forEach(m),i.forEach(m),this.h()},h(){d(s,"class","spinner_S1WN"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","3"),d(r,"class","spinner_S1WN spinner_Km9P"),d(r,"cx","12"),d(r,"cy","12"),d(r,"r","3"),d(o,"class","spinner_S1WN spinner_JApP"),d(o,"cx","20"),d(o,"cy","12"),d(o,"r","3"),d(e,"class","w-4 h-4"),d(e,"fill","currentColor"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"xmlns","http://www.w3.org/2000/svg")},m(a,i){y(a,e,i),p(e,t),p(t,l),p(e,s),p(e,r),p(e,o)},d(a){a&&m(e)}}}function zf(n){let e,t,l,s,r,o;function a(u,c){return u[28]?Af:u[27]?jf:Lf}let i=a(n),f=i(n);return{c(){e=I("button"),f.c(),this.h()},l(u){e=M(u,"BUTTON",{"aria-label":!0,id:!0,class:!0});var c=k(e);f.l(c),c.forEach(m),this.h()},h(){var u;d(e,"aria-label",t=n[34].t("Read Aloud")),d(e,"id",l="speak-button-"+n[18].id),d(e,"class",s=(n[14]||(((u=n[32])==null?void 0:u.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(u,c){y(u,e,c),f.m(e,null),r||(o=ue(e,"click",n[74]),r=!0)},p(u,c){var g;i!==(i=a(u))&&(f.d(1),f=i(u),f&&(f.c(),f.m(e,null))),c[1]&8&&t!==(t=u[34].t("Read Aloud"))&&d(e,"aria-label",t),c[0]&262144&&l!==(l="speak-button-"+u[18].id)&&d(e,"id",l),c[0]&16384|c[1]&2&&s!==(s=(u[14]||(((g=u[32])==null?void 0:g.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",s)},d(u){u&&m(e),f.d(),r=!1,o()}}}function tn(n){let e,t;return e=new Le({props:{content:n[34].t("Generate Image"),placement:"bottom",$$slots:{default:[qf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[1]&8&&(r.content=l[34].t("Generate Image")),s[0]&537149440|s[1]&10|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Hf(n){let e,t;return{c(){e=me("svg"),t=me("path"),this.h()},l(l){e=ge(l,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=ge(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"aria-hidden","true"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){y(l,e,s),p(e,t)},d(l){l&&m(e)}}}function Uf(n){let e,t,l,s,r,o;return{c(){e=me("svg"),t=me("style"),l=W(`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),s=me("circle"),r=me("circle"),o=me("circle"),this.h()},l(a){e=ge(a,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var i=k(e);t=ge(i,"style",{});var f=k(t);l=F(f,`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),f.forEach(m),s=ge(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(s).forEach(m),r=ge(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(r).forEach(m),o=ge(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(o).forEach(m),i.forEach(m),this.h()},h(){d(s,"class","spinner_S1WN"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","3"),d(r,"class","spinner_S1WN spinner_Km9P"),d(r,"cx","12"),d(r,"cy","12"),d(r,"r","3"),d(o,"class","spinner_S1WN spinner_JApP"),d(o,"cx","20"),d(o,"cy","12"),d(o,"r","3"),d(e,"aria-hidden","true"),d(e,"class","w-4 h-4"),d(e,"fill","currentColor"),d(e,"viewBox","0 0 24 24"),d(e,"xmlns","http://www.w3.org/2000/svg")},m(a,i){y(a,e,i),p(e,t),p(t,l),p(e,s),p(e,r),p(e,o)},d(a){a&&m(e)}}}function qf(n){let e,t,l,s,r;function o(f,u){return f[29]?Uf:Hf}let a=o(n),i=a(n);return{c(){e=I("button"),i.c(),this.h()},l(f){e=M(f,"BUTTON",{"aria-label":!0,class:!0});var u=k(e);i.l(u),u.forEach(m),this.h()},h(){var f;d(e,"aria-label",t=n[34].t("Generate Image")),d(e,"class",l=(n[14]||(((f=n[32])==null?void 0:f.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(f,u){y(f,e,u),i.m(e,null),s||(r=ue(e,"click",n[75]),s=!0)},p(f,u){var c;a!==(a=o(f))&&(i.d(1),i=a(f),i&&(i.c(),i.m(e,null))),u[1]&8&&t!==(t=f[34].t("Generate Image"))&&d(e,"aria-label",t),u[0]&16384|u[1]&2&&l!==(l=(f[14]||(((c=f[32])==null?void 0:c.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",l)},d(f){f&&m(e),i.d(),s=!1,r()}}}function ln(n){let e,t;return e=new Le({props:{content:n[18].usage?`<pre>${wt(JSON.stringify(n[18].usage,null,2).replace(/"([^(")"]+)":/g,"$1:").slice(1,-1).split(`
`).map(_n).map(pn).join(`
`))}</pre>`:"",placement:"bottom",$$slots:{default:[Wf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&262144&&(r.content=l[18].usage?`<pre>${wt(JSON.stringify(l[18].usage,null,2).replace(/"([^(")"]+)":/g,"$1:").slice(1,-1).split(`
`).map(_n).map(pn).join(`
`))}</pre>`:""),s[0]&278528|s[1]&2|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Wf(n){let e,t,l,s,r,o,a;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(i){e=M(i,"BUTTON",{"aria-hidden":!0,class:!0,id:!0});var f=k(e);t=ge(f,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=k(t);l=ge(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var i;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"),d(t,"aria-hidden","true"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-hidden","true"),d(e,"class",s=(n[14]||(((i=n[32])==null?void 0:i.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap"),d(e,"id",r="info-"+n[18].id)},m(i,f){y(i,e,f),p(e,t),p(t,l),o||(a=ue(e,"click",n[76]),o=!0)},p(i,f){var u;f[0]&16384|f[1]&2&&s!==(s=(i[14]||(((u=i[32])==null?void 0:u.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap")&&d(e,"class",s),f[0]&262144&&r!==(r="info-"+i[18].id)&&d(e,"id",r)},d(i){i&&m(e),o=!1,a()}}}function sn(n){var g,h,_,E,v,T,P,R,B,D,C,N,V,O,q,Z,se;let e,t,l,s,r,o,a=!n[36]&&(((g=n[33])==null?void 0:g.features.enable_message_rating)??!0)&&(((h=n[35])==null?void 0:h.role)==="admin"||(((v=(E=(_=n[35])==null?void 0:_.permissions)==null?void 0:E.chat)==null?void 0:v.rate_response)??!0))&&nn(n),i=n[14]&&(((T=n[35])==null?void 0:T.role)==="admin"||(((B=(R=(P=n[35])==null?void 0:P.permissions)==null?void 0:R.chat)==null?void 0:B.continue_response)??!0))&&rn(n),f=(((D=n[35])==null?void 0:D.role)==="admin"||(((V=(N=(C=n[35])==null?void 0:C.permissions)==null?void 0:N.chat)==null?void 0:V.regenerate_response)??!0))&&an(n),u=(((O=n[35])==null?void 0:O.role)==="admin"||(((se=(Z=(q=n[35])==null?void 0:q.permissions)==null?void 0:Z.chat)==null?void 0:se.delete_message)??!0))&&on(n),c=n[14]&&un(n);return{c(){a&&a.c(),e=j(),i&&i.c(),t=j(),f&&f.c(),l=j(),u&&u.c(),s=j(),c&&c.c(),r=ie()},l(L){a&&a.l(L),e=A(L),i&&i.l(L),t=A(L),f&&f.l(L),l=A(L),u&&u.l(L),s=A(L),c&&c.l(L),r=ie()},m(L,U){a&&a.m(L,U),y(L,e,U),i&&i.m(L,U),y(L,t,U),f&&f.m(L,U),y(L,l,U),u&&u.m(L,U),y(L,s,U),c&&c.m(L,U),y(L,r,U),o=!0},p(L,U){var H,ae,be,G,pe,X,ce,Me,ve,ne,oe,De,ke,Ce,we,he,_e;!L[36]&&(((H=L[33])==null?void 0:H.features.enable_message_rating)??!0)&&(((ae=L[35])==null?void 0:ae.role)==="admin"||(((pe=(G=(be=L[35])==null?void 0:be.permissions)==null?void 0:G.chat)==null?void 0:pe.rate_response)??!0))?a?(a.p(L,U),U[1]&52&&b(a,1)):(a=nn(L),a.c(),b(a,1),a.m(e.parentNode,e)):a&&(ee(),w(a,1,1,()=>{a=null}),te()),L[14]&&(((X=L[35])==null?void 0:X.role)==="admin"||(((ve=(Me=(ce=L[35])==null?void 0:ce.permissions)==null?void 0:Me.chat)==null?void 0:ve.continue_response)??!0))?i?(i.p(L,U),U[0]&16384|U[1]&16&&b(i,1)):(i=rn(L),i.c(),b(i,1),i.m(t.parentNode,t)):i&&(ee(),w(i,1,1,()=>{i=null}),te()),((ne=L[35])==null?void 0:ne.role)==="admin"||(((ke=(De=(oe=L[35])==null?void 0:oe.permissions)==null?void 0:De.chat)==null?void 0:ke.regenerate_response)??!0)?f?(f.p(L,U),U[1]&16&&b(f,1)):(f=an(L),f.c(),b(f,1),f.m(l.parentNode,l)):f&&(ee(),w(f,1,1,()=>{f=null}),te()),((Ce=L[35])==null?void 0:Ce.role)==="admin"||(((_e=(he=(we=L[35])==null?void 0:we.permissions)==null?void 0:he.chat)==null?void 0:_e.delete_message)??!0)?u?(u.p(L,U),U[1]&16&&b(u,1)):(u=on(L),u.c(),b(u,1),u.m(s.parentNode,s)):u&&(ee(),w(u,1,1,()=>{u=null}),te()),L[14]?c?(c.p(L,U),U[0]&16384&&b(c,1)):(c=un(L),c.c(),b(c,1),c.m(r.parentNode,r)):c&&(ee(),w(c,1,1,()=>{c=null}),te())},i(L){o||(b(a),b(i),b(f),b(u),b(c),o=!0)},o(L){w(a),w(i),w(f),w(u),w(c),o=!1},d(L){L&&(m(e),m(t),m(l),m(s),m(r)),a&&a.d(L),i&&i.d(L),f&&f.d(L),u&&u.d(L),c&&c.d(L)}}}function nn(n){let e,t,l,s;return e=new Le({props:{content:n[34].t("Good Response"),placement:"bottom",$$slots:{default:[Ff]},$$scope:{ctx:n}}}),l=new Le({props:{content:n[34].t("Bad Response"),placement:"bottom",$$slots:{default:[Jf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment),t=j(),Y(l.$$.fragment)},l(r){le(e.$$.fragment,r),t=A(r),le(l.$$.fragment,r)},m(r,o){$(e,r,o),y(r,t,o),$(l,r,o),s=!0},p(r,o){const a={};o[1]&8&&(a.content=r[34].t("Good Response")),o[0]&278528|o[1]&11|o[3]&8192&&(a.$$scope={dirty:o,ctx:r}),e.$set(a);const i={};o[1]&8&&(i.content=r[34].t("Bad Response")),o[0]&278528|o[1]&11|o[3]&8192&&(i.$$scope={dirty:o,ctx:r}),l.$set(i)},i(r){s||(b(e.$$.fragment,r),b(l.$$.fragment,r),s=!0)},o(r){w(e.$$.fragment,r),w(l.$$.fragment,r),s=!1},d(r){r&&m(t),x(e,r),x(l,r)}}}function Ff(n){let e,t,l,s,r,o,a;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(i){e=M(i,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=ge(f,"svg",{"aria-hidden":!0,stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0,xmlns:!0});var u=k(t);l=ge(u,"path",{d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var i,f,u;d(l,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"fill","none"),d(t,"stroke-width","2.3"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class","w-4 h-4"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(e,"aria-label",s=n[34].t("Good Response")),d(e,"class",r=(n[14]||(((i=n[32])==null?void 0:i.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((u=(f=n[18])==null?void 0:f.annotation)==null?void 0:u.rating)??"").toString()==="1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent"),e.disabled=n[31]},m(i,f){y(i,e,f),p(e,t),p(t,l),o||(a=ue(e,"click",n[77]),o=!0)},p(i,f){var u,c,g;f[1]&8&&s!==(s=i[34].t("Good Response"))&&d(e,"aria-label",s),f[0]&278528|f[1]&2&&r!==(r=(i[14]||(((u=i[32])==null?void 0:u.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((g=(c=i[18])==null?void 0:c.annotation)==null?void 0:g.rating)??"").toString()==="1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent")&&d(e,"class",r),f[1]&1&&(e.disabled=i[31])},d(i){i&&m(e),o=!1,a()}}}function Jf(n){let e,t,l,s,r,o,a;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(i){e=M(i,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=ge(f,"svg",{"aria-hidden":!0,stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0,xmlns:!0});var u=k(t);l=ge(u,"path",{d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var i,f,u;d(l,"d","M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"fill","none"),d(t,"stroke-width","2.3"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class","w-4 h-4"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(e,"aria-label",s=n[34].t("Bad Response")),d(e,"class",r=(n[14]||(((i=n[32])==null?void 0:i.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((u=(f=n[18])==null?void 0:f.annotation)==null?void 0:u.rating)??"").toString()==="-1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent"),e.disabled=n[31]},m(i,f){y(i,e,f),p(e,t),p(t,l),o||(a=ue(e,"click",n[78]),o=!0)},p(i,f){var u,c,g;f[1]&8&&s!==(s=i[34].t("Bad Response"))&&d(e,"aria-label",s),f[0]&278528|f[1]&2&&r!==(r=(i[14]||(((u=i[32])==null?void 0:u.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((g=(c=i[18])==null?void 0:c.annotation)==null?void 0:g.rating)??"").toString()==="-1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent")&&d(e,"class",r),f[1]&1&&(e.disabled=i[31])},d(i){i&&m(e),o=!1,a()}}}function rn(n){let e,t;return e=new Le({props:{content:n[34].t("Continue Response"),placement:"bottom",$$slots:{default:[Gf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[1]&8&&(r.content=l[34].t("Continue Response")),s[0]&18432|s[1]&10|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Gf(n){let e,t,l,s,r,o,a,i;return{c(){e=I("button"),t=me("svg"),l=me("path"),s=me("path"),this.h()},l(f){e=M(f,"BUTTON",{"aria-label":!0,type:!0,id:!0,class:!0});var u=k(e);t=ge(u,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=k(t);l=ge(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),s=ge(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(s).forEach(m),c.forEach(m),u.forEach(m),this.h()},h(){var f;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(s,"d","M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"),d(t,"aria-hidden","true"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",r=n[34].t("Continue Response")),d(e,"type","button"),d(e,"id","continue-response-button"),d(e,"class",o=(n[14]||(((f=n[32])==null?void 0:f.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(f,u){y(f,e,u),p(e,t),p(t,l),p(t,s),a||(i=ue(e,"click",n[79]),a=!0)},p(f,u){var c;u[1]&8&&r!==(r=f[34].t("Continue Response"))&&d(e,"aria-label",r),u[0]&16384|u[1]&2&&o!==(o=(f[14]||(((c=f[32])==null?void 0:c.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",o)},d(f){f&&m(e),a=!1,i()}}}function an(n){let e,t,l,s;const r=[Kf,Zf],o=[];function a(i,f){var u;return((u=i[32])==null?void 0:u.regenerateMenu)??!0?0:1}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),l=ie()},l(i){t.l(i),l=ie()},m(i,f){o[e].m(i,f),y(i,l,f),s=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ee(),w(o[u],1,1,()=>{o[u]=null}),te(),t=o[e],t?t.p(i,f):(t=o[e]=r[e](i),t.c()),b(t,1),t.m(l.parentNode,l))},i(i){s||(b(t),s=!0)},o(i){w(t),s=!1},d(i){i&&m(l),o[e].d(i)}}}function Zf(n){let e,t;return e=new Le({props:{content:n[34].t("Regenerate"),placement:"bottom",$$slots:{default:[Qf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[1]&8&&(r.content=l[34].t("Regenerate")),s[0]&1082413056|s[1]&8|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Kf(n){let e,t,l,s,r,o;return l=new Yo({props:{onRegenerate:n[81],$$slots:{default:[Yf]},$$scope:{ctx:n}}}),{c(){e=I("button"),t=j(),Y(l.$$.fragment),this.h()},l(a){e=M(a,"BUTTON",{type:!0,class:!0}),k(e).forEach(m),t=A(a),le(l.$$.fragment,a),this.h()},h(){d(e,"type","button"),d(e,"class","hidden regenerate-response-button")},m(a,i){y(a,e,i),y(a,t,i),$(l,a,i),s=!0,r||(o=ue(e,"click",n[80]),r=!0)},p(a,i){const f={};i[0]&1082396672&&(f.onRegenerate=a[81]),i[0]&16384|i[1]&8|i[3]&8192&&(f.$$scope={dirty:i,ctx:a}),l.$set(f)},i(a){s||(b(l.$$.fragment,a),s=!0)},o(a){w(l.$$.fragment,a),s=!1},d(a){a&&(m(e),m(t)),x(l,a),r=!1,o()}}}function Qf(n){let e,t,l,s,r,o,a;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(i){e=M(i,"BUTTON",{type:!0,"aria-label":!0,class:!0});var f=k(e);t=ge(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var u=k(t);l=ge(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"type","button"),d(e,"aria-label",s=n[34].t("Regenerate")),d(e,"class",r=(n[14]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(i,f){y(i,e,f),p(e,t),p(t,l),o||(a=ue(e,"click",n[82]),o=!0)},p(i,f){f[1]&8&&s!==(s=i[34].t("Regenerate"))&&d(e,"aria-label",s),f[0]&16384&&r!==(r=(i[14]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")&&d(e,"class",r)},d(i){i&&m(e),o=!1,a()}}}function Xf(n){let e,t,l,s,r;return{c(){e=I("div"),t=me("svg"),l=me("path"),this.h()},l(o){e=M(o,"DIV",{"aria-label":!0,class:!0});var a=k(e);t=ge(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var i=k(t);l=ge(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),i.forEach(m),a.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",s=n[34].t("Regenerate")),d(e,"class",r=(n[14]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(o,a){y(o,e,a),p(e,t),p(t,l)},p(o,a){a[1]&8&&s!==(s=o[34].t("Regenerate"))&&d(e,"aria-label",s),a[0]&16384&&r!==(r=(o[14]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",r)},d(o){o&&m(e)}}}function Yf(n){let e,t;return e=new Le({props:{content:n[34].t("Regenerate"),placement:"bottom",$$slots:{default:[Xf]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[1]&8&&(r.content=l[34].t("Regenerate")),s[0]&16384|s[1]&8|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function on(n){let e,t,l=n[3].length>1&&fn(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){s[3].length>1?l?(l.p(s,r),r[0]&8&&b(l,1)):(l=fn(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function fn(n){let e,t;return e=new Le({props:{content:n[34].t("Delete"),placement:"bottom",$$slots:{default:[$f]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[1]&8&&(r.content=l[34].t("Delete")),s[0]&4210688|s[1]&10|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function $f(n){let e,t,l,s,r,o,a;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(i){e=M(i,"BUTTON",{type:!0,"aria-label":!0,id:!0,class:!0});var f=k(e);t=ge(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,"aria-hidden":!0,class:!0});var u=k(t);l=ge(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var i;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2"),d(t,"stroke","currentColor"),d(t,"aria-hidden","true"),d(t,"class","w-4 h-4"),d(e,"type","button"),d(e,"aria-label",s=n[34].t("Delete")),d(e,"id","delete-response-button"),d(e,"class",r=(n[14]||(((i=n[32])==null?void 0:i.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(i,f){y(i,e,f),p(e,t),p(t,l),o||(a=ue(e,"click",n[83]),o=!0)},p(i,f){var u;f[1]&8&&s!==(s=i[34].t("Delete"))&&d(e,"aria-label",s),f[0]&16384|f[1]&2&&r!==(r=(i[14]||(((u=i[32])==null?void 0:u.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",r)},d(i){i&&m(e),o=!1,a()}}}function un(n){var o;let e,t,l=Ne(((o=n[23])==null?void 0:o.actions)??[]),s=[];for(let a=0;a<l.length;a+=1)s[a]=cn(Ls(n,l,a));const r=a=>w(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=ie()},l(a){for(let i=0;i<s.length;i+=1)s[i].l(a);e=ie()},m(a,i){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(a,i);y(a,e,i),t=!0},p(a,i){var f;if(i[0]&8667648|i[1]&2){l=Ne(((f=a[23])==null?void 0:f.actions)??[]);let u;for(u=0;u<l.length;u+=1){const c=Ls(a,l,u);s[u]?(s[u].p(c,i),b(s[u],1)):(s[u]=cn(c),s[u].c(),b(s[u],1),s[u].m(e.parentNode,e))}for(ee(),u=l.length;u<s.length;u+=1)r(u);te()}},i(a){if(!t){for(let i=0;i<l.length;i+=1)b(s[i]);t=!0}},o(a){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)w(s[i]);t=!1},d(a){a&&m(e),Ge(s,a)}}}function xf(n){let e,t;return e=new Pi({props:{strokeWidth:"2.1",className:"size-4"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p:Be,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function eu(n){let e,t,l,s,r;return{c(){e=I("div"),t=I("img"),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);t=M(a,"IMG",{src:!0,class:!0,style:!0,alt:!0}),a.forEach(m),this.h()},h(){ft(t.src,l=n[97].icon)||d(t,"src",l),d(t,"class",s="w-4 h-4 "+(n[97].icon.includes("svg")?"dark:invert-[80%]":"")),Ht(t,"fill","currentColor"),d(t,"alt",r=n[97].name),d(e,"class","size-4")},m(o,a){y(o,e,a),p(e,t)},p(o,a){a[0]&8388608&&!ft(t.src,l=o[97].icon)&&d(t,"src",l),a[0]&8388608&&s!==(s="w-4 h-4 "+(o[97].icon.includes("svg")?"dark:invert-[80%]":""))&&d(t,"class",s),a[0]&8388608&&r!==(r=o[97].name)&&d(t,"alt",r)},i:Be,o:Be,d(o){o&&m(e)}}}function tu(n){let e,t,l,s,r,o,a,i,f;const u=[eu,xf],c=[];function g(_,E){var v;return(v=_[97])!=null&&v.icon?0:1}t=g(n),l=c[t]=u[t](n);function h(){return n[84](n[97])}return{c(){e=I("button"),l.c(),o=j(),this.h()},l(_){e=M(_,"BUTTON",{type:!0,"aria-label":!0,class:!0});var E=k(e);l.l(E),E.forEach(m),o=A(_),this.h()},h(){var _;d(e,"type","button"),d(e,"aria-label",s=n[97].name),d(e,"class",r=(n[14]||(((_=n[32])==null?void 0:_.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(_,E){y(_,e,E),c[t].m(e,null),y(_,o,E),a=!0,i||(f=ue(e,"click",h),i=!0)},p(_,E){var T;n=_;let v=t;t=g(n),t===v?c[t].p(n,E):(ee(),w(c[v],1,1,()=>{c[v]=null}),te(),l=c[t],l?l.p(n,E):(l=c[t]=u[t](n),l.c()),b(l,1),l.m(e,null)),(!a||E[0]&8388608&&s!==(s=n[97].name))&&d(e,"aria-label",s),(!a||E[0]&16384|E[1]&2&&r!==(r=(n[14]||(((T=n[32])==null?void 0:T.highContrastMode)??!1)?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition"))&&d(e,"class",r)},i(_){a||(b(l),a=!0)},o(_){w(l),a=!1},d(_){_&&(m(e),m(o)),c[t].d(),i=!1,f()}}}function cn(n){let e,t;return e=new Le({props:{content:n[97].name,placement:"bottom",$$slots:{default:[tu]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&8388608&&(r.content=l[97].name),s[0]&8667648|s[1]&2|s[3]&8192&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function dn(n){let e,t,l,s;function r(i){n[86](i)}function o(i){n[87](i)}let a={};return n[18]!==void 0&&(a.message=n[18]),n[30]!==void 0&&(a.show=n[30]),e=new da({props:a}),Je.push(()=>xe(e,"message",r)),Je.push(()=>xe(e,"show",o)),e.$on("save",n[88]),{c(){Y(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,f){$(e,i,f),s=!0},p(i,f){const u={};!t&&f[0]&262144&&(t=!0,u.message=i[18],et(()=>t=!1)),!l&&f[0]&1073741824&&(l=!0,u.show=i[30],et(()=>l=!1)),e.$set(u)},i(i){s||(b(e.$$.fragment,i),s=!0)},o(i){w(e.$$.fragment,i),s=!1},d(i){x(e,i)}}}function hn(n){var r;let e,t,l,s;return t=new Lo({props:{followUps:(r=n[18])==null?void 0:r.followUps,onClick:n[89]}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);le(t.$$.fragment,a),a.forEach(m),this.h()},h(){d(e,"class","mt-2.5")},m(o,a){y(o,e,a),$(t,e,null),s=!0},p(o,a){var f;const i={};a[0]&262144&&(i.followUps=(f=o[18])==null?void 0:f.followUps),a[0]&263184|a[1]&2&&(i.onClick=o[89]),t.$set(i)},i(o){s||(b(t.$$.fragment,o),o&&(l||Dt(()=>{l=Tt(e,Vt,{duration:100}),l.start()})),s=!0)},o(o){w(t.$$.fragment,o),s=!1},d(o){o&&m(e),x(t)}}}function mn(n){var U,H,ae,be,G,pe,X,ce,Me,ve;let e,t,l,s,r,o,a,i,f,u,c,g=((U=n[18])==null?void 0:U.files)&&((H=n[18].files)==null?void 0:H.filter(gn).length)>0,h,_,E,v,T,P,R,B,D,C;l=new Nr({props:{src:((G=(be=(ae=n[23])==null?void 0:ae.info)==null?void 0:be.meta)==null?void 0:G.profile_image_url)??(n[34].language==="dg-DG"?`${$e}/doge.png`:`${$e}/favicon.png`),className:"size-8 assistant-message-profile-image"}}),o=new xt({props:{$$slots:{default:[Ef]},$$scope:{ctx:n}}});let N=(((Me=(ce=(X=(pe=n[23])==null?void 0:pe.info)==null?void 0:X.meta)==null?void 0:ce.capabilities)==null?void 0:Me.status_updates)??!0)&&Hs(n),V=g&&Us(n),O=((ve=n[18])==null?void 0:ve.embeds)&&n[18].embeds.length>0&&Ws(n);const q=[Tf,Df],Z=[];function se(ne,oe){return ne[19]===!0?0:1}E=se(n),v=Z[E]=q[E](n);let L=!n[19]&&Ks(n);return{c(){e=I("div"),t=I("div"),Y(l.$$.fragment),s=j(),r=I("div"),Y(o.$$.fragment),a=j(),i=I("div"),f=I("div"),u=I("div"),N&&N.c(),c=j(),V&&V.c(),h=j(),O&&O.c(),_=j(),v.c(),P=j(),L&&L.c(),this.h()},l(ne){e=M(ne,"DIV",{class:!0,id:!0,dir:!0});var oe=k(e);t=M(oe,"DIV",{class:!0});var De=k(t);le(l.$$.fragment,De),De.forEach(m),s=A(oe),r=M(oe,"DIV",{class:!0});var ke=k(r);le(o.$$.fragment,ke),a=A(ke),i=M(ke,"DIV",{});var Ce=k(i);f=M(Ce,"DIV",{class:!0});var we=k(f);u=M(we,"DIV",{});var he=k(u);N&&N.l(he),c=A(he),V&&V.l(he),h=A(he),O&&O.l(he),_=A(he),v.l(he),he.forEach(m),we.forEach(m),P=A(Ce),L&&L.l(Ce),Ce.forEach(m),ke.forEach(m),oe.forEach(m),this.h()},h(){d(t,"class",ui("shrink-0 ltr:mr-3 rtl:ml-3 hidden @lg:flex mt-1 ")+" svelte-1u5gq5j"),d(f,"class",T="chat-"+n[18].role+" w-full min-w-full markdown-prose svelte-1u5gq5j"),d(r,"class","flex-auto w-0 pl-1 relative"),d(e,"class",R="flex w-full message-"+n[18].id+" svelte-1u5gq5j"),d(e,"id",B="message-"+n[18].id),d(e,"dir",D=n[32].chatDirection)},m(ne,oe){y(ne,e,oe),p(e,t),$(l,t,null),p(e,s),p(e,r),$(o,r,null),p(r,a),p(r,i),p(i,f),p(f,u),N&&N.m(u,null),p(u,c),V&&V.m(u,null),p(u,h),O&&O.m(u,null),p(u,_),Z[E].m(u,null),p(i,P),L&&L.m(i,null),C=!0},p(ne,oe){var we,he,_e,S,Q,fe,Ee,ye,J,de;const De={};oe[0]&8388608|oe[1]&8&&(De.src=((_e=(he=(we=ne[23])==null?void 0:we.info)==null?void 0:he.meta)==null?void 0:_e.profile_image_url)??(ne[34].language==="dg-DG"?`${$e}/doge.png`:`${$e}/favicon.png`)),l.$set(De);const ke={};oe[0]&8650752|oe[1]&10|oe[3]&8192&&(ke.$$scope={dirty:oe,ctx:ne}),o.$set(ke),((Ee=(fe=(Q=(S=ne[23])==null?void 0:S.info)==null?void 0:Q.meta)==null?void 0:fe.capabilities)==null?void 0:Ee.status_updates)??!0?N?(N.p(ne,oe),oe[0]&8388608&&b(N,1)):(N=Hs(ne),N.c(),b(N,1),N.m(u,c)):N&&(ee(),w(N,1,1,()=>{N=null}),te()),oe[0]&262144&&(g=((ye=ne[18])==null?void 0:ye.files)&&((J=ne[18].files)==null?void 0:J.filter(gn).length)>0),g?V?(V.p(ne,oe),oe[0]&262144&&b(V,1)):(V=Us(ne),V.c(),b(V,1),V.m(u,h)):V&&(ee(),w(V,1,1,()=>{V=null}),te()),(de=ne[18])!=null&&de.embeds&&ne[18].embeds.length>0?O?(O.p(ne,oe),oe[0]&262144&&b(O,1)):(O=Ws(ne),O.c(),b(O,1),O.m(u,_)):O&&(ee(),w(O,1,1,()=>{O=null}),te());let Ce=E;E=se(ne),E===Ce?Z[E].p(ne,oe):(ee(),w(Z[Ce],1,1,()=>{Z[Ce]=null}),te(),v=Z[E],v?v.p(ne,oe):(v=Z[E]=q[E](ne),v.c()),b(v,1),v.m(u,null)),(!C||oe[0]&262144&&T!==(T="chat-"+ne[18].role+" w-full min-w-full markdown-prose svelte-1u5gq5j"))&&d(f,"class",T),ne[19]?L&&(ee(),w(L,1,1,()=>{L=null}),te()):L?(L.p(ne,oe),oe[0]&524288&&b(L,1)):(L=Ks(ne),L.c(),b(L,1),L.m(i,null)),(!C||oe[0]&262144&&R!==(R="flex w-full message-"+ne[18].id+" svelte-1u5gq5j"))&&d(e,"class",R),(!C||oe[0]&262144&&B!==(B="message-"+ne[18].id))&&d(e,"id",B),(!C||oe[1]&2&&D!==(D=ne[32].chatDirection))&&d(e,"dir",D)},i(ne){C||(b(l.$$.fragment,ne),b(o.$$.fragment,ne),b(N),b(V),b(O),b(v),b(L),C=!0)},o(ne){w(l.$$.fragment,ne),w(o.$$.fragment,ne),w(N),w(V),w(O),w(v),w(L),C=!1},d(ne){ne&&m(e),x(l),x(o),N&&N.d(),V&&V.d(),O&&O.d(),Z[E].d(),L&&L.d()}}}function lu(n){let e,t,l,s=n[18].id,r,o;function a(u){n[54](u)}let i={title:n[34].t("Delete message?")};n[22]!==void 0&&(i.show=n[22]),e=new Dr({props:i}),Je.push(()=>xe(e,"show",a)),e.$on("confirm",n[55]);let f=mn(n);return{c(){Y(e.$$.fragment),l=j(),f.c(),r=ie()},l(u){le(e.$$.fragment,u),l=A(u),f.l(u),r=ie()},m(u,c){$(e,u,c),y(u,l,c),f.m(u,c),y(u,r,c),o=!0},p(u,c){const g={};c[1]&8&&(g.title=u[34].t("Delete message?")),!t&&c[0]&4194304&&(t=!0,g.show=u[22],et(()=>t=!1)),e.$set(g),c[0]&262144&&Pe(s,s=u[18].id)?(ee(),w(f,1,1,Be),te(),f=mn(u),f.c(),b(f,1),f.m(r.parentNode,r)):f.p(u,c)},i(u){o||(b(e.$$.fragment,u),b(f),o=!0)},o(u){w(e.$$.fragment,u),w(f),o=!1},d(u){u&&(m(l),m(r)),x(e,u),f.d(u)}}}const gn=n=>n.type==="image",su=n=>{n.target.style.height="",n.target.style.height=`${n.target.scrollHeight}px`},nu=n=>{n.target.select()},_n=n=>n.slice(2),pn=n=>n.endsWith(",")?n.slice(0,-1):n;function ru(n,e,t){let l,s,r,o,a,i,f;Te(n,Et,z=>t(53,l=z)),Te(n,bt,z=>t(32,s=z)),Te(n,yr,z=>t(33,r=z)),Te(n,yl,z=>t(93,o=z)),Te(n,qt,z=>t(35,i=z)),Te(n,$t,z=>t(36,f=z));const u=Ze("i18n");Te(n,u,z=>t(34,a=z));const c=Bt();let{chatId:g=""}=e,{history:h}=e,{messageId:_}=e,{selectedModels:E=[]}=e,v=JSON.parse(JSON.stringify(h.messages[_])),{siblings:T}=e,{setInputText:P=()=>{}}=e,{gotoMessage:R=()=>{}}=e,{showPreviousMessage:B}=e,{showNextMessage:D}=e,{updateChat:C}=e,{editMessage:N}=e,{saveMessage:V}=e,{rateMessage:O}=e,{actionMessage:q}=e,{deleteMessage:Z}=e,{submitMessage:se}=e,{continueResponse:L}=e,{regenerateResponse:U}=e,{addMessages:H}=e,{isLastMessage:ae=!0}=e,{readOnly:be=!1}=e,{editCodeBlock:G=!0}=e,{topPadding:pe=!1}=e,X,ce,Me=!1,ve=null,ne=!1,oe="",De,ke=!1,Ce={},we=!1,he,_e=!1,S=!1,Q=!1;const fe=async z=>{var Se,qe;z=Nl(z),(((Se=r==null?void 0:r.ui)==null?void 0:Se.response_watermark)??"").trim()!==""&&(z=`${z}

${(qe=r==null?void 0:r.ui)==null?void 0:qe.response_watermark}`),await Er(z,null,(s==null?void 0:s.copyFormatted)??!1)&&Fe.success(a.t("Copying to clipboard was successful!"))},Ee=z=>new Promise(Oe=>{he=z;const Se=Ce[z];if(!Se)return Oe();Se.play(),Se.onended=async()=>{await new Promise(qe=>setTimeout(qe,300)),Object.keys(Ce).length-1===z&&t(27,we=!1),Oe()}}),ye=async()=>{var Oe,Se,qe,ct,it,At,mt,Ct,Ue,Ye,dt,Nt,zt,al,ol,fl,ul,cl,dl,hl,ml,gl,_l;if(we){try{speechSynthesis.cancel(),he!==void 0&&Ce[he]&&(Ce[he].pause(),Ce[he].currentTime=0)}catch{}t(27,we=!1),he=void 0;return}if(!((v==null?void 0:v.content)??"").trim().length){Fe.info(a.t("No content to speak"));return}t(27,we=!0);const z=Nl(v.content);if(r.audio.tts.engine===""){let st=[];const vt=setInterval(()=>{var nt,gt,at;if(st=speechSynthesis.getVoices(),st.length>0){clearInterval(vt);const Ke=((nt=st==null?void 0:st.filter(pt=>{var pl,bl,vl,kl;return pt.voiceURI===(((bl=(pl=s==null?void 0:s.audio)==null?void 0:pl.tts)==null?void 0:bl.voice)??((kl=(vl=r==null?void 0:r.audio)==null?void 0:vl.tts)==null?void 0:kl.voice))}))==null?void 0:nt.at(0))??void 0,_t=new SpeechSynthesisUtterance(z);_t.rate=((at=(gt=s.audio)==null?void 0:gt.tts)==null?void 0:at.playbackRate)??1,_t.onend=()=>{var pt;t(27,we=!1),s.conversationMode&&((pt=document.getElementById("voice-input-button"))==null||pt.click())},Ke&&(_t.voice=Ke),speechSynthesis.speak(_t)}},100)}else{t(28,_e=!0);const st=Mi(z,((Se=(Oe=r==null?void 0:r.audio)==null?void 0:Oe.tts)==null?void 0:Se.split_on)??"punctuation");if(!st.length){Fe.info(a.t("No content to speak")),t(27,we=!1),t(28,_e=!1);return}Ce=st.reduce((nt,gt,at)=>(nt[at]=null,nt),{});let vt=Promise.resolve();if(((ct=(qe=s.audio)==null?void 0:qe.tts)==null?void 0:ct.engine)==="browser-kokoro"){o||(await yl.set(new So({dtype:((mt=(At=(it=s.audio)==null?void 0:it.tts)==null?void 0:At.engineConfig)==null?void 0:mt.dtype)??"fp32"})),await o.init());for(const[nt,gt]of st.entries()){const at=await o.generate({text:gt,voice:((Ue=(Ct=s==null?void 0:s.audio)==null?void 0:Ct.tts)==null?void 0:Ue.voice)??((dt=(Ye=r==null?void 0:r.audio)==null?void 0:Ye.tts)==null?void 0:dt.voice)}).catch(Ke=>{Fe.error(`${Ke}`),t(27,we=!1),t(28,_e=!1)});if(at){const Ke=new Audio(at);Ke.playbackRate=((zt=(Nt=s.audio)==null?void 0:Nt.tts)==null?void 0:zt.playbackRate)??1,Ce[nt]=Ke,t(28,_e=!1),vt=vt.then(()=>Ee(nt))}}}else for(const[nt,gt]of st.entries()){const at=await Ci(localStorage.token,((ol=(al=s==null?void 0:s.audio)==null?void 0:al.tts)==null?void 0:ol.defaultVoice)===r.audio.tts.voice?((ul=(fl=s==null?void 0:s.audio)==null?void 0:fl.tts)==null?void 0:ul.voice)??((dl=(cl=r==null?void 0:r.audio)==null?void 0:cl.tts)==null?void 0:dl.voice):(ml=(hl=r==null?void 0:r.audio)==null?void 0:hl.tts)==null?void 0:ml.voice,gt).catch(Ke=>{Fe.error(`${Ke}`),t(27,we=!1),t(28,_e=!1)});if(at){const Ke=await at.blob(),_t=URL.createObjectURL(Ke),pt=new Audio(_t);pt.playbackRate=((_l=(gl=s.audio)==null?void 0:gl.tts)==null?void 0:_l.playbackRate)??1,Ce[nt]=pt,t(28,_e=!1),vt=vt.then(()=>Ee(nt))}}}};let J=[];function de(z){const Oe=[];let Se=0;return z=z.replace(/<details[\s\S]*?<\/details>/gi,qe=>(Oe.push(qe),`<details id="__DETAIL_${Se++}__"/>`)),J=Oe,z}function Ie(z){return z.replace(/<details id="__DETAIL_(\d+)__"\/>/g,(Se,qe)=>J[parseInt(qe)]||"")}const Ve=async()=>{t(19,ne=!0),t(24,oe=de(v.content)),await Re(),t(25,De.style.height="",De),t(25,De.style.height=`${De.scrollHeight}px`,De)},We=async()=>{const z=Ie(oe||"");N(v.id,{content:z},!1),t(19,ne=!1),t(24,oe=""),await Re()},je=async()=>{const z=Ie(oe||"");N(v.id,{content:z}),t(19,ne=!1),t(24,oe=""),await Re()},re=async()=>{t(19,ne=!1),t(24,oe=""),await Re()},tt=async z=>{t(29,S=!0);const Oe=await Ni(localStorage.token,z.content).catch(Se=>{Fe.error(`${Se}`)});if(Oe){const Se=Oe.map(qe=>({type:"image",url:`${qe.url}`}));V(z.id,{...z,files:Se})}t(29,S=!1)};let Qe=!1;const Xe=async(z=null,Oe=null)=>{var Ct;t(31,Qe=!0);const Se={...v,annotation:{...(v==null?void 0:v.annotation)??{},...z!==null?{rating:z}:{},...Oe||{}}},qe=await ki(localStorage.token,g).catch(Ue=>{Fe.error(`${Ue}`)});if(!qe)return;const ct=Yt(h,v.id);let it={type:"rating",data:{...Se!=null&&Se.annotation?Se.annotation:{},model_id:(v==null?void 0:v.selectedModelId)??v.model,...h.messages[v.parentId].childrenIds.length>1?{sibling_model_ids:h.messages[v.parentId].childrenIds.filter(Ue=>Ue!==v.id).map(Ue=>{var Ye;return((Ye=h.messages[Ue])==null?void 0:Ye.selectedModelId)??h.messages[Ue].model})}:{}},meta:{arena:v?v.arena:!1,model_id:v.model,message_id:v.id,message_index:ct.length,chat_id:g},snapshot:{chat:qe}};const At=[it.data.model_id,...it.data.sibling_model_ids??[]].reduce((Ue,Ye)=>{var Nt;const dt=l.find(zt=>zt.id===Ye);return dt?Ue[dt.id]=((Nt=dt==null?void 0:dt.info)==null?void 0:Nt.base_model_id)??null:console.warn(`Model with ID ${Ye} not found`),Ue},{});it.meta.base_models=At;let mt=null;if(v!=null&&v.feedbackId?mt=await Tl(localStorage.token,v.feedbackId,it).catch(Ue=>{Fe.error(`${Ue}`)}):(mt=await yi(localStorage.token,it).catch(Ue=>{Fe.error(`${Ue}`)}),mt&&(Se.feedbackId=mt.id)),V(v.id,Se),await Re(),!Oe&&(t(30,Q=!0),!((Ct=Se.annotation)!=null&&Ct.tags)&&((v==null?void 0:v.content)??"")!=="")){const Ue=await Ei(localStorage.token,v.model,ct,g).catch(Ye=>[]);Ue&&(Se.annotation.tags=Ue,it.data.tags=Ue,V(v.id,Se),await Tl(localStorage.token,Se.feedbackId,it).catch(Ye=>{Fe.error(`${Ye}`)}))}t(31,Qe=!1)},lt=async()=>{Z(v.id)};Mt(async()=>{await Re(),ce&&ce.addEventListener("wheel",function(z){ce.scrollWidth<=ce.clientWidth||(z.preventDefault(),z.deltaY!==0&&t(21,ce.scrollLeft+=z.deltaY,ce))})});function ut(z){Me=z,t(22,Me)}const Rt=()=>{lt()};function Pt(z){Je[z?"unshift":"push"](()=>{De=z,t(25,De)})}function Lt(){oe=this.value,t(24,oe)}const jt=z=>{var qe,ct;z.key==="Escape"&&((qe=document.getElementById("close-edit-message-button"))==null||qe.click());const Oe=z.metaKey||z.ctrlKey,Se=z.key==="Enter";Oe&&Se&&((ct=document.getElementById("confirm-edit-message-button"))==null||ct.click())},Br=()=>{je()},Sr=()=>{re()},Or=()=>{We()},Rr=async z=>{},Pr=async(z,Oe)=>{X&&(X==null||X.showSourceModal(Oe-1))},Lr=({modelId:z,parentId:Oe,messages:Se})=>{H({modelId:z,parentId:Oe,messages:Se})},jr=({raw:z,oldContent:Oe,newContent:Se})=>{t(0,h.messages[v.id].content=h.messages[v.id].content.replace(z,z.replace(Oe,Se)),h),C()};function Ar(z){Je[z?"unshift":"push"](()=>{X=z,t(20,X)})}const zr=()=>{B(v)},Hr=z=>{R(v,z.target.value-1),t(26,ke=!1)},Ur=z=>{z.key==="Enter"&&(R(v,z.target.value-1),t(26,ke=!1))},qr=async()=>{t(26,ke=!0),await Re();const z=document.getElementById(`message-index-input-${v.id}`);z&&(z.focus(),z.select())},Wr=()=>{D(v)},Fr=()=>{Ve()},Jr=()=>{fe(v.content)},Gr=()=>{_e||ye()},Zr=()=>{S||tt(v)},Kr=()=>{},Qr=async()=>{await Xe(1),window.setTimeout(()=>{var z;(z=document.getElementById(`message-feedback-${v.id}`))==null||z.scrollIntoView()},0)},Xr=async()=>{await Xe(-1),window.setTimeout(()=>{var z;(z=document.getElementById(`message-feedback-${v.id}`))==null||z.scrollIntoView()},0)},Yr=()=>{L()},$r=()=>{t(30,Q=!1),U(v),((ve==null?void 0:ve.actions)??[]).forEach(z=>{c("action",{id:z.id,event:{id:"regenerate-response",data:{messageId:v.id}}})})},xr=(z=null)=>{t(30,Q=!1),U(v,z),((ve==null?void 0:ve.actions)??[]).forEach(Oe=>{c("action",{id:Oe.id,event:{id:"regenerate-response",data:{messageId:v.id}}})})},ei=()=>{t(30,Q=!1),U(v),((ve==null?void 0:ve.actions)??[]).forEach(z=>{c("action",{id:z.id,event:{id:"regenerate-response",data:{messageId:v.id}}})})},ti=()=>{t(22,Me=!0)},li=z=>{q(z.id,v)};function si(z){Je[z?"unshift":"push"](()=>{ce=z,t(21,ce)})}function ni(z){v=z,t(18,v),t(0,h),t(48,_)}function ri(z){Q=z,t(30,Q)}const ii=async z=>{await Xe(null,{...z.detail})},ai=z=>{(s==null?void 0:s.insertFollowUpPrompt)??!1?P(z):se(v==null?void 0:v.id,z)};return n.$$set=z=>{"chatId"in z&&t(1,g=z.chatId),"history"in z&&t(0,h=z.history),"messageId"in z&&t(48,_=z.messageId),"selectedModels"in z&&t(2,E=z.selectedModels),"siblings"in z&&t(3,T=z.siblings),"setInputText"in z&&t(4,P=z.setInputText),"gotoMessage"in z&&t(5,R=z.gotoMessage),"showPreviousMessage"in z&&t(6,B=z.showPreviousMessage),"showNextMessage"in z&&t(7,D=z.showNextMessage),"updateChat"in z&&t(8,C=z.updateChat),"editMessage"in z&&t(49,N=z.editMessage),"saveMessage"in z&&t(50,V=z.saveMessage),"rateMessage"in z&&t(51,O=z.rateMessage),"actionMessage"in z&&t(9,q=z.actionMessage),"deleteMessage"in z&&t(52,Z=z.deleteMessage),"submitMessage"in z&&t(10,se=z.submitMessage),"continueResponse"in z&&t(11,L=z.continueResponse),"regenerateResponse"in z&&t(12,U=z.regenerateResponse),"addMessages"in z&&t(13,H=z.addMessages),"isLastMessage"in z&&t(14,ae=z.isLastMessage),"readOnly"in z&&t(15,be=z.readOnly),"editCodeBlock"in z&&t(16,G=z.editCodeBlock),"topPadding"in z&&t(17,pe=z.topPadding)},n.$$.update=()=>{n.$$.dirty[0]&262145|n.$$.dirty[1]&131072&&h.messages&&JSON.stringify(v)!==JSON.stringify(h.messages[_])&&t(18,v=JSON.parse(JSON.stringify(h.messages[_]))),n.$$.dirty[0]&262144|n.$$.dirty[1]&4194304&&t(23,ve=l.find(z=>z.id===v.model)),n.$$.dirty[0]&524288&&(ne||(async()=>await Re())())},[h,g,E,T,P,R,B,D,C,q,se,L,U,H,ae,be,G,pe,v,ne,X,ce,Me,ve,oe,De,ke,we,_e,S,Q,Qe,s,r,a,i,f,u,c,fe,ye,Ve,We,je,re,tt,Xe,lt,_,N,V,O,Z,l,ut,Rt,Pt,Lt,jt,Br,Sr,Or,Rr,Pr,Lr,jr,Ar,zr,Hr,Ur,qr,Wr,Fr,Jr,Gr,Zr,Kr,Qr,Xr,Yr,$r,xr,ei,ti,li,si,ni,ri,ii,ai]}class il extends Ae{constructor(e){super(),ze(this,e,ru,lu,Pe,{chatId:1,history:0,messageId:48,selectedModels:2,siblings:3,setInputText:4,gotoMessage:5,showPreviousMessage:6,showNextMessage:7,updateChat:8,editMessage:49,saveMessage:50,rateMessage:51,actionMessage:9,deleteMessage:52,submitMessage:10,continueResponse:11,regenerateResponse:12,addMessages:13,isLastMessage:14,readOnly:15,editCodeBlock:16,topPadding:17},null,[-1,-1,-1,-1])}}function iu(n){let e,t;return{c(){e=me("svg"),t=me("path"),this.h()},l(l){e=ge(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=ge(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm6-2a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm0 0h-1a5 5 0 0 1-5-5v-.5"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width",n[1]),d(e,"stroke","currentColor"),d(e,"class",n[0])},m(l,s){y(l,e,s),p(e,t)},p(l,[s]){s&2&&d(e,"stroke-width",l[1]),s&1&&d(e,"class",l[0])},i:Be,o:Be,d(l){l&&m(e)}}}function au(n,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return n.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[l,s]}class ou extends Ae{constructor(e){super(),ze(this,e,au,iu,Pe,{className:0,strokeWidth:1})}}function Gt(n){var l;const e=n.slice(),t=(l=e[0].messages[e[2]])==null?void 0:l.merged;return e[19]=t,e}function bn(n,e,t){const l=n.slice();return l[53]=e[t],l}function Zt(n){const e=n.slice(),t=e[21][e[53]].messageIds[e[22][e[53]]];return e[52]=t,e}function Kt(n){const e=n.slice(),t=e[21][e[23]].messageIds[e[22][e[23]]];return e[52]=t,e}function vn(n,e,t){const l=n.slice();return l[53]=e[t],l}function Qt(n){const e=n.slice(),t=e[21][e[53]].messageIds[e[22][e[53]]];e[52]=t;const l=e[25].find(function(...r){return n[37](e[52],...r)});return e[56]=l,e}function kn(n){let e,t,l,s,r,o,a;const i=[uu,fu],f=[];function u(g,h){var _;return((_=g[24])==null?void 0:_.displayMultiModelResponsesInTabs)??!1?0:1}l=u(n),s=f[l]=i[l](n);let c=!n[5]&&Vn(n);return{c(){e=I("div"),t=I("div"),s.c(),o=j(),c&&c.c(),this.h()},l(g){e=M(g,"DIV",{});var h=k(e);t=M(h,"DIV",{class:!0,id:!0});var _=k(t);s.l(_),_.forEach(m),o=A(h),c&&c.l(h),h.forEach(m),this.h()},h(){d(t,"class","flex snap-x snap-mandatory overflow-x-auto scrollbar-hidden"),d(t,"id",r="responses-container-"+n[1]+"-"+n[20].id)},m(g,h){y(g,e,h),p(e,t),f[l].m(t,null),p(e,o),c&&c.m(e,null),a=!0},p(g,h){let _=l;l=u(g),l===_?f[l].p(g,h):(ee(),w(f[_],1,1,()=>{f[_]=null}),te(),s=f[l],s?s.p(g,h):(s=f[l]=i[l](g),s.c()),b(s,1),s.m(t,null)),(!a||h[0]&1048578&&r!==(r="responses-container-"+g[1]+"-"+g[20].id))&&d(t,"id",r),g[5]?c&&(ee(),w(c,1,1,()=>{c=null}),te()):c?(c.p(g,h),h[0]&32&&b(c,1)):(c=Vn(g),c.c(),b(c,1),c.m(e,null))},i(g){a||(b(s),b(c),a=!0)},o(g){w(s),w(c),a=!1},d(g){g&&m(e),f[l].d(),c&&c.d()}}}function fu(n){let e,t,l=Ne(Object.keys(n[21])),s=[];for(let o=0;o<l.length;o+=1)s[o]=yn(bn(n,l,o));const r=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ie()},l(o){for(let a=0;a<s.length;a+=1)s[a].l(o);e=ie()},m(o,a){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,a);y(o,e,a),t=!0},p(o,a){if(a[0]&1685061615|a[1]&3){l=Ne(Object.keys(o[21]));let i;for(i=0;i<l.length;i+=1){const f=bn(o,l,i);s[i]?(s[i].p(f,a),b(s[i],1)):(s[i]=yn(f),s[i].c(),b(s[i],1),s[i].m(e.parentNode,e))}for(ee(),i=l.length;i<s.length;i+=1)r(i);te()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function uu(n){let e,t,l,s,r,o=Ne(Object.keys(n[21])),a=[];for(let f=0;f<o.length;f+=1)a[f]=Cn(vn(n,o,f));let i=n[23]!==null&&Nn(Kt(n));return{c(){e=I("div"),t=I("div"),l=I("div");for(let f=0;f<a.length;f+=1)a[f].c();s=j(),i&&i.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);t=M(u,"DIV",{class:!0});var c=k(t);l=M(c,"DIV",{class:!0});var g=k(l);for(let h=0;h<a.length;h+=1)a[h].l(g);g.forEach(m),c.forEach(m),s=A(u),i&&i.l(u),u.forEach(m),this.h()},h(){d(l,"class","flex gap-2 scrollbar-none overflow-x-auto w-fit text-center font-medium bg-transparent pt-1 text-sm"),d(t,"class","flex w-full mb-4.5 border-b border-gray-200 dark:border-gray-850"),d(e,"class","w-full")},m(f,u){y(f,e,u),p(e,t),p(t,l);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(l,null);p(e,s),i&&i.m(e,null),r=!0},p(f,u){if(u[0]&48234497|u[1]&2){o=Ne(Object.keys(f[21]));let c;for(c=0;c<o.length;c+=1){const g=vn(f,o,c);a[c]?a[c].p(g,u):(a[c]=Cn(g),a[c].c(),a[c].m(l,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}f[23]!==null?i?(i.p(Kt(f),u),u[0]&8388608&&b(i,1)):(i=Nn(Kt(f)),i.c(),b(i,1),i.m(e,null)):i&&(ee(),w(i,1,1,()=>{i=null}),te())},i(f){r||(b(i),r=!0)},o(f){w(i),r=!1},d(f){f&&m(e),Ge(a,f),i&&i.d()}}}function wn(n){let e,t=n[0].currentId,l,s,r,o,a,i=Mn(n);function f(){return n[47](n[52],n[53])}return{c(){e=I("div"),i.c(),l=j(),this.h()},l(u){e=M(u,"DIV",{class:!0});var c=k(e);i.l(c),l=A(c),c.forEach(m),this.h()},h(){var u;d(e,"class",s="snap-center w-full max-w-full m-1 border "+(((u=n[0].messages[n[2]])==null?void 0:u.modelIdx)==n[53]?`bg-gray-50 dark:bg-gray-850 border-gray-100 dark:border-gray-800 border-2 ${n[26]?"min-w-full":"min-w-80"}`:`border-gray-100 dark:border-gray-850 border-dashed ${n[26]?"min-w-full":"min-w-80"}`)+" transition-all p-5 rounded-2xl")},m(u,c){y(u,e,c),i.m(e,null),p(e,l),r=!0,o||(a=ue(e,"click",f),o=!0)},p(u,c){var g;n=u,c[0]&1&&Pe(t,t=n[0].currentId)?(ee(),w(i,1,1,Be),te(),i=Mn(n),i.c(),b(i,1),i.m(e,l)):i.p(n,c),(!r||c[0]&69206021&&s!==(s="snap-center w-full max-w-full m-1 border "+(((g=n[0].messages[n[2]])==null?void 0:g.modelIdx)==n[53]?`bg-gray-50 dark:bg-gray-850 border-gray-100 dark:border-gray-800 border-2 ${n[26]?"min-w-full":"min-w-80"}`:`border-gray-100 dark:border-gray-850 border-dashed ${n[26]?"min-w-full":"min-w-80"}`)+" transition-all p-5 rounded-2xl"))&&d(e,"class",s)},i(u){r||(b(i),r=!0)},o(u){w(i),r=!1},d(u){u&&m(e),i.d(u),o=!1,a()}}}function In(n){let e,t;function l(...a){return n[43](n[53],...a)}function s(){return n[44](n[53])}function r(){return n[45](n[53])}function o(...a){return n[46](n[53],...a)}return e=new il({props:{chatId:n[1],history:n[0],messageId:n[52],selectedModels:n[3],isLastMessage:!0,siblings:n[21][n[53]].messageIds,gotoMessage:l,showPreviousMessage:s,showNextMessage:r,setInputText:n[7],updateChat:n[8],editMessage:n[9],saveMessage:n[10],rateMessage:n[11],deleteMessage:n[14],actionMessage:n[12],submitMessage:n[13],continueResponse:n[15],regenerateResponse:o,addMessages:n[17],readOnly:n[5],editCodeBlock:n[6],topPadding:n[18]}}),{c(){Y(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,i){$(e,a,i),t=!0},p(a,i){n=a;const f={};i[0]&2&&(f.chatId=n[1]),i[0]&1&&(f.history=n[0]),i[0]&6291456&&(f.messageId=n[52]),i[0]&8&&(f.selectedModels=n[3]),i[0]&2097152&&(f.siblings=n[21][n[53]].messageIds),i[0]&2097152&&(f.gotoMessage=l),i[0]&2097152&&(f.showPreviousMessage=s),i[0]&2097152&&(f.showNextMessage=r),i[0]&128&&(f.setInputText=n[7]),i[0]&256&&(f.updateChat=n[8]),i[0]&512&&(f.editMessage=n[9]),i[0]&1024&&(f.saveMessage=n[10]),i[0]&2048&&(f.rateMessage=n[11]),i[0]&16384&&(f.deleteMessage=n[14]),i[0]&4096&&(f.actionMessage=n[12]),i[0]&8192&&(f.submitMessage=n[13]),i[0]&32768&&(f.continueResponse=n[15]),i[0]&6356992&&(f.regenerateResponse=o),i[0]&131072&&(f.addMessages=n[17]),i[0]&32&&(f.readOnly=n[5]),i[0]&64&&(f.editCodeBlock=n[6]),i[0]&262144&&(f.topPadding=n[18]),e.$set(f)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){x(e,a)}}}function Mn(n){let e,t,l=n[19]&&In(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){s[19]?l?(l.p(s,r),r[0]&524288&&b(l,1)):(l=In(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function yn(n){let e,t,l=n[22][n[53]]!==void 0&&n[21][n[53]].messageIds.length>0&&wn(Zt(n));return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){s[22][s[53]]!==void 0&&s[21][s[53]].messageIds.length>0?l?(l.p(Zt(s),r),r[0]&6291456&&b(l,1)):(l=wn(Zt(s)),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function En(n){var c;let e,t,l,s=(n[56]?`${n[56].name}`:(c=n[0].messages[n[52]])==null?void 0:c.model)+"",r,o,a,i,f;function u(){return n[38](n[53],n[52])}return{c(){e=I("button"),t=I("div"),l=I("div"),r=W(s),o=j(),this.h()},l(g){e=M(g,"BUTTON",{class:!0});var h=k(e);t=M(h,"DIV",{class:!0});var _=k(t);l=M(_,"DIV",{class:!0});var E=k(l);r=F(E,s),E.forEach(m),_.forEach(m),o=A(h),h.forEach(m),this.h()},h(){d(l,"class","-translate-y-[1px]"),d(t,"class","flex items-center gap-1.5"),d(e,"class",a="min-w-fit "+(n[23]==n[53]?" dark:border-gray-300 ":" opacity-35 border-transparent")+" pb-1.5 px-2.5 transition border-b-2")},m(g,h){y(g,e,h),p(e,t),p(t,l),p(l,r),p(e,o),i||(f=ue(e,"click",u),i=!0)},p(g,h){var _;n=g,h[0]&39845889&&s!==(s=(n[56]?`${n[56].name}`:(_=n[0].messages[n[52]])==null?void 0:_.model)+"")&&K(r,s),h[0]&10485760&&a!==(a="min-w-fit "+(n[23]==n[53]?" dark:border-gray-300 ":" opacity-35 border-transparent")+" pb-1.5 px-2.5 transition border-b-2")&&d(e,"class",a)},d(g){g&&m(e),i=!1,f()}}}function Cn(n){let e,t=n[22][n[53]]!==void 0&&n[21][n[53]].messageIds.length>0&&En(Qt(n));return{c(){t&&t.c(),e=ie()},l(l){t&&t.l(l),e=ie()},m(l,s){t&&t.m(l,s),y(l,e,s)},p(l,s){l[22][l[53]]!==void 0&&l[21][l[53]].messageIds.length>0?t?t.p(Qt(l),s):(t=En(Qt(l)),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function Nn(n){let e=n[0].currentId,t,l,s=Tn(n);return{c(){s.c(),t=ie()},l(r){s.l(r),t=ie()},m(r,o){s.m(r,o),y(r,t,o),l=!0},p(r,o){o[0]&1&&Pe(e,e=r[0].currentId)?(ee(),w(s,1,1,Be),te(),s=Tn(r),s.c(),b(s,1),s.m(t.parentNode,t)):s.p(r,o)},i(r){l||(b(s),l=!0)},o(r){w(s),l=!1},d(r){r&&m(t),s.d(r)}}}function Dn(n){let e,t;return e=new il({props:{chatId:n[1],history:n[0],messageId:n[52],selectedModels:n[3],isLastMessage:!0,siblings:n[21][n[23]].messageIds,gotoMessage:n[39],showPreviousMessage:n[40],showNextMessage:n[41],setInputText:n[7],updateChat:n[8],editMessage:n[9],saveMessage:n[10],rateMessage:n[11],deleteMessage:n[14],actionMessage:n[12],submitMessage:n[13],continueResponse:n[15],regenerateResponse:n[42],addMessages:n[17],readOnly:n[5],topPadding:n[18]}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&2&&(r.chatId=l[1]),s[0]&1&&(r.history=l[0]),s[0]&14680064&&(r.messageId=l[52]),s[0]&8&&(r.selectedModels=l[3]),s[0]&10485760&&(r.siblings=l[21][l[23]].messageIds),s[0]&8388608&&(r.gotoMessage=l[39]),s[0]&8388608&&(r.showPreviousMessage=l[40]),s[0]&8388608&&(r.showNextMessage=l[41]),s[0]&128&&(r.setInputText=l[7]),s[0]&256&&(r.updateChat=l[8]),s[0]&512&&(r.editMessage=l[9]),s[0]&1024&&(r.saveMessage=l[10]),s[0]&2048&&(r.rateMessage=l[11]),s[0]&16384&&(r.deleteMessage=l[14]),s[0]&4096&&(r.actionMessage=l[12]),s[0]&8192&&(r.submitMessage=l[13]),s[0]&32768&&(r.continueResponse=l[15]),s[0]&14745600&&(r.regenerateResponse=l[42]),s[0]&131072&&(r.addMessages=l[17]),s[0]&32&&(r.readOnly=l[5]),s[0]&262144&&(r.topPadding=l[18]),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Tn(n){let e,t,l=n[19]&&Dn(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){s[19]?l?(l.p(s,r),r[0]&524288&&b(l,1)):(l=Dn(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function Vn(n){let e=!Object.keys(n[21]).find(n[36]),t,l,s=e&&Bn(n);return{c(){s&&s.c(),t=ie()},l(r){s&&s.l(r),t=ie()},m(r,o){s&&s.m(r,o),y(r,t,o),l=!0},p(r,o){o[0]&6291457&&(e=!Object.keys(r[21]).find(r[36])),e?s?(s.p(r,o),o[0]&6291457&&b(s,1)):(s=Bn(r),s.c(),b(s,1),s.m(t.parentNode,t)):s&&(ee(),w(s,1,1,()=>{s=null}),te())},i(r){l||(b(s),l=!0)},o(r){w(s),l=!1},d(r){r&&m(t),s&&s.d(r)}}}function Bn(n){var a,i;let e,t,l,s,r=((i=(a=n[0].messages[n[2]])==null?void 0:a.merged)==null?void 0:i.status)&&Sn(Gt(n)),o=n[4]&&Rn(n);return{c(){e=I("div"),t=I("div"),r&&r.c(),l=j(),o&&o.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);t=M(u,"DIV",{class:!0});var c=k(t);r&&r.l(c),c.forEach(m),l=A(u),o&&o.l(u),u.forEach(m),this.h()},h(){d(t,"class","w-full"),d(e,"class","flex justify-end")},m(f,u){y(f,e,u),p(e,t),r&&r.m(t,null),p(e,l),o&&o.m(e,null),s=!0},p(f,u){var c,g;(g=(c=f[0].messages[f[2]])==null?void 0:c.merged)!=null&&g.status?r?(r.p(Gt(f),u),u[0]&5&&b(r,1)):(r=Sn(Gt(f)),r.c(),b(r,1),r.m(t,null)):r&&(ee(),w(r,1,1,()=>{r=null}),te()),f[4]?o?(o.p(f,u),u[0]&16&&b(o,1)):(o=Rn(f),o.c(),b(o,1),o.m(e,null)):o&&(ee(),w(o,1,1,()=>{o=null}),te())},i(f){s||(b(r),b(o),s=!0)},o(f){w(r),w(o),s=!1},d(f){f&&m(e),r&&r.d(),o&&o.d()}}}function Sn(n){let e,t,l,s,r,o,a;t=new xt({props:{$$slots:{default:[cu]},$$scope:{ctx:n}}});const i=[hu,du],f=[];function u(c,g){var h;return(((h=c[19])==null?void 0:h.content)??"")===""?0:1}return r=u(n),o=f[r]=i[r](n),{c(){e=I("div"),Y(t.$$.fragment),l=j(),s=I("div"),o.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);le(t.$$.fragment,g),l=A(g),s=M(g,"DIV",{class:!0});var h=k(s);o.l(h),h.forEach(m),g.forEach(m),this.h()},h(){d(s,"class","mt-1 markdown-prose w-full min-w-full"),d(e,"class","w-full rounded-xl pl-5 pr-2 py-2 mt-2")},m(c,g){y(c,e,g),$(t,e,null),p(e,l),p(e,s),f[r].m(s,null),a=!0},p(c,g){const h={};g[0]&134217733|g[1]&268435456&&(h.$$scope={dirty:g,ctx:c}),t.$set(h);let _=r;r=u(c),r===_?f[r].p(c,g):(ee(),w(f[_],1,1,()=>{f[_]=null}),te(),o=f[r],o?o.p(c,g):(o=f[r]=i[r](c),o.c()),b(o,1),o.m(s,null))},i(c){a||(b(t.$$.fragment,c),b(o),a=!0)},o(c){w(t.$$.fragment,c),w(o),a=!1},d(c){c&&m(e),x(t),f[r].d()}}}function On(n){let e,t=He(n[19].timestamp*1e3).format("LT")+"",l;return{c(){e=I("span"),l=W(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var r=k(e);l=F(r,t),r.forEach(m),this.h()},h(){d(e,"class","self-center invisible group-hover:visible text-gray-400 text-xs font-medium uppercase ml-0.5 -mt-0.5")},m(s,r){y(s,e,r),p(e,l)},p(s,r){r[0]&5&&t!==(t=He(s[19].timestamp*1e3).format("LT")+"")&&K(l,t)},d(s){s&&m(e)}}}function cu(n){let e=n[27].t("Merged Response")+"",t,l,s,r=n[19].timestamp&&On(n);return{c(){t=W(e),l=j(),r&&r.c(),s=ie()},l(o){t=F(o,e),l=A(o),r&&r.l(o),s=ie()},m(o,a){y(o,t,a),y(o,l,a),r&&r.m(o,a),y(o,s,a)},p(o,a){a[0]&134217728&&e!==(e=o[27].t("Merged Response")+"")&&K(t,e),o[19].timestamp?r?r.p(o,a):(r=On(o),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(o){o&&(m(t),m(l),m(s)),r&&r.d(o)}}}function du(n){let e,t;return e=new Ot({props:{id:"merged",content:n[19].content??""}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&5&&(r.content=l[19].content??""),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function hu(n){let e,t;return e=new el({}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p:Be,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Rn(n){let e,t,l;return t=new Le({props:{content:n[27].t("Merge Responses"),placement:"bottom",$$slots:{default:[mu]},$$scope:{ctx:n}}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{class:!0});var r=k(e);le(t.$$.fragment,r),r.forEach(m),this.h()},h(){d(e,"class","shrink-0 text-gray-600 dark:text-gray-500 mt-1")},m(s,r){y(s,e,r),$(t,e,null),l=!0},p(s,r){const o={};r[0]&134217728&&(o.content=s[27].t("Merge Responses")),r[1]&268435456&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){w(t.$$.fragment,s),l=!1},d(s){s&&m(e),x(t)}}}function mu(n){let e,t,l,s,r;return t=new ou({props:{className:" size-5 "}}),{c(){e=I("button"),Y(t.$$.fragment),this.h()},l(o){e=M(o,"BUTTON",{type:!0,id:!0,class:!0});var a=k(e);le(t.$$.fragment,a),a.forEach(m),this.h()},h(){d(e,"type","button"),d(e,"id","merge-response-button"),d(e,"class","visible p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(o,a){y(o,e,a),$(t,e,null),l=!0,s||(r=ue(e,"click",n[48]),s=!0)},p:Be,i(o){l||(b(t.$$.fragment,o),l=!0)},o(o){w(t.$$.fragment,o),l=!1},d(o){o&&m(e),x(t),s=!1,r()}}}function gu(n){let e,t,l=n[20]&&kn(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){s[20]?l?(l.p(s,r),r[0]&1048576&&b(l,1)):(l=kn(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function _u(n,e,t){let l,s,r,o;Te(n,bt,J=>t(24,l=J)),Te(n,Et,J=>t(25,s=J)),Te(n,Mr,J=>t(26,r=J));const a=Ze("i18n");Te(n,a,J=>t(27,o=J)),He.extend(Cr);let{chatId:i}=e,{history:f}=e,{messageId:u}=e,{selectedModels:c=[]}=e,{isLastMessage:g}=e,{readOnly:h=!1}=e,{editCodeBlock:_=!0}=e,{setInputText:E=()=>{}}=e,{updateChat:v}=e,{editMessage:T}=e,{saveMessage:P}=e,{rateMessage:R}=e,{actionMessage:B}=e,{submitMessage:D}=e,{deleteMessage:C}=e,{continueResponse:N}=e,{regenerateResponse:V}=e,{mergeResponses:O}=e,{addMessages:q}=e,{triggerScroll:Z}=e,{topPadding:se=!1}=e;Bt();let L,U={},H={},ae=null,be=JSON.parse(JSON.stringify(f.messages[u]));const G=async(J,de)=>{t(22,H[J]=Math.max(0,Math.min(de,U[J].messageIds.length-1)),H);let Ie=U[J].messageIds[H[J]],Ve=f.messages[Ie].childrenIds;for(;Ve.length!==0;)Ie=Ve.at(-1),Ve=f.messages[Ie].childrenIds;t(0,f.currentId=Ie,f),await Re(),await v(),Z()},pe=async J=>{t(22,H[J]=Math.max(0,H[J]-1),H);let de=U[J].messageIds[H[J]],Ie=f.messages[de].childrenIds;for(;Ie.length!==0;)de=Ie.at(-1),Ie=f.messages[de].childrenIds;t(0,f.currentId=de,f),await Re(),await v(),Z()},X=async J=>{t(22,H[J]=Math.min(U[J].messageIds.length-1,H[J]+1),H);let de=U[J].messageIds[H[J]],Ie=f.messages[de].childrenIds;for(;Ie.length!==0;)de=Ie.at(-1),Ie=f.messages[de].childrenIds;t(0,f.currentId=de,f),await Re(),await v(),Z()},ce=async()=>{var J;await Re(),t(20,L=f.messages[u].parentId?f.messages[f.messages[u].parentId]:null),t(21,U=L==null?void 0:L.models.reduce((de,Ie,Ve)=>{let We=L==null?void 0:L.childrenIds.map(je=>f.messages[je]).filter(je=>(je==null?void 0:je.modelIdx)===Ve).map(je=>je.id);if(We.length===0){let je=L==null?void 0:L.childrenIds.map(re=>f.messages[re]).filter(re=>(re==null?void 0:re.model)===Ie);je.forEach(re=>{re.modelIdx=Ve}),We=je.map(re=>re.id)}return{...de,[Ve]:{messageIds:We}}},{})),t(22,H=L==null?void 0:L.models.reduce((de,Ie,Ve)=>{const We=U[Ve].messageIds.findIndex(je=>je===u);return We!==-1?{...de,[Ve]:We}:{...de,[Ve]:U[Ve].messageIds.length-1}},{})),t(23,ae=(J=f.messages[u])==null?void 0:J.modelIdx),await Re()},Me=async(J,de)=>{if(u!=J){let Ie=J,Ve=f.messages[Ie].childrenIds;for(;Ve.length!==0;)Ie=Ve.at(-1),Ve=f.messages[Ie].childrenIds;t(0,f.currentId=Ie,f),t(23,ae=de)}},ve=async()=>{const J=Object.keys(U).map(de=>{const{messageIds:Ie}=U[de],Ve=Ie[H[de]];return f.messages[Ve].content});O(u,J,i)};Mt(async()=>{if(await ce(),await Re(),(l==null?void 0:l.scrollOnBranchChange)??!0){const J=document.getElementById(`message-${u}`);J&&J.scrollIntoView({block:"start"})}});const ne=J=>{var Ve;const{messageIds:de}=U[J],Ie=de[H[J]];return!((Ve=f.messages[Ie])!=null&&Ve.done)},oe=(J,de)=>{var Ie;return de.id===((Ie=f.messages[J])==null?void 0:Ie.model)},De=async(J,de)=>{ae!=J&&t(23,ae=J),Me(de,J)},ke=(J,de)=>G(ae,de),Ce=()=>pe(ae),we=()=>X(ae),he=async(J,de=null)=>{V(J,de),await Re(),t(22,H[ae]=U[ae].messageIds.length-1,H)},_e=(J,de,Ie)=>G(J,Ie),S=J=>pe(J),Q=J=>X(J),fe=async(J,de,Ie=null)=>{V(de,Ie),await Re(),t(22,H[J]=U[J].messageIds.length-1,H)},Ee=async(J,de)=>{Me(J,de)},ye=()=>{ve()};return n.$$set=J=>{"chatId"in J&&t(1,i=J.chatId),"history"in J&&t(0,f=J.history),"messageId"in J&&t(2,u=J.messageId),"selectedModels"in J&&t(3,c=J.selectedModels),"isLastMessage"in J&&t(4,g=J.isLastMessage),"readOnly"in J&&t(5,h=J.readOnly),"editCodeBlock"in J&&t(6,_=J.editCodeBlock),"setInputText"in J&&t(7,E=J.setInputText),"updateChat"in J&&t(8,v=J.updateChat),"editMessage"in J&&t(9,T=J.editMessage),"saveMessage"in J&&t(10,P=J.saveMessage),"rateMessage"in J&&t(11,R=J.rateMessage),"actionMessage"in J&&t(12,B=J.actionMessage),"submitMessage"in J&&t(13,D=J.submitMessage),"deleteMessage"in J&&t(14,C=J.deleteMessage),"continueResponse"in J&&t(15,N=J.continueResponse),"regenerateResponse"in J&&t(16,V=J.regenerateResponse),"mergeResponses"in J&&t(34,O=J.mergeResponses),"addMessages"in J&&t(17,q=J.addMessages),"triggerScroll"in J&&t(35,Z=J.triggerScroll),"topPadding"in J&&t(18,se=J.topPadding)},n.$$.update=()=>{n.$$.dirty[0]&524293&&f.messages&&JSON.stringify(be)!==JSON.stringify(f.messages[u])&&t(19,be=JSON.parse(JSON.stringify(f.messages[u])))},[f,i,u,c,g,h,_,E,v,T,P,R,B,D,C,N,V,q,se,be,L,U,H,ae,l,s,r,o,a,G,pe,X,Me,ve,O,Z,ne,oe,De,ke,Ce,we,he,_e,S,Q,fe,Ee,ye]}class pu extends Ae{constructor(e){super(),ze(this,e,_u,gu,Pe,{chatId:1,history:0,messageId:2,selectedModels:3,isLastMessage:4,readOnly:5,editCodeBlock:6,setInputText:7,updateChat:8,editMessage:9,saveMessage:10,rateMessage:11,actionMessage:12,submitMessage:13,deleteMessage:14,continueResponse:15,regenerateResponse:16,mergeResponses:34,addMessages:17,triggerScroll:35,topPadding:18},null,[-1,-1])}}function Pn(n,e,t){const l=n.slice();return l[56]=e[t],l[58]=t,l}function Ln(n,e,t){const l=n.slice();return l[56]=e[t],l}function jn(n){var s,r,o,a;let e,t,l;return t=new Nr({props:{src:n[10].user?((o=(r=(s=n[19].find(n[33]))==null?void 0:s.info)==null?void 0:r.meta)==null?void 0:o.profile_image_url)??`${$e}/user.png`:((a=n[0])==null?void 0:a.profile_image_url)??`${$e}/user.png`,className:"size-8 user-message-profile-image"}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);le(t.$$.fragment,f),f.forEach(m),this.h()},h(){d(e,"class","shrink-0 ltr:mr-3 rtl:ml-3 mt-1")},m(i,f){y(i,e,f),$(t,e,null),l=!0},p(i,f){var c,g,h,_;const u={};f[0]&525313&&(u.src=i[10].user?((h=(g=(c=i[19].find(i[33]))==null?void 0:c.info)==null?void 0:g.meta)==null?void 0:h.profile_image_url)??`${$e}/user.png`:((_=i[0])==null?void 0:_.profile_image_url)??`${$e}/user.png`),t.$set(u)},i(i){l||(b(t.$$.fragment,i),l=!0)},o(i){w(t.$$.fragment,i),l=!1},d(i){i&&m(e),x(t)}}}function bu(n){let e,t,l,s,r;return l=new Le({props:{content:He(n[10].timestamp*1e3).format("LLLL"),$$slots:{default:[ku]},$$scope:{ctx:n}}}),{c(){e=I("div"),t=I("div"),Y(l.$$.fragment),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);t=M(a,"DIV",{class:!0});var i=k(t);le(l.$$.fragment,i),i.forEach(m),a.forEach(m),this.h()},h(){var o;d(t,"class",s="text-[0.65rem] font-medium first-letter:capitalize mb-0.5 "+(((o=n[18])==null?void 0:o.highContrastMode)??!1?"dark:text-gray-100 text-gray-900":"invisible group-hover:visible transition text-gray-400")),d(e,"class","flex justify-end pr-2 text-xs")},m(o,a){y(o,e,a),p(e,t),$(l,t,null),r=!0},p(o,a){var f;const i={};a[0]&1024&&(i.content=He(o[10].timestamp*1e3).format("LLLL")),a[0]&132096|a[1]&1073741824&&(i.$$scope={dirty:a,ctx:o}),l.$set(i),(!r||a[0]&262144&&s!==(s="text-[0.65rem] font-medium first-letter:capitalize mb-0.5 "+(((f=o[18])==null?void 0:f.highContrastMode)??!1?"dark:text-gray-100 text-gray-900":"invisible group-hover:visible transition text-gray-400")))&&d(t,"class",s)},i(o){r||(b(l.$$.fragment,o),r=!0)},o(o){w(l.$$.fragment,o),r=!1},d(o){o&&m(e),x(l)}}}function vu(n){let e,t,l;return t=new xt({props:{$$slots:{default:[Eu]},$$scope:{ctx:n}}}),{c(){e=I("div"),Y(t.$$.fragment)},l(s){e=M(s,"DIV",{});var r=k(e);le(t.$$.fragment,r),r.forEach(m)},m(s,r){y(s,e,r),$(t,e,null),l=!0},p(s,r){const o={};r[0]&1442817|r[1]&1073741824&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){w(t.$$.fragment,s),l=!1},d(s){s&&m(e),x(t)}}}function ku(n){let e,t=n[17].t(It(n[10].timestamp*1e3),{LOCALIZED_TIME:He(n[10].timestamp*1e3).format("LT"),LOCALIZED_DATE:He(n[10].timestamp*1e3).format("L")})+"",l;return{c(){e=I("span"),l=W(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var r=k(e);l=F(r,t),r.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,r){y(s,e,r),p(e,l)},p(s,r){r[0]&132096&&t!==(t=s[17].t(It(s[10].timestamp*1e3),{LOCALIZED_TIME:He(s[10].timestamp*1e3).format("LT"),LOCALIZED_DATE:He(s[10].timestamp*1e3).format("L")})+"")&&K(l,t)},d(s){s&&m(e)}}}function wu(n){let e=n[17].t("You")+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s[0]&131072&&e!==(e=l[17].t("You")+"")&&K(t,e)},d(l){l&&m(t)}}}function Iu(n){let e=n[0].name+"",t;return{c(){t=W(e)},l(l){t=F(l,e)},m(l,s){y(l,t,s)},p(l,s){s[0]&1&&e!==(e=l[0].name+"")&&K(t,e)},d(l){l&&m(t)}}}function Mu(n){var a;let e=n[17].t("You")+"",t,l,s,r=(((a=n[10])==null?void 0:a.user)??"")+"",o;return{c(){t=W(e),l=j(),s=I("span"),o=W(r),this.h()},l(i){t=F(i,e),l=A(i),s=M(i,"SPAN",{class:!0});var f=k(s);o=F(f,r),f.forEach(m),this.h()},h(){d(s,"class","text-gray-500 text-sm font-medium")},m(i,f){y(i,t,f),y(i,l,f),y(i,s,f),p(s,o)},p(i,f){var u;f[0]&131072&&e!==(e=i[17].t("You")+"")&&K(t,e),f[0]&1024&&r!==(r=(((u=i[10])==null?void 0:u.user)??"")+"")&&K(o,r)},d(i){i&&(m(t),m(l),m(s))}}}function An(n){let e,t,l,s;return t=new Le({props:{content:He(n[10].timestamp*1e3).format("LLLL"),$$slots:{default:[yu]},$$scope:{ctx:n}}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);le(t.$$.fragment,o),o.forEach(m),this.h()},h(){var r;d(e,"class",l="self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] "+(((r=n[18])==null?void 0:r.highContrastMode)??!1?"dark:text-gray-900 text-gray-100":"invisible group-hover:visible transition"))},m(r,o){y(r,e,o),$(t,e,null),s=!0},p(r,o){var i;const a={};o[0]&1024&&(a.content=He(r[10].timestamp*1e3).format("LLLL")),o[0]&132096|o[1]&1073741824&&(a.$$scope={dirty:o,ctx:r}),t.$set(a),(!s||o[0]&262144&&l!==(l="self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] "+(((i=r[18])==null?void 0:i.highContrastMode)??!1?"dark:text-gray-900 text-gray-100":"invisible group-hover:visible transition")))&&d(e,"class",l)},i(r){s||(b(t.$$.fragment,r),s=!0)},o(r){w(t.$$.fragment,r),s=!1},d(r){r&&m(e),x(t)}}}function yu(n){let e,t=n[17].t(It(n[10].timestamp*1e3),{LOCALIZED_TIME:He(n[10].timestamp*1e3).format("LT"),LOCALIZED_DATE:He(n[10].timestamp*1e3).format("L")})+"",l;return{c(){e=I("span"),l=W(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var r=k(e);l=F(r,t),r.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,r){y(s,e,r),p(e,l)},p(s,r){r[0]&132096&&t!==(t=s[17].t(It(s[10].timestamp*1e3),{LOCALIZED_TIME:He(s[10].timestamp*1e3).format("LT"),LOCALIZED_DATE:He(s[10].timestamp*1e3).format("L")})+"")&&K(l,t)},d(s){s&&m(e)}}}function Eu(n){let e,t,l;function s(i,f){return i[10].user?Mu:i[18].showUsername||i[20].name!==i[0].name?Iu:wu}let r=s(n),o=r(n),a=n[10].timestamp&&An(n);return{c(){o.c(),e=j(),a&&a.c(),t=ie()},l(i){o.l(i),e=A(i),a&&a.l(i),t=ie()},m(i,f){o.m(i,f),y(i,e,f),a&&a.m(i,f),y(i,t,f),l=!0},p(i,f){r===(r=s(i))&&o?o.p(i,f):(o.d(1),o=r(i),o&&(o.c(),o.m(e.parentNode,e))),i[10].timestamp?a?(a.p(i,f),f[0]&1024&&b(a,1)):(a=An(i),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(ee(),w(a,1,1,()=>{a=null}),te())},i(i){l||(b(a),l=!0)},o(i){w(a),l=!1},d(i){i&&(m(e),m(t)),o.d(i),a&&a.d(i)}}}function zn(n){let e,t,l=n[10].files&&Hn(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){s[10].files?l?(l.p(s,r),r[0]&1024&&b(l,1)):(l=Hn(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function Hn(n){let e,t,l=Ne(n[10].files),s=[];for(let o=0;o<l.length;o+=1)s[o]=Un(Ln(n,l,o));const r=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=I("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","mb-1 w-full flex flex-col justify-end overflow-x-auto gap-1 flex-wrap")},m(o,a){y(o,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,a){if(a[0]&263168){l=Ne(o[10].files);let i;for(i=0;i<l.length;i+=1){const f=Ln(o,l,i);s[i]?(s[i].p(f,a),b(s[i],1)):(s[i]=Un(f),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ee(),i=l.length;i<s.length;i+=1)r(i);te()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function Cu(n){var l;let e,t;return e=new nl({props:{item:n[56],url:n[56].url,name:n[56].name,type:n[56].type,size:(l=n[56])==null?void 0:l.size,small:!0}}),{c(){Y(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){$(e,s,r),t=!0},p(s,r){var a;const o={};r[0]&1024&&(o.item=s[56]),r[0]&1024&&(o.url=s[56].url),r[0]&1024&&(o.name=s[56].name),r[0]&1024&&(o.type=s[56].type),r[0]&1024&&(o.size=(a=s[56])==null?void 0:a.size),e.$set(o)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Nu(n){let e,t;return e=new tl({props:{src:n[56].url,imageClassName:" max-h-96 rounded-lg"}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&1024&&(r.src=l[56].url),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Un(n){let e,t,l,s,r,o;const a=[Nu,Cu],i=[];function f(u,c){return u[56].type==="image"?0:1}return t=f(n),l=i[t]=a[t](n),{c(){e=I("div"),l.c(),s=j(),this.h()},l(u){e=M(u,"DIV",{class:!0});var c=k(e);l.l(c),s=A(c),c.forEach(m),this.h()},h(){var u;d(e,"class",r=((u=n[18])==null?void 0:u.chatBubble)??!0?"self-end":"")},m(u,c){y(u,e,c),i[t].m(e,null),p(e,s),o=!0},p(u,c){var h;let g=t;t=f(u),t===g?i[t].p(u,c):(ee(),w(i[g],1,1,()=>{i[g]=null}),te(),l=i[t],l?l.p(u,c):(l=i[t]=a[t](u),l.c()),b(l,1),l.m(e,s)),(!o||c[0]&262144&&r!==(r=((h=u[18])==null?void 0:h.chatBubble)??!0?"self-end":""))&&d(e,"class",r)},i(u){o||(b(l),o=!0)},o(u){w(l),o=!1},d(u){u&&m(e),i[t].d()}}}function Du(n){let e,t,l,s,r,o,a=n[10].content&&qn(n);return{c(){e=I("div"),t=I("div"),l=I("div"),a&&a.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);t=M(f,"DIV",{class:!0});var u=k(t);l=M(u,"DIV",{class:!0});var c=k(l);a&&a.l(c),c.forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var i,f;d(l,"class",s="rounded-3xl "+(((i=n[18])==null?void 0:i.chatBubble)??!0?`max-w-[90%] px-4 py-1.5  bg-gray-50 dark:bg-gray-850 ${n[10].files?"rounded-tr-lg":""}`:" w-full")),d(t,"class",r="flex "+(((f=n[18])==null?void 0:f.chatBubble)??!0?"justify-end pb-1":"w-full")),d(e,"class","w-full")},m(i,f){y(i,e,f),p(e,t),p(t,l),a&&a.m(l,null),o=!0},p(i,f){var u,c;i[10].content?a?(a.p(i,f),f[0]&1024&&b(a,1)):(a=qn(i),a.c(),b(a,1),a.m(l,null)):a&&(ee(),w(a,1,1,()=>{a=null}),te()),(!o||f[0]&263168&&s!==(s="rounded-3xl "+(((u=i[18])==null?void 0:u.chatBubble)??!0?`max-w-[90%] px-4 py-1.5  bg-gray-50 dark:bg-gray-850 ${i[10].files?"rounded-tr-lg":""}`:" w-full")))&&d(l,"class",s),(!o||f[0]&262144&&r!==(r="flex "+(((c=i[18])==null?void 0:c.chatBubble)??!0?"justify-end pb-1":"w-full")))&&d(t,"class",r)},i(i){o||(b(a),o=!0)},o(i){w(a),o=!1},d(i){i&&m(e),a&&a.d()}}}function Tu(n){let e,t,l,s,r,o,a,i,f,u=n[17].t("Save")+"",c,g,h,_,E=n[17].t("Cancel")+"",v,T,P,R=n[17].t("Send")+"",B,D,C,N,V=(n[15]??[]).length>0&&Wn(n);return{c(){e=I("div"),V&&V.c(),t=j(),l=I("div"),s=I("textarea"),o=j(),a=I("div"),i=I("div"),f=I("button"),c=W(u),g=j(),h=I("div"),_=I("button"),v=W(E),T=j(),P=I("button"),B=W(R),this.h()},l(O){e=M(O,"DIV",{class:!0});var q=k(e);V&&V.l(q),t=A(q),l=M(q,"DIV",{class:!0});var Z=k(l);s=M(Z,"TEXTAREA",{id:!0,class:!0}),k(s).forEach(m),Z.forEach(m),o=A(q),a=M(q,"DIV",{class:!0});var se=k(a);i=M(se,"DIV",{});var L=k(i);f=M(L,"BUTTON",{id:!0,class:!0});var U=k(f);c=F(U,u),U.forEach(m),L.forEach(m),g=A(se),h=M(se,"DIV",{class:!0});var H=k(h);_=M(H,"BUTTON",{id:!0,class:!0});var ae=k(_);v=F(ae,E),ae.forEach(m),T=A(H),P=M(H,"BUTTON",{id:!0,class:!0});var be=k(P);B=F(be,R),be.forEach(m),H.forEach(m),se.forEach(m),q.forEach(m),this.h()},h(){d(s,"id",r="message-edit-"+n[10].id),d(s,"class","bg-transparent outline-hidden w-full resize-none"),d(l,"class","max-h-96 overflow-auto"),d(f,"id","save-edit-message-button"),d(f,"class","px-3.5 py-1.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl"),d(_,"id","close-edit-message-button"),d(_,"class","px-3.5 py-1.5 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl"),d(P,"id","confirm-edit-message-button"),d(P,"class","px-3.5 py-1.5 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl"),d(h,"class","flex space-x-1.5"),d(a,"class","mt-2 mb-1 flex justify-between text-sm font-medium"),d(e,"class","w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 mb-2")},m(O,q){y(O,e,q),V&&V.m(e,null),p(e,t),p(e,l),p(l,s),n[37](s),ot(s,n[14]),p(e,o),p(e,a),p(a,i),p(i,f),p(f,c),p(a,g),p(a,h),p(h,_),p(_,v),p(h,T),p(h,P),p(P,B),D=!0,C||(N=[ue(s,"input",n[38]),ue(s,"input",Hu),ue(s,"keydown",n[39]),ue(f,"click",n[40]),ue(_,"click",n[41]),ue(P,"click",n[42])],C=!0)},p(O,q){(O[15]??[]).length>0?V?(V.p(O,q),q[0]&32768&&b(V,1)):(V=Wn(O),V.c(),b(V,1),V.m(e,t)):V&&(ee(),w(V,1,1,()=>{V=null}),te()),(!D||q[0]&1024&&r!==(r="message-edit-"+O[10].id))&&d(s,"id",r),q[0]&16384&&ot(s,O[14]),(!D||q[0]&131072)&&u!==(u=O[17].t("Save")+"")&&K(c,u),(!D||q[0]&131072)&&E!==(E=O[17].t("Cancel")+"")&&K(v,E),(!D||q[0]&131072)&&R!==(R=O[17].t("Send")+"")&&K(B,R)},i(O){D||(b(V),D=!0)},o(O){w(V),D=!1},d(O){O&&m(e),V&&V.d(),n[37](null),C=!1,rt(N)}}}function qn(n){let e,t;return e=new Ot({props:{id:`${n[1]}-${n[10].id}`,content:n[10].content,editCodeBlock:n[8],topPadding:n[9]}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&1026&&(r.id=`${l[1]}-${l[10].id}`),s[0]&1024&&(r.content=l[10].content),s[0]&256&&(r.editCodeBlock=l[8]),s[0]&512&&(r.topPadding=l[9]),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Wn(n){let e,t,l=Ne(n[15]),s=[];for(let o=0;o<l.length;o+=1)s[o]=Fn(Pn(n,l,o));const r=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=I("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","flex items-center flex-wrap gap-2 -mx-2 mb-1")},m(o,a){y(o,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,a){if(a[0]&294912){l=Ne(o[15]);let i;for(i=0;i<l.length;i+=1){const f=Pn(o,l,i);s[i]?(s[i].p(f,a),b(s[i],1)):(s[i]=Fn(f),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ee(),i=l.length;i<s.length;i+=1)r(i);te()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function Vu(n){var r;let e,t;function l(){return n[35](n[58])}function s(){return n[36](n[56])}return e=new nl({props:{item:n[56],name:n[56].name,type:n[56].type,size:(r=n[56])==null?void 0:r.size,loading:n[56].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",l),e.$on("click",s),{c(){Y(e.$$.fragment)},l(o){le(e.$$.fragment,o)},m(o,a){$(e,o,a),t=!0},p(o,a){var f;n=o;const i={};a[0]&32768&&(i.item=n[56]),a[0]&32768&&(i.name=n[56].name),a[0]&32768&&(i.type=n[56].type),a[0]&32768&&(i.size=(f=n[56])==null?void 0:f.size),a[0]&32768&&(i.loading=n[56].status==="uploading"),e.$set(i)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){x(e,o)}}}function Bu(n){let e,t,l,s,r,o,a,i,f,u,c,g,h;l=new tl({props:{src:n[56].url,alt:"input",imageClassName:" size-14 rounded-xl object-cover"}});function _(){return n[34](n[58])}return{c(){e=I("div"),t=I("div"),Y(l.$$.fragment),s=j(),r=I("div"),o=I("button"),a=me("svg"),i=me("path"),u=j(),this.h()},l(E){e=M(E,"DIV",{class:!0});var v=k(e);t=M(v,"DIV",{class:!0});var T=k(t);le(l.$$.fragment,T),T.forEach(m),s=A(v),r=M(v,"DIV",{class:!0});var P=k(r);o=M(P,"BUTTON",{class:!0,type:!0});var R=k(o);a=ge(R,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var B=k(a);i=ge(B,"path",{d:!0}),k(i).forEach(m),B.forEach(m),R.forEach(m),P.forEach(m),u=A(v),v.forEach(m),this.h()},h(){var E;d(t,"class","relative flex items-center"),d(i,"d","M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"),d(a,"xmlns","http://www.w3.org/2000/svg"),d(a,"viewBox","0 0 20 20"),d(a,"fill","currentColor"),d(a,"class","size-4"),d(o,"class",f="bg-white text-black border border-white rounded-full "+(((E=n[18])==null?void 0:E.highContrastMode)??!1?"":"group-hover:visible invisible transition")),d(o,"type","button"),d(r,"class","absolute -top-1 -right-1"),d(e,"class","relative group")},m(E,v){y(E,e,v),p(e,t),$(l,t,null),p(e,s),p(e,r),p(r,o),p(o,a),p(a,i),p(e,u),c=!0,g||(h=ue(o,"click",_),g=!0)},p(E,v){var P;n=E;const T={};v[0]&32768&&(T.src=n[56].url),l.$set(T),(!c||v[0]&262144&&f!==(f="bg-white text-black border border-white rounded-full "+(((P=n[18])==null?void 0:P.highContrastMode)??!1?"":"group-hover:visible invisible transition")))&&d(o,"class",f)},i(E){c||(b(l.$$.fragment,E),c=!0)},o(E){w(l.$$.fragment,E),c=!1},d(E){E&&m(e),x(l),g=!1,h()}}}function Fn(n){let e,t,l,s;const r=[Bu,Vu],o=[];function a(i,f){return i[56].type==="image"?0:1}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),l=ie()},l(i){t.l(i),l=ie()},m(i,f){o[e].m(i,f),y(i,l,f),s=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ee(),w(o[u],1,1,()=>{o[u]=null}),te(),t=o[e],t?t.p(i,f):(t=o[e]=r[e](i),t.c()),b(t,1),t.m(l.parentNode,l))},i(i){s||(b(t),s=!0)},o(i){w(t),s=!1},d(i){i&&m(l),o[e].d(i)}}}function Jn(n){var h,_,E,v,T,P,R;let e,t,l,s,r,o,a,i=!(((h=n[18])==null?void 0:h.chatBubble)??!0)&&Gn(n),f=!n[7]&&Kn(n),u=((_=n[10])==null?void 0:_.content)&&Qn(n),c=(((E=n[20])==null?void 0:E.role)==="admin"||(((P=(T=(v=n[20])==null?void 0:v.permissions)==null?void 0:T.chat)==null?void 0:P.delete_message)??!1))&&Xn(n),g=(((R=n[18])==null?void 0:R.chatBubble)??!0)&&$n(n);return{c(){e=I("div"),i&&i.c(),t=j(),f&&f.c(),l=j(),u&&u.c(),s=j(),c&&c.c(),r=j(),g&&g.c(),this.h()},l(B){e=M(B,"DIV",{class:!0});var D=k(e);i&&i.l(D),t=A(D),f&&f.l(D),l=A(D),u&&u.l(D),s=A(D),c&&c.l(D),r=A(D),g&&g.l(D),D.forEach(m),this.h()},h(){var B;d(e,"class",o="flex "+(((B=n[18])==null?void 0:B.chatBubble)??!0?"justify-end":"")+" text-gray-600 dark:text-gray-500")},m(B,D){y(B,e,D),i&&i.m(e,null),p(e,t),f&&f.m(e,null),p(e,l),u&&u.m(e,null),p(e,s),c&&c.m(e,null),p(e,r),g&&g.m(e,null),a=!0},p(B,D){var C,N,V,O,q,Z,se,L;((C=B[18])==null?void 0:C.chatBubble)??!0?i&&(i.d(1),i=null):i?i.p(B,D):(i=Gn(B),i.c(),i.m(e,t)),B[7]?f&&(ee(),w(f,1,1,()=>{f=null}),te()):f?(f.p(B,D),D[0]&128&&b(f,1)):(f=Kn(B),f.c(),b(f,1),f.m(e,l)),(N=B[10])!=null&&N.content?u?(u.p(B,D),D[0]&1024&&b(u,1)):(u=Qn(B),u.c(),b(u,1),u.m(e,s)):u&&(ee(),w(u,1,1,()=>{u=null}),te()),((V=B[20])==null?void 0:V.role)==="admin"||(((Z=(q=(O=B[20])==null?void 0:O.permissions)==null?void 0:q.chat)==null?void 0:Z.delete_message)??!1)?c?(c.p(B,D),D[0]&1048576&&b(c,1)):(c=Xn(B),c.c(),b(c,1),c.m(e,r)):c&&(ee(),w(c,1,1,()=>{c=null}),te()),((se=B[18])==null?void 0:se.chatBubble)??!0?g?g.p(B,D):(g=$n(B),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!a||D[0]&262144&&o!==(o="flex "+(((L=B[18])==null?void 0:L.chatBubble)??!0?"justify-end":"")+" text-gray-600 dark:text-gray-500"))&&d(e,"class",o)},i(B){a||(b(f),b(u),b(c),a=!0)},o(B){w(f),w(u),w(c),a=!1},d(B){B&&m(e),i&&i.d(),f&&f.d(),u&&u.d(),c&&c.d(),g&&g.d()}}}function Gn(n){let e,t=n[2].length>1&&Zn(n);return{c(){t&&t.c(),e=ie()},l(l){t&&t.l(l),e=ie()},m(l,s){t&&t.m(l,s),y(l,e,s)},p(l,s){l[2].length>1?t?t.p(l,s):(t=Zn(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function Zn(n){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path></svg>',s,r,o,a='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg>',i,f;function u(h,_){return h[12]?Ou:Su}let c=u(n),g=c(n);return{c(){e=I("div"),t=I("button"),t.innerHTML=l,s=j(),g.c(),r=j(),o=I("button"),o.innerHTML=a,this.h()},l(h){e=M(h,"DIV",{class:!0,dir:!0});var _=k(e);t=M(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-15wwmqh"&&(t.innerHTML=l),s=A(_),g.l(_),r=A(_),o=M(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ht(o)!=="svelte-1jzf6aa"&&(o.innerHTML=a),_.forEach(m),this.h()},h(){d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(o,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(e,"class","flex self-center"),d(e,"dir","ltr")},m(h,_){y(h,e,_),p(e,t),p(e,s),g.m(e,null),p(e,r),p(e,o),i||(f=[ue(t,"click",n[43]),ue(o,"click",n[47])],i=!0)},p(h,_){c===(c=u(h))&&g?g.p(h,_):(g.d(1),g=c(h),g&&(g.c(),g.m(e,r)))},d(h){h&&m(e),g.d(),i=!1,rt(f)}}}function Su(n){let e,t=n[2].indexOf(n[10].id)+1+"",l,s,r=n[2].length+"",o,a,i;return{c(){e=I("div"),l=W(t),s=W("/"),o=W(r),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l=F(u,t),s=F(u,"/"),o=F(u,r),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){y(f,e,u),p(e,l),p(e,s),p(e,o),a||(i=ue(e,"dblclick",n[46]),a=!0)},p(f,u){u[0]&1028&&t!==(t=f[2].indexOf(f[10].id)+1+"")&&K(l,t),u[0]&4&&r!==(r=f[2].length+"")&&K(o,r)},d(f){f&&m(e),a=!1,i()}}}function Ou(n){let e,t,l,s,r,o,a=n[2].length+"",i,f,u;return{c(){e=I("div"),t=I("input"),o=W("/"),i=W(a),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);t=M(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),o=F(g,"/"),i=F(g,a),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+n[10].id),d(t,"type","number"),t.value=s=n[2].indexOf(n[10].id)+1,d(t,"min","1"),d(t,"max",r=n[2].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){y(c,e,g),p(e,t),p(e,o),p(e,i),f||(u=[ue(t,"focus",Uu),ue(t,"blur",n[44]),ue(t,"keydown",n[45])],f=!0)},p(c,g){g[0]&1024&&l!==(l="message-index-input-"+c[10].id)&&d(t,"id",l),g[0]&1028&&s!==(s=c[2].indexOf(c[10].id)+1)&&t.value!==s&&(t.value=s),g[0]&4&&r!==(r=c[2].length)&&d(t,"max",r),g[0]&4&&a!==(a=c[2].length+"")&&K(i,a)},d(c){c&&m(e),f=!1,rt(u)}}}function Kn(n){let e,t;return e=new Le({props:{content:n[17].t("Edit"),placement:"bottom",$$slots:{default:[Ru]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&131072&&(r.content=l[17].t("Edit")),s[0]&262144|s[1]&1073741824&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Ru(n){let e,t,l,s,r,o;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(a){e=M(a,"BUTTON",{class:!0});var i=k(e);t=ge(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var f=k(t);l=ge(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),f.forEach(m),i.forEach(m),this.h()},h(){var a;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"class",s=(((a=n[18])==null?void 0:a.highContrastMode)??!1?"":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button")},m(a,i){y(a,e,i),p(e,t),p(t,l),r||(o=ue(e,"click",n[48]),r=!0)},p(a,i){var f;i[0]&262144&&s!==(s=(((f=a[18])==null?void 0:f.highContrastMode)??!1?"":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button")&&d(e,"class",s)},d(a){a&&m(e),r=!1,o()}}}function Qn(n){let e,t;return e=new Le({props:{content:n[17].t("Copy"),placement:"bottom",$$slots:{default:[Pu]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&131072&&(r.content=l[17].t("Copy")),s[0]&263168|s[1]&1073741824&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Pu(n){let e,t,l,s,r,o;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(a){e=M(a,"BUTTON",{class:!0});var i=k(e);t=ge(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var f=k(t);l=ge(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),f.forEach(m),i.forEach(m),this.h()},h(){var a;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"class",s=(((a=n[18])==null?void 0:a.highContrastMode)??!1?"":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(a,i){y(a,e,i),p(e,t),p(t,l),r||(o=ue(e,"click",n[49]),r=!0)},p(a,i){var f;i[0]&262144&&s!==(s=(((f=a[18])==null?void 0:f.highContrastMode)??!1?"":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",s)},d(a){a&&m(e),r=!1,o()}}}function Xn(n){let e,t,l=!n[7]&&(!n[6]||n[2].length>1)&&Yn(n);return{c(){l&&l.c(),e=ie()},l(s){l&&l.l(s),e=ie()},m(s,r){l&&l.m(s,r),y(s,e,r),t=!0},p(s,r){!s[7]&&(!s[6]||s[2].length>1)?l?(l.p(s,r),r[0]&196&&b(l,1)):(l=Yn(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),w(l,1,1,()=>{l=null}),te())},i(s){t||(b(l),t=!0)},o(s){w(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function Yn(n){let e,t;return e=new Le({props:{content:n[17].t("Delete"),placement:"bottom",$$slots:{default:[Lu]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&131072&&(r.content=l[17].t("Delete")),s[0]&264192|s[1]&1073741824&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function Lu(n){let e,t,l,s,r,o;return{c(){e=I("button"),t=me("svg"),l=me("path"),this.h()},l(a){e=M(a,"BUTTON",{class:!0});var i=k(e);t=ge(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var f=k(t);l=ge(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),f.forEach(m),i.forEach(m),this.h()},h(){var a;d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"class",s=(((a=n[18])==null?void 0:a.highContrastMode)??!1?"":"invisible group-hover:visible")+" p-1 rounded-sm dark:hover:text-white hover:text-black transition")},m(a,i){y(a,e,i),p(e,t),p(t,l),r||(o=ue(e,"click",n[50]),r=!0)},p(a,i){var f;i[0]&262144&&s!==(s=(((f=a[18])==null?void 0:f.highContrastMode)??!1?"":"invisible group-hover:visible")+" p-1 rounded-sm dark:hover:text-white hover:text-black transition")&&d(e,"class",s)},d(a){a&&m(e),r=!1,o()}}}function $n(n){let e,t=n[2].length>1&&xn(n);return{c(){t&&t.c(),e=ie()},l(l){t&&t.l(l),e=ie()},m(l,s){t&&t.m(l,s),y(l,e,s)},p(l,s){l[2].length>1?t?t.p(l,s):(t=xn(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function xn(n){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path></svg>',s,r,o,a='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg>',i,f;function u(h,_){return h[12]?Au:ju}let c=u(n),g=c(n);return{c(){e=I("div"),t=I("button"),t.innerHTML=l,s=j(),g.c(),r=j(),o=I("button"),o.innerHTML=a,this.h()},l(h){e=M(h,"DIV",{class:!0,dir:!0});var _=k(e);t=M(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-15wwmqh"&&(t.innerHTML=l),s=A(_),g.l(_),r=A(_),o=M(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ht(o)!=="svelte-1jzf6aa"&&(o.innerHTML=a),_.forEach(m),this.h()},h(){d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(o,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(e,"class","flex self-center"),d(e,"dir","ltr")},m(h,_){y(h,e,_),p(e,t),p(e,s),g.m(e,null),p(e,r),p(e,o),i||(f=[ue(t,"click",n[51]),ue(o,"click",n[55])],i=!0)},p(h,_){c===(c=u(h))&&g?g.p(h,_):(g.d(1),g=c(h),g&&(g.c(),g.m(e,r)))},d(h){h&&m(e),g.d(),i=!1,rt(f)}}}function ju(n){let e,t=n[2].indexOf(n[10].id)+1+"",l,s,r=n[2].length+"",o,a,i;return{c(){e=I("div"),l=W(t),s=W("/"),o=W(r),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l=F(u,t),s=F(u,"/"),o=F(u,r),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){y(f,e,u),p(e,l),p(e,s),p(e,o),a||(i=ue(e,"dblclick",n[54]),a=!0)},p(f,u){u[0]&1028&&t!==(t=f[2].indexOf(f[10].id)+1+"")&&K(l,t),u[0]&4&&r!==(r=f[2].length+"")&&K(o,r)},d(f){f&&m(e),a=!1,i()}}}function Au(n){let e,t,l,s,r,o,a=n[2].length+"",i,f,u;return{c(){e=I("div"),t=I("input"),o=W("/"),i=W(a),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);t=M(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),o=F(g,"/"),i=F(g,a),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+n[10].id),d(t,"type","number"),t.value=s=n[2].indexOf(n[10].id)+1,d(t,"min","1"),d(t,"max",r=n[2].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){y(c,e,g),p(e,t),p(e,o),p(e,i),f||(u=[ue(t,"focus",qu),ue(t,"blur",n[52]),ue(t,"keydown",n[53])],f=!0)},p(c,g){g[0]&1024&&l!==(l="message-index-input-"+c[10].id)&&d(t,"id",l),g[0]&1028&&s!==(s=c[2].indexOf(c[10].id)+1)&&t.value!==s&&(t.value=s),g[0]&4&&r!==(r=c[2].length)&&d(t,"max",r),g[0]&4&&a!==(a=c[2].length+"")&&K(i,a)},d(c){c&&m(e),f=!1,rt(u)}}}function zu(n){var U;let e,t,l,s,r,o,a,i,f,u,c,g,h,_,E,v,T,P;function R(H){n[31](H)}let B={title:n[17].t("Delete message?")};n[11]!==void 0&&(B.show=n[11]),e=new Dr({props:B}),Je.push(()=>xe(e,"show",R)),e.$on("confirm",n[32]);let D=!(((U=n[18])==null?void 0:U.chatBubble)??!0)&&jn(n);const C=[vu,bu],N=[];function V(H,ae){var be;return((be=H[18])==null?void 0:be.chatBubble)??!0?H[10].timestamp?1:-1:0}~(a=V(n))&&(i=N[a]=C[a](n));let O=n[13]!==!0&&zn(n);const q=[Tu,Du],Z=[];function se(H,ae){return H[13]===!0?0:H[10].content!==""?1:-1}~(g=se(n))&&(h=Z[g]=q[g](n));let L=n[13]!==!0&&Jn(n);return{c(){Y(e.$$.fragment),l=j(),s=I("div"),D&&D.c(),r=j(),o=I("div"),i&&i.c(),f=j(),u=I("div"),O&&O.c(),c=j(),h&&h.c(),_=j(),L&&L.c(),this.h()},l(H){le(e.$$.fragment,H),l=A(H),s=M(H,"DIV",{class:!0,dir:!0,id:!0});var ae=k(s);D&&D.l(ae),r=A(ae),o=M(ae,"DIV",{class:!0});var be=k(o);i&&i.l(be),f=A(be),u=M(be,"DIV",{class:!0});var G=k(u);O&&O.l(G),c=A(G),h&&h.l(G),_=A(G),L&&L.l(G),G.forEach(m),be.forEach(m),ae.forEach(m),this.h()},h(){d(u,"class",E="chat-"+n[10].role+" w-full min-w-full markdown-prose"),d(o,"class","flex-auto w-0 max-w-full pl-1"),d(s,"class","flex w-full user-message group"),d(s,"dir",v=n[18].chatDirection),d(s,"id",T="message-"+n[10].id)},m(H,ae){$(e,H,ae),y(H,l,ae),y(H,s,ae),D&&D.m(s,null),p(s,r),p(s,o),~a&&N[a].m(o,null),p(o,f),p(o,u),O&&O.m(u,null),p(u,c),~g&&Z[g].m(u,null),p(u,_),L&&L.m(u,null),P=!0},p(H,ae){var X;const be={};ae[0]&131072&&(be.title=H[17].t("Delete message?")),!t&&ae[0]&2048&&(t=!0,be.show=H[11],et(()=>t=!1)),e.$set(be),((X=H[18])==null?void 0:X.chatBubble)??!0?D&&(ee(),w(D,1,1,()=>{D=null}),te()):D?(D.p(H,ae),ae[0]&262144&&b(D,1)):(D=jn(H),D.c(),b(D,1),D.m(s,r));let G=a;a=V(H),a===G?~a&&N[a].p(H,ae):(i&&(ee(),w(N[G],1,1,()=>{N[G]=null}),te()),~a?(i=N[a],i?i.p(H,ae):(i=N[a]=C[a](H),i.c()),b(i,1),i.m(o,f)):i=null),H[13]!==!0?O?(O.p(H,ae),ae[0]&8192&&b(O,1)):(O=zn(H),O.c(),b(O,1),O.m(u,c)):O&&(ee(),w(O,1,1,()=>{O=null}),te());let pe=g;g=se(H),g===pe?~g&&Z[g].p(H,ae):(h&&(ee(),w(Z[pe],1,1,()=>{Z[pe]=null}),te()),~g?(h=Z[g],h?h.p(H,ae):(h=Z[g]=q[g](H),h.c()),b(h,1),h.m(u,_)):h=null),H[13]!==!0?L?(L.p(H,ae),ae[0]&8192&&b(L,1)):(L=Jn(H),L.c(),b(L,1),L.m(u,null)):L&&(ee(),w(L,1,1,()=>{L=null}),te()),(!P||ae[0]&1024&&E!==(E="chat-"+H[10].role+" w-full min-w-full markdown-prose"))&&d(u,"class",E),(!P||ae[0]&262144&&v!==(v=H[18].chatDirection))&&d(s,"dir",v),(!P||ae[0]&1024&&T!==(T="message-"+H[10].id))&&d(s,"id",T)},i(H){P||(b(e.$$.fragment,H),b(D),b(i),b(O),b(h),b(L),P=!0)},o(H){w(e.$$.fragment,H),w(D),w(i),w(O),w(h),w(L),P=!1},d(H){H&&(m(l),m(s)),x(e,H),D&&D.d(),~a&&N[a].d(),O&&O.d(),~g&&Z[g].d(),L&&L.d()}}}const Hu=n=>{n.target.style.height="",n.target.style.height=`${n.target.scrollHeight}px`},Uu=n=>{n.target.select()},qu=n=>{n.target.select()};function Wu(n,e,t){let l,s,r,o;Te(n,bt,re=>t(18,s=re)),Te(n,Et,re=>t(19,r=re)),Te(n,qt,re=>t(20,o=re));const a=Ze("i18n");Te(n,a,re=>t(17,l=re)),He.extend(Cr);let{user:i}=e,{chatId:f}=e,{history:u}=e,{messageId:c}=e,{siblings:g}=e,{gotoMessage:h}=e,{showPreviousMessage:_}=e,{showNextMessage:E}=e,{editMessage:v}=e,{deleteMessage:T}=e,{isFirstMessage:P}=e,{readOnly:R}=e,{editCodeBlock:B=!0}=e,{topPadding:D=!1}=e,C=!1,N=!1,V=!1,O="",q=[],Z,se=JSON.parse(JSON.stringify(u.messages[c]));const L=async re=>{await Er(re)&&Fe.success(l.t("Copying to clipboard was successful!"))},U=async()=>{t(13,V=!0),t(14,O=(se==null?void 0:se.content)??""),t(15,q=se.files),await Re(),Z&&(t(16,Z.style.height="",Z),t(16,Z.style.height=`${Z.scrollHeight}px`,Z),Z==null||Z.focus())},H=async(re=!0)=>{if(!O&&(q??[]).length===0){Fe.error(l.t("Please enter a message or attach a file."));return}v(se.id,{content:O,files:q},re),t(13,V=!1),t(14,O=""),t(15,q=[])},ae=()=>{t(13,V=!1),t(14,O=""),t(15,q=[])},be=async()=>{T(se.id)};Mt(()=>{});function G(re){C=re,t(11,C)}const pe=()=>{be()},X=re=>re.id===se.user,ce=re=>{q.splice(re,1),t(15,q)},Me=async re=>{q.splice(re,1),t(15,q)},ve=re=>{};function ne(re){Je[re?"unshift":"push"](()=>{Z=re,t(16,Z)})}function oe(){O=this.value,t(14,O)}const De=re=>{var Xe,lt;re.key==="Escape"&&((Xe=document.getElementById("close-edit-message-button"))==null||Xe.click());const tt=re.metaKey||re.ctrlKey,Qe=re.key==="Enter";tt&&Qe&&((lt=document.getElementById("confirm-edit-message-button"))==null||lt.click())},ke=()=>{H(!1)},Ce=()=>{ae()},we=()=>{H()},he=()=>{_(se)},_e=re=>{h(se,re.target.value-1),t(12,N=!1)},S=re=>{re.key==="Enter"&&(h(se,re.target.value-1),t(12,N=!1))},Q=async()=>{t(12,N=!0),await Re();const re=document.getElementById(`message-index-input-${se.id}`);re&&(re.focus(),re.select())},fe=()=>{E(se)},Ee=()=>{U()},ye=()=>{L(se.content)},J=()=>{t(11,C=!0)},de=()=>{_(se)},Ie=re=>{h(se,re.target.value-1),t(12,N=!1)},Ve=re=>{re.key==="Enter"&&(h(se,re.target.value-1),t(12,N=!1))},We=async()=>{t(12,N=!0),await Re();const re=document.getElementById(`message-index-input-${se.id}`);re&&(re.focus(),re.select())},je=()=>{E(se)};return n.$$set=re=>{"user"in re&&t(0,i=re.user),"chatId"in re&&t(1,f=re.chatId),"history"in re&&t(27,u=re.history),"messageId"in re&&t(28,c=re.messageId),"siblings"in re&&t(2,g=re.siblings),"gotoMessage"in re&&t(3,h=re.gotoMessage),"showPreviousMessage"in re&&t(4,_=re.showPreviousMessage),"showNextMessage"in re&&t(5,E=re.showNextMessage),"editMessage"in re&&t(29,v=re.editMessage),"deleteMessage"in re&&t(30,T=re.deleteMessage),"isFirstMessage"in re&&t(6,P=re.isFirstMessage),"readOnly"in re&&t(7,R=re.readOnly),"editCodeBlock"in re&&t(8,B=re.editCodeBlock),"topPadding"in re&&t(9,D=re.topPadding)},n.$$.update=()=>{n.$$.dirty[0]&402654208&&u.messages&&JSON.stringify(se)!==JSON.stringify(u.messages[c])&&t(10,se=JSON.parse(JSON.stringify(u.messages[c])))},[i,f,g,h,_,E,P,R,B,D,se,C,N,V,O,q,Z,l,s,r,o,a,L,U,H,ae,be,u,c,v,T,G,pe,X,ce,Me,ve,ne,oe,De,ke,Ce,we,he,_e,S,Q,fe,Ee,ye,J,de,Ie,Ve,We,je]}class Fu extends Ae{constructor(e){super(),ze(this,e,Wu,zu,Pe,{user:0,chatId:1,history:27,messageId:28,siblings:2,gotoMessage:3,showPreviousMessage:4,showNextMessage:5,editMessage:29,deleteMessage:30,isFirstMessage:6,readOnly:7,editCodeBlock:8,topPadding:9},null,[-1,-1])}}function er(n){let e,t,l,s;const r=[Zu,Gu,Ju],o=[];function a(i,f){var u,c;return i[0].messages[i[4]].role==="user"?0:(((c=(u=i[0].messages[i[0].messages[i[4]].parentId])==null?void 0:u.models)==null?void 0:c.length)??1)===1?1:2}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),l=ie()},l(i){t.l(i),l=ie()},m(i,f){o[e].m(i,f),y(i,l,f),s=!0},p(i,f){let u=e;e=a(i),e===u?o[e].p(i,f):(ee(),w(o[u],1,1,()=>{o[u]=null}),te(),t=o[e],t?t.p(i,f):(t=o[e]=r[e](i),t.c()),b(t,1),t.m(l.parentNode,l))},i(i){s||(b(t),s=!0)},o(i){w(t),s=!1},d(i){i&&m(l),o[e].d(i)}}}function Ju(n){var o;let e,t,l;function s(a){n[26](a)}let r={chatId:n[1],messageId:n[4],selectedModels:n[2],isLastMessage:n[4]===((o=n[0])==null?void 0:o.currentId),setInputText:n[6],updateChat:n[10],editMessage:n[11],saveMessage:n[12],rateMessage:n[14],actionMessage:n[15],submitMessage:n[16],deleteMessage:n[13],continueResponse:n[18],regenerateResponse:n[17],mergeResponses:n[19],triggerScroll:n[21],addMessages:n[20],readOnly:n[22],editCodeBlock:n[23],topPadding:n[24]};return n[0]!==void 0&&(r.history=n[0]),e=new pu({props:r}),Je.push(()=>xe(e,"history",s)),{c(){Y(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,i){$(e,a,i),l=!0},p(a,i){var u;const f={};i&2&&(f.chatId=a[1]),i&16&&(f.messageId=a[4]),i&4&&(f.selectedModels=a[2]),i&17&&(f.isLastMessage=a[4]===((u=a[0])==null?void 0:u.currentId)),i&64&&(f.setInputText=a[6]),i&1024&&(f.updateChat=a[10]),i&2048&&(f.editMessage=a[11]),i&4096&&(f.saveMessage=a[12]),i&16384&&(f.rateMessage=a[14]),i&32768&&(f.actionMessage=a[15]),i&65536&&(f.submitMessage=a[16]),i&8192&&(f.deleteMessage=a[13]),i&262144&&(f.continueResponse=a[18]),i&131072&&(f.regenerateResponse=a[17]),i&524288&&(f.mergeResponses=a[19]),i&2097152&&(f.triggerScroll=a[21]),i&1048576&&(f.addMessages=a[20]),i&4194304&&(f.readOnly=a[22]),i&8388608&&(f.editCodeBlock=a[23]),i&16777216&&(f.topPadding=a[24]),!t&&i&1&&(t=!0,f.history=a[0],et(()=>t=!1)),e.$set(f)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){x(e,a)}}}function Gu(n){var l;let e,t;return e=new il({props:{chatId:n[1],history:n[0],messageId:n[4],selectedModels:n[2],isLastMessage:n[4]===n[0].currentId,siblings:((l=n[0].messages[n[0].messages[n[4]].parentId])==null?void 0:l.childrenIds)??[],setInputText:n[6],gotoMessage:n[7],showPreviousMessage:n[8],showNextMessage:n[9],updateChat:n[10],editMessage:n[11],saveMessage:n[12],rateMessage:n[14],actionMessage:n[15],submitMessage:n[16],deleteMessage:n[13],continueResponse:n[18],regenerateResponse:n[17],addMessages:n[20],readOnly:n[22],editCodeBlock:n[23],topPadding:n[24]}}),{c(){Y(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){$(e,s,r),t=!0},p(s,r){var a;const o={};r&2&&(o.chatId=s[1]),r&1&&(o.history=s[0]),r&16&&(o.messageId=s[4]),r&4&&(o.selectedModels=s[2]),r&17&&(o.isLastMessage=s[4]===s[0].currentId),r&17&&(o.siblings=((a=s[0].messages[s[0].messages[s[4]].parentId])==null?void 0:a.childrenIds)??[]),r&64&&(o.setInputText=s[6]),r&128&&(o.gotoMessage=s[7]),r&256&&(o.showPreviousMessage=s[8]),r&512&&(o.showNextMessage=s[9]),r&1024&&(o.updateChat=s[10]),r&2048&&(o.editMessage=s[11]),r&4096&&(o.saveMessage=s[12]),r&16384&&(o.rateMessage=s[14]),r&32768&&(o.actionMessage=s[15]),r&65536&&(o.submitMessage=s[16]),r&8192&&(o.deleteMessage=s[13]),r&262144&&(o.continueResponse=s[18]),r&131072&&(o.regenerateResponse=s[17]),r&1048576&&(o.addMessages=s[20]),r&4194304&&(o.readOnly=s[22]),r&8388608&&(o.editCodeBlock=s[23]),r&16777216&&(o.topPadding=s[24]),e.$set(o)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Zu(n){var l;let e,t;return e=new Fu({props:{user:n[5],chatId:n[1],history:n[0],messageId:n[4],isFirstMessage:n[3]===0,siblings:n[0].messages[n[4]].parentId!==null?((l=n[0].messages[n[0].messages[n[4]].parentId])==null?void 0:l.childrenIds)??[]:Object.values(n[0].messages).filter(tr).map(lr)??[],gotoMessage:n[7],showPreviousMessage:n[8],showNextMessage:n[9],editMessage:n[11],deleteMessage:n[13],readOnly:n[22],editCodeBlock:n[23],topPadding:n[24]}}),{c(){Y(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){$(e,s,r),t=!0},p(s,r){var a;const o={};r&32&&(o.user=s[5]),r&2&&(o.chatId=s[1]),r&1&&(o.history=s[0]),r&16&&(o.messageId=s[4]),r&8&&(o.isFirstMessage=s[3]===0),r&17&&(o.siblings=s[0].messages[s[4]].parentId!==null?((a=s[0].messages[s[0].messages[s[4]].parentId])==null?void 0:a.childrenIds)??[]:Object.values(s[0].messages).filter(tr).map(lr)??[]),r&128&&(o.gotoMessage=s[7]),r&256&&(o.showPreviousMessage=s[8]),r&512&&(o.showNextMessage=s[9]),r&2048&&(o.editMessage=s[11]),r&8192&&(o.deleteMessage=s[13]),r&4194304&&(o.readOnly=s[22]),r&8388608&&(o.editCodeBlock=s[23]),r&16777216&&(o.topPadding=s[24]),e.$set(o)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Ku(n){let e,t,l,s=n[0].messages[n[4]]&&er(n);return{c(){e=I("div"),s&&s.c(),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);s&&s.l(o),o.forEach(m),this.h()},h(){var r;d(e,"class",t="flex flex-col justify-between px-5 mb-3 w-full "+(((r=n[25])==null?void 0:r.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto rounded-lg group")},m(r,o){y(r,e,o),s&&s.m(e,null),l=!0},p(r,[o]){var a;r[0].messages[r[4]]?s?(s.p(r,o),o&17&&b(s,1)):(s=er(r),s.c(),b(s,1),s.m(e,null)):s&&(ee(),w(s,1,1,()=>{s=null}),te()),(!l||o&33554432&&t!==(t="flex flex-col justify-between px-5 mb-3 w-full "+(((a=r[25])==null?void 0:a.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto rounded-lg group"))&&d(e,"class",t)},i(r){l||(b(s),l=!0)},o(r){w(s),l=!1},d(r){r&&m(e),s&&s.d()}}}const tr=n=>n.parentId===null,lr=n=>n.id;function Qu(n,e,t){let l;Te(n,bt,U=>t(25,l=U)),Bt(),Ze("i18n");let{chatId:s}=e,{selectedModels:r=[]}=e,{idx:o=0}=e,{history:a}=e,{messageId:i}=e,{user:f}=e,{setInputText:u=()=>{}}=e,{gotoMessage:c}=e,{showPreviousMessage:g}=e,{showNextMessage:h}=e,{updateChat:_}=e,{editMessage:E}=e,{saveMessage:v}=e,{deleteMessage:T}=e,{rateMessage:P}=e,{actionMessage:R}=e,{submitMessage:B}=e,{regenerateResponse:D}=e,{continueResponse:C}=e,{mergeResponses:N}=e,{addMessages:V}=e,{triggerScroll:O}=e,{readOnly:q=!1}=e,{editCodeBlock:Z=!0}=e,{topPadding:se=!1}=e;function L(U){a=U,t(0,a)}return n.$$set=U=>{"chatId"in U&&t(1,s=U.chatId),"selectedModels"in U&&t(2,r=U.selectedModels),"idx"in U&&t(3,o=U.idx),"history"in U&&t(0,a=U.history),"messageId"in U&&t(4,i=U.messageId),"user"in U&&t(5,f=U.user),"setInputText"in U&&t(6,u=U.setInputText),"gotoMessage"in U&&t(7,c=U.gotoMessage),"showPreviousMessage"in U&&t(8,g=U.showPreviousMessage),"showNextMessage"in U&&t(9,h=U.showNextMessage),"updateChat"in U&&t(10,_=U.updateChat),"editMessage"in U&&t(11,E=U.editMessage),"saveMessage"in U&&t(12,v=U.saveMessage),"deleteMessage"in U&&t(13,T=U.deleteMessage),"rateMessage"in U&&t(14,P=U.rateMessage),"actionMessage"in U&&t(15,R=U.actionMessage),"submitMessage"in U&&t(16,B=U.submitMessage),"regenerateResponse"in U&&t(17,D=U.regenerateResponse),"continueResponse"in U&&t(18,C=U.continueResponse),"mergeResponses"in U&&t(19,N=U.mergeResponses),"addMessages"in U&&t(20,V=U.addMessages),"triggerScroll"in U&&t(21,O=U.triggerScroll),"readOnly"in U&&t(22,q=U.readOnly),"editCodeBlock"in U&&t(23,Z=U.editCodeBlock),"topPadding"in U&&t(24,se=U.topPadding)},[a,s,r,o,i,f,u,c,g,h,_,E,v,T,P,R,B,D,C,N,V,O,q,Z,se,l,L]}class Xu extends Ae{constructor(e){super(),ze(this,e,Qu,Ku,Pe,{chatId:1,selectedModels:2,idx:3,history:0,messageId:4,user:5,setInputText:6,gotoMessage:7,showPreviousMessage:8,showNextMessage:9,updateChat:10,editMessage:11,saveMessage:12,deleteMessage:13,rateMessage:14,actionMessage:15,submitMessage:16,regenerateResponse:17,continueResponse:18,mergeResponses:19,addMessages:20,triggerScroll:21,readOnly:22,editCodeBlock:23,topPadding:24})}}function sr(n,e,t){const l=n.slice();return l[14]=e[t],l[16]=t,l}function Yu(n){let e,t,l,s,r;return{c(){e=I("div"),t=W(n[5]),l=W("  v"),s=W(El),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);t=F(a,n[5]),l=F(a,"  v"),s=F(a,El),a.forEach(m),this.h()},h(){var o;d(e,"class",r="flex w-full "+(((o=n[4])==null?void 0:o.landingPageMode)==="chat"?" -mt-1":"text-center items-center justify-center")+" self-start text-gray-600 dark:text-gray-400")},m(o,a){y(o,e,a),p(e,t),p(e,l),p(e,s)},p(o,a){var i;a&32&&K(t,o[5]),a&16&&r!==(r="flex w-full "+(((i=o[4])==null?void 0:i.landingPageMode)==="chat"?" -mt-1":"text-center items-center justify-center")+" self-start text-gray-600 dark:text-gray-400")&&d(e,"class",r)},i:Be,o:Be,d(o){o&&m(e)}}}function $u(n){let e,t,l=n[3].t("Suggested")+"",s,r;return e=new Oi({}),{c(){Y(e.$$.fragment),t=j(),s=W(l)},l(o){le(e.$$.fragment,o),t=A(o),s=F(o,l)},m(o,a){$(e,o,a),y(o,t,a),y(o,s,a),r=!0},p(o,a){(!r||a&8)&&l!==(l=o[3].t("Suggested")+"")&&K(s,l)},i(o){r||(b(e.$$.fragment,o),r=!0)},o(o){w(e.$$.fragment,o),r=!1},d(o){o&&(m(t),m(s)),x(e,o)}}}function nr(n){let e,t=[],l=new Map,s,r=Ne(n[2]);const o=a=>a[14].id||a[14].content;for(let a=0;a<r.length;a+=1){let i=sr(n,r,a),f=o(i);l.set(f,t[a]=rr(f,i))}return{c(){e=I("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=M(a,"DIV",{role:!0,class:!0});var i=k(e);for(let f=0;f<t.length;f+=1)t[f].l(i);i.forEach(m),this.h()},h(){d(e,"role","list"),d(e,"class",s="max-h-40 overflow-auto scrollbar-none items-start "+n[0]+" svelte-1co34if")},m(a,i){y(a,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null)},p(a,i){i&14&&(r=Ne(a[2]),t=yt(t,i,o,1,a,r,l,e,hi,rr,null,sr)),i&1&&s!==(s="max-h-40 overflow-auto scrollbar-none items-start "+a[0]+" svelte-1co34if")&&d(e,"class",s)},d(a){a&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function xu(n){let e,t=n[14].content+"",l,s,r,o=n[3].t("Prompt")+"",a;return{c(){e=I("div"),l=W(t),s=j(),r=I("div"),a=W(o),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);l=F(f,t),f.forEach(m),s=A(i),r=M(i,"DIV",{class:!0});var u=k(r);a=F(u,o),u.forEach(m),this.h()},h(){d(e,"class","font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1"),d(r,"class","text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1")},m(i,f){y(i,e,f),p(e,l),y(i,s,f),y(i,r,f),p(r,a)},p(i,f){f&4&&t!==(t=i[14].content+"")&&K(l,t),f&8&&o!==(o=i[3].t("Prompt")+"")&&K(a,o)},d(i){i&&(m(e),m(s),m(r))}}}function ec(n){let e,t=n[14].title[0]+"",l,s,r,o=n[14].title[1]+"",a;return{c(){e=I("div"),l=W(t),s=j(),r=I("div"),a=W(o),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);l=F(f,t),f.forEach(m),s=A(i),r=M(i,"DIV",{class:!0});var u=k(r);a=F(u,o),u.forEach(m),this.h()},h(){d(e,"class","font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1"),d(r,"class","text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1")},m(i,f){y(i,e,f),p(e,l),y(i,s,f),y(i,r,f),p(r,a)},p(i,f){f&4&&t!==(t=i[14].title[0]+"")&&K(l,t),f&4&&o!==(o=i[14].title[1]+"")&&K(a,o)},d(i){i&&(m(e),m(s),m(r))}}}function rr(n,e){let t,l,s,r,o;function a(c,g){return c[14].title&&c[14].title[0]!==""?ec:xu}let i=a(e),f=i(e);function u(){return e[10](e[14])}return{key:n,first:null,c(){t=I("button"),l=I("div"),f.c(),s=j(),this.h()},l(c){t=M(c,"BUTTON",{role:!0,class:!0,style:!0});var g=k(t);l=M(g,"DIV",{class:!0});var h=k(l);f.l(h),h.forEach(m),s=A(g),g.forEach(m),this.h()},h(){d(l,"class","flex flex-col text-left"),d(t,"role","listitem"),d(t,"class","waterfall flex flex-col flex-1 shrink-0 w-full justify-between px-3 py-2 rounded-xl bg-transparent hover:bg-black/5 dark:hover:bg-white/5 transition group svelte-1co34if"),Ht(t,"animation-delay",e[16]*60+"ms"),this.first=t},m(c,g){y(c,t,g),p(t,l),f.m(l,null),p(t,s),r||(o=ue(t,"click",u),r=!0)},p(c,g){e=c,i===(i=a(e))&&f?f.p(e,g):(f.d(1),f=i(e),f&&(f.c(),f.m(l,null))),g&4&&Ht(t,"animation-delay",e[16]*60+"ms")},d(c){c&&m(t),f.d(),r=!1,o()}}}function tc(n){let e,t,l,s,r,o;const a=[$u,Yu],i=[];function f(c,g){return c[2].length>0?0:1}t=f(n),l=i[t]=a[t](n);let u=n[2].length>0&&nr(n);return{c(){e=I("div"),l.c(),s=j(),r=I("div"),u&&u.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);l.l(g),g.forEach(m),s=A(c),r=M(c,"DIV",{class:!0});var h=k(r);u&&u.l(h),h.forEach(m),this.h()},h(){d(e,"class","mb-1 flex gap-1 text-xs font-medium items-center text-gray-600 dark:text-gray-400"),d(r,"class","h-40 w-full")},m(c,g){y(c,e,g),i[t].m(e,null),y(c,s,g),y(c,r,g),u&&u.m(r,null),o=!0},p(c,[g]){let h=t;t=f(c),t===h?i[t].p(c,g):(ee(),w(i[h],1,1,()=>{i[h]=null}),te(),l=i[t],l?l.p(c,g):(l=i[t]=a[t](c),l.c()),b(l,1),l.m(e,null)),c[2].length>0?u?u.p(c,g):(u=nr(c),u.c(),u.m(r,null)):u&&(u.d(1),u=null)},i(c){o||(b(l),o=!0)},o(c){w(l),o=!1},d(c){c&&(m(e),m(s),m(r)),i[t].d(),u&&u.d()}}}function lc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if((n[t].id??n[t].content)!==(e[t].id??e[t].content))return!1;return!0}function sc(n,e,t){let l,s,r;Te(n,bt,T=>t(4,s=T)),Te(n,bi,T=>t(5,r=T));const o=Ze("i18n");Te(n,o,T=>t(3,l=T));let{suggestionPrompts:a=[]}=e,{className:i=""}=e,{inputValue:f=""}=e,{onSelect:u=T=>{}}=e,c=[];const g={keys:["content","title"],threshold:.5};let h,_=[];const E=T=>{if(T.length>500)t(2,_=[]);else{const P=T.trim()&&h?h.search(T.trim()).map(R=>R.item):c;lc(_,P)||t(2,_=P)}},v=T=>u({type:"prompt",data:T.content});return n.$$set=T=>{"suggestionPrompts"in T&&t(7,a=T.suggestionPrompts),"className"in T&&t(0,i=T.className),"inputValue"in T&&t(8,f=T.inputValue),"onSelect"in T&&t(1,u=T.onSelect)},n.$$.update=()=>{n.$$.dirty&384&&a&&(t(9,c=[...a??[]].sort(()=>Math.random()-.5)),E(f)),n.$$.dirty&512&&(h=new Zi(c,g)),n.$$.dirty&256&&E(f)},[i,u,_,l,s,r,o,a,f,c,v]}class nc extends Ae{constructor(e){super(),ze(this,e,sc,tc,Pe,{suggestionPrompts:7,className:0,inputValue:8,onSelect:1})}}function ir(n,e,t){const l=n.slice();return l[13]=e[t],l[15]=t,l}function rc(n){let e,t;return{c(){e=I("img"),this.h()},l(l){e=M(l,"IMG",{crossorigin:!0,src:!0,class:!0,alt:!0,draggable:!0}),this.h()},h(){var l,s,r;d(e,"crossorigin","anonymous"),ft(e.src,t=((r=(s=(l=n[13])==null?void 0:l.info)==null?void 0:s.meta)==null?void 0:r.profile_image_url)??(n[5].language==="dg-DG"?`${$e}/doge.png`:`${$e}/static/favicon.png`))||d(e,"src",t),d(e,"class","size-[2.7rem] rounded-full border-[1px] border-gray-100 dark:border-none"),d(e,"alt","logo"),d(e,"draggable","false")},m(l,s){y(l,e,s)},p(l,s){var r,o,a;s&33&&!ft(e.src,t=((a=(o=(r=l[13])==null?void 0:r.info)==null?void 0:o.meta)==null?void 0:a.profile_image_url)??(l[5].language==="dg-DG"?`${$e}/doge.png`:`${$e}/static/favicon.png`))&&d(e,"src",t)},d(l){l&&m(e)}}}function ar(n){var i,f,u;let e,t,l,s,r,o;t=new Le({props:{content:Ut.parse(wt(((u=(f=(i=n[0][n[4]])==null?void 0:i.info)==null?void 0:f.meta)==null?void 0:u.description)??"").replaceAll(`
`,"<br>")),placement:"right",$$slots:{default:[rc]},$$scope:{ctx:n}}});function a(){return n[12](n[15])}return{c(){e=I("button"),Y(t.$$.fragment),l=j()},l(c){e=M(c,"BUTTON",{});var g=k(e);le(t.$$.fragment,g),l=A(g),g.forEach(m)},m(c,g){y(c,e,g),$(t,e,null),p(e,l),s=!0,r||(o=ue(e,"click",a),r=!0)},p(c,g){var _,E,v;n=c;const h={};g&17&&(h.content=Ut.parse(wt(((v=(E=(_=n[0][n[4]])==null?void 0:_.info)==null?void 0:E.meta)==null?void 0:v.description)??"").replaceAll(`
`,"<br>"))),g&65569&&(h.$$scope={dirty:g,ctx:n}),t.$set(h)},i(c){s||(b(t.$$.fragment,c),s=!0)},o(c){w(t.$$.fragment,c),s=!1},d(c){c&&m(e),x(t),r=!1,o()}}}function or(n){let e,t;return e=new Le({props:{content:n[5].t("This chat won't appear in history and your messages will not be saved."),className:"w-full flex justify-start mb-0.5",placement:"top",$$slots:{default:[ic]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s&32&&(r.content=l[5].t("This chat won't appear in history and your messages will not be saved.")),s&65568&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function ic(n){let e,t,l=n[5].t("Temporary Chat")+"",s,r;return t=new Ki({props:{strokeWidth:"2.5",className:"size-5"}}),{c(){e=I("div"),Y(t.$$.fragment),s=W(l),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);le(t.$$.fragment,a),s=F(a,l),a.forEach(m),this.h()},h(){d(e,"class","flex items-center gap-2 text-gray-500 text-lg mt-2 w-fit")},m(o,a){y(o,e,a),$(t,e,null),p(e,s),r=!0},p(o,a){(!r||a&32)&&l!==(l=o[5].t("Temporary Chat")+"")&&K(s,l)},i(o){r||(b(t.$$.fragment,o),r=!0)},o(o){w(t.$$.fragment,o),r=!1},d(o){o&&m(e),x(t)}}}function ac(n){var l;let e=n[5].t("Hello, {{name}}",{name:(l=n[7])==null?void 0:l.name})+"",t;return{c(){t=W(e)},l(s){t=F(s,e)},m(s,r){y(s,t,r)},p(s,r){var o;r&160&&e!==(e=s[5].t("Hello, {{name}}",{name:(o=s[7])==null?void 0:o.name})+"")&&K(t,e)},d(s){s&&m(t)}}}function oc(n){var l;let e=((l=n[0][n[4]])==null?void 0:l.name)+"",t;return{c(){t=W(e)},l(s){t=F(s,e)},m(s,r){y(s,t,r)},p(s,r){var o;r&17&&e!==(e=((o=s[0][s[4]])==null?void 0:o.name)+"")&&K(t,e)},d(s){s&&m(t)}}}function fc(n){let e,t=n[5].t("How can I help you today?")+"",l;return{c(){e=I("div"),l=W(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var r=k(e);l=F(r,t),r.forEach(m),this.h()},h(){d(e,"class","text-gray-400 dark:text-gray-500 line-clamp-1 font-p")},m(s,r){y(s,e,r),p(e,l)},p(s,r){r&32&&t!==(t=s[5].t("How can I help you today?")+"")&&K(l,t)},d(s){s&&m(e)}}}function uc(n){var a,i,f,u,c,g;let e,t,l=Ut.parse(wt((f=(i=(a=n[0][n[4]])==null?void 0:a.info)==null?void 0:i.meta)==null?void 0:f.description).replaceAll(`
`,"<br>"))+"",s,r,o=((g=(c=(u=n[0][n[4]])==null?void 0:u.info)==null?void 0:c.meta)==null?void 0:g.user)&&fr(n);return{c(){e=I("div"),t=new ci(!1),s=j(),o&&o.c(),r=ie(),this.h()},l(h){e=M(h,"DIV",{class:!0});var _=k(e);t=di(_,!1),_.forEach(m),s=A(h),o&&o.l(h),r=ie(),this.h()},h(){t.a=null,d(e,"class","mt-0.5 text-base font-normal text-gray-500 dark:text-gray-400 line-clamp-3 markdown")},m(h,_){y(h,e,_),t.m(l,e),y(h,s,_),o&&o.m(h,_),y(h,r,_)},p(h,_){var E,v,T,P,R,B;_&17&&l!==(l=Ut.parse(wt((T=(v=(E=h[0][h[4]])==null?void 0:E.info)==null?void 0:v.meta)==null?void 0:T.description).replaceAll(`
`,"<br>"))+"")&&t.p(l),(B=(R=(P=h[0][h[4]])==null?void 0:P.info)==null?void 0:R.meta)!=null&&B.user?o?o.p(h,_):(o=fr(h),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(h){h&&(m(e),m(s),m(r)),o&&o.d(h)}}}function fr(n){let e,t;function l(o,a){var i,f,u;return(u=(f=(i=o[0][o[4]])==null?void 0:i.info)==null?void 0:f.meta)!=null&&u.user.community?dc:cc}let s=l(n),r=s(n);return{c(){e=I("div"),t=W(`By
								`),r.c(),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);t=F(a,`By
								`),r.l(a),a.forEach(m),this.h()},h(){d(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(o,a){y(o,e,a),p(e,t),r.m(e,null)},p(o,a){s===(s=l(o))&&r?r.p(o,a):(r.d(1),r=s(o),r&&(r.c(),r.m(e,null)))},d(o){o&&m(e),r.d()}}}function cc(n){var l,s,r;let e=((r=(s=(l=n[0][n[4]])==null?void 0:l.info)==null?void 0:s.meta)==null?void 0:r.user.name)+"",t;return{c(){t=W(e)},l(o){t=F(o,e)},m(o,a){y(o,t,a)},p(o,a){var i,f,u;a&17&&e!==(e=((u=(f=(i=o[0][o[4]])==null?void 0:i.info)==null?void 0:f.meta)==null?void 0:u.user.name)+"")&&K(t,e)},d(o){o&&m(t)}}}function dc(n){var r,o,a,i,f,u,c,g,h;let e,t=((a=(o=(r=n[0][n[4]])==null?void 0:r.info)==null?void 0:o.meta)!=null&&a.user.name?(u=(f=(i=n[0][n[4]])==null?void 0:i.info)==null?void 0:f.meta)==null?void 0:u.user.name:`@${(h=(g=(c=n[0][n[4]])==null?void 0:c.info)==null?void 0:g.meta)==null?void 0:h.user.username}`)+"",l,s;return{c(){e=I("a"),l=W(t),this.h()},l(_){e=M(_,"A",{href:!0});var E=k(e);l=F(E,t),E.forEach(m),this.h()},h(){var _,E,v;d(e,"href",s="https://openwebui.com/m/"+((v=(E=(_=n[0][n[4]])==null?void 0:_.info)==null?void 0:E.meta)==null?void 0:v.user.username))},m(_,E){y(_,e,E),p(e,l)},p(_,E){var v,T,P,R,B,D,C,N,V,O,q,Z;E&17&&t!==(t=((P=(T=(v=_[0][_[4]])==null?void 0:v.info)==null?void 0:T.meta)!=null&&P.user.name?(D=(B=(R=_[0][_[4]])==null?void 0:R.info)==null?void 0:B.meta)==null?void 0:D.user.name:`@${(V=(N=(C=_[0][_[4]])==null?void 0:C.info)==null?void 0:N.meta)==null?void 0:V.user.username}`)+"")&&K(l,t),E&17&&s!==(s="https://openwebui.com/m/"+((Z=(q=(O=_[0][_[4]])==null?void 0:O.info)==null?void 0:q.meta)==null?void 0:Z.user.username))&&d(e,"href",s)},d(_){_&&m(e)}}}function ur(n){var L,U,H,ae,be,G,pe;let e,t,l,s,r,o,a,i,f,u,c,g,h,_,E,v,T,P,R=Ne(n[0]),B=[];for(let X=0;X<R.length;X+=1)B[X]=ar(ir(n,R,X));const D=X=>w(B[X],1,1,()=>{B[X]=null});let C=n[6]&&or(n);function N(X,ce){var Me;return(Me=X[0][X[4]])!=null&&Me.name?oc:ac}let V=N(n),O=V(n);function q(X,ce){var Me,ve,ne;return((ne=(ve=(Me=X[0][X[4]])==null?void 0:Me.info)==null?void 0:ve.meta)==null?void 0:ne.description)??null?uc:fc}let Z=q(n),se=Z(n);return v=new nc({props:{className:"grid grid-cols-2",suggestionPrompts:((H=(U=(L=n[1])==null?void 0:L.info)==null?void 0:U.meta)==null?void 0:H.suggestion_prompts)??((G=(be=(ae=n[0][n[4]])==null?void 0:ae.info)==null?void 0:be.meta)==null?void 0:G.suggestion_prompts)??((pe=n[8])==null?void 0:pe.default_prompt_suggestions)??[],onSelect:n[2]}}),{c(){e=I("div"),t=I("div"),l=I("div");for(let X=0;X<B.length;X+=1)B[X].c();r=j(),C&&C.c(),o=j(),a=I("div"),i=I("div"),f=I("div"),O.c(),c=j(),g=I("div"),se.c(),_=j(),E=I("div"),Y(v.$$.fragment),this.h()},l(X){e=M(X,"DIV",{class:!0});var ce=k(e);t=M(ce,"DIV",{class:!0});var Me=k(t);l=M(Me,"DIV",{class:!0});var ve=k(l);for(let we=0;we<B.length;we+=1)B[we].l(ve);ve.forEach(m),Me.forEach(m),r=A(ce),C&&C.l(ce),o=A(ce),a=M(ce,"DIV",{class:!0});var ne=k(a);i=M(ne,"DIV",{});var oe=k(i);f=M(oe,"DIV",{class:!0});var De=k(f);O.l(De),De.forEach(m),c=A(oe),g=M(oe,"DIV",{});var ke=k(g);se.l(ke),ke.forEach(m),oe.forEach(m),ne.forEach(m),_=A(ce),E=M(ce,"DIV",{class:!0});var Ce=k(E);le(v.$$.fragment,Ce),Ce.forEach(m),ce.forEach(m),this.h()},h(){d(l,"class","flex -space-x-4 mb-0.5"),d(t,"class","flex justify-start"),d(f,"class","capitalize line-clamp-1"),d(a,"class","mt-2 mb-4 text-3xl text-gray-800 dark:text-gray-100 text-left flex items-center gap-4 font-primary"),d(E,"class","w-full font-primary"),d(e,"class","m-auto w-full max-w-6xl px-8 lg:px-20")},m(X,ce){y(X,e,ce),p(e,t),p(t,l);for(let Me=0;Me<B.length;Me+=1)B[Me]&&B[Me].m(l,null);p(e,r),C&&C.m(e,null),p(e,o),p(e,a),p(a,i),p(i,f),O.m(f,null),p(i,c),p(i,g),se.m(g,null),p(e,_),p(e,E),$(v,E,null),P=!0},p(X,ce){var ve,ne,oe,De,ke,Ce,we;if(ce&49){R=Ne(X[0]);let he;for(he=0;he<R.length;he+=1){const _e=ir(X,R,he);B[he]?(B[he].p(_e,ce),b(B[he],1)):(B[he]=ar(_e),B[he].c(),b(B[he],1),B[he].m(l,null))}for(ee(),he=R.length;he<B.length;he+=1)D(he);te()}X[6]?C?(C.p(X,ce),ce&64&&b(C,1)):(C=or(X),C.c(),b(C,1),C.m(e,o)):C&&(ee(),w(C,1,1,()=>{C=null}),te()),V===(V=N(X))&&O?O.p(X,ce):(O.d(1),O=V(X),O&&(O.c(),O.m(f,null))),Z===(Z=q(X))&&se?se.p(X,ce):(se.d(1),se=Z(X),se&&(se.c(),se.m(g,null)));const Me={};ce&275&&(Me.suggestionPrompts=((oe=(ne=(ve=X[1])==null?void 0:ve.info)==null?void 0:ne.meta)==null?void 0:oe.suggestion_prompts)??((Ce=(ke=(De=X[0][X[4]])==null?void 0:De.info)==null?void 0:ke.meta)==null?void 0:Ce.suggestion_prompts)??((we=X[8])==null?void 0:we.default_prompt_suggestions)??[]),ce&4&&(Me.onSelect=X[2]),v.$set(Me)},i(X){if(!P){for(let ce=0;ce<R.length;ce+=1)b(B[ce]);X&&(s||Dt(()=>{s=Tt(l,Vt,{duration:200}),s.start()})),b(C),X&&(u||Dt(()=>{u=Tt(f,Vt,{duration:200}),u.start()})),X&&(h||Dt(()=>{h=Tt(g,Vt,{duration:200,delay:200}),h.start()})),b(v.$$.fragment,X),X&&(T||Dt(()=>{T=Tt(E,Vt,{duration:200,delay:300}),T.start()})),P=!0}},o(X){B=B.filter(Boolean);for(let ce=0;ce<B.length;ce+=1)w(B[ce]);w(C),w(v.$$.fragment,X),P=!1},d(X){X&&m(e),Ge(B,X),C&&C.d(),O.d(),se.d(),x(v)}}}function hc(n){let e=n[3],t,l,s=ur(n);return{c(){s.c(),t=ie()},l(r){s.l(r),t=ie()},m(r,o){s.m(r,o),y(r,t,o),l=!0},p(r,[o]){o&8&&Pe(e,e=r[3])?(ee(),w(s,1,1,Be),te(),s=ur(r),s.c(),b(s,1),s.m(t.parentNode,t)):s.p(r,o)},i(r){l||(b(s),l=!0)},o(r){w(s),l=!1},d(r){r&&m(t),s.d(r)}}}function mc(n,e,t){let l,s,r,o,a;Te(n,Et,v=>t(11,l=v)),Te(n,$t,v=>t(6,r=v)),Te(n,qt,v=>t(7,o=v)),Te(n,yr,v=>t(8,a=v));const i=Ze("i18n");Te(n,i,v=>t(5,s=v));let{modelIds:f=[]}=e,{models:u=[]}=e,{atSelectedModel:c}=e,{onSelect:g=v=>{}}=e,h=!1,_=0;Mt(()=>{t(3,h=!0)});const E=v=>{t(4,_=v)};return n.$$set=v=>{"modelIds"in v&&t(10,f=v.modelIds),"models"in v&&t(0,u=v.models),"atSelectedModel"in v&&t(1,c=v.atSelectedModel),"onSelect"in v&&t(2,g=v.onSelect)},n.$$.update=()=>{n.$$.dirty&3072&&t(0,u=f.map(v=>l.find(T=>T.id===v))),n.$$.dirty&1025&&f.length>0&&t(4,_=u.length-1)},[u,c,g,h,_,s,r,o,a,i,f,l,E]}class gc extends Ae{constructor(e){super(),ze(this,e,mc,hc,Pe,{modelIds:10,models:0,atSelectedModel:1,onSelect:2})}}function cr(n,e,t){const l=n.slice();return l[46]=e[t],l[48]=t,l}function _c(n){let e,t=n[2],l,s=gr(n);return{c(){e=I("div"),s.c(),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);s.l(o),o.forEach(m),this.h()},h(){d(e,"class","w-full pt-2")},m(r,o){y(r,e,o),s.m(e,null),l=!0},p(r,o){o[0]&4&&Pe(t,t=r[2])?(ee(),w(s,1,1,Be),te(),s=gr(r),s.c(),b(s,1),s.m(e,null)):s.p(r,o)},i(r){l||(b(s),l=!0)},o(r){w(s),l=!1},d(r){r&&m(e),s.d(r)}}}function pc(n){let e,t;return e=new gc({props:{modelIds:n[4],atSelectedModel:n[5],onSelect:n[16]}}),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&16&&(r.modelIds=l[4]),s[0]&32&&(r.atSelectedModel=l[5]),s[0]&65536&&(r.onSelect=l[16]),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function dr(n){let e,t;return e=new Gi({props:{$$slots:{default:[bc]},$$scope:{ctx:n}}}),e.$on("visible",n[38]),{c(){Y(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){$(e,l,s),t=!0},p(l,s){const r={};s[0]&524288|s[1]&262144&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function bc(n){let e,t,l,s,r=n[19].t("Loading...")+"",o,a;return t=new ll({props:{className:" size-4"}}),{c(){e=I("div"),Y(t.$$.fragment),l=j(),s=I("div"),o=W(r),this.h()},l(i){e=M(i,"DIV",{class:!0});var f=k(e);le(t.$$.fragment,f),l=A(f),s=M(f,"DIV",{class:!0});var u=k(s);o=F(u,r),u.forEach(m),f.forEach(m),this.h()},h(){d(s,"class",""),d(e,"class","w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2")},m(i,f){y(i,e,f),$(t,e,null),p(e,l),p(e,s),p(s,o),a=!0},p(i,f){(!a||f[0]&524288)&&r!==(r=i[19].t("Loading...")+"")&&K(o,r)},i(i){a||(b(t.$$.fragment,i),a=!0)},o(i){w(t.$$.fragment,i),a=!1},d(i){i&&m(e),x(t)}}}function hr(n,e){let t,l,s,r;function o(i){e[39](i)}let a={chatId:e[2],selectedModels:e[4],messageId:e[46].id,idx:e[48],user:e[3],setInputText:e[6],gotoMessage:e[23],showPreviousMessage:e[24],showNextMessage:e[25],updateChat:e[22],editMessage:e[27],deleteMessage:e[30],rateMessage:e[26],actionMessage:e[28],saveMessage:e[29],submitMessage:e[10],regenerateResponse:e[8],continueResponse:e[7],mergeResponses:e[9],addMessages:e[11],triggerScroll:e[31],readOnly:e[12],editCodeBlock:e[13],topPadding:e[14]};return e[0]!==void 0&&(a.history=e[0]),l=new Xu({props:a}),Je.push(()=>xe(l,"history",o)),{key:n,first:null,c(){t=ie(),Y(l.$$.fragment),this.h()},l(i){t=ie(),le(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,f){y(i,t,f),$(l,i,f),r=!0},p(i,f){e=i;const u={};f[0]&4&&(u.chatId=e[2]),f[0]&16&&(u.selectedModels=e[4]),f[0]&131072&&(u.messageId=e[46].id),f[0]&131072&&(u.idx=e[48]),f[0]&8&&(u.user=e[3]),f[0]&64&&(u.setInputText=e[6]),f[0]&1024&&(u.submitMessage=e[10]),f[0]&256&&(u.regenerateResponse=e[8]),f[0]&128&&(u.continueResponse=e[7]),f[0]&512&&(u.mergeResponses=e[9]),f[0]&2048&&(u.addMessages=e[11]),f[0]&4096&&(u.readOnly=e[12]),f[0]&8192&&(u.editCodeBlock=e[13]),f[0]&16384&&(u.topPadding=e[14]),!s&&f[0]&1&&(s=!0,u.history=e[0],et(()=>s=!1)),l.$set(u)},i(i){r||(b(l.$$.fragment,i),r=!0)},o(i){w(l.$$.fragment,i),r=!1},d(i){i&&m(t),x(l,i)}}}function mr(n){let e;return{c(){e=I("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),k(e).forEach(m),this.h()},h(){d(e,"class","pb-6")},m(t,l){y(t,e,l)},d(t){t&&m(e)}}}function gr(n){var B;let e,t,l=n[19].t("Chat Conversation")+"",s,r,o=((B=n[17].at(0))==null?void 0:B.parentId)!==null,a,i,f=[],u=new Map,c,g,h,_,E,v=o&&dr(n),T=Ne(n[17]);const P=D=>D[46].id;for(let D=0;D<T.length;D+=1){let C=cr(n,T,D),N=P(C);u.set(N,f[D]=hr(N,C))}let R=n[15]&&mr();return{c(){e=I("section"),t=I("h2"),s=W(l),r=j(),v&&v.c(),a=j(),i=I("ul");for(let D=0;D<f.length;D+=1)f[D].c();c=j(),g=I("div"),h=j(),R&&R.c(),_=ie(),this.h()},l(D){e=M(D,"SECTION",{class:!0,"aria-labelledby":!0});var C=k(e);t=M(C,"H2",{class:!0,id:!0});var N=k(t);s=F(N,l),N.forEach(m),r=A(C),v&&v.l(C),a=A(C),i=M(C,"UL",{role:!0,"aria-live":!0,"aria-relevant":!0,"aria-atomic":!0});var V=k(i);for(let O=0;O<f.length;O+=1)f[O].l(V);V.forEach(m),C.forEach(m),c=A(D),g=M(D,"DIV",{class:!0}),k(g).forEach(m),h=A(D),R&&R.l(D),_=ie(),this.h()},h(){d(t,"class","sr-only"),d(t,"id","chat-conversation"),d(i,"role","log"),d(i,"aria-live","polite"),d(i,"aria-relevant","additions"),d(i,"aria-atomic","false"),d(e,"class","w-full"),d(e,"aria-labelledby","chat-conversation"),d(g,"class","pb-18")},m(D,C){y(D,e,C),p(e,t),p(t,s),p(e,r),v&&v.m(e,null),p(e,a),p(e,i);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(i,null);y(D,c,C),y(D,g,C),y(D,h,C),R&&R.m(D,C),y(D,_,C),E=!0},p(D,C){var N;(!E||C[0]&524288)&&l!==(l=D[19].t("Chat Conversation")+"")&&K(s,l),C[0]&131072&&(o=((N=D[17].at(0))==null?void 0:N.parentId)!==null),o?v?(v.p(D,C),C[0]&131072&&b(v,1)):(v=dr(D),v.c(),b(v,1),v.m(e,a)):v&&(ee(),w(v,1,1,()=>{v=null}),te()),C[0]&2143453149|C[1]&1&&(T=Ne(D[17]),ee(),f=yt(f,C,P,1,D,T,u,i,St,hr,null,cr),te()),D[15]?R||(R=mr(),R.c(),R.m(_.parentNode,_)):R&&(R.d(1),R=null)},i(D){if(!E){b(v);for(let C=0;C<T.length;C+=1)b(f[C]);E=!0}},o(D){w(v);for(let C=0;C<f.length;C+=1)w(f[C]);E=!1},d(D){D&&(m(e),m(c),m(g),m(h),m(_)),v&&v.d();for(let C=0;C<f.length;C+=1)f[C].d();R&&R.d(D)}}}function vc(n){let e,t,l,s,r;const o=[pc,_c],a=[];function i(f,u){var c;return u[0]&1&&(t=null),t==null&&(t=Object.keys(((c=f[0])==null?void 0:c.messages)??{}).length==0),t?0:1}return l=i(n,[-1,-1]),s=a[l]=o[l](n),{c(){e=I("div"),s.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);s.l(u),u.forEach(m),this.h()},h(){d(e,"class",n[1])},m(f,u){y(f,e,u),a[l].m(e,null),r=!0},p(f,u){let c=l;l=i(f,u),l===c?a[l].p(f,u):(ee(),w(a[c],1,1,()=>{a[c]=null}),te(),s=a[l],s?s.p(f,u):(s=a[l]=o[l](f),s.c()),b(s,1),s.m(e,null)),(!r||u[0]&2)&&d(e,"class",f[1])},i(f){r||(b(s),r=!0)},o(f){w(s),r=!1},d(f){f&&m(e),a[l].d()}}}function kc(n,e,t){let l,s,r,o,a;Te(n,bt,S=>t(40,s=S)),Te(n,Cl,S=>t(41,r=S)),Te(n,$t,S=>t(42,o=S)),Te(n,qt,S=>t(43,a=S)),Bt();const i=Ze("i18n");Te(n,i,S=>t(19,l=S));let{className:f="h-full flex pt-8"}=e,{chatId:u=""}=e,{user:c=a}=e,{prompt:g}=e,{history:h={}}=e,{selectedModels:_}=e,{atSelectedModel:E}=e,v=[],{setInputText:T=()=>{}}=e,{sendMessage:P}=e,{continueResponse:R}=e,{regenerateResponse:B}=e,{mergeResponses:D}=e,{chatActionHandler:C}=e,{showMessage:N=()=>{}}=e,{submitMessage:V=()=>{}}=e,{addMessages:O=()=>{}}=e,{readOnly:q=!1}=e,{editCodeBlock:Z=!0}=e,{topPadding:se=!1}=e,{bottomPadding:L=!1}=e,{autoScroll:U}=e,{onSelect:H=S=>{}}=e,{messagesCount:ae=20}=e,be=!1;const G=async()=>{const S=document.getElementById("messages-container");S.scrollTop=S.scrollTop+100,t(18,be=!0),t(33,ae+=20),await Re(),t(18,be=!1)},pe=()=>{const S=document.getElementById("messages-container");S.scrollTop=S.scrollHeight},X=async()=>{o||(t(0,h),await Re(),await wi(localStorage.token,u,{history:h,messages:v}),Cl.set(1),await vi.set(await Ii(localStorage.token,r)))},ce=async(S,Q)=>{let fe;S.parentId!==null?fe=h.messages[S.parentId].childrenIds:fe=Object.values(h.messages).filter(ye=>ye.parentId===null).map(ye=>ye.id),Q=Math.max(0,Math.min(Q,fe.length-1));let Ee=fe[Q];if(S.id!==Ee){let ye=h.messages[Ee].childrenIds;for(;ye.length!==0;)Ee=ye.at(-1),ye=h.messages[Ee].childrenIds;t(0,h.currentId=Ee,h)}if(await Re(),(s==null?void 0:s.scrollOnBranchChange)??!0){const ye=document.getElementById("messages-container");t(32,U=ye.scrollHeight-ye.scrollTop<=ye.clientHeight+50),setTimeout(()=>{pe()},100)}},Me=async S=>{if(S.parentId!==null){let Q=h.messages[S.parentId].childrenIds[Math.max(h.messages[S.parentId].childrenIds.indexOf(S.id)-1,0)];if(S.id!==Q){let fe=h.messages[Q].childrenIds;for(;fe.length!==0;)Q=fe.at(-1),fe=h.messages[Q].childrenIds;t(0,h.currentId=Q,h)}}else{let Q=Object.values(h.messages).filter(Ee=>Ee.parentId===null).map(Ee=>Ee.id),fe=Q[Math.max(Q.indexOf(S.id)-1,0)];if(S.id!==fe){let Ee=h.messages[fe].childrenIds;for(;Ee.length!==0;)fe=Ee.at(-1),Ee=h.messages[fe].childrenIds;t(0,h.currentId=fe,h)}}if(await Re(),(s==null?void 0:s.scrollOnBranchChange)??!0){const Q=document.getElementById("messages-container");t(32,U=Q.scrollHeight-Q.scrollTop<=Q.clientHeight+50),setTimeout(()=>{pe()},100)}},ve=async S=>{if(S.parentId!==null){let Q=h.messages[S.parentId].childrenIds[Math.min(h.messages[S.parentId].childrenIds.indexOf(S.id)+1,h.messages[S.parentId].childrenIds.length-1)];if(S.id!==Q){let fe=h.messages[Q].childrenIds;for(;fe.length!==0;)Q=fe.at(-1),fe=h.messages[Q].childrenIds;t(0,h.currentId=Q,h)}}else{let Q=Object.values(h.messages).filter(Ee=>Ee.parentId===null).map(Ee=>Ee.id),fe=Q[Math.min(Q.indexOf(S.id)+1,Q.length-1)];if(S.id!==fe){let Ee=h.messages[fe].childrenIds;for(;Ee.length!==0;)fe=Ee.at(-1),Ee=h.messages[fe].childrenIds;t(0,h.currentId=fe,h)}}if(await Re(),(s==null?void 0:s.scrollOnBranchChange)??!0){const Q=document.getElementById("messages-container");t(32,U=Q.scrollHeight-Q.scrollTop<=Q.clientHeight+50),setTimeout(()=>{pe()},100)}},ne=async(S,Q)=>{t(0,h.messages[S].annotation={...h.messages[S].annotation,rating:Q},h),await X()},oe=async(S,{content:Q,files:fe},Ee=!0)=>{if((_??[]).filter(ye=>ye).length===0){Fe.error(l.t("Model not selected"));return}if(h.messages[S].role==="user")if(Ee){let ye=Q,J=Dl(),de={id:J,parentId:h.messages[S].parentId,childrenIds:[],role:"user",content:ye,...fe&&{files:fe},models:_,timestamp:Math.floor(Date.now()/1e3)},Ie=h.messages[S].parentId;Ie!==null&&t(0,h.messages[Ie].childrenIds=[...h.messages[Ie].childrenIds,J],h),t(0,h.messages[J]=de,h),t(0,h.currentId=J,h),await Re(),await P(h,J)}else t(0,h.messages[S].content=Q,h),t(0,h.messages[S].files=fe,h),await X();else if(Ee){const ye=Dl(),J=h.messages[S],de=J.parentId,Ie={...J,id:ye,parentId:de,childrenIds:[],files:void 0,content:Q,timestamp:Math.floor(Date.now()/1e3)};t(0,h.messages[ye]=Ie,h),t(0,h.currentId=ye,h),de!==null&&t(0,h.messages[de].childrenIds=[...h.messages[de].childrenIds,ye],h),await X()}else t(0,h.messages[S].originalContent=h.messages[S].content,h),t(0,h.messages[S].content=Q,h),await X()},De=async(S,Q,fe=null)=>{await C(u,S,Q.model,Q.id,fe)},ke=async(S,Q)=>{t(0,h.messages[S]=Q,h),await X()},Ce=async S=>{const Q=h.messages[S],fe=Q.parentId,Ee=Q.childrenIds??[],ye=Ee.flatMap(J=>{var de;return((de=h.messages[J])==null?void 0:de.childrenIds)??[]});fe&&h.messages[fe]&&t(0,h.messages[fe].childrenIds=[...h.messages[fe].childrenIds.filter(J=>J!==S),...ye],h),ye.forEach(J=>{h.messages[J]&&t(0,h.messages[J].parentId=fe,h)}),[S,...Ee].forEach(J=>{delete h.messages[J]}),await Re(),N({id:fe}),await X()},we=()=>{if(U){const S=document.getElementById("messages-container");t(32,U=S.scrollHeight-S.scrollTop<=S.clientHeight+50),setTimeout(()=>{pe()},100)}},he=S=>{be||G()};function _e(S){h=S,t(0,h)}return n.$$set=S=>{"className"in S&&t(1,f=S.className),"chatId"in S&&t(2,u=S.chatId),"user"in S&&t(3,c=S.user),"prompt"in S&&t(34,g=S.prompt),"history"in S&&t(0,h=S.history),"selectedModels"in S&&t(4,_=S.selectedModels),"atSelectedModel"in S&&t(5,E=S.atSelectedModel),"setInputText"in S&&t(6,T=S.setInputText),"sendMessage"in S&&t(35,P=S.sendMessage),"continueResponse"in S&&t(7,R=S.continueResponse),"regenerateResponse"in S&&t(8,B=S.regenerateResponse),"mergeResponses"in S&&t(9,D=S.mergeResponses),"chatActionHandler"in S&&t(36,C=S.chatActionHandler),"showMessage"in S&&t(37,N=S.showMessage),"submitMessage"in S&&t(10,V=S.submitMessage),"addMessages"in S&&t(11,O=S.addMessages),"readOnly"in S&&t(12,q=S.readOnly),"editCodeBlock"in S&&t(13,Z=S.editCodeBlock),"topPadding"in S&&t(14,se=S.topPadding),"bottomPadding"in S&&t(15,L=S.bottomPadding),"autoScroll"in S&&t(32,U=S.autoScroll),"onSelect"in S&&t(16,H=S.onSelect),"messagesCount"in S&&t(33,ae=S.messagesCount)},n.$$.update=()=>{if(n.$$.dirty[0]&1|n.$$.dirty[1]&4)if(h.currentId){let S=[],Q=h.messages[h.currentId];for(;Q&&(ae===null||S.length<=ae);)S.unshift({...Q}),Q=Q.parentId!==null?h.messages[Q.parentId]:null;t(17,v=S)}else t(17,v=[]);n.$$.dirty[0]&32768|n.$$.dirty[1]&2&&U&&L&&(async()=>(await Re(),pe()))()},[h,f,u,c,_,E,T,R,B,D,V,O,q,Z,se,L,H,v,be,l,i,G,X,ce,Me,ve,ne,oe,De,ke,Ce,we,U,ae,g,P,C,N,he,_e]}class gd extends Ae{constructor(e){super(),ze(this,e,kc,vc,Pe,{className:1,chatId:2,user:3,prompt:34,history:0,selectedModels:4,atSelectedModel:5,setInputText:6,sendMessage:35,continueResponse:7,regenerateResponse:8,mergeResponses:9,chatActionHandler:36,showMessage:37,submitMessage:10,addMessages:11,readOnly:12,editCodeBlock:13,topPadding:14,bottomPadding:15,autoScroll:32,onSelect:16,messagesCount:33},null,[-1,-1])}}export{So as K,gd as M,nc as S};
//# sourceMappingURL=COKWU28c.js.map
