import{S as Ue,i as Ke,s as Ve,V as Je,W as Ye,a as v,d as u,f as c,g as W,h as p,n as me,e as _,c as g,q as F,y as Be,u as Me,r as S,a0 as It,N as pt,C as L,l as q,D as O,p as X,E as H,F as j,H as We,I as Ae,K as Pe,v as _t,k as qe,T as Dt,G as ie,t as we,b as $e,j as ke,L as ve,J as Ft,X as ut,w as Vt,_ as Ct}from"../chunks/BsAB9Z30.js";import"../chunks/IHki7fMi.js";import{F as Tt}from"../chunks/CU2r43ac.js";import{t as Q}from"../chunks/DQjSdZ1e.js";import{g as St}from"../chunks/BYfvXhfD.js";import{p as Nt}from"../chunks/D2VKnAEk.js";import{a as xt,c as zt,u as Bt,l as Mt}from"../chunks/Px_ajtSr.js";import{F as Wt,u as At,a as Pt,g as Ut}from"../chunks/C-kfCiLr.js";import{b as Kt,r as Lt,e as Ot,f as Ht,u as jt,h as Rt,g as qt}from"../chunks/CX0EKAME.js";import{C as Xt,v as Gt}from"../chunks/C06TgqeF.js";import{S as gt}from"../chunks/CbQmQGdd.js";import{e as vt}from"../chunks/BjVHJN9o.js";import"../chunks/CgqN014N.js";import{b as Jt,c as ft}from"../chunks/fl9Qo3pM.js";import{f as Yt}from"../chunks/g5t9vw8M.js";import{D as Qt}from"../chunks/ozVhkuYd.js";import{T as dt}from"../chunks/cMkWkffq.js";import{F as Zt}from"../chunks/HJqR3EwY.js";import"../chunks/I1CDPYOB.js";import{M as el}from"../chunks/C_R67QgC.js";import{R as tl,V as ll,D as rl}from"../chunks/CXCiFWhq.js";import{X as sl}from"../chunks/CubwYUHd.js";import{M as nl}from"../chunks/DSm2JZJY.js";import{C as ol}from"../chunks/B3qUBvVu.js";import"../chunks/BFmuJLeH.js";import{C as al}from"../chunks/CvyCbeyv.js";import{L as il}from"../chunks/BW2ckgCV.js";import{A as cl}from"../chunks/B8Yuwcxd.js";import{S as fl}from"../chunks/D9KdRKiL.js";import{F as ul}from"../chunks/BQG6uwEp.js";function dl(s){let e,t;return{c(){e=Je("svg"),t=Je("path"),this.h()},l(l){e=Ye(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);t=Ye(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){W(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:me,o:me,d(l){l&&u(e)}}}function hl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class ml extends Ue{constructor(e){super(),Ke(this,e,hl,dl,Ve,{className:0,strokeWidth:1})}}function wt(s,e,t){const l=s.slice();return l[6]=e[t],l}function $t(s){var a,i,f,w,b,h;let e,t,l,r;function o(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Wt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((a=s[6])==null?void 0:a.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((w=s[6])==null?void 0:w.size)??((h=(b=s[6])==null?void 0:b.meta)==null?void 0:h.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",o),t.$on("dismiss",n),{c(){e=_("div"),L(t.$$.fragment),l=q(),this.h()},l($){e=g($,"DIV",{class:!0});var E=v(e);O(t.$$.fragment,E),l=X(E),E.forEach(u),this.h()},h(){c(e,"class","mt-1 px-2")},m($,E){W($,e,E),H(t,e,null),p(e,l),r=!0},p($,E){var G,J,A,B,z,M;s=$;const I={};E&3&&(I.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),E&4&&(I.small=s[2]),E&2&&(I.item=s[6]),E&2&&(I.name=((G=s[6])==null?void 0:G.name)??((A=(J=s[6])==null?void 0:J.meta)==null?void 0:A.name)),E&2&&(I.size=((B=s[6])==null?void 0:B.size)??((M=(z=s[6])==null?void 0:z.meta)==null?void 0:M.size)??""),E&2&&(I.loading=s[6].status==="uploading"),t.$set(I)},i($){r||(F(t.$$.fragment,$),r=!0)},o($){S(t.$$.fragment,$),r=!1},d($){$&&u(e),j(t)}}}function pl(s){let e,t,l=vt(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=$t(wt(s,l,n));const o=n=>S(r[n],1,1,()=>{r[n]=null});return{c(){e=_("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var a=v(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(u),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,a){W(n,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[a]){if(a&15){l=vt(n[1]);let i;for(i=0;i<l.length;i+=1){const f=wt(n,l,i);r[i]?(r[i].p(f,a),F(r[i],1)):(r[i]=$t(f),r[i].c(),F(r[i],1),r[i].m(e,null))}for(Be(),i=l.length;i<r.length;i+=1)o(i);Me()}},i(n){if(!t){for(let a=0;a<l.length;a+=1)F(r[a]);t=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)S(r[a]);t=!1},d(n){n&&u(e),It(r,n)}}}function _l(s,e,t){const l=pt();let{selectedFileId:r=null}=e,{files:o=[]}=e,{small:n=!1}=e;const a=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,o=f.files),"small"in f&&t(2,n=f.small)},[r,o,n,l,a,i]}class gl extends Ue{constructor(e){super(),Ke(this,e,_l,pl,Ve,{selectedFileId:0,files:1,small:2})}}function vl(s){let e,t;return{c(){e=Je("svg"),t=Je("path"),this.h()},l(l){e=Ye(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);t=Ye(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){W(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:me,o:me,d(l){l&&u(e)}}}function wl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class $l extends Ue{constructor(e){super(),Ke(this,e,wl,vl,Ve,{className:0,strokeWidth:1})}}function kl(s){let e,t;return{c(){e=Je("svg"),t=Je("path"),this.h()},l(l){e=Ye(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);t=Ye(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){W(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:me,o:me,d(l){l&&u(e)}}}function bl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class yl extends Ue{constructor(e){super(),Ke(this,e,bl,kl,Ve,{className:0,strokeWidth:1})}}function El(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=_("button"),e.innerHTML=t,this.h()},l(o){e=g(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Dt(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(o,n){W(o,e,n),l||(r=ie(e,"click",s[9]),l=!0)},p:me,d(o){o&&u(e),l=!1,r()}}}function Il(s){let e,t;return e=new dt({props:{content:s[2].t("Add Content"),$$slots:{default:[El]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const o={};r&4&&(o.content=l[2].t("Add Content")),r&4098&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Dl(s){let e,t,l,r=s[2].t("Upload files")+"",o,n;return e=new ml({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=_("div"),o=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=g(a,"DIV",{class:!0});var i=v(l);o=$e(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),W(a,t,i),W(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload files")+"")&&ke(o,r)},i(a){n||(F(e.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),j(e,a)}}}function Fl(s){let e,t,l,r=s[2].t("Upload directory")+"",o,n;return e=new Zt({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=_("div"),o=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=g(a,"DIV",{class:!0});var i=v(l);o=$e(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),W(a,t,i),W(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&ke(o,r)},i(a){n||(F(e.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),j(e,a)}}}function Vl(s){let e,t,l,r=s[2].t("Sync directory")+"",o,n;return e=new yl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=_("div"),o=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=g(a,"DIV",{class:!0});var i=v(l);o=$e(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),W(a,t,i),W(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&ke(o,r)},i(a){n||(F(e.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),j(e,a)}}}function Cl(s){let e,t;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Vl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const o={};r&4100&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Tl(s){let e,t,l,r=s[2].t("Add text content")+"",o,n;return e=new $l({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=_("div"),o=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=g(a,"DIV",{class:!0});var i=v(l);o=$e(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),W(a,t,i),W(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Add text content")+"")&&ke(o,r)},i(a){n||(F(e.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),j(e,a)}}}function Sl(s){let e,t,l,r,o,n,a,i;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Dl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Fl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),o=new dt({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[Cl]},$$scope:{ctx:s}}}),a=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Tl]},$$scope:{ctx:s}}}),a.$on("click",s[8]),{c(){L(e.$$.fragment),t=q(),L(l.$$.fragment),r=q(),L(o.$$.fragment),n=q(),L(a.$$.fragment)},l(f){O(e.$$.fragment,f),t=X(f),O(l.$$.fragment,f),r=X(f),O(o.$$.fragment,f),n=X(f),O(a.$$.fragment,f)},m(f,w){H(e,f,w),W(f,t,w),H(l,f,w),W(f,r,w),H(o,f,w),W(f,n,w),H(a,f,w),i=!0},p(f,w){const b={};w&4100&&(b.$$scope={dirty:w,ctx:f}),e.$set(b);const h={};w&4100&&(h.$$scope={dirty:w,ctx:f}),l.$set(h);const $={};w&4&&($.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),w&4100&&($.$$scope={dirty:w,ctx:f}),o.$set($);const E={};w&4100&&(E.$$scope={dirty:w,ctx:f}),a.$set(E)},i(f){i||(F(e.$$.fragment,f),F(l.$$.fragment,f),F(o.$$.fragment,f),F(a.$$.fragment,f),i=!0)},o(f){S(e.$$.fragment,f),S(l.$$.fragment,f),S(o.$$.fragment,f),S(a.$$.fragment,f),i=!1},d(f){f&&(u(t),u(r),u(n)),j(e,f),j(l,f),j(o,f),j(a,f)}}}function Nl(s){let e,t,l;return t=new Jt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:Yt,$$slots:{default:[Sl]},$$scope:{ctx:s}}}),{c(){e=_("div"),L(t.$$.fragment),this.h()},l(r){e=g(r,"DIV",{slot:!0});var o=v(e);O(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"slot","content")},m(r,o){W(r,e,o),H(t,e,null),l=!0},p(r,o){const n={};o&4100&&(n.$$scope={dirty:o,ctx:r}),t.$set(n)},i(r){l||(F(t.$$.fragment,r),l=!0)},o(r){S(t.$$.fragment,r),l=!1},d(r){r&&u(e),j(t)}}}function xl(s){let e,t,l;function r(n){s[10](n)}let o={align:"end",$$slots:{content:[Nl],default:[Il]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.show=s[1]),e=new Qt({props:o}),We.push(()=>Ae(e,"show",r)),e.$on("change",s[11]),{c(){L(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,a){H(e,n,a),l=!0},p(n,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:n}),!t&&a&2&&(t=!0,i.show=n[1],Pe(()=>t=!1)),e.$set(i)},i(n){l||(F(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function zl(s,e,t){let l;const r=pt(),o=_t("i18n");qe(s,o,I=>t(2,l=I));let{onClose:n=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},w=()=>{r("sync",{type:"directory"})},b=()=>{r("upload",{type:"text"})},h=I=>{I.stopPropagation(),t(1,a=!0)};function $(I){a=I,t(1,a)}const E=I=>{I.detail===!1&&n()};return s.$$set=I=>{"onClose"in I&&t(0,n=I.onClose)},[n,a,l,r,o,i,f,w,b,h,$,E]}class Bl extends Ue{constructor(e){super(),Ke(this,e,zl,xl,Ve,{onClose:0})}}function Ml(s){let e,t;return e=new dt({props:{content:s[4].t("Voice Input"),$$slots:{default:[Al]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const o={};r&16&&(o.content=l[4].t("Voice Input")),r&65560&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Wl(s){let e,t,l,r;function o(a){s[12](a)}let n={className:"p-1",onCancel:s[10],onConfirm:s[11]};return s[3]!==void 0&&(n.recording=s[3]),t=new ll({props:n}),We.push(()=>Ae(t,"recording",o)),{c(){e=_("div"),L(t.$$.fragment),this.h()},l(a){e=g(a,"DIV",{class:!0});var i=v(e);O(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","max-w-full w-full")},m(a,i){W(a,e,i),H(t,e,null),r=!0},p(a,i){const f={};i&8&&(f.onCancel=a[10]),i&12&&(f.onConfirm=a[11]),!l&&i&8&&(l=!0,f.recording=a[3],Pe(()=>l=!1)),t.$set(f)},i(a){r||(F(t.$$.fragment,a),r=!0)},o(a){S(t.$$.fragment,a),r=!1},d(a){a&&u(e),j(t)}}}function Al(s){let e,t,l,r,o;return t=new nl({props:{className:"size-5"}}),{c(){e=_("button"),L(t.$$.fragment),this.h()},l(n){e=g(n,"BUTTON",{class:!0,type:!0});var a=v(e);O(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,a){W(n,e,a),H(t,e,null),l=!0,r||(o=ie(e,"click",s[13]),r=!0)},p:me,i(n){l||(F(t.$$.fragment,n),l=!0)},o(n){S(t.$$.fragment,n),l=!1},d(n){n&&u(e),j(t),r=!1,o()}}}function Pl(s){let e,t=s[4].t("Save")+"",l;return{c(){e=_("button"),l=we(t),this.h()},l(r){e=g(r,"BUTTON",{class:!0,type:!0});var o=v(e);l=$e(o,t),o.forEach(u),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,o){W(r,e,o),p(e,l)},p(r,o){o&16&&t!==(t=r[4].t("Save")+"")&&ke(l,t)},d(r){r&&u(e)}}}function Ul(s){let e,t,l,r,o,n,a,i,f,w,b,h,$,E,I,G,J,A,B,z,M,V,x,m,N,C,y;l=new sl({props:{className:"size-3.5"}});function R(T){s[9](T)}let U={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(U.value=s[2]),I=new tl({props:U}),We.push(()=>Ae(I,"value",R));const ee=[Wl,Ml],te=[];function ae(T,Z){return T[3]?0:1}return z=ae(s),M=te[z]=ee[z](s),m=new dt({props:{content:s[4].t("Save"),$$slots:{default:[Pl]},$$scope:{ctx:s}}}),{c(){e=_("div"),t=_("button"),L(l.$$.fragment),r=q(),o=_("div"),n=_("form"),a=_("div"),i=_("div"),f=_("div"),w=_("div"),b=_("input"),$=q(),E=_("div"),L(I.$$.fragment),J=q(),A=_("div"),B=_("div"),M.c(),V=q(),x=_("div"),L(m.$$.fragment),this.h()},l(T){e=g(T,"DIV",{class:!0});var Z=v(e);t=g(Z,"BUTTON",{class:!0,type:!0});var se=v(t);O(l.$$.fragment,se),se.forEach(u),Z.forEach(u),r=X(T),o=g(T,"DIV",{class:!0});var de=v(o);n=g(de,"FORM",{class:!0});var re=v(n);a=g(re,"DIV",{class:!0});var be=v(a);i=g(be,"DIV",{class:!0});var pe=v(i);f=g(pe,"DIV",{class:!0});var ge=v(f);w=g(ge,"DIV",{class:!0});var he=v(w);b=g(he,"INPUT",{class:!0,type:!0,placeholder:!0}),he.forEach(u),ge.forEach(u),$=X(pe),E=g(pe,"DIV",{class:!0});var Ce=v(E);O(I.$$.fragment,Ce),Ce.forEach(u),pe.forEach(u),be.forEach(u),J=X(re),A=g(re,"DIV",{class:!0});var oe=v(A);B=g(oe,"DIV",{class:!0});var ce=v(B);M.l(ce),ce.forEach(u),V=X(oe),x=g(oe,"DIV",{class:!0});var Te=v(x);O(m.$$.fragment,Te),Te.forEach(u),oe.forEach(u),re.forEach(u),de.forEach(u),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(b,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(b,"type","text"),c(b,"placeholder",h=s[4].t("Title")),b.required=!0,c(w,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(E,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(B,"class",""),c(x,"class","shrink-0"),c(A,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(o,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(T,Z){W(T,e,Z),p(e,t),H(l,t,null),W(T,r,Z),W(T,o,Z),p(o,n),p(n,a),p(a,i),p(i,f),p(f,w),p(w,b),ve(b,s[1]),p(i,$),p(i,E),H(I,E,null),p(n,J),p(n,A),p(A,B),te[z].m(B,null),p(A,V),p(A,x),H(m,x,null),N=!0,C||(y=[ie(t,"click",s[7]),ie(b,"input",s[8]),ie(n,"submit",Ft(s[14]))],C=!0)},p(T,Z){(!N||Z&16&&h!==(h=T[4].t("Title")))&&c(b,"placeholder",h),Z&2&&b.value!==T[1]&&ve(b,T[1]);const se={};Z&16&&(se.placeholder=T[4].t("Write something...")),!G&&Z&4&&(G=!0,se.value=T[2],Pe(()=>G=!1)),I.$set(se);let de=z;z=ae(T),z===de?te[z].p(T,Z):(Be(),S(te[de],1,1,()=>{te[de]=null}),Me(),M=te[z],M?M.p(T,Z):(M=te[z]=ee[z](T),M.c()),F(M,1),M.m(B,null));const re={};Z&16&&(re.content=T[4].t("Save")),Z&65552&&(re.$$scope={dirty:Z,ctx:T}),m.$set(re)},i(T){N||(F(l.$$.fragment,T),F(I.$$.fragment,T),F(M),F(m.$$.fragment,T),N=!0)},o(T){S(l.$$.fragment,T),S(I.$$.fragment,T),S(M),S(m.$$.fragment,T),N=!1},d(T){T&&(u(e),u(r),u(o)),j(l),j(I),te[z].d(),j(m),C=!1,ut(y)}}}function Kl(s){let e,t,l;function r(n){s[15](n)}let o={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Ul]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new el({props:o}),We.push(()=>Ae(e,"show",r)),{c(){L(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,a){H(e,n,a),l=!0},p(n,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:n}),!t&&a&1&&(t=!0,i.show=n[0],Pe(()=>t=!1)),e.$set(i)},i(n){l||(F(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Ll(s,e,t){let l;const r=_t("i18n");qe(s,r,B=>t(4,l=B));const o=pt();let{show:n=!1}=e,a=l.t("Untitled"),i="",f=!1;const w=()=>{t(0,n=!1)};function b(){a=this.value,t(1,a)}function h(B){i=B,t(2,i)}const $=()=>{t(3,f=!1)},E=B=>{const{text:z,filename:M}=B;t(2,i=`${i}${z} `),t(3,f=!1)};function I(B){f=B,t(3,f)}const G=async()=>{try{let B=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(z){return Q.error(l.t("Permission denied when accessing microphone: {{error}}",{error:z})),null});B&&(t(3,f=!0),B.getTracks().forEach(M=>M.stop())),B=null}catch{Q.error(l.t("Permission denied when accessing microphone"))}},J=()=>{if(a.trim()===""||i.trim()===""){Q.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}o("submit",{name:a,content:i}),t(0,n=!1),t(1,a=""),t(2,i="")};function A(B){n=B,t(0,n)}return s.$$set=B=>{"show"in B&&t(0,n=B.show)},[n,a,i,f,l,r,o,w,b,h,$,E,I,G,J,A]}class Ol extends Ue{constructor(e){super(),Ke(this,e,Ll,Kl,Ve,{show:0})}}function Hl(s){let e,t;return e=new gt({props:{className:"size-5"}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:me,i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function jl(s){var ot,at,it,ct;let e,t,l,r,o,n,a,i,f,w,b,h,$,E,I,G,J,A=s[14].t("Access")+"",B,z,M,V,x,m,N,C,y,R,U,ee,te,ae,T,Z,se,de,re,be,pe,ge,he,Ce,oe,ce,Te,ye,Qe,tt;function ht(k){s[34](k)}function mt(k){s[35](k)}let Ze={allowPublic:((it=(at=(ot=s[15])==null?void 0:ot.permissions)==null?void 0:at.sharing)==null?void 0:it.public_knowledge)||((ct=s[15])==null?void 0:ct.role)==="admin",onChange:s[33],accessRoles:["read","write"]};s[7]!==void 0&&(Ze.show=s[7]),s[0].access_control!==void 0&&(Ze.accessControl=s[0].access_control),e=new cl({props:Ze}),We.push(()=>Ae(e,"show",ht)),We.push(()=>Ae(e,"accessControl",mt)),I=new il({props:{strokeWidth:"2.5",className:"size-3.5"}});const lt=[ql,Rl],Ee=[];function rt(k,Y){return k[3]?0:!k[3]&&k[2]!==null?1:-1}~(C=rt(s))&&(y=Ee[C]=lt[C](s)),se=new fl({}),he=new Bl({}),he.$on("upload",s[50]),he.$on("sync",s[51]);const st=[Ql,Yl],Ie=[];function nt(k,Y){return k[9].length>0?0:1}return oe=nt(s),ce=Ie[oe]=st[oe](s),{c(){L(e.$$.fragment),r=q(),o=_("div"),n=_("div"),a=_("div"),i=_("div"),f=_("div"),w=_("input"),h=q(),$=_("div"),E=_("button"),L(I.$$.fragment),G=q(),J=_("div"),B=we(A),z=q(),M=_("div"),V=_("input"),m=q(),N=_("div"),y&&y.c(),R=q(),U=_("div"),ee=_("div"),te=_("div"),ae=_("div"),T=_("div"),Z=_("div"),L(se.$$.fragment),de=q(),re=_("input"),pe=q(),ge=_("div"),L(he.$$.fragment),Ce=q(),ce.c(),this.h()},l(k){O(e.$$.fragment,k),r=X(k),o=g(k,"DIV",{class:!0});var Y=v(o);n=g(Y,"DIV",{class:!0});var Se=v(n);a=g(Se,"DIV",{class:!0});var De=v(a);i=g(De,"DIV",{class:!0});var Fe=v(i);f=g(Fe,"DIV",{class:!0});var Le=v(f);w=g(Le,"INPUT",{type:!0,class:!0,placeholder:!0}),Le.forEach(u),h=X(Fe),$=g(Fe,"DIV",{class:!0});var Oe=v($);E=g(Oe,"BUTTON",{class:!0,type:!0});var Ne=v(E);O(I.$$.fragment,Ne),G=X(Ne),J=g(Ne,"DIV",{class:!0});var He=v(J);B=$e(He,A),He.forEach(u),Ne.forEach(u),Oe.forEach(u),Fe.forEach(u),z=X(De),M=g(De,"DIV",{class:!0});var je=v(M);V=g(je,"INPUT",{type:!0,class:!0,placeholder:!0}),je.forEach(u),De.forEach(u),Se.forEach(u),Y.forEach(u),m=X(k),N=g(k,"DIV",{class:!0});var xe=v(N);y&&y.l(xe),R=X(xe),U=g(xe,"DIV",{class:!0});var d=v(U);ee=g(d,"DIV",{class:!0});var D=v(ee);te=g(D,"DIV",{class:!0});var P=v(te);ae=g(P,"DIV",{class:!0});var K=v(ae);T=g(K,"DIV",{class:!0});var le=v(T);Z=g(le,"DIV",{class:!0});var fe=v(Z);O(se.$$.fragment,fe),fe.forEach(u),de=X(le),re=g(le,"INPUT",{class:!0,placeholder:!0}),pe=X(le),ge=g(le,"DIV",{});var ue=v(ge);O(he.$$.fragment,ue),ue.forEach(u),le.forEach(u),K.forEach(u),Ce=X(P),ce.l(P),P.forEach(u),D.forEach(u),d.forEach(u),xe.forEach(u),this.h()},h(){var k,Y;c(w,"type","text"),c(w,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(w,"placeholder",b=s[14].t("Knowledge Name")),c(f,"class","w-full"),c(J,"class","text-sm font-medium shrink-0"),c(E,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(E,"type","button"),c($,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(V,"type","text"),c(V,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(V,"placeholder",x=s[14].t("Knowledge Description")),c(M,"class","flex w-full px-1"),c(a,"class","flex-1"),c(n,"class","flex w-full"),c(o,"class","w-full mb-2.5"),c(Z,"class","self-center ml-1 mr-3"),c(re,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(re,"placeholder",be=`${s[14].t("Search Collection")}${(((k=s[0])==null?void 0:k.files)??[]).length?` (${(((Y=s[0])==null?void 0:Y.files)??[]).length})`:""}`),c(T,"class","flex mb-0.5"),c(ae,"class","px-3"),c(te,"class","w-full h-full flex flex-col"),c(ee,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(U,"class",Te=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(N,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(k,Y){H(e,k,Y),W(k,r,Y),W(k,o,Y),p(o,n),p(n,a),p(a,i),p(i,f),p(f,w),ve(w,s[0].name),p(i,h),p(i,$),p($,E),H(I,E,null),p(E,G),p(E,J),p(J,B),p(a,z),p(a,M),p(M,V),ve(V,s[0].description),W(k,m,Y),W(k,N,Y),~C&&Ee[C].m(N,null),p(N,R),p(N,U),p(U,ee),p(ee,te),p(te,ae),p(ae,T),p(T,Z),H(se,Z,null),p(T,de),p(T,re),ve(re,s[1]),p(T,pe),p(T,ge),H(he,ge,null),p(te,Ce),Ie[oe].m(te,null),ye=!0,Qe||(tt=[ie(w,"input",s[36]),ie(w,"input",s[37]),ie(E,"click",s[38]),ie(V,"input",s[39]),ie(V,"input",s[40]),ie(re,"input",s[48]),ie(re,"focus",s[49])],Qe=!0)},p(k,Y){var Le,Oe,Ne,He,je,xe;const Se={};Y[0]&32768&&(Se.allowPublic=((Ne=(Oe=(Le=k[15])==null?void 0:Le.permissions)==null?void 0:Oe.sharing)==null?void 0:Ne.public_knowledge)||((He=k[15])==null?void 0:He.role)==="admin"),!t&&Y[0]&128&&(t=!0,Se.show=k[7],Pe(()=>t=!1)),!l&&Y[0]&1&&(l=!0,Se.accessControl=k[0].access_control,Pe(()=>l=!1)),e.$set(Se),(!ye||Y[0]&16384&&b!==(b=k[14].t("Knowledge Name")))&&c(w,"placeholder",b),Y[0]&1&&w.value!==k[0].name&&ve(w,k[0].name),(!ye||Y[0]&16384)&&A!==(A=k[14].t("Access")+"")&&ke(B,A),(!ye||Y[0]&16384&&x!==(x=k[14].t("Knowledge Description")))&&c(V,"placeholder",x),Y[0]&1&&V.value!==k[0].description&&ve(V,k[0].description);let De=C;C=rt(k),C===De?~C&&Ee[C].p(k,Y):(y&&(Be(),S(Ee[De],1,1,()=>{Ee[De]=null}),Me()),~C?(y=Ee[C],y?y.p(k,Y):(y=Ee[C]=lt[C](k),y.c()),F(y,1),y.m(N,R)):y=null),(!ye||Y[0]&16385&&be!==(be=`${k[14].t("Search Collection")}${(((je=k[0])==null?void 0:je.files)??[]).length?` (${(((xe=k[0])==null?void 0:xe.files)??[]).length})`:""}`))&&c(re,"placeholder",be),Y[0]&2&&re.value!==k[1]&&ve(re,k[1]);let Fe=oe;oe=nt(k),oe===Fe?Ie[oe].p(k,Y):(Be(),S(Ie[Fe],1,1,()=>{Ie[Fe]=null}),Me(),ce=Ie[oe],ce?ce.p(k,Y):(ce=Ie[oe]=st[oe](k),ce.c()),F(ce,1),ce.m(te,null)),(!ye||Y[0]&8&&Te!==(Te=(k[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(U,"class",Te)},i(k){ye||(F(e.$$.fragment,k),F(I.$$.fragment,k),F(y),F(se.$$.fragment,k),F(he.$$.fragment,k),F(ce),ye=!0)},o(k){S(e.$$.fragment,k),S(I.$$.fragment,k),S(y),S(se.$$.fragment,k),S(he.$$.fragment,k),S(ce),ye=!1},d(k){k&&(u(r),u(o),u(m),u(N)),j(e,k),j(I),~C&&Ee[C].d(),j(se),j(he),Ie[oe].d(),Qe=!1,ut(tt)}}}function Rl(s){let e,t;return e=new rl({props:{className:"h-full",show:s[2]!==null,onClose:s[47],$$slots:{default:[Xl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const o={};r[0]&4&&(o.show=l[2]!==null),r[0]&4&&(o.onClose=l[47]),r[0]&27652|r[2]&512&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function ql(s){let e,t,l,r;const o=[Jl,Gl],n=[];function a(i,f){return i[10]?0:1}return t=a(s),l=n[t]=o[t](s),{c(){e=_("div"),l.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var f=v(e);l.l(f),f.forEach(u),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){W(i,e,f),n[t].m(e,null),r=!0},p(i,f){let w=t;t=a(i),t===w?n[t].p(i,f):(Be(),S(n[w],1,1,()=>{n[w]=null}),Me(),l=n[t],l?l.p(i,f):(l=n[t]=o[t](i),l.c()),F(l,1),l.m(e,null))},i(i){r||(F(l),r=!0)},o(i){S(l),r=!1},d(i){i&&u(e),n[t].d()}}}function kt(s){let e,t,l;return t=new gt({}),{c(){e=_("div"),L(t.$$.fragment),this.h()},l(r){e=g(r,"DIV",{class:!0});var o=v(e);O(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","ml-2 self-center")},m(r,o){W(r,e,o),H(t,e,null),l=!0},i(r){l||(F(t.$$.fragment,r),l=!0)},o(r){S(t.$$.fragment,r),l=!1},d(r){r&&u(e),j(t)}}}function bt(s){let e,t,l,r;return{c(){e=_("textarea"),this.h()},l(o){e=g(o,"TEXTAREA",{class:!0,placeholder:!0}),v(e).forEach(u),this.h()},h(){c(e,"class","w-full h-full outline-none resize-none"),c(e,"placeholder",t=s[14].t("Add content here"))},m(o,n){W(o,e,n),ve(e,s[11]),l||(r=ie(e,"input",s[46]),l=!0)},p(o,n){n[0]&16384&&t!==(t=o[14].t("Add content here"))&&c(e,"placeholder",t),n[0]&2048&&ve(e,o[11])},d(o){o&&u(e),l=!1,r()}}}function Xl(s){var N,C;let e,t,l,r,o,n,a,i,f=((C=(N=s[10])==null?void 0:N.meta)==null?void 0:C.name)+"",w,b,h,$,E=s[14].t("Save")+"",I,G,J,A,B=s[10].id,z,M,V;n=new al({props:{strokeWidth:"2.5"}});let x=s[13]&&kt(),m=bt(s);return{c(){e=_("div"),t=_("div"),l=_("div"),r=_("div"),o=_("button"),L(n.$$.fragment),a=q(),i=_("div"),w=we(f),b=q(),h=_("div"),$=_("button"),I=we(E),G=q(),x&&x.c(),J=q(),A=_("div"),m.c(),this.h()},l(y){e=g(y,"DIV",{class:!0});var R=v(e);t=g(R,"DIV",{class:!0});var U=v(t);l=g(U,"DIV",{class:!0});var ee=v(l);r=g(ee,"DIV",{class:!0});var te=v(r);o=g(te,"BUTTON",{class:!0});var ae=v(o);O(n.$$.fragment,ae),ae.forEach(u),te.forEach(u),a=X(ee),i=g(ee,"DIV",{class:!0});var T=v(i);w=$e(T,f),T.forEach(u),b=X(ee),h=g(ee,"DIV",{});var Z=v(h);$=g(Z,"BUTTON",{class:!0});var se=v($);I=$e(se,E),G=X(se),x&&x.l(se),se.forEach(u),Z.forEach(u),ee.forEach(u),J=X(U),A=g(U,"DIV",{class:!0});var de=v(A);m.l(de),de.forEach(u),U.forEach(u),R.forEach(u),this.h()},h(){c(o,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c($,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"),$.disabled=s[13],c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(A,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(y,R){W(y,e,R),p(e,t),p(t,l),p(l,r),p(r,o),H(n,o,null),p(l,a),p(l,i),p(i,w),p(l,b),p(l,h),p(h,$),p($,I),p($,G),x&&x.m($,null),p(t,J),p(t,A),m.m(A,null),z=!0,M||(V=[ie(o,"click",s[44]),ie($,"click",s[45])],M=!0)},p(y,R){var U,ee;(!z||R[0]&1024)&&f!==(f=((ee=(U=y[10])==null?void 0:U.meta)==null?void 0:ee.name)+"")&&ke(w,f),(!z||R[0]&16384)&&E!==(E=y[14].t("Save")+"")&&ke(I,E),y[13]?x?R[0]&8192&&F(x,1):(x=kt(),x.c(),F(x,1),x.m($,null)):x&&(Be(),S(x,1,1,()=>{x=null}),Me()),(!z||R[0]&8192)&&($.disabled=y[13]),R[0]&1024&&Ve(B,B=y[10].id)?(m.d(1),m=bt(y),m.c(),m.m(A,null)):m.p(y,R)},i(y){z||(F(n.$$.fragment,y),F(x),z=!0)},o(y){S(n.$$.fragment,y),S(x),z=!1},d(y){y&&u(e),j(n),x&&x.d(),m.d(y),M=!1,ut(V)}}}function Gl(s){let e,t,l=s[14].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=_("div"),t=_("div"),r=we(l),this.h()},l(o){e=g(o,"DIV",{class:!0});var n=v(e);t=g(n,"DIV",{class:!0});var a=v(t);r=$e(a,l),a.forEach(u),n.forEach(u),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(o,n){W(o,e,n),p(e,t),p(t,r)},p(o,n){n[0]&16384&&l!==(l=o[14].t("Drag and drop a file to upload or select a file to view")+"")&&ke(r,l)},i:me,o:me,d(o){o&&u(e)}}}function Jl(s){var m,N;let e,t,l,r,o,n=s[25]((N=(m=s[10])==null?void 0:m.meta)==null?void 0:N.name)+"",a,i,f,w,b,h=s[14].t("Save")+"",$,E,I,G,J=s[10].id,A,B,z,M=!er,V=s[13]&&yt(),x=Et(s);return{c(){e=_("div"),t=_("div"),l=q(),r=_("div"),o=_("a"),a=we(n),f=q(),w=_("div"),b=_("button"),$=we(h),E=q(),V&&V.c(),I=q(),G=_("div"),x.c(),this.h()},l(C){e=g(C,"DIV",{class:!0});var y=v(e);t=g(y,"DIV",{class:!0});var R=v(t);l=X(R),r=g(R,"DIV",{class:!0});var U=v(r);o=g(U,"A",{class:!0,href:!0,target:!0});var ee=v(o);a=$e(ee,n),ee.forEach(u),U.forEach(u),f=X(R),w=g(R,"DIV",{});var te=v(w);b=g(te,"BUTTON",{class:!0});var ae=v(b);$=$e(ae,h),E=X(ae),V&&V.l(ae),ae.forEach(u),te.forEach(u),R.forEach(u),I=X(y),G=g(y,"DIV",{class:!0});var T=v(G);x.l(T),T.forEach(u),y.forEach(u),this.h()},h(){c(o,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(o,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(o,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(b,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"),b.disabled=s[13],c(t,"class","shrink-0 mb-2 flex items-center"),c(G,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full")},m(C,y){W(C,e,y),p(e,t),p(t,l),p(t,r),p(r,o),p(o,a),p(t,f),p(t,w),p(w,b),p(b,$),p(b,E),V&&V.m(b,null),p(e,I),p(e,G),x.m(G,null),A=!0,B||(z=ie(b,"click",s[42]),B=!0)},p(C,y){var R,U;(!A||y[0]&1024)&&n!==(n=C[25]((U=(R=C[10])==null?void 0:R.meta)==null?void 0:U.name)+"")&&ke(a,n),(!A||y[0]&1024&&i!==(i=C[10].id?`/api/v1/files/${C[10].id}/content`:"#"))&&c(o,"href",i),(!A||y[0]&16384)&&h!==(h=C[14].t("Save")+"")&&ke($,h),C[13]?V?y[0]&8192&&F(V,1):(V=yt(),V.c(),F(V,1),V.m(b,null)):V&&(Be(),S(V,1,1,()=>{V=null}),Me()),(!A||y[0]&8192)&&(b.disabled=C[13]),y[0]&1024&&Ve(J,J=C[10].id)?(x.d(1),x=Et(C),x.c(),x.m(G,null)):x.p(C,y)},i(C){A||(F(M),F(V),A=!0)},o(C){S(M),S(V),A=!1},d(C){C&&u(e),V&&V.d(),x.d(C),B=!1,z()}}}function yt(s){let e,t,l;return t=new gt({}),{c(){e=_("div"),L(t.$$.fragment),this.h()},l(r){e=g(r,"DIV",{class:!0});var o=v(e);O(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","ml-2 self-center")},m(r,o){W(r,e,o),H(t,e,null),l=!0},i(r){l||(F(t.$$.fragment,r),l=!0)},o(r){S(t.$$.fragment,r),l=!1},d(r){r&&u(e),j(t)}}}function Et(s){let e,t,l,r;return{c(){e=_("textarea"),this.h()},l(o){e=g(o,"TEXTAREA",{class:!0,placeholder:!0}),v(e).forEach(u),this.h()},h(){c(e,"class","w-full h-full outline-none resize-none"),c(e,"placeholder",t=s[14].t("Add content here"))},m(o,n){W(o,e,n),ve(e,s[11]),l||(r=ie(e,"input",s[43]),l=!0)},p(o,n){n[0]&16384&&t!==(t=o[14].t("Add content here"))&&c(e,"placeholder",t),n[0]&2048&&ve(e,o[11])},d(o){o&&u(e),l=!1,r()}}}function Yl(s){let e,t,l=s[14].t("No content found")+"",r;return{c(){e=_("div"),t=_("div"),r=we(l),this.h()},l(o){e=g(o,"DIV",{class:!0});var n=v(e);t=g(n,"DIV",{});var a=v(t);r=$e(a,l),a.forEach(u),n.forEach(u),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(o,n){W(o,e,n),p(e,t),p(t,r)},p(o,n){n[0]&16384&&l!==(l=o[14].t("No content found")+"")&&ke(r,l)},i:me,o:me,d(o){o&&u(e)}}}function Ql(s){let e,t,l;return t=new gl({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[52]),t.$on("delete",s[53]),{c(){e=_("div"),L(t.$$.fragment),this.h()},l(r){e=g(r,"DIV",{class:!0});var o=v(e);O(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,o){W(r,e,o),H(t,e,null),l=!0},p(r,o){const n={};o[0]&512&&(n.files=r[9]),o[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(F(t.$$.fragment,r),l=!0)},o(r){S(t.$$.fragment,r),l=!1},d(r){r&&u(e),j(t)}}}function Zl(s){let e,t,l,r,o,n,a,i,f,w,b,h,$,E,I,G;e=new ul({props:{show:s[12]}});function J(m){s[27](m)}let A={message:s[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(A.show=s[6]),l=new ol({props:A}),We.push(()=>Ae(l,"show",J)),l.$on("confirm",s[28]);function B(m){s[29](m)}let z={};s[5]!==void 0&&(z.show=s[5]),n=new Ol({props:z}),We.push(()=>Ae(n,"show",B)),n.$on("submit",s[30]);const M=[jl,Hl],V=[];function x(m,N){return m[4]&&m[0]?0:1}return h=x(s),$=V[h]=M[h](s),{c(){L(e.$$.fragment),t=q(),L(l.$$.fragment),o=q(),L(n.$$.fragment),i=q(),f=_("input"),w=q(),b=_("div"),$.c(),this.h()},l(m){O(e.$$.fragment,m),t=X(m),O(l.$$.fragment,m),o=X(m),O(n.$$.fragment,m),i=X(m),f=g(m,"INPUT",{id:!0,type:!0}),w=X(m),b=g(m,"DIV",{class:!0,id:!0});var N=v(b);$.l(N),N.forEach(u),this.h()},h(){c(f,"id","files-input"),c(f,"type","file"),f.multiple=!0,f.hidden=!0,c(b,"class","flex flex-col w-full h-full translate-y-1"),c(b,"id","collection-container")},m(m,N){H(e,m,N),W(m,t,N),H(l,m,N),W(m,o,N),H(n,m,N),W(m,i,N),W(m,f,N),W(m,w,N),W(m,b,N),V[h].m(b,null),E=!0,I||(G=[ie(f,"change",s[31]),ie(f,"change",s[32])],I=!0)},p(m,N){const C={};N[0]&4096&&(C.show=m[12]),e.$set(C);const y={};N[0]&16384&&(y.message=m[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!r&&N[0]&64&&(r=!0,y.show=m[6],Pe(()=>r=!1)),l.$set(y);const R={};!a&&N[0]&32&&(a=!0,R.show=m[5],Pe(()=>a=!1)),n.$set(R);let U=h;h=x(m),h===U?V[h].p(m,N):(Be(),S(V[U],1,1,()=>{V[U]=null}),Me(),$=V[h],$?$.p(m,N):($=V[h]=M[h](m),$.c()),F($,1),$.m(b,null))},i(m){E||(F(e.$$.fragment,m),F(l.$$.fragment,m),F(n.$$.fragment,m),F($),E=!0)},o(m){S(e.$$.fragment,m),S(l.$$.fragment,m),S(n.$$.fragment,m),S($),E=!1},d(m){m&&(u(t),u(o),u(i),u(f),u(w),u(b)),j(e,m),j(l,m),j(n,m),V[h].d(),I=!1,ut(G)}}}let er=!0;function tr(s,e,t){let l,r,o,n,a;qe(s,Nt,d=>t(57,l=d)),qe(s,xt,d=>t(58,o=d)),qe(s,zt,d=>t(59,n=d)),qe(s,Bt,d=>t(15,a=d));const i=_t("i18n");qe(s,i,d=>t(14,r=d));let f=!0,w,b=null,h=null,$="",E=!1,I=!1,G=!1,J=null,A=[],B=null,z=null,M="",V=new Map,x=null,m=null,N,C=!1,y=!1;const R=(d,D)=>{const P=new Blob([D],{type:"text/plain"}),K=Xt(P,`${d}.txt`);return K},U=async d=>{var K,le,fe,ue,ne,_e,ze,et;const D=Gt(),P={type:"file",file:"",id:null,url:"",name:d.name,size:d.size,status:"uploading",error:"",itemId:D};if(P.size==0)return Q.error(r.t("You cannot upload an empty file.")),null;if((((K=n==null?void 0:n.file)==null?void 0:K.max_size)??null)!==null&&d.size>(((le=n==null?void 0:n.file)==null?void 0:le.max_size)??0)*1024*1024){d.size,(((fe=n==null?void 0:n.file)==null?void 0:fe.max_size)??0)*1024*1024,Q.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(ue=n==null?void 0:n.file)==null?void 0:ue.max_size}));return}t(0,h.files=[...h.files??[],P],h);try{let Xe=null;(d.type.startsWith("audio/")||d.type.startsWith("video/"))&&((_e=(ne=o==null?void 0:o.audio)==null?void 0:ne.stt)!=null&&_e.language)&&(Xe={language:(et=(ze=o==null?void 0:o.audio)==null?void 0:ze.stt)==null?void 0:et.language});const Re=await At(localStorage.token,d,Xe).catch(Ge=>(Q.error(`${Ge}`),null));Re?(Re.error&&(console.warn("File upload warning:",Re.error),Q.warning(Re.error)),t(0,h.files=h.files.map(Ge=>(Ge.itemId===D&&(Ge.id=Re.id),delete Ge.itemId,Ge)),h),await de(Re.id)):Q.error(r.t("Failed to upload file."))}catch(Xe){Q.error(`${Xe}`)}},ee=async()=>{const d="showDirectoryPicker"in window;try{d?await ae():await T()}catch(D){Z(D)}},te=d=>d.split("/").some(D=>D.startsWith(".")),ae=async()=>{const d=await window.showDirectoryPicker();let D=0,P=0;const K=()=>{const ue=P/D*100;Q.info(r.t("Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)",{uploadedFiles:P,totalFiles:D,percentage:ue.toFixed(2)}))};async function le(ue){for await(const ne of ue.values())ne.name.startsWith(".")||(ne.kind==="file"?D++:ne.kind==="directory"&&(ne.name.startsWith(".")||await le(ne)))}async function fe(ue,ne=""){for await(const _e of ue.values()){if(_e.name.startsWith("."))continue;const ze=ne?`${ne}/${_e.name}`:_e.name;if(!te(ze))if(_e.kind==="file"){const et=await _e.getFile(),Xe=new File([et],ze,{type:et.type});await U(Xe),P++,K()}else _e.kind==="directory"&&(_e.name.startsWith(".")||await fe(_e,ze))}}await le(d),K(),D>0&&await fe(d)},T=async()=>new Promise((d,D)=>{const P=document.createElement("input");P.type="file",P.webkitdirectory=!0,P.directory=!0,P.multiple=!0,P.style.display="none",document.body.appendChild(P),P.onchange=async()=>{try{const K=Array.from(P.files).filter(ne=>!te(ne.webkitRelativePath));let le=K.length,fe=0;const ue=()=>{const ne=fe/le*100;Q.info(r.t("Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)",{uploadedFiles:fe,totalFiles:le,percentage:ne.toFixed(2)}))};ue();for(const ne of K)if(!ne.name.startsWith(".")){const _e=ne.webkitRelativePath||ne.name,ze=new File([ne],_e,{type:ne.type});await U(ze),fe++,ue()}document.body.removeChild(P),d()}catch(K){D(K)}},P.onerror=K=>{document.body.removeChild(P),D(K)},P.click()}),Z=d=>{d.name==="AbortError"?Q.info(r.t("Directory selection was cancelled")):Q.error(r.t("Error accessing directory"))},se=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const d=await Lt(localStorage.token,b).catch(D=>{Q.error(`${D}`)});d&&(t(0,h=d),Q.success(r.t("Knowledge reset successfully.")),ee())}else ee()},de=async d=>{const D=await Ot(localStorage.token,b,d).catch(P=>(Q.error(`${P}`),null));D?(t(0,h=D),Q.success(r.t("File added successfully."))):(Q.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(P=>P.id!==d),h))},re=async d=>{try{const D=await Ht(localStorage.token,b,d);D&&(t(0,h=D),Q.success(r.t("File removed successfully.")))}catch(D){Q.error(`${D}`)}},be=async()=>{if(!y){t(13,y=!0);try{const d=B.id,D=M;V.delete(d);const P=await Pt(localStorage.token,d,D).catch(le=>{Q.error(`${le}`)}),K=await jt(localStorage.token,b,d).catch(le=>{Q.error(`${le}`)});P&&K&&(t(0,h=K),Q.success(r.t("File content updated successfully.")))}finally{t(13,y=!1)}}},pe=()=>{m&&clearTimeout(m),m=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){Q.error(r.t("Please fill in all fields."));return}await Rt(localStorage.token,b,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(D=>{Q.error(`${D}`)})&&(Q.success(r.t("Knowledge updated successfully")),Mt.set(await qt(localStorage.token)))},1e3)},ge=async d=>{d.matches?t(3,f=!0):t(3,f=!1)},he=async d=>{try{if(t(10,B=d),V.has(d.id)){t(11,M=V.get(d.id));return}const D=await Ut(localStorage.token,d.id);D?(t(11,M=D.data.content),V.set(d.id,D.data.content)):Q.error(r.t("No content found in file."))}catch{Q.error(r.t("Failed to load file content."))}},Ce=d=>{var D,P;d.preventDefault(),(P=(D=d.dataTransfer)==null?void 0:D.types)!=null&&P.includes("Files")?t(12,C=!0):t(12,C=!1)},oe=()=>{t(12,C=!1)},ce=async d=>{var D,P,K,le;if(d.preventDefault(),t(12,C=!1),(P=(D=d.dataTransfer)==null?void 0:D.types)!=null&&P.includes("Files")&&(K=d.dataTransfer)!=null&&K.files){const fe=(le=d.dataTransfer)==null?void 0:le.files;if(fe&&fe.length>0)for(const ue of fe)await U(ue);else Q.error(r.t("File not found."))}};Vt(async()=>{N=window.matchMedia("(min-width: 1024px)"),N.addEventListener("change",ge),ge(N);const d=document.getElementById("collection-container");f&&Math.floor(300/d.clientWidth*100),new ResizeObserver(le=>{for(let fe of le)fe.contentRect.width}).observe(d),t(4,b=l.params.id);const P=await Kt(localStorage.token,b).catch(le=>(Q.error(`${le}`),null));P?t(0,h=P):St("/workspace/knowledge");const K=document.querySelector("body");K==null||K.addEventListener("dragover",Ce),K==null||K.addEventListener("drop",ce),K==null||K.addEventListener("dragleave",oe)}),Ct(()=>{N==null||N.removeEventListener("change",ge);const d=document.querySelector("body");d==null||d.removeEventListener("dragover",Ce),d==null||d.removeEventListener("drop",ce),d==null||d.removeEventListener("dragleave",oe)});const Te=d=>{try{return decodeURIComponent(d)}catch{return d}};function ye(d){I=d,t(6,I)}const Qe=()=>{se()};function tt(d){E=d,t(5,E)}const ht=d=>{const D=R(d.detail.name,d.detail.content);U(D)};function mt(){J=this.files,t(8,J)}const Ze=async()=>{if(J&&J.length>0){for(const D of J)await U(D);t(8,J=null);const d=document.getElementById("files-input");d&&(d.value="")}else Q.error(r.t("File not found."))},lt=()=>{pe()};function Ee(d){G=d,t(7,G)}function rt(d){s.$$.not_equal(h.access_control,d)&&(h.access_control=d,t(0,h))}function st(){h.name=this.value,t(0,h)}const Ie=()=>{pe()},nt=()=>{t(7,G=!0)};function ot(){h.description=this.value,t(0,h)}const at=()=>{pe()},it=()=>{w.expand()},ct=()=>{be()};function k(){M=this.value,t(11,M)}const Y=()=>{t(2,z=null)},Se=()=>{be()};function De(){M=this.value,t(11,M)}const Fe=()=>{t(2,z=null)};function Le(){$=this.value,t(1,$)}const Oe=()=>{t(2,z=null)},Ne=d=>{d.detail.type==="directory"?ee():d.detail.type==="text"?t(5,E=!0):document.getElementById("files-input").click()},He=d=>{t(6,I=!0)},je=d=>{t(2,z=z===d.detail?null:d.detail)},xe=d=>{d.detail,t(2,z=null),re(d.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(26,x=new Tt(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&67108867&&x&&t(9,A=$?x.search($).map(d=>d.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(z){const d=((h==null?void 0:h.files)??[]).find(D=>D.id===z);d?he(d):t(10,B=null)}else t(10,B=null)},[h,$,z,f,b,E,I,G,J,A,B,M,C,y,r,a,i,w,R,U,ee,se,re,be,pe,Te,x,ye,Qe,tt,ht,mt,Ze,lt,Ee,rt,st,Ie,nt,ot,at,it,ct,k,Y,Se,De,Fe,Le,Oe,Ne,He,je,xe]}class lr extends Ue{constructor(e){super(),Ke(this,e,tr,Zl,Ve,{},null,[-1,-1,-1])}}function rr(s){let e,t;return e=new lr({}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:me,i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}class zr extends Ue{constructor(e){super(),Ke(this,e,null,rr,Ve,{})}}export{zr as component};
//# sourceMappingURL=31.C3kUkuwi.js.map
