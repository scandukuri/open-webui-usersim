import{S as b,i as M,s as k,m as w,g as E,r as d,u as D,q as f,d as C,k as l,v as N,w as P,C as q,D as A,E as B,F,y as J,n as L}from"../chunks/BsAB9Z30.js";import"../chunks/IHki7fMi.js";import{t as m}from"../chunks/DQjSdZ1e.js";import{g as O}from"../chunks/BYfvXhfD.js";import{a as U,c as v,d as y,g as R}from"../chunks/Px_ajtSr.js";import{c as W}from"../chunks/Dxoa3EGp.js";import{g as j}from"../chunks/DxN4CUV8.js";import{M as x}from"../chunks/CNGHWJvh.js";function h(n){let a,s;return a=new x({props:{model:n[0],onSubmit:n[2]}}),{c(){q(a.$$.fragment)},l(e){A(a.$$.fragment,e)},m(e,t){B(a,e,t),s=!0},p(e,t){const o={};t&1&&(o.model=e[0]),a.$set(o)},i(e){s||(f(a.$$.fragment,e),s=!0)},o(e){d(a.$$.fragment,e),s=!1},d(e){F(a,e)}}}function z(n){let a=n[0],s,e,t=h(n);return{c(){t.c(),s=w()},l(o){t.l(o),s=w()},m(o,c){t.m(o,c),E(o,s,c),e=!0},p(o,[c]){c&1&&k(a,a=o[0])?(J(),d(t,1,1,L),D(),t=h(o),t.c(),f(t,1),t.m(s.parentNode,s)):t.p(o,c)},i(o){e||(f(t),e=!0)},o(o){d(t),e=!1},d(o){o&&C(s),t.d(o)}}}function G(n,a,s){let e,t,o,c;l(n,U,r=>s(4,t=r)),l(n,v,r=>s(5,o=r)),l(n,y,r=>s(6,c=r));const g=N("i18n");l(n,g,r=>s(3,e=r));const S=async r=>{var i;if(c.find(_=>_.id===r.id)){m.error(e.t("Error: A model with the ID '{{modelId}}' already exists. Please select a different ID to proceed.",{modelId:r.id}));return}if(r.id===""){m.error(e.t("Error: Model ID cannot be empty. Please enter a valid ID to proceed."));return}r&&await W(localStorage.token,{...r,meta:{...r.meta,profile_image_url:r.meta.profile_image_url??`${R}/static/favicon.png`,suggestion_prompts:r.meta.suggestion_prompts?r.meta.suggestion_prompts.filter(u=>u.content!==""):null},params:{...r.params}}).catch(u=>(m.error(`${u}`),null))&&(await y.set(await j(localStorage.token,((i=o==null?void 0:o.features)==null?void 0:i.enable_direct_connections)&&((t==null?void 0:t.directConnections)??null))),m.success(e.t("Model created successfully!")),await O("/workspace/models"))};let p=null;return P(async()=>{window.addEventListener("message",async r=>{if(["https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(r.origin))try{let i=JSON.parse(r.data);i!=null&&i.info&&(i=i.info),s(0,p=i)}catch(i){}}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.model&&(s(0,p=JSON.parse(sessionStorage.model)),sessionStorage.removeItem("model"))}),[p,g,S]}class I extends b{constructor(a){super(),M(this,a,G,z,k,{})}}export{I as component};
//# sourceMappingURL=34.CdgrLoqu.js.map
