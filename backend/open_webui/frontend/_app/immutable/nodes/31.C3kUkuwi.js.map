{"version":3,"file":"31.C3kUkuwi.js","sources":["../../../../../../src/lib/components/icons/ArrowUpCircle.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/Files.svelte","../../../../../../src/lib/components/icons/BarsArrowUp.svelte","../../../../../../src/lib/components/icons/ArrowPath.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/AddContentMenu.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/AddTextContentModal.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\n\texport let selectedFileId = null;\n\texport let files = [];\n\n\texport let small = false;\n</script>\n\n<div class=\" max-h-full flex flex-col w-full\">\n\t{#each files as file}\n\t\t<div class=\"mt-1 px-2\">\n\t\t\t<FileItem\n\t\t\t\tclassName=\"w-full\"\n\t\t\t\tcolorClassName=\"{selectedFileId === file.id\n\t\t\t\t\t? ' bg-gray-50 dark:bg-gray-850'\n\t\t\t\t\t: 'bg-transparent'} hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t{small}\n\t\t\t\titem={file}\n\t\t\t\tname={file?.name ?? file?.meta?.name}\n\t\t\t\ttype=\"file\"\n\t\t\t\tsize={file?.size ?? file?.meta?.size ?? ''}\n\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\tdismissible\n\t\t\t\ton:click={() => {\n\t\t\t\t\tif (file.status === 'uploading') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdispatch('click', file.id);\n\t\t\t\t}}\n\t\t\t\ton:dismiss={() => {\n\t\t\t\t\tif (file.status === 'uploading') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdispatch('delete', file.id);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t{/each}\n</div>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport ArrowUpCircle from '$lib/components/icons/ArrowUpCircle.svelte';\n\timport BarsArrowUp from '$lib/components/icons/BarsArrowUp.svelte';\n\timport FolderOpen from '$lib/components/icons/FolderOpen.svelte';\n\timport ArrowPath from '$lib/components/icons/ArrowPath.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n\talign=\"end\"\n>\n\t<Tooltip content={$i18n.t('Add Content')}>\n\t\t<button\n\t\t\tclass=\" p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1\"\n\t\t\ton:click={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tshow = true;\n\t\t\t}}\n\t\t>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</button>\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm\"\n\t\t\tsideOffset={4}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"end\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('upload', { type: 'files' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<ArrowUpCircle strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload files')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('upload', { type: 'directory' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<FolderOpen strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload directory')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<Tooltip\n\t\t\t\tcontent={$i18n.t(\n\t\t\t\t\t'This option will delete all existing files in the collection and replace them with newly uploaded files.'\n\t\t\t\t)}\n\t\t\t\tclassName=\"w-full\"\n\t\t\t>\n\t\t\t\t<DropdownMenu.Item\n\t\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tdispatch('sync', { type: 'directory' });\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ArrowPath strokeWidth=\"2\" />\n\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Sync directory')}</div>\n\t\t\t\t</DropdownMenu.Item>\n\t\t\t</Tooltip>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('upload', { type: 'text' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<BarsArrowUp strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Add text content')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport dayjs from 'dayjs';\n\n\timport { onMount, getContext, createEventDispatcher } from 'svelte';\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport RichTextInput from '$lib/components/common/RichTextInput.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport MicSolid from '$lib/components/icons/MicSolid.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport VoiceRecording from '$lib/components/chat/MessageInput/VoiceRecording.svelte';\n\texport let show = false;\n\n\tlet name = $i18n.t('Untitled');\n\tlet content = '';\n\n\tlet voiceInput = false;\n</script>\n\n<Modal size=\"full\" containerClassName=\"\" className=\"h-full bg-white dark:bg-gray-900\" bind:show>\n\t<div class=\"absolute top-0 right-0 p-5\">\n\t\t<button\n\t\t\tclass=\"self-center dark:text-white\"\n\t\t\ttype=\"button\"\n\t\t\ton:click={() => {\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t<XMark className=\"size-3.5\" />\n\t\t</button>\n\t</div>\n\t<div class=\"flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200\">\n\t\t<form\n\t\t\tclass=\"flex flex-col w-full h-full\"\n\t\t\ton:submit|preventDefault={() => {\n\t\t\t\tif (name.trim() === '' || content.trim() === '') {\n\t\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\n\t\t\t\t\tname = name.trim();\n\t\t\t\t\tcontent = content.trim();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdispatch('submit', {\n\t\t\t\t\tname,\n\t\t\t\t\tcontent\n\t\t\t\t});\n\t\t\t\tshow = false;\n\t\t\t\tname = '';\n\t\t\t\tcontent = '';\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\" flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4\">\n\t\t\t\t<div class=\" max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2\">\n\t\t\t\t\t<div class=\"shrink-0 w-full flex justify-between items-center\">\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\"w-full text-3xl font-semibold bg-transparent outline-hidden\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tbind:value={name}\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Title')}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" flex-1 w-full h-full\">\n\t\t\t\t\t\t<RichTextInput\n\t\t\t\t\t\t\tbind:value={content}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Write something...')}\n\t\t\t\t\t\t\tpreserveBreaks={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5\"\n\t\t\t>\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t{#if voiceInput}\n\t\t\t\t\t\t<div class=\" max-w-full w-full\">\n\t\t\t\t\t\t\t<VoiceRecording\n\t\t\t\t\t\t\t\tbind:recording={voiceInput}\n\t\t\t\t\t\t\t\tclassName=\"p-1\"\n\t\t\t\t\t\t\t\tonCancel={() => {\n\t\t\t\t\t\t\t\t\tvoiceInput = false;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonConfirm={(data) => {\n\t\t\t\t\t\t\t\t\tconst { text, filename } = data;\n\t\t\t\t\t\t\t\t\tcontent = `${content}${text} `;\n\n\t\t\t\t\t\t\t\t\tvoiceInput = false;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Voice Input')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\" p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\n\t\t\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\n\t\t\t\t\t\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tif (stream) {\n\t\t\t\t\t\t\t\t\t\t\tvoiceInput = true;\n\t\t\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\n\t\t\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tstream = null;\n\t\t\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MicSolid className=\"size-5\" />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" shrink-0\">\n\t\t\t\t\t<Tooltip content={$i18n.t('Save')}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\" px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</Modal>\n\n<style>\n\tinput::-webkit-outer-spin-button,\n\tinput::-webkit-inner-spin-button {\n\t\t/* display: none; <- Crashes Chrome on hover */\n\t\t-webkit-appearance: none;\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\n\t}\n\n\t.tabs::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.tabs {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n\n\tinput[type='number'] {\n\t\t-moz-appearance: textfield; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Fuse from 'fuse.js';\n\timport { toast } from 'svelte-sonner';\n\timport { v4 as uuidv4 } from 'uuid';\n\timport { PaneGroup, Pane, PaneResizer } from 'paneforge';\n\n\timport { onMount, getContext, onDestroy, tick } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { goto } from '$app/navigation';\n\timport { page } from '$app/stores';\n\timport {\n\t\tmobile,\n\t\tshowSidebar,\n\t\tknowledge as _knowledge,\n\t\tconfig,\n\t\tuser,\n\t\tsettings\n\t} from '$lib/stores';\n\n\timport {\n\t\tupdateFileDataContentById,\n\t\tuploadFile,\n\t\tdeleteFileById,\n\t\tgetFileById\n\t} from '$lib/apis/files';\n\timport {\n\t\taddFileToKnowledgeById,\n\t\tgetKnowledgeById,\n\t\tgetKnowledgeBases,\n\t\tremoveFileFromKnowledgeById,\n\t\tresetKnowledgeById,\n\t\tupdateFileFromKnowledgeById,\n\t\tupdateKnowledgeById\n\t} from '$lib/apis/knowledge';\n\timport { blobToFile } from '$lib/utils';\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Files from './KnowledgeBase/Files.svelte';\n\timport AddFilesPlaceholder from '$lib/components/AddFilesPlaceholder.svelte';\n\n\timport AddContentMenu from './KnowledgeBase/AddContentMenu.svelte';\n\timport AddTextContentModal from './KnowledgeBase/AddTextContentModal.svelte';\n\n\timport SyncConfirmDialog from '../../common/ConfirmDialog.svelte';\n\timport RichTextInput from '$lib/components/common/RichTextInput.svelte';\n\timport EllipsisVertical from '$lib/components/icons/EllipsisVertical.svelte';\n\timport Drawer from '$lib/components/common/Drawer.svelte';\n\timport ChevronLeft from '$lib/components/icons/ChevronLeft.svelte';\n\timport LockClosed from '$lib/components/icons/LockClosed.svelte';\n\timport AccessControlModal from '../common/AccessControlModal.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\timport FilesOverlay from '$lib/components/chat/MessageInput/FilesOverlay.svelte';\n\n\tlet largeScreen = true;\n\n\tlet pane;\n\tlet showSidepanel = true;\n\tlet minSize = 0;\n\n\ttype Knowledge = {\n\t\tid: string;\n\t\tname: string;\n\t\tdescription: string;\n\t\tdata: {\n\t\t\tfile_ids: string[];\n\t\t};\n\t\tfiles: any[];\n\t};\n\n\tlet id = null;\n\tlet knowledge: Knowledge | null = null;\n\tlet query = '';\n\n\tlet showAddTextContentModal = false;\n\tlet showSyncConfirmModal = false;\n\tlet showAccessControlModal = false;\n\n\tlet inputFiles = null;\n\n\tlet filteredItems = [];\n\t$: if (knowledge && knowledge.files) {\n\t\tfuse = new Fuse(knowledge.files, {\n\t\t\tkeys: ['meta.name', 'meta.description']\n\t\t});\n\t}\n\n\t$: if (fuse) {\n\t\tfilteredItems = query\n\t\t\t? fuse.search(query).map((e) => {\n\t\t\t\t\treturn e.item;\n\t\t\t\t})\n\t\t\t: (knowledge?.files ?? []);\n\t}\n\n\tlet selectedFile = null;\n\tlet selectedFileId = null;\n\tlet selectedFileContent = '';\n\n\t// Add cache object\n\tlet fileContentCache = new Map();\n\n\t$: if (selectedFileId) {\n\t\tconst file = (knowledge?.files ?? []).find((file) => file.id === selectedFileId);\n\t\tif (file) {\n\t\t\tfileSelectHandler(file);\n\t\t} else {\n\t\t\tselectedFile = null;\n\t\t}\n\t} else {\n\t\tselectedFile = null;\n\t}\n\n\tlet fuse = null;\n\tlet debounceTimeout = null;\n\tlet mediaQuery;\n\tlet dragged = false;\n\tlet isSaving = false;\n\n\tconst createFileFromText = (name, content) => {\n\t\tconst blob = new Blob([content], { type: 'text/plain' });\n\t\tconst file = blobToFile(blob, `${name}.txt`);\n\n\t\tconsole.log(file);\n\t\treturn file;\n\t};\n\n\tconst uploadFileHandler = async (file) => {\n\t\tconsole.log(file);\n\n\t\tconst tempItemId = uuidv4();\n\t\tconst fileItem = {\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: '',\n\t\t\tname: file.name,\n\t\t\tsize: file.size,\n\t\t\tstatus: 'uploading',\n\t\t\terror: '',\n\t\t\titemId: tempItemId\n\t\t};\n\n\t\tif (fileItem.size == 0) {\n\t\t\ttoast.error($i18n.t('You cannot upload an empty file.'));\n\t\t\treturn null;\n\t\t}\n\n\t\tif (\n\t\t\t($config?.file?.max_size ?? null) !== null &&\n\t\t\tfile.size > ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t) {\n\t\t\tconsole.log('File exceeds max size limit:', {\n\t\t\t\tfileSize: file.size,\n\t\t\t\tmaxSize: ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t});\n\t\t\ttoast.error(\n\t\t\t\t$i18n.t(`File size should not exceed {{maxSize}} MB.`, {\n\t\t\t\t\tmaxSize: $config?.file?.max_size\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tknowledge.files = [...(knowledge.files ?? []), fileItem];\n\n\t\ttry {\n\t\t\t// If the file is an audio file, provide the language for STT.\n\t\t\tlet metadata = null;\n\t\t\tif (\n\t\t\t\t(file.type.startsWith('audio/') || file.type.startsWith('video/')) &&\n\t\t\t\t$settings?.audio?.stt?.language\n\t\t\t) {\n\t\t\t\tmetadata = {\n\t\t\t\t\tlanguage: $settings?.audio?.stt?.language\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file, metadata).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (uploadedFile) {\n\t\t\t\tconsole.log(uploadedFile);\n\n\t\t\t\tif (uploadedFile.error) {\n\t\t\t\t\tconsole.warn('File upload warning:', uploadedFile.error);\n\t\t\t\t\ttoast.warning(uploadedFile.error);\n\t\t\t\t}\n\n\t\t\t\tknowledge.files = knowledge.files.map((item) => {\n\t\t\t\t\tif (item.itemId === tempItemId) {\n\t\t\t\t\t\titem.id = uploadedFile.id;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove temporary item id\n\t\t\t\t\tdelete item.itemId;\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tawait addFileHandler(uploadedFile.id);\n\t\t\t} else {\n\t\t\t\ttoast.error($i18n.t('Failed to upload file.'));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(`${e}`);\n\t\t}\n\t};\n\n\tconst uploadDirectoryHandler = async () => {\n\t\t// Check if File System Access API is supported\n\t\tconst isFileSystemAccessSupported = 'showDirectoryPicker' in window;\n\n\t\ttry {\n\t\t\tif (isFileSystemAccessSupported) {\n\t\t\t\t// Modern browsers (Chrome, Edge) implementation\n\t\t\t\tawait handleModernBrowserUpload();\n\t\t\t} else {\n\t\t\t\t// Firefox fallback\n\t\t\t\tawait handleFirefoxUpload();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\thandleUploadError(error);\n\t\t}\n\t};\n\n\t// Helper function to check if a path contains hidden folders\n\tconst hasHiddenFolder = (path) => {\n\t\treturn path.split('/').some((part) => part.startsWith('.'));\n\t};\n\n\t// Modern browsers implementation using File System Access API\n\tconst handleModernBrowserUpload = async () => {\n\t\tconst dirHandle = await window.showDirectoryPicker();\n\t\tlet totalFiles = 0;\n\t\tlet uploadedFiles = 0;\n\n\t\t// Function to update the UI with the progress\n\t\tconst updateProgress = () => {\n\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\n\t\t\ttoast.info(\n\t\t\t\t$i18n.t('Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)', {\n\t\t\t\t\tuploadedFiles: uploadedFiles,\n\t\t\t\t\ttotalFiles: totalFiles,\n\t\t\t\t\tpercentage: percentage.toFixed(2)\n\t\t\t\t})\n\t\t\t);\n\t\t};\n\n\t\t// Recursive function to count all files excluding hidden ones\n\t\tasync function countFiles(dirHandle) {\n\t\t\tfor await (const entry of dirHandle.values()) {\n\t\t\t\t// Skip hidden files and directories\n\t\t\t\tif (entry.name.startsWith('.')) continue;\n\n\t\t\t\tif (entry.kind === 'file') {\n\t\t\t\t\ttotalFiles++;\n\t\t\t\t} else if (entry.kind === 'directory') {\n\t\t\t\t\t// Only process non-hidden directories\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\n\t\t\t\t\t\tawait countFiles(entry);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Recursive function to process directories excluding hidden files and folders\n\t\tasync function processDirectory(dirHandle, path = '') {\n\t\t\tfor await (const entry of dirHandle.values()) {\n\t\t\t\t// Skip hidden files and directories\n\t\t\t\tif (entry.name.startsWith('.')) continue;\n\n\t\t\t\tconst entryPath = path ? `${path}/${entry.name}` : entry.name;\n\n\t\t\t\t// Skip if the path contains any hidden folders\n\t\t\t\tif (hasHiddenFolder(entryPath)) continue;\n\n\t\t\t\tif (entry.kind === 'file') {\n\t\t\t\t\tconst file = await entry.getFile();\n\t\t\t\t\tconst fileWithPath = new File([file], entryPath, { type: file.type });\n\n\t\t\t\t\tawait uploadFileHandler(fileWithPath);\n\t\t\t\t\tuploadedFiles++;\n\t\t\t\t\tupdateProgress();\n\t\t\t\t} else if (entry.kind === 'directory') {\n\t\t\t\t\t// Only process non-hidden directories\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\n\t\t\t\t\t\tawait processDirectory(entry, entryPath);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tawait countFiles(dirHandle);\n\t\tupdateProgress();\n\n\t\tif (totalFiles > 0) {\n\t\t\tawait processDirectory(dirHandle);\n\t\t} else {\n\t\t\tconsole.log('No files to upload.');\n\t\t}\n\t};\n\n\t// Firefox fallback implementation using traditional file input\n\tconst handleFirefoxUpload = async () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// Create hidden file input\n\t\t\tconst input = document.createElement('input');\n\t\t\tinput.type = 'file';\n\t\t\tinput.webkitdirectory = true;\n\t\t\tinput.directory = true;\n\t\t\tinput.multiple = true;\n\t\t\tinput.style.display = 'none';\n\n\t\t\t// Add input to DOM temporarily\n\t\t\tdocument.body.appendChild(input);\n\n\t\t\tinput.onchange = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst files = Array.from(input.files)\n\t\t\t\t\t\t// Filter out files from hidden folders\n\t\t\t\t\t\t.filter((file) => !hasHiddenFolder(file.webkitRelativePath));\n\n\t\t\t\t\tlet totalFiles = files.length;\n\t\t\t\t\tlet uploadedFiles = 0;\n\n\t\t\t\t\t// Function to update the UI with the progress\n\t\t\t\t\tconst updateProgress = () => {\n\t\t\t\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\n\t\t\t\t\t\ttoast.info(\n\t\t\t\t\t\t\t$i18n.t('Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)', {\n\t\t\t\t\t\t\t\tuploadedFiles: uploadedFiles,\n\t\t\t\t\t\t\t\ttotalFiles: totalFiles,\n\t\t\t\t\t\t\t\tpercentage: percentage.toFixed(2)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tupdateProgress();\n\n\t\t\t\t\t// Process all files\n\t\t\t\t\tfor (const file of files) {\n\t\t\t\t\t\t// Skip hidden files (additional check)\n\t\t\t\t\t\tif (!file.name.startsWith('.')) {\n\t\t\t\t\t\t\tconst relativePath = file.webkitRelativePath || file.name;\n\t\t\t\t\t\t\tconst fileWithPath = new File([file], relativePath, { type: file.type });\n\n\t\t\t\t\t\t\tawait uploadFileHandler(fileWithPath);\n\t\t\t\t\t\t\tuploadedFiles++;\n\t\t\t\t\t\t\tupdateProgress();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clean up\n\t\t\t\t\tdocument.body.removeChild(input);\n\t\t\t\t\tresolve();\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tinput.onerror = (error) => {\n\t\t\t\tdocument.body.removeChild(input);\n\t\t\t\treject(error);\n\t\t\t};\n\n\t\t\t// Trigger file picker\n\t\t\tinput.click();\n\t\t});\n\t};\n\n\t// Error handler\n\tconst handleUploadError = (error) => {\n\t\tif (error.name === 'AbortError') {\n\t\t\ttoast.info($i18n.t('Directory selection was cancelled'));\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Error accessing directory'));\n\t\t\tconsole.error('Directory access error:', error);\n\t\t}\n\t};\n\n\t// Helper function to maintain file paths within zip\n\tconst syncDirectoryHandler = async () => {\n\t\tif ((knowledge?.files ?? []).length > 0) {\n\t\t\tconst res = await resetKnowledgeById(localStorage.token, id).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\tknowledge = res;\n\t\t\t\ttoast.success($i18n.t('Knowledge reset successfully.'));\n\n\t\t\t\t// Upload directory\n\t\t\t\tuploadDirectoryHandler();\n\t\t\t}\n\t\t} else {\n\t\t\tuploadDirectoryHandler();\n\t\t}\n\t};\n\n\tconst addFileHandler = async (fileId) => {\n\t\tconst updatedKnowledge = await addFileToKnowledgeById(localStorage.token, id, fileId).catch(\n\t\t\t(e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\n\t\tif (updatedKnowledge) {\n\t\t\tknowledge = updatedKnowledge;\n\t\t\ttoast.success($i18n.t('File added successfully.'));\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Failed to add file.'));\n\t\t\tknowledge.files = knowledge.files.filter((file) => file.id !== fileId);\n\t\t}\n\t};\n\n\tconst deleteFileHandler = async (fileId) => {\n\t\ttry {\n\t\t\tconsole.log('Starting file deletion process for:', fileId);\n\n\t\t\t// Remove from knowledge base only\n\t\t\tconst updatedKnowledge = await removeFileFromKnowledgeById(localStorage.token, id, fileId);\n\n\t\t\tconsole.log('Knowledge base updated:', updatedKnowledge);\n\n\t\t\tif (updatedKnowledge) {\n\t\t\t\tknowledge = updatedKnowledge;\n\t\t\t\ttoast.success($i18n.t('File removed successfully.'));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Error in deleteFileHandler:', e);\n\t\t\ttoast.error(`${e}`);\n\t\t}\n\t};\n\n\tconst updateFileContentHandler = async () => {\n\t\tif (isSaving) {\n\t\t\tconsole.log('Save operation already in progress, skipping...');\n\t\t\treturn;\n\t\t}\n\t\tisSaving = true;\n\t\ttry {\n\t\t\tconst fileId = selectedFile.id;\n\t\t\tconst content = selectedFileContent;\n\t\t\t// Clear the cache for this file since we're updating it\n\t\t\tfileContentCache.delete(fileId);\n\t\t\tconst res = await updateFileDataContentById(localStorage.token, fileId, content).catch(\n\t\t\t\t(e) => {\n\t\t\t\t\ttoast.error(`${e}`);\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst updatedKnowledge = await updateFileFromKnowledgeById(\n\t\t\t\tlocalStorage.token,\n\t\t\t\tid,\n\t\t\t\tfileId\n\t\t\t).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t});\n\t\t\tif (res && updatedKnowledge) {\n\t\t\t\tknowledge = updatedKnowledge;\n\t\t\t\ttoast.success($i18n.t('File content updated successfully.'));\n\t\t\t}\n\t\t} finally {\n\t\t\tisSaving = false;\n\t\t}\n\t};\n\n\tconst changeDebounceHandler = () => {\n\t\tconsole.log('debounce');\n\t\tif (debounceTimeout) {\n\t\t\tclearTimeout(debounceTimeout);\n\t\t}\n\n\t\tdebounceTimeout = setTimeout(async () => {\n\t\t\tif (knowledge.name.trim() === '' || knowledge.description.trim() === '') {\n\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst res = await updateKnowledgeById(localStorage.token, id, {\n\t\t\t\t...knowledge,\n\t\t\t\tname: knowledge.name,\n\t\t\t\tdescription: knowledge.description,\n\t\t\t\taccess_control: knowledge.access_control\n\t\t\t}).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\ttoast.success($i18n.t('Knowledge updated successfully'));\n\t\t\t\t_knowledge.set(await getKnowledgeBases(localStorage.token));\n\t\t\t}\n\t\t}, 1000);\n\t};\n\n\tconst handleMediaQuery = async (e) => {\n\t\tif (e.matches) {\n\t\t\tlargeScreen = true;\n\t\t} else {\n\t\t\tlargeScreen = false;\n\t\t}\n\t};\n\n\tconst fileSelectHandler = async (file) => {\n\t\ttry {\n\t\t\tselectedFile = file;\n\n\t\t\t// Check cache first\n\t\t\tif (fileContentCache.has(file.id)) {\n\t\t\t\tselectedFileContent = fileContentCache.get(file.id);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst response = await getFileById(localStorage.token, file.id);\n\t\t\tif (response) {\n\t\t\t\tselectedFileContent = response.data.content;\n\t\t\t\t// Cache the content\n\t\t\t\tfileContentCache.set(file.id, response.data.content);\n\t\t\t} else {\n\t\t\t\ttoast.error($i18n.t('No content found in file.'));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error($i18n.t('Failed to load file content.'));\n\t\t}\n\t};\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being draggedOver.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdragged = true;\n\t\t} else {\n\t\t\tdragged = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdragged = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tdragged = false;\n\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tif (e.dataTransfer?.files) {\n\t\t\t\tconst inputFiles = e.dataTransfer?.files;\n\n\t\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\t\tfor (const file of inputFiles) {\n\t\t\t\t\t\tawait uploadFileHandler(file);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\t// listen to resize 1024px\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\n\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\n\t\thandleMediaQuery(mediaQuery);\n\n\t\t// Select the container element you want to observe\n\t\tconst container = document.getElementById('collection-container');\n\n\t\t// initialize the minSize based on the container width\n\t\tminSize = !largeScreen ? 100 : Math.floor((300 / container.clientWidth) * 100);\n\n\t\t// Create a new ResizeObserver instance\n\t\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\t\tfor (let entry of entries) {\n\t\t\t\tconst width = entry.contentRect.width;\n\t\t\t\t// calculate the percentage of 300\n\t\t\t\tconst percentage = (300 / width) * 100;\n\t\t\t\t// set the minSize to the percentage, must be an integer\n\t\t\t\tminSize = !largeScreen ? 100 : Math.floor(percentage);\n\n\t\t\t\tif (showSidepanel) {\n\t\t\t\t\tif (pane && pane.isExpanded() && pane.getSize() < minSize) {\n\t\t\t\t\t\tpane.resize(minSize);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Start observing the container's size changes\n\t\tresizeObserver.observe(container);\n\n\t\tif (pane) {\n\t\t\tpane.expand();\n\t\t}\n\n\t\tid = $page.params.id;\n\n\t\tconst res = await getKnowledgeById(localStorage.token, id).catch((e) => {\n\t\t\ttoast.error(`${e}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tknowledge = res;\n\t\t} else {\n\t\t\tgoto('/workspace/knowledge');\n\t\t}\n\n\t\tconst dropZone = document.querySelector('body');\n\t\tdropZone?.addEventListener('dragover', onDragOver);\n\t\tdropZone?.addEventListener('drop', onDrop);\n\t\tdropZone?.addEventListener('dragleave', onDragLeave);\n\t});\n\n\tonDestroy(() => {\n\t\tmediaQuery?.removeEventListener('change', handleMediaQuery);\n\t\tconst dropZone = document.querySelector('body');\n\t\tdropZone?.removeEventListener('dragover', onDragOver);\n\t\tdropZone?.removeEventListener('drop', onDrop);\n\t\tdropZone?.removeEventListener('dragleave', onDragLeave);\n\t});\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n<FilesOverlay show={dragged} />\n<SyncConfirmDialog\n\tbind:show={showSyncConfirmModal}\n\tmessage={$i18n.t(\n\t\t'This will reset the knowledge base and sync all files. Do you wish to continue?'\n\t)}\n\ton:confirm={() => {\n\t\tsyncDirectoryHandler();\n\t}}\n/>\n\n<AddTextContentModal\n\tbind:show={showAddTextContentModal}\n\ton:submit={(e) => {\n\t\tconst file = createFileFromText(e.detail.name, e.detail.content);\n\t\tuploadFileHandler(file);\n\t}}\n/>\n\n<input\n\tid=\"files-input\"\n\tbind:files={inputFiles}\n\ttype=\"file\"\n\tmultiple\n\thidden\n\ton:change={async () => {\n\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\tfor (const file of inputFiles) {\n\t\t\t\tawait uploadFileHandler(file);\n\t\t\t}\n\n\t\t\tinputFiles = null;\n\t\t\tconst fileInputElement = document.getElementById('files-input');\n\n\t\t\tif (fileInputElement) {\n\t\t\t\tfileInputElement.value = '';\n\t\t\t}\n\t\t} else {\n\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t}\n\t}}\n/>\n\n<div class=\"flex flex-col w-full h-full translate-y-1\" id=\"collection-container\">\n\t{#if id && knowledge}\n\t\t<AccessControlModal\n\t\t\tbind:show={showAccessControlModal}\n\t\t\tbind:accessControl={knowledge.access_control}\n\t\t\tallowPublic={$user?.permissions?.sharing?.public_knowledge || $user?.role === 'admin'}\n\t\t\tonChange={() => {\n\t\t\t\tchangeDebounceHandler();\n\t\t\t}}\n\t\t\taccessRoles={['read', 'write']}\n\t\t/>\n\t\t<div class=\"w-full mb-2.5\">\n\t\t\t<div class=\" flex w-full\">\n\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t<div class=\"flex items-center justify-between w-full px-0.5 mb-1\">\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden\"\n\t\t\t\t\t\t\t\tbind:value={knowledge.name}\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Knowledge Name')}\n\t\t\t\t\t\t\t\ton:input={() => {\n\t\t\t\t\t\t\t\t\tchangeDebounceHandler();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"self-center shrink-0\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tshowAccessControlModal = true;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<LockClosed strokeWidth=\"2.5\" className=\"size-3.5\" />\n\n\t\t\t\t\t\t\t\t<div class=\"text-sm font-medium shrink-0\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('Access')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex w-full px-1\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"text-left text-xs w-full text-gray-500 bg-transparent outline-hidden\"\n\t\t\t\t\t\t\tbind:value={knowledge.description}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Knowledge Description')}\n\t\t\t\t\t\t\ton:input={() => {\n\t\t\t\t\t\t\t\tchangeDebounceHandler();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3\">\n\t\t\t{#if largeScreen}\n\t\t\t\t<div class=\"flex-1 flex justify-start w-full h-full max-h-full\">\n\t\t\t\t\t{#if selectedFile}\n\t\t\t\t\t\t<div class=\" flex flex-col w-full\">\n\t\t\t\t\t\t\t<div class=\"shrink-0 mb-2 flex items-center\">\n\t\t\t\t\t\t\t\t{#if !showSidepanel}\n\t\t\t\t\t\t\t\t\t<div class=\"-translate-x-2\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tpane.expand();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ChevronLeft strokeWidth=\"2.5\" />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<div class=\" flex-1 text-xl font-medium\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1\"\n\t\t\t\t\t\t\t\t\t\thref={selectedFile.id ? `/api/v1/files/${selectedFile.id}/content` : '#'}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{decodeString(selectedFile?.meta?.name)}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tupdateFileContentHandler();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t\t\t{#if isSaving}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#key selectedFile.id}\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full h-full outline-none resize-none\"\n\t\t\t\t\t\t\t\t\t\tbind:value={selectedFileContent}\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Add content here')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"h-full flex w-full\">\n\t\t\t\t\t\t\t<div class=\"m-auto text-xs text-center text-gray-200 dark:text-gray-700\">\n\t\t\t\t\t\t\t\t{$i18n.t('Drag and drop a file to upload or select a file to view')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{:else if !largeScreen && selectedFileId !== null}\n\t\t\t\t<Drawer\n\t\t\t\t\tclassName=\"h-full\"\n\t\t\t\t\tshow={selectedFileId !== null}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex flex-col justify-start h-full max-h-full p-2\">\n\t\t\t\t\t\t<div class=\" flex flex-col w-full h-full max-h-full\">\n\t\t\t\t\t\t\t<div class=\"shrink-0 mt-1 mb-2 flex items-center\">\n\t\t\t\t\t\t\t\t<div class=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ChevronLeft strokeWidth=\"2.5\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" flex-1 text-xl line-clamp-1\">\n\t\t\t\t\t\t\t\t\t{selectedFile?.meta?.name}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tupdateFileContentHandler();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t\t\t{#if isSaving}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#key selectedFile.id}\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full h-full outline-none resize-none\"\n\t\t\t\t\t\t\t\t\t\tbind:value={selectedFileContent}\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Add content here')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Drawer>\n\t\t\t{/if}\n\n\t\t\t<div\n\t\t\t\tclass=\"{largeScreen ? 'shrink-0 w-72 max-w-72' : 'flex-1'}\n\t\t\tflex\n\t\t\tpy-2\n\t\t\trounded-2xl\n\t\t\tborder\n\t\t\tborder-gray-50\n\t\t\th-full\n\t\t\tdark:border-gray-850\"\n\t\t\t>\n\t\t\t\t<div class=\" flex flex-col w-full space-x-2 rounded-lg h-full\">\n\t\t\t\t\t<div class=\"w-full h-full flex flex-col\">\n\t\t\t\t\t\t<div class=\" px-3\">\n\t\t\t\t\t\t\t<div class=\"flex mb-0.5\">\n\t\t\t\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t\t\t\t\t\t<Search />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent\"\n\t\t\t\t\t\t\t\t\tbind:value={query}\n\t\t\t\t\t\t\t\t\tplaceholder={`${$i18n.t('Search Collection')}${(knowledge?.files ?? []).length ? ` (${(knowledge?.files ?? []).length})` : ''}`}\n\t\t\t\t\t\t\t\t\ton:focus={() => {\n\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<AddContentMenu\n\t\t\t\t\t\t\t\t\t\ton:upload={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tif (e.detail.type === 'directory') {\n\t\t\t\t\t\t\t\t\t\t\t\tuploadDirectoryHandler();\n\t\t\t\t\t\t\t\t\t\t\t} else if (e.detail.type === 'text') {\n\t\t\t\t\t\t\t\t\t\t\t\tshowAddTextContentModal = true;\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('files-input').click();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ton:sync={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tshowSyncConfirmModal = true;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if filteredItems.length > 0}\n\t\t\t\t\t\t\t<div class=\" flex overflow-y-auto h-full w-full scrollbar-hidden text-xs\">\n\t\t\t\t\t\t\t\t<Files\n\t\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\t\tfiles={filteredItems}\n\t\t\t\t\t\t\t\t\t{selectedFileId}\n\t\t\t\t\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\t\t\t\t\tselectedFileId = selectedFileId === e.detail ? null : e.detail;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ton:delete={(e) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(e.detail);\n\n\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t\t\t\t\tdeleteFileHandler(e.detail);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"my-3 flex flex-col justify-center text-center text-gray-500 text-xs\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{$i18n.t('No content found')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<Spinner className=\"size-5\" />\n\t{/if}\n</div>\n"],"names":["ctx","insert_hydration","target","svg","anchor","append_hydration","path","className","$$props","strokeWidth","_a","_c","_b","_d","_f","_e","div","dirty","fileitem_changes","i","each_blocks","dispatch","createEventDispatcher","selectedFileId","files","small","file","button","set_data","t1","t1_value","flyAndScale","i18n","getContext","onClose","show","e","$$invalidate","t","t_value","div0","div9","form","div5","div4","div2","div1","input","div3","div8","div6","div7","name","$i18n","content","voiceInput","value","data","text","filename","stream","err","toast","track","accesscontrolmodal_props","input0","set_input_value","input1","div15","div14","div13","div12","div11","div10","input2","accesscontrolmodal_changes","t3","t3_value","drawer_changes","textarea","previous_key","create_if_block_7","button0","button1","safe_not_equal","showSidepanel","create_if_block_4","attr","a","a_href_value","current","largeScreen","pane","id","knowledge","query","showAddTextContentModal","showSyncConfirmModal","showAccessControlModal","inputFiles","filteredItems","selectedFile","selectedFileContent","fileContentCache","fuse","debounceTimeout","mediaQuery","dragged","isSaving","createFileFromText","blob","blobToFile","uploadFileHandler","tempItemId","uuidv4","fileItem","$config","metadata","$settings","_h","_g","uploadedFile","uploadFile","item","addFileHandler","uploadDirectoryHandler","isFileSystemAccessSupported","handleModernBrowserUpload","handleFirefoxUpload","error","handleUploadError","hasHiddenFolder","part","dirHandle","totalFiles","uploadedFiles","updateProgress","percentage","countFiles","entry","processDirectory","entryPath","fileWithPath","resolve","reject","relativePath","syncDirectoryHandler","res","resetKnowledgeById","fileId","updatedKnowledge","addFileToKnowledgeById","deleteFileHandler","removeFileFromKnowledgeById","updateFileContentHandler","updateFileDataContentById","updateFileFromKnowledgeById","changeDebounceHandler","updateKnowledgeById","_knowledge","getKnowledgeBases","handleMediaQuery","fileSelectHandler","response","getFileById","onDragOver","onDragLeave","onDrop","onMount","container","entries","$page","getKnowledgeById","goto","dropZone","onDestroy","decodeString","str","fileInputElement","$$self","Fuse"],"mappings":"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"}